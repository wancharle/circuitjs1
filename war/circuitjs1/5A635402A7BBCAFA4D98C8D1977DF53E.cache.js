var $wnd = $wnd || window.parent;
var __gwtModuleFunction = $wnd.circuitjs1;
var $sendStats = __gwtModuleFunction.__sendStats;
$sendStats('moduleStartup', 'moduleEvalStart');
var $gwt_version = "2.8.2";
var $strongName = '5A635402A7BBCAFA4D98C8D1977DF53E';
var $gwt = {};
var $doc = $wnd.document;
var $moduleName, $moduleBase;
function __gwtStartLoadingFragment(frag) {
var fragFile = 'deferredjs/' + $strongName + '/' + frag + '.cache.js';
return __gwtModuleFunction.__startLoadingFragment(fragFile);
}
function __gwtInstallCode(code) {return __gwtModuleFunction.__installRunAsyncCode(code);}
function __gwt_isKnownPropertyValue(propName, propValue) {
return __gwtModuleFunction.__gwt_isKnownPropertyValue(propName, propValue);
}
function __gwt_getMetaProperty(name) {
return __gwtModuleFunction.__gwt_getMetaProperty(name);
}
var $stats = $wnd.__gwtStatsEvent ? function(a) {
return $wnd.__gwtStatsEvent && $wnd.__gwtStatsEvent(a);
} : null;
var $sessionId = $wnd.__gwtStatsSessionId ? $wnd.__gwtStatsSessionId : null;
var $intern_0 = 2147483647, $intern_1 = 3.141592653589793, $intern_2 = 6.283185307179586, $intern_3 = {3:1, 6:1}, $intern_4 = {21:1, 18:1}, $intern_5 = {27:1, 23:1, 25:1, 21:1, 28:1, 18:1, 19:1}, $intern_6 = {62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 25:1, 21:1, 28:1, 60:1, 61:1, 18:1, 19:1}, $intern_7 = {3:1, 22:1}, $intern_8 = {3:1, 14:1, 22:1}, $intern_9 = 65535, $intern_10 = {31:1, 30:1, 3:1, 11:1, 10:1}, $intern_11 = {30:1, 105:1, 3:1, 11:1, 10:1}, $intern_12 = {30:1, 106:1, 3:1, 11:1, 10:1}, $intern_13 = {30:1, 107:1, 3:1, 11:1, 10:1}, $intern_14 = {49:1, 3:1, 11:1, 10:1}, $intern_15 = {30:1, 143:1, 3:1, 11:1, 10:1}, $intern_16 = {30:1, 94:1, 3:1, 11:1, 10:1}, $intern_17 = {141:1, 3:1, 14:1, 22:1}, $intern_18 = {97:1, 3:1, 14:1, 22:1}, $intern_19 = {3:1}, $intern_20 = 1000, $intern_21 = 1024, $intern_22 = {46:1, 3:1}, $intern_23 = 4194303, $intern_24 = 1048575, $intern_25 = 524288, $intern_26 = 4194304, $intern_27 = 17592186044416, $intern_28 = -17592186044416, $intern_29 = 0.01, $intern_30 = {201:1, 3:1}, $intern_31 = 4096, $intern_32 = 2048, $intern_33 = 16384, $intern_34 = 65536, $intern_35 = 1048576, $intern_36 = 2097152, $intern_37 = 16777216, $intern_38 = 33554432, $intern_39 = 67108864, $intern_40 = {27:1, 23:1, 25:1, 21:1, 40:1, 28:1, 18:1, 19:1}, $intern_41 = {62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 25:1, 48:1, 21:1, 28:1, 60:1, 61:1, 18:1, 19:1}, $intern_42 = {137:1, 62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 96:1, 25:1, 200:1, 48:1, 21:1, 174:1, 28:1, 60:1, 61:1, 18:1, 19:1}, $intern_43 = {47:1, 32:1}, $intern_44 = {27:1, 95:1, 23:1, 25:1, 103:1, 21:1, 40:1, 28:1, 44:1, 18:1, 19:1}, $intern_45 = {27:1, 95:1, 23:1, 25:1, 103:1, 48:1, 21:1, 40:1, 28:1, 44:1, 18:1, 19:1, 153:1}, $intern_46 = {203:1, 32:1}, $intern_47 = {137:1, 62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 154:1, 96:1, 25:1, 323:1, 200:1, 175:1, 48:1, 21:1, 174:1, 28:1, 36:1, 125:1, 60:1, 61:1, 18:1, 19:1}, $intern_48 = {27:1, 23:1, 25:1, 21:1, 40:1, 28:1, 122:1, 18:1, 19:1}, $intern_49 = {27:1, 23:1, 25:1, 175:1, 21:1, 40:1, 28:1, 18:1, 19:1}, $intern_50 = {62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 96:1, 25:1, 21:1, 28:1, 60:1, 61:1, 18:1, 19:1}, $intern_51 = {629:1, 32:1}, $intern_52 = {48:1, 21:1, 15:1, 18:1}, $intern_53 = {626:1, 32:1}, $intern_54 = {27:1, 23:1, 25:1, 21:1, 40:1, 28:1, 185:1, 18:1, 19:1}, $intern_55 = {137:1, 62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 154:1, 96:1, 25:1, 48:1, 21:1, 28:1, 60:1, 61:1, 18:1, 19:1}, $intern_56 = {111:1, 3:1, 11:1, 10:1}, $intern_57 = {29:1, 3:1}, $intern_58 = 0.48, $intern_59 = {113:1, 3:1, 6:1}, $intern_60 = 1.0E-9, $intern_61 = 1000000000000, $intern_62 = 1.0E-6, $intern_63 = 1000000000, $intern_64 = 0.001, $intern_65 = 1000000, $intern_66 = {4:1, 8:1}, $intern_67 = 0.6366197723675814, $intern_68 = 0.15915494309189535, $intern_69 = {4:1, 8:1, 41:1}, $intern_70 = {4:1, 8:1, 38:1, 41:1}, $intern_71 = 10000000000, $intern_72 = {43:1, 3:1}, $intern_73 = 100000000, $intern_74 = 4294901760, $intern_75 = {4:1, 8:1, 110:1}, $intern_76 = {4:1, 8:1, 91:1}, $intern_77 = 2.0E-6, $intern_78 = -1.0E-6, $intern_79 = {53:1, 4:1, 8:1}, $intern_80 = 19.331142470520007, $intern_81 = 38.662284941040014, $intern_82 = 0.05173, $intern_83 = 0.025865, $intern_84 = 1.4142135623730951, $intern_85 = 1.0E-4, $intern_86 = 10000, $intern_87 = 100000, $intern_88 = 1.0E-8, $intern_89 = 0.16666666666666666, $intern_90 = {4:1, 8:1, 90:1}, $intern_91 = {4:1, 8:1, 127:1, 90:1}, $intern_92 = {4:1, 8:1, 135:1}, $intern_93 = {4:1, 8:1, 109:1}, $intern_94 = 0.8297872340425532, $intern_95 = 0.0625, $intern_96 = 3.7E-4, $intern_97 = 0.0047, $intern_98 = -20.192307692307693, $intern_99 = {11:1, 132:1}, $intern_100 = {112:1}, $intern_101 = {3:1, 121:1}, $intern_102 = 15525485, $intern_103 = 5.9604644775390625E-8;
var _, prototypesByTypeId_0, initFnList_0, permutationId = -1;
function setGwtProperty(propertyName, propertyValue){
  typeof window === 'object' && typeof window['$gwt'] === 'object' && (window['$gwt'][propertyName] = propertyValue);
}

function gwtOnLoad_0(errFn, modName, modBase, softPermutationId){
  ensureModuleInit();
  var initFnList = initFnList_0;
  $moduleName = modName;
  $moduleBase = modBase;
  permutationId = softPermutationId;
  function initializeModules(){
    for (var i = 0; i < initFnList.length; i++) {
      initFnList[i]();
    }
  }

  if (errFn) {
    try {
      $entry(initializeModules)();
    }
     catch (e) {
      errFn(modName, e);
    }
  }
   else {
    $entry(initializeModules)();
  }
}

function ensureModuleInit(){
  initFnList_0 == null && (initFnList_0 = []);
}

function addInitFunctions(){
  ensureModuleInit();
  var initFnList = initFnList_0;
  for (var i = 0; i < arguments.length; i++) {
    initFnList.push(arguments[i]);
  }
}

function typeMarkerFn(){
}

function toString_7(object){
  var number;
  if (Array.isArray(object) && object.typeMarker === typeMarkerFn) {
    return $getName(getClass__Ljava_lang_Class___devirtual$(object)) + '@' + (number = hashCode__I__devirtual$(object) >>> 0 , number.toString(16));
  }
  return object.toString();
}

function portableObjCreate(obj){
  function F(){
  }

  ;
  F.prototype = obj || {};
  return new F;
}

function emptyMethod(){
}

function defineClass(typeId, superTypeIdOrPrototype, castableTypeMap){
  var prototypesByTypeId = prototypesByTypeId_0, superPrototype;
  var prototype_0 = prototypesByTypeId[typeId];
  var clazz = prototype_0 instanceof Array?prototype_0[0]:null;
  if (prototype_0 && !clazz) {
    _ = prototype_0;
  }
   else {
    _ = (superPrototype = superTypeIdOrPrototype && superTypeIdOrPrototype.prototype , !superPrototype && (superPrototype = prototypesByTypeId_0[superTypeIdOrPrototype]) , portableObjCreate(superPrototype));
    _.castableTypeMap = castableTypeMap;
    !superTypeIdOrPrototype && (_.typeMarker = typeMarkerFn);
    prototypesByTypeId[typeId] = _;
  }
  for (var i = 3; i < arguments.length; ++i) {
    arguments[i].prototype = _;
  }
  clazz && (_.___clazz = clazz);
}

function bootstrap(){
  prototypesByTypeId_0 = {};
  !Array.isArray && (Array.isArray = function(vArg){
    return Object.prototype.toString.call(vArg) === '[object Array]';
  }
  );
  function now_0(){
    return (new Date).getTime();
  }

  !Date.now && (Date.now = now_0);
}

bootstrap();
function Object_0(){
}

function equals_Ljava_lang_Object__Z__devirtual$(this$static, other){
  return instanceOfString(this$static)?$equals_1(this$static, other):instanceOfDouble(this$static)?(checkCriticalNotNull(this$static) , this$static === other):instanceOfBoolean(this$static)?(checkCriticalNotNull(this$static) , this$static === other):hasJavaObjectVirtualDispatch(this$static)?this$static.equals_0(other):isJavaArray(this$static)?this$static === other:!!this$static && !!this$static.equals?this$static.equals(other):maskUndefined(this$static) === maskUndefined(other);
}

function getClass__Ljava_lang_Class___devirtual$(this$static){
  return instanceOfString(this$static)?Ljava_lang_String_2_classLit:instanceOfDouble(this$static)?Ljava_lang_Double_2_classLit:instanceOfBoolean(this$static)?Ljava_lang_Boolean_2_classLit:hasJavaObjectVirtualDispatch(this$static)?this$static.___clazz:isJavaArray(this$static)?this$static.___clazz:this$static.___clazz || Array.isArray(this$static) && getClassLiteralForArray(Lcom_google_gwt_core_client_JavaScriptObject_2_classLit, 1) || Lcom_google_gwt_core_client_JavaScriptObject_2_classLit;
}

function hashCode__I__devirtual$(this$static){
  return instanceOfString(this$static)?getHashCode_0(this$static):instanceOfDouble(this$static)?round_int((checkCriticalNotNull(this$static) , this$static)):instanceOfBoolean(this$static)?(checkCriticalNotNull(this$static) , this$static)?1231:1237:hasJavaObjectVirtualDispatch(this$static)?this$static.hashCode_0():isJavaArray(this$static)?getHashCode(this$static):!!this$static && !!this$static.hashCode?this$static.hashCode():getHashCode(this$static);
}

defineClass(1, null, {}, Object_0);
_.equals_0 = function equals(other){
  return this === other;
}
;
_.getClass_0 = function getClass_0(){
  return this.___clazz;
}
;
_.hashCode_0 = function hashCode_0(){
  return getHashCode(this);
}
;
_.toString_0 = function toString_0(){
  var number;
  return $getName(getClass__Ljava_lang_Class___devirtual$(this)) + '@' + (number = hashCode__I__devirtual$(this) >>> 0 , number.toString(16));
}
;
_.equals = function(other){
  return this.equals_0(other);
}
;
_.hashCode = function(){
  return this.hashCode_0();
}
;
_.toString = function(){
  return this.toString_0();
}
;
function canCast(src_0, dstId){
  if (instanceOfString(src_0)) {
    return !!stringCastMap[dstId];
  }
   else if (src_0.castableTypeMap) {
    return !!src_0.castableTypeMap[dstId];
  }
   else if (instanceOfDouble(src_0)) {
    return !!doubleCastMap[dstId];
  }
   else if (instanceOfBoolean(src_0)) {
    return !!booleanCastMap[dstId];
  }
  return false;
}

function castTo(src_0, dstId){
  checkCriticalType(src_0 == null || canCast(src_0, dstId));
  return src_0;
}

function castToJso(src_0){
  checkCriticalType(src_0 == null || isJsObjectOrFunction(src_0) && !(src_0.typeMarker === typeMarkerFn));
  return src_0;
}

function castToString(src_0){
  checkCriticalType(src_0 == null || instanceOfString(src_0));
  return src_0;
}

function charToString(x_0){
  return String.fromCharCode(x_0);
}

function hasJavaObjectVirtualDispatch(src_0){
  return !Array.isArray(src_0) && src_0.typeMarker === typeMarkerFn;
}

function instanceOf(src_0, dstId){
  return src_0 != null && canCast(src_0, dstId);
}

function instanceOfBoolean(src_0){
  return typeof src_0 === 'boolean';
}

function instanceOfDouble(src_0){
  return typeof src_0 === 'number';
}

function instanceOfJso(src_0){
  return src_0 != null && isJsObjectOrFunction(src_0) && !(src_0.typeMarker === typeMarkerFn);
}

function instanceOfString(src_0){
  return typeof src_0 === 'string';
}

function isJsObjectOrFunction(src_0){
  return typeof src_0 === 'object' || typeof src_0 === 'function';
}

function maskUndefined(src_0){
  return src_0 == null?null:src_0;
}

function round_byte(x_0){
  return round_int(x_0) << 24 >> 24;
}

function round_int(x_0){
  return Math.max(Math.min(x_0, $intern_0), -2147483648) | 0;
}

var booleanCastMap, doubleCastMap, stringCastMap;
function $ensureNamesAreInitialized(this$static){
  if (this$static.typeName != null) {
    return;
  }
  initializeNames(this$static);
}

function $getName(this$static){
  $ensureNamesAreInitialized(this$static);
  return this$static.typeName;
}

function Class(){
  ++nextSequentialId;
  this.typeName = null;
  this.simpleName = null;
  this.packageName = null;
  this.compoundName = null;
  this.canonicalName = null;
  this.typeId = null;
  this.arrayLiterals = null;
}

function createClassObject(packageName, compoundClassName){
  var clazz;
  clazz = new Class;
  clazz.packageName = packageName;
  clazz.compoundName = compoundClassName;
  return clazz;
}

function createForClass(packageName, compoundClassName, typeId){
  var clazz;
  clazz = createClassObject(packageName, compoundClassName);
  maybeSetClassLiteral(typeId, clazz);
  return clazz;
}

function createForEnum(packageName, compoundClassName, typeId, enumConstantsFunc){
  var clazz;
  clazz = createClassObject(packageName, compoundClassName);
  maybeSetClassLiteral(typeId, clazz);
  clazz.modifiers = enumConstantsFunc?8:0;
  return clazz;
}

function createForPrimitive(className, primitiveTypeId){
  var clazz;
  clazz = createClassObject('', className);
  clazz.typeId = primitiveTypeId;
  clazz.modifiers = 1;
  return clazz;
}

function getClassLiteralForArray_0(leafClass, dimensions){
  var arrayLiterals = leafClass.arrayLiterals = leafClass.arrayLiterals || [];
  return arrayLiterals[dimensions] || (arrayLiterals[dimensions] = leafClass.createClassLiteralForArray(dimensions));
}

function getPrototypeForClass(clazz){
  if (clazz.isPrimitive()) {
    return null;
  }
  var typeId = clazz.typeId;
  return prototypesByTypeId_0[typeId];
}

function initializeNames(clazz){
  if (clazz.isArray_0()) {
    var componentType = clazz.componentType;
    componentType.isPrimitive()?(clazz.typeName = '[' + componentType.typeId):!componentType.isArray_0()?(clazz.typeName = '[L' + componentType.getName() + ';'):(clazz.typeName = '[' + componentType.getName());
    clazz.canonicalName = componentType.getCanonicalName() + '[]';
    clazz.simpleName = componentType.getSimpleName() + '[]';
    return;
  }
  var packageName = clazz.packageName;
  var compoundName = clazz.compoundName;
  compoundName = compoundName.split('/');
  clazz.typeName = join_0('.', [packageName, join_0('$', compoundName)]);
  clazz.canonicalName = join_0('.', [packageName, join_0('.', compoundName)]);
  clazz.simpleName = compoundName[compoundName.length - 1];
}

function join_0(separator, strings){
  var i = 0;
  while (!strings[i] || strings[i] == '') {
    i++;
  }
  var result = strings[i++];
  for (; i < strings.length; i++) {
    if (!strings[i] || strings[i] == '') {
      continue;
    }
    result += separator + strings[i];
  }
  return result;
}

function maybeSetClassLiteral(typeId, clazz){
  var proto;
  if (!typeId) {
    return;
  }
  clazz.typeId = typeId;
  var prototype_0 = getPrototypeForClass(clazz);
  if (!prototype_0) {
    prototypesByTypeId_0[typeId] = [clazz];
    return;
  }
  prototype_0.___clazz = clazz;
}

defineClass(229, 1, {}, Class);
_.createClassLiteralForArray = function createClassLiteralForArray(dimensions){
  var clazz;
  clazz = new Class;
  clazz.modifiers = 4;
  dimensions > 1?(clazz.componentType = getClassLiteralForArray_0(this, dimensions - 1)):(clazz.componentType = this);
  return clazz;
}
;
_.getCanonicalName = function getCanonicalName(){
  $ensureNamesAreInitialized(this);
  return this.canonicalName;
}
;
_.getName = function getName(){
  return $getName(this);
}
;
_.getSimpleName = function getSimpleName(){
  $ensureNamesAreInitialized(this);
  return this.simpleName;
}
;
_.isArray_0 = function isArray(){
  return (this.modifiers & 4) != 0;
}
;
_.isPrimitive = function isPrimitive(){
  return (this.modifiers & 1) != 0;
}
;
_.toString_0 = function toString_14(){
  return ((this.modifiers & 2) != 0?'interface ':(this.modifiers & 1) != 0?'':'class ') + ($ensureNamesAreInitialized(this) , this.typeName);
}
;
_.modifiers = 0;
var nextSequentialId = 1;
var Ljava_lang_Object_2_classLit = createForClass('java.lang', 'Object', 1);
var Ljava_lang_Class_2_classLit = createForClass('java.lang', 'Class', 229);
function $cancel(this$static){
  if (!this$static.isRunning) {
    return;
  }
  this$static.wasStarted = this$static.isStarted;
  this$static.element = null;
  this$static.isRunning = false;
  this$static.isStarted = false;
  if (this$static.requestHandle) {
    this$static.requestHandle.cancel_0();
    this$static.requestHandle = null;
  }
  this$static.onCancel();
}

function $run(this$static, duration, startTime, element){
  $cancel(this$static);
  this$static.isRunning = true;
  this$static.isStarted = false;
  this$static.duration = duration;
  this$static.startTime = startTime;
  this$static.element = element;
  ++this$static.runId;
  $execute(this$static.callback, now_1());
}

function $run_0(this$static, duration, element){
  $run(this$static, duration, now_1(), element);
}

function $update(this$static, curTime){
  var curRunId, finished, progress;
  curRunId = this$static.runId;
  finished = curTime >= this$static.startTime + this$static.duration;
  if (this$static.isStarted && !finished) {
    progress = (curTime - this$static.startTime) / this$static.duration;
    this$static.onUpdate((1 + $wnd.Math.cos($intern_1 + progress * $intern_1)) / 2);
    return this$static.isRunning && this$static.runId == curRunId;
  }
  if (!this$static.isStarted && curTime >= this$static.startTime) {
    this$static.isStarted = true;
    this$static.onStart();
    if (!(this$static.isRunning && this$static.runId == curRunId)) {
      return false;
    }
  }
  if (finished) {
    this$static.isRunning = false;
    this$static.isStarted = false;
    this$static.onComplete();
    return false;
  }
  return true;
}

function Animation(){
  Animation_0.call(this, (!instance && (instance = !!$wnd.requestAnimationFrame && !!$wnd.cancelAnimationFrame?new AnimationSchedulerImplStandard:new AnimationSchedulerImplTimer) , instance));
}

function Animation_0(scheduler){
  this.callback = new Animation$1(this);
  this.scheduler = scheduler;
}

defineClass(210, 1, {});
_.onCancel = function onCancel(){
  this.wasStarted && this.onComplete();
}
;
_.onComplete = function onComplete(){
  this.onUpdate((1 + $wnd.Math.cos($intern_2)) / 2);
}
;
_.onStart = function onStart(){
  this.onUpdate((1 + $wnd.Math.cos($intern_1)) / 2);
}
;
_.duration = -1;
_.isRunning = false;
_.isStarted = false;
_.runId = -1;
_.startTime = -1;
_.wasStarted = false;
var Lcom_google_gwt_animation_client_Animation_2_classLit = createForClass('com.google.gwt.animation.client', 'Animation', 210);
function $execute(this$static, timestamp){
  $update(this$static.this$01, timestamp)?(this$static.this$01.requestHandle = this$static.this$01.scheduler.requestAnimationFrame_0(this$static.this$01.callback, this$static.this$01.element)):(this$static.this$01.requestHandle = null);
}

function Animation$1(this$0){
  this.this$01 = this$0;
}

defineClass(386, 1, {}, Animation$1);
_.execute = function execute(timestamp){
  $execute(this, timestamp);
}
;
var Lcom_google_gwt_animation_client_Animation$1_2_classLit = createForClass('com.google.gwt.animation.client', 'Animation/1', 386);
defineClass(664, 1, {});
var instance;
var Lcom_google_gwt_animation_client_AnimationScheduler_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationScheduler', 664);
defineClass(223, 1, {223:1});
var Lcom_google_gwt_animation_client_AnimationScheduler$AnimationHandle_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationScheduler/AnimationHandle', 223);
function AnimationSchedulerImplStandard(){
}

function cancelImpl(holder){
  $wnd.cancelAnimationFrame(holder.id);
}

function requestImpl(cb, element){
  var callback = $entry(function(){
    var time = now_1();
    cb.execute(time);
  }
  );
  var handle = $wnd.requestAnimationFrame(callback, element);
  return {id:handle};
}

defineClass(611, 664, {}, AnimationSchedulerImplStandard);
_.requestAnimationFrame_0 = function requestAnimationFrame_0(callback, element){
  var handle;
  handle = requestImpl(callback, element);
  return new AnimationSchedulerImplStandard$1(handle);
}
;
var Lcom_google_gwt_animation_client_AnimationSchedulerImplStandard_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationSchedulerImplStandard', 611);
function AnimationSchedulerImplStandard$1(val$handle){
  this.val$handle2 = val$handle;
}

defineClass(612, 223, {223:1}, AnimationSchedulerImplStandard$1);
_.cancel_0 = function cancel(){
  cancelImpl(this.val$handle2);
}
;
var Lcom_google_gwt_animation_client_AnimationSchedulerImplStandard$1_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationSchedulerImplStandard/1', 612);
function $cancelAnimationFrame(this$static, requestId){
  $remove_10(this$static.animationRequests, requestId);
  this$static.animationRequests.array.length == 0 && $cancel_0(this$static.timer);
}

function $updateAnimations(this$static){
  var curAnimations, duration, requestId, requestId$index, requestId$max;
  curAnimations = initUnidimensionalArray(Lcom_google_gwt_animation_client_AnimationSchedulerImplTimer$AnimationHandleImpl_2_classLit, {678:1, 3:1, 6:1}, 224, this$static.animationRequests.array.length, 0, 1);
  curAnimations = castTo($toArray_0(this$static.animationRequests, curAnimations), 678);
  duration = new Duration;
  for (requestId$index = 0 , requestId$max = curAnimations.length; requestId$index < requestId$max; ++requestId$index) {
    requestId = curAnimations[requestId$index];
    $remove_10(this$static.animationRequests, requestId);
    $execute(requestId.callback, duration.start_0);
  }
  this$static.animationRequests.array.length > 0 && $schedule(this$static.timer, $wnd.Math.max(5, 16 - (now_1() - duration.start_0)));
}

function AnimationSchedulerImplTimer(){
  this.animationRequests = new ArrayList;
  this.timer = new AnimationSchedulerImplTimer$1(this);
}

defineClass(613, 664, {}, AnimationSchedulerImplTimer);
_.requestAnimationFrame_0 = function requestAnimationFrame_1(callback, element){
  var requestId;
  requestId = new AnimationSchedulerImplTimer$AnimationHandleImpl(this, callback);
  $add_8(this.animationRequests, requestId);
  this.animationRequests.array.length == 1 && $schedule(this.timer, 16);
  return requestId;
}
;
var Lcom_google_gwt_animation_client_AnimationSchedulerImplTimer_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationSchedulerImplTimer', 613);
function $cancel_0(this$static){
  if (!this$static.timerId) {
    return;
  }
  ++this$static.cancelCounter;
  this$static.isRepeating?clearInterval_0(this$static.timerId.value_0):clearTimeout_0(this$static.timerId.value_0);
  this$static.timerId = null;
}

function $schedule(this$static, delayMillis){
  if (delayMillis < 0) {
    throw toJs(new IllegalArgumentException_0('must be non-negative'));
  }
  !!this$static.timerId && $cancel_0(this$static);
  this$static.isRepeating = false;
  this$static.timerId = valueOf(setTimeout_0(createCallback(this$static, this$static.cancelCounter), delayMillis));
}

function $scheduleRepeating(this$static){
  !!this$static.timerId && $cancel_0(this$static);
  this$static.isRepeating = true;
  this$static.timerId = valueOf(setInterval_0(createCallback(this$static, this$static.cancelCounter), 16));
}

function Timer(){
}

function clearInterval_0(timerId){
  $wnd.clearInterval(timerId);
}

function clearTimeout_0(timerId){
  $wnd.clearTimeout(timerId);
}

function createCallback(timer, cancelCounter){
  return $entry(function(){
    timer.fire(cancelCounter);
  }
  );
}

function setInterval_0(func, time){
  return $wnd.setInterval(func, time);
}

function setTimeout_0(func, time){
  return $wnd.setTimeout(func, time);
}

defineClass(178, 1, {});
_.fire = function fire(scheduleCancelCounter){
  if (scheduleCancelCounter != this.cancelCounter) {
    return;
  }
  this.isRepeating || (this.timerId = null);
  this.run();
}
;
_.cancelCounter = 0;
_.isRepeating = false;
_.timerId = null;
var Lcom_google_gwt_user_client_Timer_2_classLit = createForClass('com.google.gwt.user.client', 'Timer', 178);
function AnimationSchedulerImplTimer$1(this$0){
  this.this$01 = this$0;
  Timer.call(this);
}

defineClass(614, 178, {}, AnimationSchedulerImplTimer$1);
_.run = function run(){
  $updateAnimations(this.this$01);
}
;
var Lcom_google_gwt_animation_client_AnimationSchedulerImplTimer$1_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationSchedulerImplTimer/1', 614);
function AnimationSchedulerImplTimer$AnimationHandleImpl(this$0, callback){
  this.this$01 = this$0;
  this.callback = callback;
}

defineClass(224, 223, {223:1, 224:1}, AnimationSchedulerImplTimer$AnimationHandleImpl);
_.cancel_0 = function cancel_0(){
  $cancelAnimationFrame(this.this$01, this);
}
;
var Lcom_google_gwt_animation_client_AnimationSchedulerImplTimer$AnimationHandleImpl_2_classLit = createForClass('com.google.gwt.animation.client', 'AnimationSchedulerImplTimer/AnimationHandleImpl', 224);
function $set(this$static, element){
  $setAttribute(element, 'role', this$static.roleName);
}

function $setAriaHaspopupProperty(element, value_0){
  $set_0(($clinit_Property() , HASPOPUP), element, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_Boolean_2_classLit, 1), $intern_3, 204, 8, [($clinit_Boolean() , value_0?true:false)]));
}

function RoleImpl(roleName){
  this.roleName = roleName;
}

defineClass(17, 1, {});
var Lcom_google_gwt_aria_client_RoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RoleImpl', 17);
function AlertRoleImpl(){
  RoleImpl.call(this, 'alert');
}

defineClass(513, 17, {}, AlertRoleImpl);
var Lcom_google_gwt_aria_client_AlertRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'AlertRoleImpl', 513);
function AlertdialogRoleImpl(){
  RoleImpl.call(this, 'alertdialog');
}

defineClass(512, 17, {}, AlertdialogRoleImpl);
var Lcom_google_gwt_aria_client_AlertdialogRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'AlertdialogRoleImpl', 512);
function ApplicationRoleImpl(){
  RoleImpl.call(this, 'application');
}

defineClass(514, 17, {}, ApplicationRoleImpl);
var Lcom_google_gwt_aria_client_ApplicationRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ApplicationRoleImpl', 514);
function $getAriaValue(this$static, value_0){
  var buf, item_0, item$index, item$max;
  buf = new StringBuilder;
  for (item$index = 0 , item$max = value_0.length; item$index < item$max; ++item$index) {
    item_0 = value_0[item$index];
    $append_2($append_2(buf, this$static.getSingleValue(item_0)), ' ');
  }
  return $trim(buf.string);
}

function $set_0(this$static, element, values){
  $setAttribute(element, this$static.name_0, $getAriaValue(this$static, values));
}

function Attribute(name_0){
  this.name_0 = name_0;
}

defineClass(319, 1, {});
var Lcom_google_gwt_aria_client_Attribute_2_classLit = createForClass('com.google.gwt.aria.client', 'Attribute', 319);
function AriaValueAttribute(name_0){
  Attribute.call(this, name_0);
}

defineClass(55, 319, {}, AriaValueAttribute);
_.getSingleValue = function getSingleValue(value_0){
  return castTo(value_0, 676).id_0;
}
;
var Lcom_google_gwt_aria_client_AriaValueAttribute_2_classLit = createForClass('com.google.gwt.aria.client', 'AriaValueAttribute', 55);
function ArticleRoleImpl(){
  RoleImpl.call(this, 'article');
}

defineClass(515, 17, {}, ArticleRoleImpl);
var Lcom_google_gwt_aria_client_ArticleRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ArticleRoleImpl', 515);
function BannerRoleImpl(){
  RoleImpl.call(this, 'banner');
}

defineClass(516, 17, {}, BannerRoleImpl);
var Lcom_google_gwt_aria_client_BannerRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'BannerRoleImpl', 516);
function ButtonRoleImpl(){
  RoleImpl.call(this, 'button');
}

defineClass(517, 17, {}, ButtonRoleImpl);
var Lcom_google_gwt_aria_client_ButtonRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ButtonRoleImpl', 517);
function CheckboxRoleImpl(){
  RoleImpl.call(this, 'checkbox');
}

defineClass(518, 17, {}, CheckboxRoleImpl);
var Lcom_google_gwt_aria_client_CheckboxRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'CheckboxRoleImpl', 518);
function ColumnheaderRoleImpl(){
  RoleImpl.call(this, 'columnheader');
}

defineClass(519, 17, {}, ColumnheaderRoleImpl);
var Lcom_google_gwt_aria_client_ColumnheaderRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ColumnheaderRoleImpl', 519);
function ComboboxRoleImpl(){
  RoleImpl.call(this, 'combobox');
}

defineClass(520, 17, {}, ComboboxRoleImpl);
var Lcom_google_gwt_aria_client_ComboboxRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ComboboxRoleImpl', 520);
function ComplementaryRoleImpl(){
  RoleImpl.call(this, 'complementary');
}

defineClass(521, 17, {}, ComplementaryRoleImpl);
var Lcom_google_gwt_aria_client_ComplementaryRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ComplementaryRoleImpl', 521);
function ContentinfoRoleImpl(){
  RoleImpl.call(this, 'contentinfo');
}

defineClass(522, 17, {}, ContentinfoRoleImpl);
var Lcom_google_gwt_aria_client_ContentinfoRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ContentinfoRoleImpl', 522);
function DefinitionRoleImpl(){
  RoleImpl.call(this, 'definition');
}

defineClass(523, 17, {}, DefinitionRoleImpl);
var Lcom_google_gwt_aria_client_DefinitionRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'DefinitionRoleImpl', 523);
function DialogRoleImpl(){
  RoleImpl.call(this, 'dialog');
}

defineClass(524, 17, {}, DialogRoleImpl);
var Lcom_google_gwt_aria_client_DialogRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'DialogRoleImpl', 524);
function DirectoryRoleImpl(){
  RoleImpl.call(this, 'directory');
}

defineClass(525, 17, {}, DirectoryRoleImpl);
var Lcom_google_gwt_aria_client_DirectoryRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'DirectoryRoleImpl', 525);
function DocumentRoleImpl(){
  RoleImpl.call(this, 'document');
}

defineClass(526, 17, {}, DocumentRoleImpl);
var Lcom_google_gwt_aria_client_DocumentRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'DocumentRoleImpl', 526);
function FormRoleImpl(){
  RoleImpl.call(this, 'form');
}

defineClass(527, 17, {}, FormRoleImpl);
var Lcom_google_gwt_aria_client_FormRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'FormRoleImpl', 527);
function GridRoleImpl(){
  RoleImpl.call(this, 'grid');
}

defineClass(529, 17, {}, GridRoleImpl);
var Lcom_google_gwt_aria_client_GridRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'GridRoleImpl', 529);
function GridcellRoleImpl(){
  RoleImpl.call(this, 'gridcell');
}

defineClass(528, 17, {}, GridcellRoleImpl);
var Lcom_google_gwt_aria_client_GridcellRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'GridcellRoleImpl', 528);
function GroupRoleImpl(){
  RoleImpl.call(this, 'group');
}

defineClass(530, 17, {}, GroupRoleImpl);
var Lcom_google_gwt_aria_client_GroupRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'GroupRoleImpl', 530);
function HeadingRoleImpl(){
  RoleImpl.call(this, 'heading');
}

defineClass(531, 17, {}, HeadingRoleImpl);
var Lcom_google_gwt_aria_client_HeadingRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'HeadingRoleImpl', 531);
function $init(this$static, elementId){
  this$static.id_0 = elementId;
}

function Id(element){
  $init(this, element.id);
}

defineClass(220, 1, {676:1, 220:1}, Id);
var Lcom_google_gwt_aria_client_Id_2_classLit = createForClass('com.google.gwt.aria.client', 'Id', 220);
function ImgRoleImpl(){
  RoleImpl.call(this, 'img');
}

defineClass(532, 17, {}, ImgRoleImpl);
var Lcom_google_gwt_aria_client_ImgRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ImgRoleImpl', 532);
function LinkRoleImpl(){
  RoleImpl.call(this, 'link');
}

defineClass(533, 17, {}, LinkRoleImpl);
var Lcom_google_gwt_aria_client_LinkRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'LinkRoleImpl', 533);
function ListRoleImpl(){
  RoleImpl.call(this, 'list');
}

defineClass(536, 17, {}, ListRoleImpl);
var Lcom_google_gwt_aria_client_ListRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ListRoleImpl', 536);
function ListboxRoleImpl(){
  RoleImpl.call(this, 'listbox');
}

defineClass(534, 17, {}, ListboxRoleImpl);
var Lcom_google_gwt_aria_client_ListboxRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ListboxRoleImpl', 534);
function ListitemRoleImpl(){
  RoleImpl.call(this, 'listitem');
}

defineClass(535, 17, {}, ListitemRoleImpl);
var Lcom_google_gwt_aria_client_ListitemRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ListitemRoleImpl', 535);
function LogRoleImpl(){
  RoleImpl.call(this, 'log');
}

defineClass(537, 17, {}, LogRoleImpl);
var Lcom_google_gwt_aria_client_LogRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'LogRoleImpl', 537);
function MainRoleImpl(){
  RoleImpl.call(this, 'main');
}

defineClass(538, 17, {}, MainRoleImpl);
var Lcom_google_gwt_aria_client_MainRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MainRoleImpl', 538);
function MarqueeRoleImpl(){
  RoleImpl.call(this, 'marquee');
}

defineClass(539, 17, {}, MarqueeRoleImpl);
var Lcom_google_gwt_aria_client_MarqueeRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MarqueeRoleImpl', 539);
function MathRoleImpl(){
  RoleImpl.call(this, 'math');
}

defineClass(540, 17, {}, MathRoleImpl);
var Lcom_google_gwt_aria_client_MathRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MathRoleImpl', 540);
function MenuRoleImpl(){
  RoleImpl.call(this, 'menu');
}

defineClass(545, 17, {}, MenuRoleImpl);
var Lcom_google_gwt_aria_client_MenuRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MenuRoleImpl', 545);
function $setAriaActivedescendantProperty(element, value_0){
  $set_0(($clinit_Property() , ACTIVEDESCENDANT), element, stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_aria_client_Id_2_classLit, 1), $intern_3, 220, 0, [value_0]));
}

function MenubarRoleImpl(){
  RoleImpl.call(this, 'menubar');
}

defineClass(541, 17, {}, MenubarRoleImpl);
var Lcom_google_gwt_aria_client_MenubarRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MenubarRoleImpl', 541);
function MenuitemRoleImpl(){
  RoleImpl.call(this, 'menuitem');
}

defineClass(544, 17, {}, MenuitemRoleImpl);
var Lcom_google_gwt_aria_client_MenuitemRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MenuitemRoleImpl', 544);
function MenuitemcheckboxRoleImpl(){
  RoleImpl.call(this, 'menuitemcheckbox');
}

defineClass(542, 17, {}, MenuitemcheckboxRoleImpl);
var Lcom_google_gwt_aria_client_MenuitemcheckboxRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MenuitemcheckboxRoleImpl', 542);
function MenuitemradioRoleImpl(){
  RoleImpl.call(this, 'menuitemradio');
}

defineClass(543, 17, {}, MenuitemradioRoleImpl);
var Lcom_google_gwt_aria_client_MenuitemradioRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'MenuitemradioRoleImpl', 543);
function NavigationRoleImpl(){
  RoleImpl.call(this, 'navigation');
}

defineClass(546, 17, {}, NavigationRoleImpl);
var Lcom_google_gwt_aria_client_NavigationRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'NavigationRoleImpl', 546);
function NoteRoleImpl(){
  RoleImpl.call(this, 'note');
}

defineClass(547, 17, {}, NoteRoleImpl);
var Lcom_google_gwt_aria_client_NoteRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'NoteRoleImpl', 547);
function OptionRoleImpl(){
  RoleImpl.call(this, 'option');
}

defineClass(548, 17, {}, OptionRoleImpl);
var Lcom_google_gwt_aria_client_OptionRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'OptionRoleImpl', 548);
function PresentationRoleImpl(){
  RoleImpl.call(this, 'presentation');
}

defineClass(549, 17, {}, PresentationRoleImpl);
var Lcom_google_gwt_aria_client_PresentationRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'PresentationRoleImpl', 549);
function PrimitiveValueAttribute(name_0){
  Attribute.call(this, name_0);
}

defineClass(57, 319, {}, PrimitiveValueAttribute);
_.getSingleValue = function getSingleValue_0(value_0){
  return value_0 == null?'null':toString_7(value_0);
}
;
var Lcom_google_gwt_aria_client_PrimitiveValueAttribute_2_classLit = createForClass('com.google.gwt.aria.client', 'PrimitiveValueAttribute', 57);
function ProgressbarRoleImpl(){
  RoleImpl.call(this, 'progressbar');
}

defineClass(550, 17, {}, ProgressbarRoleImpl);
var Lcom_google_gwt_aria_client_ProgressbarRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ProgressbarRoleImpl', 550);
function $clinit_Property(){
  $clinit_Property = emptyMethod;
  ACTIVEDESCENDANT = new AriaValueAttribute('aria-activedescendant');
  new PrimitiveValueAttribute('aria-atomic');
  new AriaValueAttribute('aria-autocomplete');
  new AriaValueAttribute('aria-controls');
  new AriaValueAttribute('aria-describedby');
  new AriaValueAttribute('aria-dropeffect');
  new AriaValueAttribute('aria-flowto');
  HASPOPUP = new PrimitiveValueAttribute('aria-haspopup');
  new PrimitiveValueAttribute('aria-label');
  new AriaValueAttribute('aria-labelledby');
  new PrimitiveValueAttribute('aria-level');
  new AriaValueAttribute('aria-live');
  new PrimitiveValueAttribute('aria-multiline');
  new PrimitiveValueAttribute('aria-multiselectable');
  new AriaValueAttribute('aria-orientation');
  new AriaValueAttribute('aria-owns');
  new PrimitiveValueAttribute('aria-posinset');
  new PrimitiveValueAttribute('aria-readonly');
  new AriaValueAttribute('aria-relevant');
  new PrimitiveValueAttribute('aria-required');
  new PrimitiveValueAttribute('aria-setsize');
  new AriaValueAttribute('aria-sort');
  new PrimitiveValueAttribute('aria-valuemax');
  new PrimitiveValueAttribute('aria-valuemin');
  new PrimitiveValueAttribute('aria-valuenow');
  new PrimitiveValueAttribute('aria-valuetext');
}

var ACTIVEDESCENDANT, HASPOPUP;
function RadioRoleImpl(){
  RoleImpl.call(this, 'radio');
}

defineClass(552, 17, {}, RadioRoleImpl);
var Lcom_google_gwt_aria_client_RadioRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RadioRoleImpl', 552);
function RadiogroupRoleImpl(){
  RoleImpl.call(this, 'radiogroup');
}

defineClass(551, 17, {}, RadiogroupRoleImpl);
var Lcom_google_gwt_aria_client_RadiogroupRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RadiogroupRoleImpl', 551);
function RegionRoleImpl(){
  RoleImpl.call(this, 'region');
}

defineClass(553, 17, {}, RegionRoleImpl);
var Lcom_google_gwt_aria_client_RegionRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RegionRoleImpl', 553);
function $clinit_Roles(){
  $clinit_Roles = emptyMethod;
  ALERTDIALOG = new AlertdialogRoleImpl;
  ALERT = new AlertRoleImpl;
  APPLICATION = new ApplicationRoleImpl;
  ARTICLE = new ArticleRoleImpl;
  BANNER = new BannerRoleImpl;
  BUTTON = new ButtonRoleImpl;
  CHECKBOX = new CheckboxRoleImpl;
  COLUMNHEADER = new ColumnheaderRoleImpl;
  COMBOBOX = new ComboboxRoleImpl;
  COMPLEMENTARY = new ComplementaryRoleImpl;
  CONTENTINFO = new ContentinfoRoleImpl;
  DEFINITION = new DefinitionRoleImpl;
  DIALOG = new DialogRoleImpl;
  DIRECTORY = new DirectoryRoleImpl;
  DOCUMENT = new DocumentRoleImpl;
  FORM = new FormRoleImpl;
  GRIDCELL = new GridcellRoleImpl;
  GRID = new GridRoleImpl;
  GROUP = new GroupRoleImpl;
  HEADING = new HeadingRoleImpl;
  IMG = new ImgRoleImpl;
  LINK = new LinkRoleImpl;
  LISTBOX = new ListboxRoleImpl;
  LISTITEM = new ListitemRoleImpl;
  LIST = new ListRoleImpl;
  LOG = new LogRoleImpl;
  MAIN = new MainRoleImpl;
  MARQUEE = new MarqueeRoleImpl;
  MATH = new MathRoleImpl;
  MENUBAR = new MenubarRoleImpl;
  MENUITEMCHECKBOX = new MenuitemcheckboxRoleImpl;
  MENUITEMRADIO = new MenuitemradioRoleImpl;
  MENUITEM = new MenuitemRoleImpl;
  MENU = new MenuRoleImpl;
  NAVIGATION = new NavigationRoleImpl;
  NOTE = new NoteRoleImpl;
  OPTION = new OptionRoleImpl;
  PRESENTATION = new PresentationRoleImpl;
  PROGRESSBAR = new ProgressbarRoleImpl;
  RADIOGROUP = new RadiogroupRoleImpl;
  RADIO = new RadioRoleImpl;
  REGION = new RegionRoleImpl;
  ROWGROUP = new RowgroupRoleImpl;
  ROWHEADER = new RowheaderRoleImpl;
  ROW = new RowRoleImpl;
  SCROLLBAR = new ScrollbarRoleImpl;
  SEARCH = new SearchRoleImpl;
  SEPARATOR = new SeparatorRoleImpl;
  SLIDER = new SliderRoleImpl;
  SPINBUTTON = new SpinbuttonRoleImpl;
  STATUS = new StatusRoleImpl;
  TABLIST = new TablistRoleImpl;
  TABPANEL = new TabpanelRoleImpl;
  TAB = new TabRoleImpl;
  TEXTBOX = new TextboxRoleImpl;
  TIMER = new TimerRoleImpl;
  TOOLBAR = new ToolbarRoleImpl;
  TOOLTIP = new TooltipRoleImpl;
  TREEGRID = new TreegridRoleImpl;
  TREEITEM = new TreeitemRoleImpl;
  TREE = new TreeRoleImpl;
  ROLES_MAP = new HashMap;
  $putStringValue(ROLES_MAP, 'region', REGION);
  $putStringValue(ROLES_MAP, 'alert', ALERT);
  $putStringValue(ROLES_MAP, 'dialog', DIALOG);
  $putStringValue(ROLES_MAP, 'alertdialog', ALERTDIALOG);
  $putStringValue(ROLES_MAP, 'application', APPLICATION);
  $putStringValue(ROLES_MAP, 'document', DOCUMENT);
  $putStringValue(ROLES_MAP, 'article', ARTICLE);
  $putStringValue(ROLES_MAP, 'banner', BANNER);
  $putStringValue(ROLES_MAP, 'button', BUTTON);
  $putStringValue(ROLES_MAP, 'checkbox', CHECKBOX);
  $putStringValue(ROLES_MAP, 'gridcell', GRIDCELL);
  $putStringValue(ROLES_MAP, 'columnheader', COLUMNHEADER);
  $putStringValue(ROLES_MAP, 'group', GROUP);
  $putStringValue(ROLES_MAP, 'combobox', COMBOBOX);
  $putStringValue(ROLES_MAP, 'complementary', COMPLEMENTARY);
  $putStringValue(ROLES_MAP, 'contentinfo', CONTENTINFO);
  $putStringValue(ROLES_MAP, 'definition', DEFINITION);
  $putStringValue(ROLES_MAP, 'list', LIST);
  $putStringValue(ROLES_MAP, 'directory', DIRECTORY);
  $putStringValue(ROLES_MAP, 'form', FORM);
  $putStringValue(ROLES_MAP, 'grid', GRID);
  $putStringValue(ROLES_MAP, 'heading', HEADING);
  $putStringValue(ROLES_MAP, 'img', IMG);
  $putStringValue(ROLES_MAP, 'link', LINK);
  $putStringValue(ROLES_MAP, 'listbox', LISTBOX);
  $putStringValue(ROLES_MAP, 'listitem', LISTITEM);
  $putStringValue(ROLES_MAP, 'log', LOG);
  $putStringValue(ROLES_MAP, 'main', MAIN);
  $putStringValue(ROLES_MAP, 'marquee', MARQUEE);
  $putStringValue(ROLES_MAP, 'math', MATH);
  $putStringValue(ROLES_MAP, 'menu', MENU);
  $putStringValue(ROLES_MAP, 'menubar', MENUBAR);
  $putStringValue(ROLES_MAP, 'menuitem', MENUITEM);
  $putStringValue(ROLES_MAP, 'menuitemcheckbox', MENUITEMCHECKBOX);
  $putStringValue(ROLES_MAP, 'option', OPTION);
  $putStringValue(ROLES_MAP, 'radio', RADIO);
  $putStringValue(ROLES_MAP, 'menuitemradio', MENUITEMRADIO);
  $putStringValue(ROLES_MAP, 'navigation', NAVIGATION);
  $putStringValue(ROLES_MAP, 'note', NOTE);
  $putStringValue(ROLES_MAP, 'presentation', PRESENTATION);
  $putStringValue(ROLES_MAP, 'progressbar', PROGRESSBAR);
  $putStringValue(ROLES_MAP, 'radiogroup', RADIOGROUP);
  $putStringValue(ROLES_MAP, 'row', ROW);
  $putStringValue(ROLES_MAP, 'rowgroup', ROWGROUP);
  $putStringValue(ROLES_MAP, 'rowheader', ROWHEADER);
  $putStringValue(ROLES_MAP, 'search', SEARCH);
  $putStringValue(ROLES_MAP, 'separator', SEPARATOR);
  $putStringValue(ROLES_MAP, 'scrollbar', SCROLLBAR);
  $putStringValue(ROLES_MAP, 'slider', SLIDER);
  $putStringValue(ROLES_MAP, 'spinbutton', SPINBUTTON);
  $putStringValue(ROLES_MAP, 'status', STATUS);
  $putStringValue(ROLES_MAP, 'tab', TAB);
  $putStringValue(ROLES_MAP, 'tablist', TABLIST);
  $putStringValue(ROLES_MAP, 'tabpanel', TABPANEL);
  $putStringValue(ROLES_MAP, 'textbox', TEXTBOX);
  $putStringValue(ROLES_MAP, 'timer', TIMER);
  $putStringValue(ROLES_MAP, 'toolbar', TOOLBAR);
  $putStringValue(ROLES_MAP, 'tooltip', TOOLTIP);
  $putStringValue(ROLES_MAP, 'tree', TREE);
  $putStringValue(ROLES_MAP, 'treegrid', TREEGRID);
  $putStringValue(ROLES_MAP, 'treeitem', TREEITEM);
}

var ALERT, ALERTDIALOG, APPLICATION, ARTICLE, BANNER, BUTTON, CHECKBOX, COLUMNHEADER, COMBOBOX, COMPLEMENTARY, CONTENTINFO, DEFINITION, DIALOG, DIRECTORY, DOCUMENT, FORM, GRID, GRIDCELL, GROUP, HEADING, IMG, LINK, LIST, LISTBOX, LISTITEM, LOG, MAIN, MARQUEE, MATH, MENU, MENUBAR, MENUITEM, MENUITEMCHECKBOX, MENUITEMRADIO, NAVIGATION, NOTE, OPTION, PRESENTATION, PROGRESSBAR, RADIO, RADIOGROUP, REGION, ROLES_MAP, ROW, ROWGROUP, ROWHEADER, SCROLLBAR, SEARCH, SEPARATOR, SLIDER, SPINBUTTON, STATUS, TAB, TABLIST, TABPANEL, TEXTBOX, TIMER, TOOLBAR, TOOLTIP, TREE, TREEGRID, TREEITEM;
function RowRoleImpl(){
  RoleImpl.call(this, 'row');
}

defineClass(556, 17, {}, RowRoleImpl);
var Lcom_google_gwt_aria_client_RowRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RowRoleImpl', 556);
function RowgroupRoleImpl(){
  RoleImpl.call(this, 'rowgroup');
}

defineClass(554, 17, {}, RowgroupRoleImpl);
var Lcom_google_gwt_aria_client_RowgroupRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RowgroupRoleImpl', 554);
function RowheaderRoleImpl(){
  RoleImpl.call(this, 'rowheader');
}

defineClass(555, 17, {}, RowheaderRoleImpl);
var Lcom_google_gwt_aria_client_RowheaderRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'RowheaderRoleImpl', 555);
function ScrollbarRoleImpl(){
  RoleImpl.call(this, 'scrollbar');
}

defineClass(557, 17, {}, ScrollbarRoleImpl);
var Lcom_google_gwt_aria_client_ScrollbarRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ScrollbarRoleImpl', 557);
function SearchRoleImpl(){
  RoleImpl.call(this, 'search');
}

defineClass(558, 17, {}, SearchRoleImpl);
var Lcom_google_gwt_aria_client_SearchRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'SearchRoleImpl', 558);
function SeparatorRoleImpl(){
  RoleImpl.call(this, 'separator');
}

defineClass(559, 17, {}, SeparatorRoleImpl);
var Lcom_google_gwt_aria_client_SeparatorRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'SeparatorRoleImpl', 559);
function SliderRoleImpl(){
  RoleImpl.call(this, 'slider');
}

defineClass(560, 17, {}, SliderRoleImpl);
var Lcom_google_gwt_aria_client_SliderRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'SliderRoleImpl', 560);
function SpinbuttonRoleImpl(){
  RoleImpl.call(this, 'spinbutton');
}

defineClass(561, 17, {}, SpinbuttonRoleImpl);
var Lcom_google_gwt_aria_client_SpinbuttonRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'SpinbuttonRoleImpl', 561);
function $clinit_State(){
  $clinit_State = emptyMethod;
  new PrimitiveValueAttribute('aria-busy');
  new AriaValueAttribute('aria-checked');
  new PrimitiveValueAttribute('aria-disabled');
  new AriaValueAttribute('aria-expanded');
  new AriaValueAttribute('aria-grabbed');
  HIDDEN = new PrimitiveValueAttribute('aria-hidden');
  new AriaValueAttribute('aria-invalid');
  new AriaValueAttribute('aria-pressed');
  new AriaValueAttribute('aria-selected');
}

var HIDDEN;
function StatusRoleImpl(){
  RoleImpl.call(this, 'status');
}

defineClass(562, 17, {}, StatusRoleImpl);
var Lcom_google_gwt_aria_client_StatusRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'StatusRoleImpl', 562);
function TabRoleImpl(){
  RoleImpl.call(this, 'tab');
}

defineClass(565, 17, {}, TabRoleImpl);
var Lcom_google_gwt_aria_client_TabRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TabRoleImpl', 565);
function TablistRoleImpl(){
  RoleImpl.call(this, 'tablist');
}

defineClass(563, 17, {}, TablistRoleImpl);
var Lcom_google_gwt_aria_client_TablistRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TablistRoleImpl', 563);
function TabpanelRoleImpl(){
  RoleImpl.call(this, 'tabpanel');
}

defineClass(564, 17, {}, TabpanelRoleImpl);
var Lcom_google_gwt_aria_client_TabpanelRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TabpanelRoleImpl', 564);
function TextboxRoleImpl(){
  RoleImpl.call(this, 'textbox');
}

defineClass(566, 17, {}, TextboxRoleImpl);
var Lcom_google_gwt_aria_client_TextboxRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TextboxRoleImpl', 566);
function TimerRoleImpl(){
  RoleImpl.call(this, 'timer');
}

defineClass(567, 17, {}, TimerRoleImpl);
var Lcom_google_gwt_aria_client_TimerRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TimerRoleImpl', 567);
function ToolbarRoleImpl(){
  RoleImpl.call(this, 'toolbar');
}

defineClass(568, 17, {}, ToolbarRoleImpl);
var Lcom_google_gwt_aria_client_ToolbarRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'ToolbarRoleImpl', 568);
function TooltipRoleImpl(){
  RoleImpl.call(this, 'tooltip');
}

defineClass(569, 17, {}, TooltipRoleImpl);
var Lcom_google_gwt_aria_client_TooltipRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TooltipRoleImpl', 569);
function TreeRoleImpl(){
  RoleImpl.call(this, 'tree');
}

defineClass(572, 17, {}, TreeRoleImpl);
var Lcom_google_gwt_aria_client_TreeRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TreeRoleImpl', 572);
function TreegridRoleImpl(){
  RoleImpl.call(this, 'treegrid');
}

defineClass(570, 17, {}, TreegridRoleImpl);
var Lcom_google_gwt_aria_client_TreegridRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TreegridRoleImpl', 570);
function TreeitemRoleImpl(){
  RoleImpl.call(this, 'treeitem');
}

defineClass(571, 17, {}, TreeitemRoleImpl);
var Lcom_google_gwt_aria_client_TreeitemRoleImpl_2_classLit = createForClass('com.google.gwt.aria.client', 'TreeitemRoleImpl', 571);
function $addStyleDependentName(this$static, styleSuffix){
  $setStyleName_0(this$static, getStylePrimaryName(($clinit_DOM() , this$static.element)) + '-' + styleSuffix, true);
}

function $addStyleName(this$static, style){
  setStyleName(this$static.getStyleElement(), style, true);
}

function $getAbsoluteTop(this$static){
  return $getBoundingClientRectTop(($clinit_DOM() , this$static.element)) + $wnd.pageYOffset | 0;
}

function $getElement(this$static){
  return $clinit_DOM() , this$static.element;
}

function $getOffsetHeight(this$static){
  return $getPropertyInt(($clinit_DOM() , this$static.element), 'offsetHeight');
}

function $getOffsetWidth(this$static){
  return $getPropertyInt(($clinit_DOM() , this$static.element), 'offsetWidth');
}

function $removeStyleDependentName(this$static){
  $setStyleName_0(this$static, getStylePrimaryName(($clinit_DOM() , this$static.element)) + '-' + 'current', false);
}

function $removeStyleName(this$static, style){
  setStyleName(($clinit_DOM() , this$static.element), style, false);
}

function $resolvePotentialElement(){
  throw toJs(new UnsupportedOperationException);
}

function $setElement(this$static, elem){
  $setElement_0(this$static, ($clinit_DOM() , elem));
}

function $setElement_0(this$static, elem){
  this$static.element = elem;
}

function $setHeight(this$static, height){
  ($clinit_DOM() , this$static.element).style['height'] = height;
}

function $setStyleName(this$static, style){
  $setClassName(this$static.getStyleElement(), style);
}

function $setStyleName_0(this$static, style, add_0){
  setStyleName(this$static.getStyleElement(), style, add_0);
}

function $setStylePrimaryName(this$static, style){
  setStylePrimaryName(($clinit_DOM() , this$static.element), style);
}

function $setVisible(this$static){
  setVisible(($clinit_DOM() , this$static.element), false);
}

function $setWidth(this$static, width_0){
  ($clinit_DOM() , this$static.element).style['width'] = width_0;
}

function $sinkBitlessEvent(this$static, eventTypeName){
  $clinit_DOM();
  $sinkBitlessEvent_0(this$static.element, eventTypeName);
}

function getStylePrimaryName(elem){
  var fullClassName, spaceIdx;
  fullClassName = elem.className || '';
  spaceIdx = $indexOf_0(fullClassName, fromCodePoint(32));
  if (spaceIdx >= 0) {
    return fullClassName.substr(0, spaceIdx);
  }
  return fullClassName;
}

function setStyleName(elem, style, add_0){
  if (!elem) {
    throw toJs(new RuntimeException_0('Null widget handle. If you are creating a composite, ensure that initWidget() has been called.'));
  }
  style = $trim(style);
  if (style.length == 0) {
    throw toJs(new IllegalArgumentException_0('Style names cannot be empty'));
  }
  add_0?$addClassName(elem, style):$removeClassName(elem, style);
}

function setStylePrimaryName(elem, style){
  if (!elem) {
    throw toJs(new RuntimeException_0('Null widget handle. If you are creating a composite, ensure that initWidget() has been called.'));
  }
  style = $trim(style);
  if (style.length == 0) {
    throw toJs(new IllegalArgumentException_0('Style names cannot be empty'));
  }
  updatePrimaryAndDependentStyleNames(elem, style);
}

function setVisible(elem, visible){
  elem.style.display = visible?'':'none';
  visible?elem.removeAttribute('aria-hidden'):elem.setAttribute('aria-hidden', 'true');
}

function updatePrimaryAndDependentStyleNames(elem, newPrimaryStyle){
  var classes = (elem.className || '').split(/\s+/);
  if (!classes) {
    return;
  }
  var oldPrimaryStyle = classes[0];
  var oldPrimaryStyleLen = oldPrimaryStyle.length;
  classes[0] = newPrimaryStyle;
  for (var i = 1, n = classes.length; i < n; i++) {
    var name_0 = classes[i];
    name_0.length > oldPrimaryStyleLen && name_0.charAt(oldPrimaryStyleLen) == '-' && name_0.indexOf(oldPrimaryStyle) == 0 && (classes[i] = newPrimaryStyle + name_0.substring(oldPrimaryStyleLen));
  }
  elem.className = classes.join(' ');
}

defineClass(18, 1, $intern_4);
_.getOffsetHeight = function getOffsetHeight(){
  return $getOffsetHeight(this);
}
;
_.getStyleElement = function getStyleElement(){
  return $clinit_DOM() , this.element;
}
;
_.resolvePotentialElement = function resolvePotentialElement(){
  return $resolvePotentialElement();
}
;
_.setHeight_0 = function setHeight(height){
  $setHeight(this, height);
}
;
_.setWidth_0 = function setWidth(width_0){
  $setWidth(this, width_0);
}
;
_.toString_0 = function toString_1(){
  if (!this.element) {
    return '(null handle)';
  }
  return ($clinit_DOM() , this.element).outerHTML;
}
;
var Lcom_google_gwt_user_client_ui_UIObject_2_classLit = createForClass('com.google.gwt.user.client.ui', 'UIObject', 18);
function $addDomHandler(this$static, handler, type_0){
  var typeInt;
  typeInt = getTypeInt(type_0.name_0);
  typeInt == -1?$sinkBitlessEvent(this$static, type_0.name_0):this$static.sinkEvents(typeInt);
  return $addHandler_0(!this$static.handlerManager?(this$static.handlerManager = new HandlerManager(this$static)):this$static.handlerManager, type_0, handler);
}

function $addHandler(this$static, handler, type_0){
  return $addHandler_0(!this$static.handlerManager?(this$static.handlerManager = new HandlerManager(this$static)):this$static.handlerManager, type_0, handler);
}

function $fireEvent(this$static, event_0){
  !!this$static.handlerManager && $fireEvent_0(this$static.handlerManager, event_0);
}

function $onAttach(this$static){
  var bitsToAdd;
  if (this$static.isAttached()) {
    throw toJs(new IllegalStateException_0("Should only call onAttach when the widget is detached from the browser's document"));
  }
  this$static.attached = true;
  $clinit_DOM();
  setEventListener(this$static.element, this$static);
  bitsToAdd = this$static.eventsToSink;
  this$static.eventsToSink = -1;
  bitsToAdd > 0 && this$static.sinkEvents(bitsToAdd);
  this$static.doAttachChildren();
  this$static.onLoad();
}

function $onBrowserEvent(this$static, event_0){
  var related;
  switch ($clinit_DOM() , $eventGetTypeInt(event_0.type)) {
    case 16:
    case 32:
      related = event_0.relatedTarget;
      if (!!related && isOrHasChildImpl(this$static.element, related)) {
        return;
      }

  }
  fireNativeEvent(event_0, this$static, this$static.element);
}

function $onDetach(this$static){
  if (!this$static.isAttached()) {
    throw toJs(new IllegalStateException_0("Should only call onDetach when the widget is attached to the browser's document"));
  }
  try {
    this$static.onUnload();
  }
   finally {
    try {
      this$static.doDetachChildren();
    }
     finally {
      $clinit_DOM();
      this$static.element.__listener = null;
      this$static.attached = false;
    }
  }
}

function $removeFromParent(this$static){
  if (!this$static.parent_0) {
    $clinit_RootPanel();
    $contains_1(widgetsToDetach, this$static) && detachNow(this$static);
  }
   else if (instanceOf(this$static.parent_0, 40)) {
    castTo(this$static.parent_0, 40).remove(this$static);
  }
   else if (this$static.parent_0) {
    throw toJs(new IllegalStateException_0("This widget's parent does not implement HasWidgets"));
  }
}

function $setParent(this$static, parent_0){
  var oldParent;
  oldParent = this$static.parent_0;
  if (!parent_0) {
    try {
      !!oldParent && oldParent.isAttached() && this$static.onDetach();
    }
     finally {
      this$static.parent_0 = null;
    }
  }
   else {
    if (oldParent) {
      throw toJs(new IllegalStateException_0('Cannot set a new parent without first clearing the old parent'));
    }
    this$static.parent_0 = parent_0;
    parent_0.isAttached() && this$static.onAttach();
  }
}

function $sinkEvents(this$static, eventBitsToAdd){
  this$static.eventsToSink == -1?sinkEvents_0(($clinit_DOM() , this$static.element), eventBitsToAdd | (this$static.element.__eventBits || 0)):(this$static.eventsToSink |= eventBitsToAdd);
}

defineClass(19, 18, $intern_5);
_.doAttachChildren = function doAttachChildren(){
}
;
_.doDetachChildren = function doDetachChildren(){
}
;
_.fireEvent = function fireEvent(event_0){
  $fireEvent(this, event_0);
}
;
_.isAttached = function isAttached(){
  return this.attached;
}
;
_.onAttach = function onAttach(){
  $onAttach(this);
}
;
_.onBrowserEvent = function onBrowserEvent(event_0){
  $onBrowserEvent(this, event_0);
}
;
_.onDetach = function onDetach(){
  $onDetach(this);
}
;
_.onLoad = function onLoad(){
}
;
_.onUnload = function onUnload(){
}
;
_.sinkEvents = function sinkEvents(eventBitsToAdd){
  $sinkEvents(this, eventBitsToAdd);
}
;
_.attached = false;
_.eventsToSink = 0;
var Lcom_google_gwt_user_client_ui_Widget_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Widget', 19);
function $onAttach_0(this$static){
  var tabIndex;
  $onAttach(this$static);
  tabIndex = this$static.getTabIndex();
  -1 == tabIndex && this$static.setTabIndex(0);
}

function FocusWidget(elem){
  $setElement_0(this, ($clinit_DOM() , elem));
}

defineClass(212, 19, $intern_6);
_.getTabIndex = function getTabIndex(){
  return $getTabIndex(($clinit_DOM() , this.element));
}
;
_.onAttach = function onAttach_0(){
  $onAttach_0(this);
}
;
_.setTabIndex = function setTabIndex(index_0){
  $setTabIndex(($clinit_DOM() , this.element), index_0);
}
;
var Lcom_google_gwt_user_client_ui_FocusWidget_2_classLit = createForClass('com.google.gwt.user.client.ui', 'FocusWidget', 212);
function $getCanvasElement(this$static){
  return $clinit_DOM() , this$static.element;
}

function $getContext2d(this$static){
  return ($clinit_DOM() , this$static.element).getContext('2d');
}

function $getCoordinateSpaceHeight(this$static){
  return ($clinit_DOM() , this$static.element).height;
}

function $getCoordinateSpaceWidth(this$static){
  return ($clinit_DOM() , this$static.element).width;
}

function $setCoordinateSpaceHeight(this$static, height){
  $setHeight_0(($clinit_DOM() , this$static.element), height);
}

function $setCoordinateSpaceWidth(this$static, width_0){
  $setWidth_0(($clinit_DOM() , this$static.element), width_0);
}

function Canvas_0(element){
  $setElement_0(this, ($clinit_DOM() , element));
}

function createIfSupported(){
  var element;
  !detector && (detector = new Canvas$CanvasElementSupportDetectedMaybe);
  element = $doc.createElement('canvas');
  if (!element.getContext) {
    return null;
  }
  return new Canvas_0(element);
}

defineClass(457, 212, $intern_6, Canvas_0);
var detector;
var Lcom_google_gwt_canvas_client_Canvas_2_classLit = createForClass('com.google.gwt.canvas.client', 'Canvas', 457);
defineClass(655, 1, {});
var Lcom_google_gwt_canvas_client_Canvas$CanvasElementSupportDetector_2_classLit = createForClass('com.google.gwt.canvas.client', 'Canvas/CanvasElementSupportDetector', 655);
function Canvas$CanvasElementSupportDetectedMaybe(){
}

defineClass(458, 655, {}, Canvas$CanvasElementSupportDetectedMaybe);
var Lcom_google_gwt_canvas_client_Canvas$CanvasElementSupportDetectedMaybe_2_classLit = createForClass('com.google.gwt.canvas.client', 'Canvas/CanvasElementSupportDetectedMaybe', 458);
var Lcom_google_gwt_core_client_JavaScriptObject_2_classLit = createForClass('com.google.gwt.core.client', 'JavaScriptObject$', 0);
function $addColorStop(this$static, offset, color_0){
  this$static.addColorStop(offset, color_0);
}

function $arc(this$static, x_0, y_0, radius, startAngle, endAngle){
  this$static.arc(x_0, y_0, radius, startAngle, endAngle, false);
}

function $createLinearGradient(this$static, x0, y0, x1, y1){
  return this$static.createLinearGradient(x0, y0, x1, y1);
}

function $drawImage(this$static, image, dx, dy){
  this$static.drawImage(image, dx, dy);
}

function $fillRect(this$static, x_0, y_0, w, h){
  this$static.fillRect(x_0, y_0, w, h);
}

function $fillText(this$static, text_0, x_0, y_0){
  this$static.fillText && this$static.fillText(text_0, x_0, y_0);
}

function $lineTo(this$static, x_0, y_0){
  this$static.lineTo(x_0, y_0);
}

function $measureText(this$static, text_0){
  return this$static.measureText(text_0);
}

function $moveTo(this$static, x_0, y_0){
  this$static.moveTo(x_0, y_0);
}

function $scale(this$static, x_0, y_0){
  this$static.scale(x_0, y_0);
}

function $setFillStyleWeb(this$static, fillStyle){
  this$static.fillStyle = fillStyle;
}

function $setFont(this$static, f){
  this$static.font = f;
}

function $setLineCap(this$static, lineCap){
  this$static.lineCap = lineCap;
}

function $setStrokeStyleWeb(this$static, strokeStyle){
  this$static.strokeStyle = strokeStyle;
}

function $setTransform(this$static, m11, m12, m21, m22, dx, dy){
  this$static.setTransform(m11, m12, m21, m22, dx, dy);
}

function $strokeRect(this$static, x_0, y_0, w, h){
  this$static.strokeRect(x_0, y_0, w, h);
}

function $transform(this$static, m11, m12, m21, m22, dx, dy){
  this$static.transform(m11, m12, m21, m22, dx, dy);
}

function $translate(this$static, x_0, y_0){
  this$static.translate(x_0, y_0);
}

function Enum(name_0, ordinal){
  this.name_0 = name_0;
  this.ordinal = ordinal;
}

defineClass(10, 1, {3:1, 11:1, 10:1});
_.equals_0 = function equals_0(other){
  return this === other;
}
;
_.hashCode_0 = function hashCode_1(){
  return getHashCode(this);
}
;
_.toString_0 = function toString_2(){
  return this.name_0 != null?this.name_0:'' + this.ordinal;
}
;
_.ordinal = 0;
var Ljava_lang_Enum_2_classLit = createForClass('java.lang', 'Enum', 10);
function $clinit_Context2d$LineCap(){
  $clinit_Context2d$LineCap = emptyMethod;
  BUTT = new Context2d$LineCap('BUTT', 0, 'butt');
  ROUND = new Context2d$LineCap('ROUND', 1, 'round');
  SQUARE = new Context2d$LineCap('SQUARE', 2, 'square');
}

function Context2d$LineCap(enum$name, enum$ordinal, value_0){
  Enum.call(this, enum$name, enum$ordinal);
  this.value_0 = value_0;
}

function values_0(){
  $clinit_Context2d$LineCap();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_canvas_dom_client_Context2d$LineCap_2_classLit, 1), $intern_3, 160, 0, [BUTT, ROUND, SQUARE]);
}

defineClass(160, 10, {160:1, 3:1, 11:1, 10:1}, Context2d$LineCap);
var BUTT, ROUND, SQUARE;
var Lcom_google_gwt_canvas_dom_client_Context2d$LineCap_2_classLit = createForEnum('com.google.gwt.canvas.dom.client', 'Context2d/LineCap', 160, values_0);
function Duration(){
  this.start_0 = now_1();
}

defineClass(373, 1, {}, Duration);
_.start_0 = 0;
var Lcom_google_gwt_core_client_Duration_2_classLit = createForClass('com.google.gwt.core.client', 'Duration', 373);
function $$init(this$static){
  this$static.stackTrace = initUnidimensionalArray(Ljava_lang_StackTraceElement_2_classLit, $intern_3, 114, 0, 0, 1);
}

function $addSuppressed(this$static, exception){
  checkCriticalNotNull_0(exception);
  checkCriticalArgument_0(exception != this$static, 'Exception can not suppress itself.');
  if (this$static.disableSuppression) {
    return;
  }
  this$static.suppressedExceptions == null?(this$static.suppressedExceptions = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_Throwable_2_classLit, 1), $intern_3, 22, 0, [exception])):(this$static.suppressedExceptions[this$static.suppressedExceptions.length] = exception);
}

function $fillInStackTrace(this$static){
  if (this$static.writetableStackTrace) {
    this$static.backingJsObject !== '__noinit__' && this$static.initializeBackingError();
    this$static.stackTrace = null;
  }
  return this$static;
}

function $initCause(this$static, cause){
  checkCriticalState_0(!this$static.cause);
  checkCriticalArgument_0(true, 'Self-causation not permitted');
  this$static.cause = cause;
  return this$static;
}

function $printStackTraceImpl(this$static, out, ident){
  var t, t$array, t$index, t$max, theCause;
  $printStackTraceItems(this$static);
  for (t$array = (this$static.suppressedExceptions == null && (this$static.suppressedExceptions = initUnidimensionalArray(Ljava_lang_Throwable_2_classLit, $intern_3, 22, 0, 0, 1)) , this$static.suppressedExceptions) , t$index = 0 , t$max = t$array.length; t$index < t$max; ++t$index) {
    t = t$array[t$index];
    $printStackTraceImpl(t, out, '\t' + ident);
  }
  theCause = this$static.cause;
  !!theCause && $printStackTraceImpl(theCause, out, ident);
}

function $printStackTraceItems(this$static){
  var element$array, element$index, element$max, stackTrace;
  for (element$array = (this$static.stackTrace == null && (this$static.stackTrace = ($clinit_StackTraceCreator() , stackTrace = collector.getStackTrace(this$static) , dropInternalFrames(stackTrace))) , this$static.stackTrace) , element$index = 0 , element$max = element$array.length; element$index < element$max; ++element$index)
  ;
}

function $setBackingJsObject(this$static, backingJsObject){
  this$static.backingJsObject = backingJsObject;
  backingJsObject != null && setPropertySafe(backingJsObject, '__java$exception', this$static);
}

function $toString(this$static, message){
  var className;
  className = $getName(this$static.___clazz);
  return message == null?className:className + ': ' + message;
}

function Throwable(message, cause){
  $$init(this);
  this.cause = cause;
  this.detailMessage = message;
  $fillInStackTrace(this);
  this.initializeBackingError();
}

function fixIE(e){
  if (!('stack' in e)) {
    try {
      throw e;
    }
     catch (ignored) {
    }
  }
  return e;
}

defineClass(22, 1, $intern_7);
_.createError = function createError(msg){
  return new Error(msg);
}
;
_.getMessage = function getMessage(){
  return this.detailMessage;
}
;
_.initializeBackingError = function initializeBackingError(){
  var className, errorMessage, message;
  message = this.detailMessage == null?null:this.detailMessage.replace(new RegExp('\n', 'g'), ' ');
  errorMessage = (className = $getName(this.___clazz) , message == null?className:className + ': ' + message);
  $setBackingJsObject(this, fixIE(this.createError(errorMessage)));
  captureStackTrace(this);
}
;
_.toString_0 = function toString_3(){
  return $toString(this, this.getMessage());
}
;
_.backingJsObject = '__noinit__';
_.disableSuppression = false;
_.writetableStackTrace = true;
var Ljava_lang_Throwable_2_classLit = createForClass('java.lang', 'Throwable', 22);
function Exception(message){
  $$init(this);
  this.detailMessage = message;
  $fillInStackTrace(this);
  this.initializeBackingError();
}

defineClass(14, 22, $intern_8);
var Ljava_lang_Exception_2_classLit = createForClass('java.lang', 'Exception', 14);
function RuntimeException(){
  $$init(this);
  $fillInStackTrace(this);
  this.initializeBackingError();
}

function RuntimeException_0(message){
  Exception.call(this, message);
}

function RuntimeException_1(message, cause){
  Throwable.call(this, message, cause);
}

defineClass(51, 14, $intern_8, RuntimeException_0);
var Ljava_lang_RuntimeException_2_classLit = createForClass('java.lang', 'RuntimeException', 51);
defineClass(206, 51, $intern_8);
var Ljava_lang_JsException_2_classLit = createForClass('java.lang', 'JsException', 206);
defineClass(332, 206, $intern_8);
var Lcom_google_gwt_core_client_impl_JavaScriptExceptionBase_2_classLit = createForClass('com.google.gwt.core.client.impl', 'JavaScriptExceptionBase', 332);
function $clinit_JavaScriptException(){
  $clinit_JavaScriptException = emptyMethod;
  NOT_SET = new Object_0;
}

function $ensureInit(this$static){
  var exception;
  if (this$static.message_0 == null) {
    exception = maskUndefined(this$static.e) === maskUndefined(NOT_SET)?null:this$static.e;
    this$static.name_0 = exception == null?'null':instanceOfJso(exception)?getExceptionName0(castToJso(exception)):instanceOfString(exception)?'String':$getName(getClass__Ljava_lang_Class___devirtual$(exception));
    this$static.description = this$static.description + ': ' + (instanceOfJso(exception)?getExceptionDescription0(castToJso(exception)):exception + '');
    this$static.message_0 = '(' + this$static.name_0 + ') ' + this$static.description;
  }
}

function JavaScriptException(e){
  $clinit_JavaScriptException();
  $$init(this);
  $fillInStackTrace(this);
  this.backingJsObject = e;
  e != null && setPropertySafe(e, '__java$exception', this);
  this.detailMessage = e == null?'null':toString_7(e);
  this.description = '';
  this.e = e;
  this.description = '';
}

function getExceptionDescription0(e){
  return e == null?null:e.message;
}

function getExceptionName0(e){
  return e == null?null:e.name;
}

defineClass(131, 332, {131:1, 3:1, 14:1, 22:1}, JavaScriptException);
_.getMessage = function getMessage_0(){
  return $ensureInit(this) , this.message_0;
}
;
_.getThrown = function getThrown(){
  return maskUndefined(this.e) === maskUndefined(NOT_SET)?null:this.e;
}
;
var NOT_SET;
var Lcom_google_gwt_core_client_JavaScriptException_2_classLit = createForClass('com.google.gwt.core.client', 'JavaScriptException', 131);
function now_1(){
  if (Date.now) {
    return Date.now();
  }
  return (new Date).getTime();
}

defineClass(630, 1, {});
var Lcom_google_gwt_core_client_Scheduler_2_classLit = createForClass('com.google.gwt.core.client', 'Scheduler', 630);
function $clinit_Impl(){
  $clinit_Impl = emptyMethod;
  !!($clinit_StackTraceCreator() , collector);
}

function apply_0(jsFunction, thisObj, args){
  return jsFunction.apply(thisObj, args);
  var __0;
}

function enter(){
  var now_0;
  if (entryDepth != 0) {
    now_0 = now_1();
    if (now_0 - watchdogEntryDepthLastScheduled > 2000) {
      watchdogEntryDepthLastScheduled = now_0;
      watchdogEntryDepthTimerId = $wnd.setTimeout(watchdogEntryDepthRun, 10);
    }
  }
  if (entryDepth++ == 0) {
    $flushEntryCommands(($clinit_SchedulerImpl() , INSTANCE));
    return true;
  }
  return false;
}

function entry_0(jsFunction){
  $clinit_Impl();
  return function(){
    return entry0(jsFunction, this, arguments);
    var __0;
  }
  ;
}

function entry0(jsFunction, thisObj, args){
  var initialEntry;
  initialEntry = enter();
  try {
    return apply_0(jsFunction, thisObj, args);
  }
   finally {
    exit(initialEntry);
  }
}

function exit(initialEntry){
  initialEntry && $flushFinallyCommands(($clinit_SchedulerImpl() , INSTANCE));
  --entryDepth;
  if (initialEntry) {
    if (watchdogEntryDepthTimerId != -1) {
      watchdogEntryDepthCancel(watchdogEntryDepthTimerId);
      watchdogEntryDepthTimerId = -1;
    }
  }
}

function getModuleBaseURL(){
  $clinit_Impl();
  var key = '__gwtDevModeHook:' + $moduleName + ':moduleBase';
  var global = $wnd || self;
  return global[key] || $moduleBase;
}

function reportToBrowser(e){
  $clinit_Impl();
  $wnd.setTimeout(function(){
    throw e;
  }
  , 0);
}

function watchdogEntryDepthCancel(timerId){
  $wnd.clearTimeout(timerId);
}

function watchdogEntryDepthRun(){
  entryDepth != 0 && (entryDepth = 0);
  watchdogEntryDepthTimerId = -1;
}

var entryDepth = 0, watchdogEntryDepthLastScheduled = 0, watchdogEntryDepthTimerId = -1;
function $clinit_SchedulerImpl(){
  $clinit_SchedulerImpl = emptyMethod;
  INSTANCE = new SchedulerImpl;
}

function $flushEntryCommands(this$static){
  var oldQueue, rescheduled;
  if (this$static.entryCommands) {
    rescheduled = null;
    do {
      oldQueue = this$static.entryCommands;
      this$static.entryCommands = null;
      rescheduled = runScheduledTasks(oldQueue, rescheduled);
    }
     while (this$static.entryCommands);
    this$static.entryCommands = rescheduled;
  }
}

function $flushFinallyCommands(this$static){
  var oldQueue, rescheduled;
  if (this$static.finallyCommands) {
    rescheduled = null;
    do {
      oldQueue = this$static.finallyCommands;
      this$static.finallyCommands = null;
      rescheduled = runScheduledTasks(oldQueue, rescheduled);
    }
     while (this$static.finallyCommands);
    this$static.finallyCommands = rescheduled;
  }
}

function $scheduleFinally(this$static, cmd){
  this$static.finallyCommands = push_0(this$static.finallyCommands, [cmd, false]);
}

function SchedulerImpl(){
}

function push_0(queue, task){
  !queue && (queue = []);
  queue[queue.length] = task;
  return queue;
}

function runScheduledTasks(tasks, rescheduled){
  var e, i, j, t;
  for (i = 0 , j = tasks.length; i < j; i++) {
    t = tasks[i];
    try {
      t[1]?t[0].$_nullMethod() && (rescheduled = push_0(rescheduled, t)):t[0].execute_0();
    }
     catch ($e0) {
      $e0 = toJava($e0);
      if (instanceOf($e0, 22)) {
        e = $e0;
        $clinit_Impl();
        reportToBrowser(instanceOf(e, 131)?castTo(e, 131).getThrown():e);
      }
       else 
        throw toJs($e0);
    }
  }
  return rescheduled;
}

defineClass(348, 630, {}, SchedulerImpl);
var INSTANCE;
var Lcom_google_gwt_core_client_impl_SchedulerImpl_2_classLit = createForClass('com.google.gwt.core.client.impl', 'SchedulerImpl', 348);
function $clinit_StackTraceCreator(){
  $clinit_StackTraceCreator = emptyMethod;
  var c, enforceLegacy;
  enforceLegacy = !supportsErrorStack();
  c = new StackTraceCreator$CollectorModernNoSourceMap;
  collector = enforceLegacy?new StackTraceCreator$CollectorLegacy:c;
}

function captureStackTrace(error){
  $clinit_StackTraceCreator();
  collector.collect(error);
}

function dropInternalFrames(stackTrace){
  var dropFrameUntilFnName, dropFrameUntilFnName2, i, numberOfFramesToSearch;
  dropFrameUntilFnName = 'captureStackTrace';
  dropFrameUntilFnName2 = 'initializeBackingError';
  numberOfFramesToSearch = $wnd.Math.min(stackTrace.length, 5);
  for (i = numberOfFramesToSearch - 1; i >= 0; i--) {
    if ($equals_1(stackTrace[i].methodName, dropFrameUntilFnName) || $equals_1(stackTrace[i].methodName, dropFrameUntilFnName2)) {
      stackTrace.length >= i + 1 && stackTrace.splice(0, i + 1);
      break;
    }
  }
  return stackTrace;
}

function extractFunctionName(fnName){
  var fnRE = /function(?:\s+([\w$]+))?\s*\(/;
  var match_0 = fnRE.exec(fnName);
  return match_0 && match_0[1] || 'anonymous';
}

function parseInt_0(number){
  $clinit_StackTraceCreator();
  return parseInt(number) || -1;
}

function supportsErrorStack(){
  if (Error.stackTraceLimit > 0) {
    $wnd.Error.stackTraceLimit = Error.stackTraceLimit = 64;
    return true;
  }
  return 'stack' in new Error;
}

var collector;
defineClass(641, 1, {});
var Lcom_google_gwt_core_client_impl_StackTraceCreator$Collector_2_classLit = createForClass('com.google.gwt.core.client.impl', 'StackTraceCreator/Collector', 641);
function StackTraceCreator$CollectorLegacy(){
}

defineClass(333, 641, {}, StackTraceCreator$CollectorLegacy);
_.collect = function collect(error){
  var seen = {}, name_1;
  var fnStack = [];
  error['fnStack'] = fnStack;
  var callee = arguments.callee.caller;
  while (callee) {
    var name_0 = ($clinit_StackTraceCreator() , callee.name || (callee.name = extractFunctionName(callee.toString())));
    fnStack.push(name_0);
    var keyName = ':' + name_0;
    var withThisName = seen[keyName];
    if (withThisName) {
      var i, j;
      for (i = 0 , j = withThisName.length; i < j; i++) {
        if (withThisName[i] === callee) {
          return;
        }
      }
    }
    (withThisName || (seen[keyName] = [])).push(callee);
    callee = callee.caller;
  }
}
;
_.getStackTrace = function getStackTrace(t){
  var i, length_0, stack_0, stackTrace;
  stack_0 = ($clinit_StackTraceCreator() , t && t['fnStack']?t['fnStack']:[]);
  length_0 = stack_0.length;
  stackTrace = initUnidimensionalArray(Ljava_lang_StackTraceElement_2_classLit, $intern_3, 114, length_0, 0, 1);
  for (i = 0; i < length_0; i++) {
    stackTrace[i] = new StackTraceElement(stack_0[i], null, -1);
  }
  return stackTrace;
}
;
var Lcom_google_gwt_core_client_impl_StackTraceCreator$CollectorLegacy_2_classLit = createForClass('com.google.gwt.core.client.impl', 'StackTraceCreator/CollectorLegacy', 333);
function $parse(this$static, stString){
  var closeParen, col, endFileUrlIndex, fileName, index_0, lastColonIndex, line, location_0, toReturn;
  if (stString.length == 0) {
    return this$static.createSte('Unknown', 'anonymous', -1, -1);
  }
  toReturn = $trim(stString);
  $equals_1(toReturn.substr(0, 3), 'at ') && (toReturn = toReturn.substr(3));
  toReturn = toReturn.replace(/\[.*?\]/g, '');
  index_0 = toReturn.indexOf('(');
  if (index_0 == -1) {
    index_0 = toReturn.indexOf('@');
    if (index_0 == -1) {
      location_0 = toReturn;
      toReturn = '';
    }
     else {
      location_0 = $trim(toReturn.substr(index_0 + 1));
      toReturn = $trim(toReturn.substr(0, index_0));
    }
  }
   else {
    closeParen = toReturn.indexOf(')', index_0);
    location_0 = toReturn.substr(index_0 + 1, closeParen - (index_0 + 1));
    toReturn = $trim(toReturn.substr(0, index_0));
  }
  index_0 = $indexOf_0(toReturn, fromCodePoint(46));
  index_0 != -1 && (toReturn = toReturn.substr(index_0 + 1));
  (toReturn.length == 0 || $equals_1(toReturn, 'Anonymous function')) && (toReturn = 'anonymous');
  lastColonIndex = $lastIndexOf(location_0, fromCodePoint(58));
  endFileUrlIndex = $lastIndexOf_0(location_0, fromCodePoint(58), lastColonIndex - 1);
  line = -1;
  col = -1;
  fileName = 'Unknown';
  if (lastColonIndex != -1 && endFileUrlIndex != -1) {
    fileName = location_0.substr(0, endFileUrlIndex);
    line = parseInt_0(location_0.substr(endFileUrlIndex + 1, lastColonIndex - (endFileUrlIndex + 1)));
    col = parseInt_0(location_0.substr(lastColonIndex + 1));
  }
  return this$static.createSte(fileName, toReturn, line, col);
}

defineClass(642, 641, {});
_.collect = function collect_0(error){
}
;
_.createSte = function createSte(fileName, method, line, col){
  return new StackTraceElement(method, fileName + '@' + col, line < 0?-1:line);
}
;
_.getStackTrace = function getStackTrace_0(t){
  var addIndex, i, length_0, stack_0, stackTrace, ste, e;
  stack_0 = ($clinit_StackTraceCreator() , e = t.backingJsObject , e && e.stack?e.stack.split('\n'):[]);
  stackTrace = initUnidimensionalArray(Ljava_lang_StackTraceElement_2_classLit, $intern_3, 114, 0, 0, 1);
  addIndex = 0;
  length_0 = stack_0.length;
  if (length_0 == 0) {
    return stackTrace;
  }
  ste = $parse(this, stack_0[0]);
  $equals_1(ste.methodName, 'anonymous') || (stackTrace[addIndex++] = ste);
  for (i = 1; i < length_0; i++) {
    stackTrace[addIndex++] = $parse(this, stack_0[i]);
  }
  return stackTrace;
}
;
var Lcom_google_gwt_core_client_impl_StackTraceCreator$CollectorModern_2_classLit = createForClass('com.google.gwt.core.client.impl', 'StackTraceCreator/CollectorModern', 642);
function StackTraceCreator$CollectorModernNoSourceMap(){
}

defineClass(334, 642, {}, StackTraceCreator$CollectorModernNoSourceMap);
_.createSte = function createSte_0(fileName, method, line, col){
  return new StackTraceElement(method, fileName, -1);
}
;
var Lcom_google_gwt_core_client_impl_StackTraceCreator$CollectorModernNoSourceMap_2_classLit = createForClass('com.google.gwt.core.client.impl', 'StackTraceCreator/CollectorModernNoSourceMap', 334);
function $appendChild(this$static, newChild){
  return this$static.appendChild(newChild);
}

function $removeChild(this$static, oldChild){
  return this$static.removeChild(oldChild);
}

function is(o){
  try {
    return !!o && !!o.nodeType;
  }
   catch (e) {
    return false;
  }
}

function $addClassName(this$static, className){
  var idx, oldClassName;
  className = trimClassName(className);
  oldClassName = this$static.className || '';
  idx = indexOfName(oldClassName, className);
  if (idx == -1) {
    oldClassName.length > 0?(this$static.className = oldClassName + ' ' + className || '' , undefined):(this$static.className = className || '' , undefined);
    return true;
  }
  return false;
}

function $getPropertyInt(this$static, name_0){
  return parseInt(this$static[name_0]) | 0;
}

function $getPropertyString(this$static, name_0){
  return this$static[name_0] == null?null:String(this$static[name_0]);
}

function $removeClassName(this$static, className){
  var begin, end, idx, newClassName, oldStyle;
  className = trimClassName(className);
  oldStyle = this$static.className || '';
  idx = indexOfName(oldStyle, className);
  if (idx != -1) {
    begin = $trim(oldStyle.substr(0, idx));
    end = $trim($substring(oldStyle, idx + className.length));
    begin.length == 0?(newClassName = end):end.length == 0?(newClassName = begin):(newClassName = begin + ' ' + end);
    this$static.className = newClassName || '';
    return true;
  }
  return false;
}

function $setAttribute(this$static, name_0, value_0){
  this$static.setAttribute(name_0, value_0);
}

function $setClassName(this$static, className){
  this$static.className = className || '';
}

function $setInnerHTML(this$static, html){
  this$static.innerHTML = html || '';
}

function $setTabIndex(this$static, tabIndex){
  this$static.tabIndex = tabIndex;
}

function indexOfName(nameList, name_0){
  var idx, last, lastPos;
  idx = nameList.indexOf(name_0);
  while (idx != -1) {
    if (idx == 0 || (checkCriticalStringElementIndex(idx - 1, nameList.length) , nameList.charCodeAt(idx - 1) == 32)) {
      last = idx + name_0.length;
      lastPos = nameList.length;
      if (last == lastPos || last < lastPos && (checkCriticalStringElementIndex(last, nameList.length) , nameList.charCodeAt(last) == 32)) {
        break;
      }
    }
    idx = nameList.indexOf(name_0, idx + 1);
  }
  return idx;
}

function is_0(o){
  if (is(o)) {
    return !!o && o.nodeType == 1;
  }
  return false;
}

function trimClassName(className){
  className = $trim(className);
  return className;
}

function $setHref(this$static, href_0){
  this$static.href = href_0;
}

function $setHeight_0(this$static, height){
  this$static.height = height;
}

function $setWidth_0(this$static, width_0){
  this$static.width = width_0;
}

function $createInputElement(doc, type_0){
  var e = doc.createElement('INPUT');
  e.type = type_0;
  return e;
}

function $getFirstChildElement(elem){
  var child = elem.firstChild;
  while (child && child.nodeType != 1)
    child = child.nextSibling;
  return child;
}

function $getParentElement(node){
  var parent_0 = node.parentNode;
  (!parent_0 || parent_0.nodeType != 1) && (parent_0 = null);
  return parent_0;
}

function $eventGetButton(evt){
  var button = evt.button;
  if (button == 1) {
    return 4;
  }
   else if (button == 2) {
    return 2;
  }
  return 1;
}

function $setInnerText(elem, text_0){
  elem.textContent = text_0 || '';
}

function $createScriptElement(doc, source){
  var elem;
  elem = doc.createElement('script');
  elem.textContent = source || '';
  return elem;
}

function $eventGetMouseWheelVelocityY(evt){
  return Math.round(-evt.wheelDelta / 40) || 0;
}

function $isRTL(elem){
  return elem.ownerDocument.defaultView.getComputedStyle(elem, '').direction == 'rtl';
}

function $getAbsoluteLeft(elem){
  var left;
  left = $getBoundingClientRectLeft(elem) + $wnd.pageXOffset;
  $isRTL(elem) && (left += $getParentOffsetDelta(elem));
  return left | 0;
}

function $getBoundingClientRectLeft(elem){
  try {
    return elem.getBoundingClientRect().left;
  }
   catch (e) {
    return 0;
  }
}

function $getBoundingClientRectTop(elem){
  try {
    return elem.getBoundingClientRect().top;
  }
   catch (e) {
    return 0;
  }
}

function $getParentOffsetDelta(elem){
  var offsetParent = elem.offsetParent;
  if (offsetParent) {
    return offsetParent.offsetWidth - offsetParent.clientWidth;
  }
  return 0;
}

function $getScrollLeft(elem){
  var left;
  left = (elem.scrollLeft || 0) | 0;
  $isRTL(elem) && (left = -left);
  return left;
}

function $getTabIndex(elem){
  return elem.tabIndex < $intern_9?elem.tabIndex:-(elem.tabIndex % $intern_9) - 1;
}

function isOrHasChildImpl(parent_0, child){
  if (parent_0.nodeType != 1 && parent_0.nodeType != 9) {
    return parent_0 == child;
  }
  if (child.nodeType != 1) {
    child = child.parentNode;
    if (!child) {
      return false;
    }
  }
  if (parent_0.nodeType == 9) {
    return parent_0 === child || parent_0.body && parent_0.body.contains(child);
  }
   else {
    return parent_0 === child || parent_0.contains(child);
  }
}

function $createUniqueId(this$static){
  !this$static.gwt_uid && (this$static.gwt_uid = 1);
  return 'gwt-uid-' + this$static.gwt_uid++;
}

function $getClientHeight(this$static){
  return ($equals_1(this$static.compatMode, 'CSS1Compat')?this$static.documentElement:this$static.body).clientHeight | 0;
}

function $getClientWidth(this$static){
  return ($equals_1(this$static.compatMode, 'CSS1Compat')?this$static.documentElement:this$static.body).clientWidth | 0;
}

function $getScrollHeight(this$static){
  return (($equals_1(this$static.compatMode, 'CSS1Compat')?this$static.documentElement:this$static.body).scrollHeight || 0) | 0;
}

function $getScrollWidth(this$static){
  return (($equals_1(this$static.compatMode, 'CSS1Compat')?this$static.documentElement:this$static.body).scrollWidth || 0) | 0;
}

function $setChecked(this$static, checked){
  this$static.checked = checked;
}

function $setDefaultChecked(this$static, defaultChecked){
  this$static.defaultChecked = defaultChecked;
}

function $setHtmlFor(this$static, htmlFor){
  this$static.htmlFor = htmlFor;
}

function $setSelectedIndex(this$static, index_0){
  this$static.selectedIndex = index_0;
}

function $clinit_Style$Display(){
  $clinit_Style$Display = emptyMethod;
  NONE = new Style$Display$1;
  BLOCK = new Style$Display$2;
  INLINE = new Style$Display$3;
  INLINE_BLOCK = new Style$Display$4;
  INLINE_TABLE = new Style$Display$5;
  LIST_ITEM = new Style$Display$6;
  RUN_IN = new Style$Display$7;
  TABLE = new Style$Display$8;
  TABLE_CAPTION = new Style$Display$9;
  TABLE_COLUMN_GROUP = new Style$Display$10;
  TABLE_HEADER_GROUP = new Style$Display$11;
  TABLE_FOOTER_GROUP = new Style$Display$12;
  TABLE_ROW_GROUP = new Style$Display$13;
  TABLE_CELL = new Style$Display$14;
  TABLE_COLUMN = new Style$Display$15;
  TABLE_ROW = new Style$Display$16;
  INITIAL = new Style$Display$17;
  FLEX = new Style$Display$18;
  INLINE_FLEX = new Style$Display$19;
}

function Style$Display(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_1(){
  $clinit_Style$Display();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$Display_2_classLit, 1), $intern_3, 31, 0, [NONE, BLOCK, INLINE, INLINE_BLOCK, INLINE_TABLE, LIST_ITEM, RUN_IN, TABLE, TABLE_CAPTION, TABLE_COLUMN_GROUP, TABLE_HEADER_GROUP, TABLE_FOOTER_GROUP, TABLE_ROW_GROUP, TABLE_CELL, TABLE_COLUMN, TABLE_ROW, INITIAL, FLEX, INLINE_FLEX]);
}

defineClass(31, 10, $intern_10);
var BLOCK, FLEX, INITIAL, INLINE, INLINE_BLOCK, INLINE_FLEX, INLINE_TABLE, LIST_ITEM, NONE, RUN_IN, TABLE, TABLE_CAPTION, TABLE_CELL, TABLE_COLUMN, TABLE_COLUMN_GROUP, TABLE_FOOTER_GROUP, TABLE_HEADER_GROUP, TABLE_ROW, TABLE_ROW_GROUP;
var Lcom_google_gwt_dom_client_Style$Display_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display', 31, values_1);
function Style$Display$1(){
  Style$Display.call(this, 'NONE', 0);
}

defineClass(413, 31, $intern_10, Style$Display$1);
var Lcom_google_gwt_dom_client_Style$Display$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/1', 413, null);
function Style$Display$10(){
  Style$Display.call(this, 'TABLE_COLUMN_GROUP', 9);
}

defineClass(422, 31, $intern_10, Style$Display$10);
var Lcom_google_gwt_dom_client_Style$Display$10_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/10', 422, null);
function Style$Display$11(){
  Style$Display.call(this, 'TABLE_HEADER_GROUP', 10);
}

defineClass(423, 31, $intern_10, Style$Display$11);
var Lcom_google_gwt_dom_client_Style$Display$11_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/11', 423, null);
function Style$Display$12(){
  Style$Display.call(this, 'TABLE_FOOTER_GROUP', 11);
}

defineClass(424, 31, $intern_10, Style$Display$12);
var Lcom_google_gwt_dom_client_Style$Display$12_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/12', 424, null);
function Style$Display$13(){
  Style$Display.call(this, 'TABLE_ROW_GROUP', 12);
}

defineClass(425, 31, $intern_10, Style$Display$13);
var Lcom_google_gwt_dom_client_Style$Display$13_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/13', 425, null);
function Style$Display$14(){
  Style$Display.call(this, 'TABLE_CELL', 13);
}

defineClass(426, 31, $intern_10, Style$Display$14);
var Lcom_google_gwt_dom_client_Style$Display$14_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/14', 426, null);
function Style$Display$15(){
  Style$Display.call(this, 'TABLE_COLUMN', 14);
}

defineClass(427, 31, $intern_10, Style$Display$15);
var Lcom_google_gwt_dom_client_Style$Display$15_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/15', 427, null);
function Style$Display$16(){
  Style$Display.call(this, 'TABLE_ROW', 15);
}

defineClass(428, 31, $intern_10, Style$Display$16);
var Lcom_google_gwt_dom_client_Style$Display$16_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/16', 428, null);
function Style$Display$17(){
  Style$Display.call(this, 'INITIAL', 16);
}

defineClass(429, 31, $intern_10, Style$Display$17);
var Lcom_google_gwt_dom_client_Style$Display$17_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/17', 429, null);
function Style$Display$18(){
  Style$Display.call(this, 'FLEX', 17);
}

defineClass(430, 31, $intern_10, Style$Display$18);
var Lcom_google_gwt_dom_client_Style$Display$18_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/18', 430, null);
function Style$Display$19(){
  Style$Display.call(this, 'INLINE_FLEX', 18);
}

defineClass(431, 31, $intern_10, Style$Display$19);
var Lcom_google_gwt_dom_client_Style$Display$19_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/19', 431, null);
function Style$Display$2(){
  Style$Display.call(this, 'BLOCK', 1);
}

defineClass(414, 31, $intern_10, Style$Display$2);
var Lcom_google_gwt_dom_client_Style$Display$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/2', 414, null);
function Style$Display$3(){
  Style$Display.call(this, 'INLINE', 2);
}

defineClass(415, 31, $intern_10, Style$Display$3);
var Lcom_google_gwt_dom_client_Style$Display$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/3', 415, null);
function Style$Display$4(){
  Style$Display.call(this, 'INLINE_BLOCK', 3);
}

defineClass(416, 31, $intern_10, Style$Display$4);
var Lcom_google_gwt_dom_client_Style$Display$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/4', 416, null);
function Style$Display$5(){
  Style$Display.call(this, 'INLINE_TABLE', 4);
}

defineClass(417, 31, $intern_10, Style$Display$5);
var Lcom_google_gwt_dom_client_Style$Display$5_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/5', 417, null);
function Style$Display$6(){
  Style$Display.call(this, 'LIST_ITEM', 5);
}

defineClass(418, 31, $intern_10, Style$Display$6);
var Lcom_google_gwt_dom_client_Style$Display$6_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/6', 418, null);
function Style$Display$7(){
  Style$Display.call(this, 'RUN_IN', 6);
}

defineClass(419, 31, $intern_10, Style$Display$7);
var Lcom_google_gwt_dom_client_Style$Display$7_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/7', 419, null);
function Style$Display$8(){
  Style$Display.call(this, 'TABLE', 7);
}

defineClass(420, 31, $intern_10, Style$Display$8);
var Lcom_google_gwt_dom_client_Style$Display$8_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/8', 420, null);
function Style$Display$9(){
  Style$Display.call(this, 'TABLE_CAPTION', 8);
}

defineClass(421, 31, $intern_10, Style$Display$9);
var Lcom_google_gwt_dom_client_Style$Display$9_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Display/9', 421, null);
function $clinit_Style$Overflow(){
  $clinit_Style$Overflow = emptyMethod;
  VISIBLE = new Style$Overflow$1;
  HIDDEN_0 = new Style$Overflow$2;
  SCROLL = new Style$Overflow$3;
  AUTO = new Style$Overflow$4;
}

function Style$Overflow(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_2(){
  $clinit_Style$Overflow();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$Overflow_2_classLit, 1), $intern_3, 105, 0, [VISIBLE, HIDDEN_0, SCROLL, AUTO]);
}

defineClass(105, 10, $intern_11);
var AUTO, HIDDEN_0, SCROLL, VISIBLE;
var Lcom_google_gwt_dom_client_Style$Overflow_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Overflow', 105, values_2);
function Style$Overflow$1(){
  Style$Overflow.call(this, 'VISIBLE', 0);
}

defineClass(432, 105, $intern_11, Style$Overflow$1);
var Lcom_google_gwt_dom_client_Style$Overflow$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Overflow/1', 432, null);
function Style$Overflow$2(){
  Style$Overflow.call(this, 'HIDDEN', 1);
}

defineClass(433, 105, $intern_11, Style$Overflow$2);
var Lcom_google_gwt_dom_client_Style$Overflow$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Overflow/2', 433, null);
function Style$Overflow$3(){
  Style$Overflow.call(this, 'SCROLL', 2);
}

defineClass(434, 105, $intern_11, Style$Overflow$3);
var Lcom_google_gwt_dom_client_Style$Overflow$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Overflow/3', 434, null);
function Style$Overflow$4(){
  Style$Overflow.call(this, 'AUTO', 3);
}

defineClass(435, 105, $intern_11, Style$Overflow$4);
var Lcom_google_gwt_dom_client_Style$Overflow$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Overflow/4', 435, null);
function $clinit_Style$Position(){
  $clinit_Style$Position = emptyMethod;
  STATIC = new Style$Position$1;
  RELATIVE = new Style$Position$2;
  ABSOLUTE = new Style$Position$3;
  FIXED = new Style$Position$4;
}

function Style$Position(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_3(){
  $clinit_Style$Position();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$Position_2_classLit, 1), $intern_3, 106, 0, [STATIC, RELATIVE, ABSOLUTE, FIXED]);
}

defineClass(106, 10, $intern_12);
var ABSOLUTE, FIXED, RELATIVE, STATIC;
var Lcom_google_gwt_dom_client_Style$Position_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Position', 106, values_3);
function Style$Position$1(){
  Style$Position.call(this, 'STATIC', 0);
}

defineClass(436, 106, $intern_12, Style$Position$1);
var Lcom_google_gwt_dom_client_Style$Position$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Position/1', 436, null);
function Style$Position$2(){
  Style$Position.call(this, 'RELATIVE', 1);
}

defineClass(437, 106, $intern_12, Style$Position$2);
var Lcom_google_gwt_dom_client_Style$Position$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Position/2', 437, null);
function Style$Position$3(){
  Style$Position.call(this, 'ABSOLUTE', 2);
}

defineClass(438, 106, $intern_12, Style$Position$3);
var Lcom_google_gwt_dom_client_Style$Position$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Position/3', 438, null);
function Style$Position$4(){
  Style$Position.call(this, 'FIXED', 3);
}

defineClass(439, 106, $intern_12, Style$Position$4);
var Lcom_google_gwt_dom_client_Style$Position$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Position/4', 439, null);
function $clinit_Style$TextAlign(){
  $clinit_Style$TextAlign = emptyMethod;
  CENTER = new Style$TextAlign$1;
  JUSTIFY = new Style$TextAlign$2;
  LEFT = new Style$TextAlign$3;
  RIGHT = new Style$TextAlign$4;
}

function Style$TextAlign(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_4(){
  $clinit_Style$TextAlign();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$TextAlign_2_classLit, 1), $intern_3, 107, 0, [CENTER, JUSTIFY, LEFT, RIGHT]);
}

defineClass(107, 10, $intern_13);
var CENTER, JUSTIFY, LEFT, RIGHT;
var Lcom_google_gwt_dom_client_Style$TextAlign_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/TextAlign', 107, values_4);
function Style$TextAlign$1(){
  Style$TextAlign.call(this, 'CENTER', 0);
}

defineClass(440, 107, $intern_13, Style$TextAlign$1);
var Lcom_google_gwt_dom_client_Style$TextAlign$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/TextAlign/1', 440, null);
function Style$TextAlign$2(){
  Style$TextAlign.call(this, 'JUSTIFY', 1);
}

defineClass(441, 107, $intern_13, Style$TextAlign$2);
var Lcom_google_gwt_dom_client_Style$TextAlign$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/TextAlign/2', 441, null);
function Style$TextAlign$3(){
  Style$TextAlign.call(this, 'LEFT', 2);
}

defineClass(442, 107, $intern_13, Style$TextAlign$3);
var Lcom_google_gwt_dom_client_Style$TextAlign$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/TextAlign/3', 442, null);
function Style$TextAlign$4(){
  Style$TextAlign.call(this, 'RIGHT', 3);
}

defineClass(443, 107, $intern_13, Style$TextAlign$4);
var Lcom_google_gwt_dom_client_Style$TextAlign$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/TextAlign/4', 443, null);
function $clinit_Style$Unit(){
  $clinit_Style$Unit = emptyMethod;
  PX = new Style$Unit$1;
  PCT = new Style$Unit$2;
  EM = new Style$Unit$3;
  EX = new Style$Unit$4;
  PT = new Style$Unit$5;
  PC = new Style$Unit$6;
  IN = new Style$Unit$7;
  CM = new Style$Unit$8;
  MM = new Style$Unit$9;
}

function Style$Unit(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_5(){
  $clinit_Style$Unit();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$Unit_2_classLit, 1), $intern_3, 49, 0, [PX, PCT, EM, EX, PT, PC, IN, CM, MM]);
}

defineClass(49, 10, $intern_14);
var CM, EM, EX, IN, MM, PC, PCT, PT, PX;
var Lcom_google_gwt_dom_client_Style$Unit_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit', 49, values_5);
function Style$Unit$1(){
  Style$Unit.call(this, 'PX', 0);
}

defineClass(404, 49, $intern_14, Style$Unit$1);
_.getType = function getType(){
  return 'px';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/1', 404, null);
function Style$Unit$2(){
  Style$Unit.call(this, 'PCT', 1);
}

defineClass(405, 49, $intern_14, Style$Unit$2);
_.getType = function getType_0(){
  return '%';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/2', 405, null);
function Style$Unit$3(){
  Style$Unit.call(this, 'EM', 2);
}

defineClass(406, 49, $intern_14, Style$Unit$3);
_.getType = function getType_1(){
  return 'em';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/3', 406, null);
function Style$Unit$4(){
  Style$Unit.call(this, 'EX', 3);
}

defineClass(407, 49, $intern_14, Style$Unit$4);
_.getType = function getType_2(){
  return 'ex';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/4', 407, null);
function Style$Unit$5(){
  Style$Unit.call(this, 'PT', 4);
}

defineClass(408, 49, $intern_14, Style$Unit$5);
_.getType = function getType_3(){
  return 'pt';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$5_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/5', 408, null);
function Style$Unit$6(){
  Style$Unit.call(this, 'PC', 5);
}

defineClass(409, 49, $intern_14, Style$Unit$6);
_.getType = function getType_4(){
  return 'pc';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$6_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/6', 409, null);
function Style$Unit$7(){
  Style$Unit.call(this, 'IN', 6);
}

defineClass(410, 49, $intern_14, Style$Unit$7);
_.getType = function getType_5(){
  return 'in';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$7_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/7', 410, null);
function Style$Unit$8(){
  Style$Unit.call(this, 'CM', 7);
}

defineClass(411, 49, $intern_14, Style$Unit$8);
_.getType = function getType_6(){
  return 'cm';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$8_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/8', 411, null);
function Style$Unit$9(){
  Style$Unit.call(this, 'MM', 8);
}

defineClass(412, 49, $intern_14, Style$Unit$9);
_.getType = function getType_7(){
  return 'mm';
}
;
var Lcom_google_gwt_dom_client_Style$Unit$9_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Unit/9', 412, null);
function $clinit_Style$Visibility(){
  $clinit_Style$Visibility = emptyMethod;
  VISIBLE_0 = new Style$Visibility$1;
  HIDDEN_1 = new Style$Visibility$2;
}

function Style$Visibility(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_6(){
  $clinit_Style$Visibility();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$Visibility_2_classLit, 1), $intern_3, 143, 0, [VISIBLE_0, HIDDEN_1]);
}

defineClass(143, 10, $intern_15);
var HIDDEN_1, VISIBLE_0;
var Lcom_google_gwt_dom_client_Style$Visibility_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Visibility', 143, values_6);
function Style$Visibility$1(){
  Style$Visibility.call(this, 'VISIBLE', 0);
}

defineClass(444, 143, $intern_15, Style$Visibility$1);
var Lcom_google_gwt_dom_client_Style$Visibility$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Visibility/1', 444, null);
function Style$Visibility$2(){
  Style$Visibility.call(this, 'HIDDEN', 1);
}

defineClass(445, 143, $intern_15, Style$Visibility$2);
var Lcom_google_gwt_dom_client_Style$Visibility$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/Visibility/2', 445, null);
function $clinit_Style$WhiteSpace(){
  $clinit_Style$WhiteSpace = emptyMethod;
  NORMAL = new Style$WhiteSpace$1;
  NOWRAP = new Style$WhiteSpace$2;
  PRE = new Style$WhiteSpace$3;
  PRE_LINE = new Style$WhiteSpace$4;
  PRE_WRAP = new Style$WhiteSpace$5;
}

function Style$WhiteSpace(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_7(){
  $clinit_Style$WhiteSpace();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_dom_client_Style$WhiteSpace_2_classLit, 1), $intern_3, 94, 0, [NORMAL, NOWRAP, PRE, PRE_LINE, PRE_WRAP]);
}

defineClass(94, 10, $intern_16);
var NORMAL, NOWRAP, PRE, PRE_LINE, PRE_WRAP;
var Lcom_google_gwt_dom_client_Style$WhiteSpace_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace', 94, values_7);
function Style$WhiteSpace$1(){
  Style$WhiteSpace.call(this, 'NORMAL', 0);
}

defineClass(446, 94, $intern_16, Style$WhiteSpace$1);
var Lcom_google_gwt_dom_client_Style$WhiteSpace$1_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace/1', 446, null);
function Style$WhiteSpace$2(){
  Style$WhiteSpace.call(this, 'NOWRAP', 1);
}

defineClass(447, 94, $intern_16, Style$WhiteSpace$2);
var Lcom_google_gwt_dom_client_Style$WhiteSpace$2_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace/2', 447, null);
function Style$WhiteSpace$3(){
  Style$WhiteSpace.call(this, 'PRE', 2);
}

defineClass(448, 94, $intern_16, Style$WhiteSpace$3);
var Lcom_google_gwt_dom_client_Style$WhiteSpace$3_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace/3', 448, null);
function Style$WhiteSpace$4(){
  Style$WhiteSpace.call(this, 'PRE_LINE', 3);
}

defineClass(449, 94, $intern_16, Style$WhiteSpace$4);
var Lcom_google_gwt_dom_client_Style$WhiteSpace$4_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace/4', 449, null);
function Style$WhiteSpace$5(){
  Style$WhiteSpace.call(this, 'PRE_WRAP', 4);
}

defineClass(450, 94, $intern_16, Style$WhiteSpace$5);
var Lcom_google_gwt_dom_client_Style$WhiteSpace$5_2_classLit = createForEnum('com.google.gwt.dom.client', 'Style/WhiteSpace/5', 450, null);
function $getRelativeX(this$static, target){
  return ((this$static.clientX || 0) | 0) - $getAbsoluteLeft(target) + $getScrollLeft(target) + ($wnd.pageXOffset | 0);
}

defineClass(650, 1, {});
_.toString_0 = function toString_4(){
  return 'An event type';
}
;
var Lcom_google_web_bindery_event_shared_Event_2_classLit = createForClass('com.google.web.bindery.event.shared', 'Event', 650);
function $overrideSource(this$static, source){
  this$static.source = source;
}

defineClass(651, 650, {});
_.revive = function revive(){
  this.dead = false;
  this.source = null;
}
;
_.dead = false;
var Lcom_google_gwt_event_shared_GwtEvent_2_classLit = createForClass('com.google.gwt.event.shared', 'GwtEvent', 651);
function $setNativeEvent(this$static, nativeEvent){
  this$static.nativeEvent = nativeEvent;
}

function $setRelativeElement(this$static, relativeElem){
  this$static.relativeElem = relativeElem;
}

function fireNativeEvent(nativeEvent, handlerSource, relativeElem){
  var currentNative, currentRelativeElem, type_0, type$iterator, types;
  if (registered) {
    types = castTo($unsafeGet(registered, nativeEvent.type), 121);
    if (types) {
      for (type$iterator = types.iterator(); type$iterator.hasNext_0();) {
        type_0 = castTo(type$iterator.next_0(), 52);
        currentNative = type_0.flyweight.nativeEvent;
        currentRelativeElem = type_0.flyweight.relativeElem;
        $setNativeEvent(type_0.flyweight, nativeEvent);
        $setRelativeElement(type_0.flyweight, relativeElem);
        $fireEvent(handlerSource, type_0.flyweight);
        $setNativeEvent(type_0.flyweight, currentNative);
        $setRelativeElement(type_0.flyweight, currentRelativeElem);
      }
    }
  }
}

defineClass(657, 651, {});
_.getAssociatedType = function getAssociatedType(){
  return this.getAssociatedType_0();
}
;
var registered;
var Lcom_google_gwt_event_dom_client_DomEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'DomEvent', 657);
function $clinit_BlurEvent(){
  $clinit_BlurEvent = emptyMethod;
  TYPE = new DomEvent$Type('blur', new BlurEvent);
}

function $dispatch(handler){
  !handler.this$01.shownChildMenu && $selectItem(handler.this$01, null);
}

function BlurEvent(){
}

defineClass(511, 657, {}, BlurEvent);
_.dispatch = function dispatch(handler){
  $dispatch(castTo(handler, 669));
}
;
_.getAssociatedType_0 = function getAssociatedType_0(){
  return TYPE;
}
;
var TYPE;
var Lcom_google_gwt_event_dom_client_BlurEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'BlurEvent', 511);
function $clinit_ChangeEvent(){
  $clinit_ChangeEvent = emptyMethod;
  TYPE_0 = new DomEvent$Type('change', new ChangeEvent);
}

function ChangeEvent(){
}

defineClass(499, 657, {}, ChangeEvent);
_.dispatch = function dispatch_0(handler){
  castTo(handler, 628).onChange(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_1(){
  return TYPE_0;
}
;
var TYPE_0;
var Lcom_google_gwt_event_dom_client_ChangeEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'ChangeEvent', 499);
defineClass(658, 657, {});
var Lcom_google_gwt_event_dom_client_HumanInputEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'HumanInputEvent', 658);
function $getX(this$static){
  var e, relativeElem;
  relativeElem = this$static.relativeElem;
  if (relativeElem) {
    return e = this$static.nativeEvent , ((e.clientX || 0) | 0) - $getAbsoluteLeft(relativeElem) + $getScrollLeft(relativeElem) + ($wnd.pageXOffset | 0);
  }
  return (this$static.nativeEvent.clientX || 0) | 0;
}

function $getY(this$static){
  var e, relativeElem;
  relativeElem = this$static.relativeElem;
  if (relativeElem) {
    return e = this$static.nativeEvent , ((e.clientY || 0) | 0) - ($getBoundingClientRectTop(relativeElem) + $wnd.pageYOffset | 0) + ((relativeElem.scrollTop || 0) | 0) + ($wnd.pageYOffset | 0);
  }
  return (this$static.nativeEvent.clientY || 0) | 0;
}

defineClass(659, 658, {});
var Lcom_google_gwt_event_dom_client_MouseEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseEvent', 659);
function $clinit_ClickEvent(){
  $clinit_ClickEvent = emptyMethod;
  TYPE_1 = new DomEvent$Type('click', new ClickEvent);
}

function ClickEvent(){
}

defineClass(469, 659, {}, ClickEvent);
_.dispatch = function dispatch_1(handler){
  castTo(handler, 47).onClick(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_2(){
  return TYPE_1;
}
;
var TYPE_1;
var Lcom_google_gwt_event_dom_client_ClickEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'ClickEvent', 469);
function $clinit_ContextMenuEvent(){
  $clinit_ContextMenuEvent = emptyMethod;
  TYPE_2 = new DomEvent$Type('contextmenu', new ContextMenuEvent);
}

function $dispatch_0(this$static, handler){
  !!this$static.nativeEvent && (this$static.nativeEvent.preventDefault() , undefined);
  handler.menuX = (this$static.nativeEvent.clientX || 0) | 0;
  handler.menuY = (this$static.nativeEvent.clientY || 0) | 0;
  $doPopupMenu(handler);
}

function ContextMenuEvent(){
}

defineClass(468, 657, {}, ContextMenuEvent);
_.dispatch = function dispatch_2(handler){
  $dispatch_0(this, castTo(handler, 668));
}
;
_.getAssociatedType_0 = function getAssociatedType_3(){
  return TYPE_2;
}
;
var TYPE_2;
var Lcom_google_gwt_event_dom_client_ContextMenuEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'ContextMenuEvent', 468);
defineClass(366, 1, {});
_.hashCode_0 = function hashCode_2(){
  return this.index_0;
}
;
_.toString_0 = function toString_5(){
  return 'Event type';
}
;
_.index_0 = 0;
var nextHashCode = 0;
var Lcom_google_web_bindery_event_shared_Event$Type_2_classLit = createForClass('com.google.web.bindery.event.shared', 'Event/Type', 366);
function GwtEvent$Type(){
  this.index_0 = ++nextHashCode;
}

defineClass(124, 366, {}, GwtEvent$Type);
var Lcom_google_gwt_event_shared_GwtEvent$Type_2_classLit = createForClass('com.google.gwt.event.shared', 'GwtEvent/Type', 124);
function DomEvent$Type(eventName, flyweight){
  var types;
  GwtEvent$Type.call(this);
  this.flyweight = flyweight;
  !registered && (registered = new PrivateMap);
  types = castTo($unsafeGet(registered, eventName), 121);
  if (!types) {
    types = new ArrayList;
    $unsafePut(registered, eventName, types);
  }
  types.add_1(this);
  this.name_0 = eventName;
}

defineClass(52, 124, {52:1}, DomEvent$Type);
var Lcom_google_gwt_event_dom_client_DomEvent$Type_2_classLit = createForClass('com.google.gwt.event.dom.client', 'DomEvent/Type', 52);
function $clinit_DoubleClickEvent(){
  $clinit_DoubleClickEvent = emptyMethod;
  TYPE_3 = new DomEvent$Type('dblclick', new DoubleClickEvent);
}

function $dispatch_1(this$static, handler){
  !!this$static.nativeEvent && (this$static.nativeEvent.preventDefault() , undefined);
  !!handler.mouseElm && !instanceOf(handler.mouseElm, 90) && $doEdit(handler, handler.mouseElm);
}

function DoubleClickEvent(){
}

defineClass(479, 659, {}, DoubleClickEvent);
_.dispatch = function dispatch_3(handler){
  $dispatch_1(this, castTo(handler, 667));
}
;
_.getAssociatedType_0 = function getAssociatedType_4(){
  return TYPE_3;
}
;
var TYPE_3;
var Lcom_google_gwt_event_dom_client_DoubleClickEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'DoubleClickEvent', 479);
function maybeSwapArrowKeysForRtl(code_0, isRtl){
  isRtl && (code_0 == 39?(code_0 = 37):code_0 == 37 && (code_0 = 39));
  return code_0;
}

function $clinit_MouseDownEvent(){
  $clinit_MouseDownEvent = emptyMethod;
  TYPE_4 = new DomEvent$Type('mousedown', new MouseDownEvent);
}

function MouseDownEvent(){
}

defineClass(475, 659, {}, MouseDownEvent);
_.dispatch = function dispatch_4(handler){
  castTo(handler, 226).onMouseDown(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_5(){
  return TYPE_4;
}
;
var TYPE_4;
var Lcom_google_gwt_event_dom_client_MouseDownEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseDownEvent', 475);
function $clinit_MouseMoveEvent(){
  $clinit_MouseMoveEvent = emptyMethod;
  TYPE_5 = new DomEvent$Type('mousemove', new MouseMoveEvent);
}

function MouseMoveEvent(){
}

defineClass(476, 659, {}, MouseMoveEvent);
_.dispatch = function dispatch_5(handler){
  castTo(handler, 321).onMouseMove(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_6(){
  return TYPE_5;
}
;
var TYPE_5;
var Lcom_google_gwt_event_dom_client_MouseMoveEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseMoveEvent', 476);
function $clinit_MouseOutEvent(){
  $clinit_MouseOutEvent = emptyMethod;
  TYPE_6 = new DomEvent$Type('mouseout', new MouseOutEvent);
}

function MouseOutEvent(){
}

defineClass(477, 659, {}, MouseOutEvent);
_.dispatch = function dispatch_6(handler){
  castTo(handler, 227).onMouseOut(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_7(){
  return TYPE_6;
}
;
var TYPE_6;
var Lcom_google_gwt_event_dom_client_MouseOutEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseOutEvent', 477);
function $clinit_MouseOverEvent(){
  $clinit_MouseOverEvent = emptyMethod;
  TYPE_7 = new DomEvent$Type('mouseover', new MouseOverEvent);
}

function MouseOverEvent(){
}

defineClass(500, 659, {}, MouseOverEvent);
_.dispatch = function dispatch_7(handler){
  castTo(handler, 627).onMouseOver(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_8(){
  return TYPE_7;
}
;
var TYPE_7;
var Lcom_google_gwt_event_dom_client_MouseOverEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseOverEvent', 500);
function $clinit_MouseUpEvent(){
  $clinit_MouseUpEvent = emptyMethod;
  TYPE_8 = new DomEvent$Type('mouseup', new MouseUpEvent);
}

function MouseUpEvent(){
}

defineClass(478, 659, {}, MouseUpEvent);
_.dispatch = function dispatch_8(handler){
  castTo(handler, 322).onMouseUp(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_9(){
  return TYPE_8;
}
;
var TYPE_8;
var Lcom_google_gwt_event_dom_client_MouseUpEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseUpEvent', 478);
function $clinit_MouseWheelEvent(){
  $clinit_MouseWheelEvent = emptyMethod;
  TYPE_9 = new DomEvent$Type('mousewheel', new MouseWheelEvent_0);
  new DomEvent$Type('DOMMouseScroll', new MouseWheelEvent_0);
}

function MouseWheelEvent_0(){
}

defineClass(250, 659, {}, MouseWheelEvent_0);
_.dispatch = function dispatch_9(handler){
  castTo(handler, 152).onMouseWheel(this);
}
;
_.getAssociatedType_0 = function getAssociatedType_10(){
  return TYPE_9;
}
;
var TYPE_9;
var Lcom_google_gwt_event_dom_client_MouseWheelEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'MouseWheelEvent', 250);
function $unsafeGet(this$static, key){
  return this$static.map_0[key];
}

function $unsafePut(this$static, key, value_0){
  this$static.map_0[key] = value_0;
}

function PrivateMap(){
  this.map_0 = {};
}

defineClass(505, 1, {}, PrivateMap);
var Lcom_google_gwt_event_dom_client_PrivateMap_2_classLit = createForClass('com.google.gwt.event.dom.client', 'PrivateMap', 505);
defineClass(661, 658, {});
var Lcom_google_gwt_event_dom_client_TouchEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'TouchEvent', 661);
function $clinit_TouchCancelEvent(){
  $clinit_TouchCancelEvent = emptyMethod;
  TYPE_10 = new DomEvent$Type('touchcancel', new TouchCancelEvent);
}

function $dispatch_2(this$static, handler){
  !!this$static.nativeEvent && (this$static.nativeEvent.preventDefault() , undefined);
  handler.dragging = false;
}

function TouchCancelEvent(){
}

defineClass(504, 661, {}, TouchCancelEvent);
_.dispatch = function dispatch_10(handler){
  $dispatch_2(this, castTo(handler, 671));
}
;
_.getAssociatedType_0 = function getAssociatedType_11(){
  return TYPE_10;
}
;
var TYPE_10;
var Lcom_google_gwt_event_dom_client_TouchCancelEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'TouchCancelEvent', 504);
function $clinit_TouchEndEvent(){
  $clinit_TouchEndEvent = emptyMethod;
  TYPE_11 = new DomEvent$Type('touchend', new TouchEndEvent);
}

function $dispatch_3(this$static, handler){
  $onTouchEnd(handler, this$static);
}

function TouchEndEvent(){
}

defineClass(503, 661, {}, TouchEndEvent);
_.dispatch = function dispatch_11(handler){
  $dispatch_3(this, castTo(handler, 672));
}
;
_.getAssociatedType_0 = function getAssociatedType_12(){
  return TYPE_11;
}
;
var TYPE_11;
var Lcom_google_gwt_event_dom_client_TouchEndEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'TouchEndEvent', 503);
function $clinit_TouchMoveEvent(){
  $clinit_TouchMoveEvent = emptyMethod;
  TYPE_12 = new DomEvent$Type('touchmove', new TouchMoveEvent);
}

function $dispatch_4(this$static, handler){
  var t;
  !!this$static.nativeEvent && (this$static.nativeEvent.preventDefault() , undefined);
  t = this$static.nativeEvent.touches[0];
  $doMouseMove(handler, $getRelativeX(t, ($clinit_DOM() , handler.element)));
}

function TouchMoveEvent(){
}

defineClass(502, 661, {}, TouchMoveEvent);
_.dispatch = function dispatch_12(handler){
  $dispatch_4(this, castTo(handler, 673));
}
;
_.getAssociatedType_0 = function getAssociatedType_13(){
  return TYPE_12;
}
;
var TYPE_12;
var Lcom_google_gwt_event_dom_client_TouchMoveEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'TouchMoveEvent', 502);
function $clinit_TouchStartEvent(){
  $clinit_TouchStartEvent = emptyMethod;
  TYPE_13 = new DomEvent$Type('touchstart', new TouchStartEvent);
}

function $dispatch_5(this$static, handler){
  var t;
  !!this$static.nativeEvent && (this$static.nativeEvent.preventDefault() , undefined);
  handler.dragging = false;
  t = this$static.nativeEvent.touches[0];
  $doMouseDown(handler, $getRelativeX(t, ($clinit_DOM() , handler.element)), false);
}

function TouchStartEvent(){
}

defineClass(501, 661, {}, TouchStartEvent);
_.dispatch = function dispatch_13(handler){
  $dispatch_5(this, castTo(handler, 670));
}
;
_.getAssociatedType_0 = function getAssociatedType_14(){
  return TYPE_13;
}
;
var TYPE_13;
var Lcom_google_gwt_event_dom_client_TouchStartEvent_2_classLit = createForClass('com.google.gwt.event.dom.client', 'TouchStartEvent', 501);
function CloseEvent_0(autoClosed){
  this.autoClosed = autoClosed;
}

function fire_0(source, autoClosed){
  var event_0;
  if (TYPE_14) {
    event_0 = new CloseEvent_0(autoClosed);
    source.fireEvent(event_0);
  }
}

defineClass(573, 651, {}, CloseEvent_0);
_.dispatch = function dispatch_14(handler){
  castTo(handler, 629).onClose(this);
}
;
_.getAssociatedType = function getAssociatedType_15(){
  return TYPE_14;
}
;
_.autoClosed = false;
var TYPE_14;
var Lcom_google_gwt_event_logical_shared_CloseEvent_2_classLit = createForClass('com.google.gwt.event.logical.shared', 'CloseEvent', 573);
function ResizeEvent(width_0){
  this.width_0 = width_0;
}

function fire_1(source, width_0){
  var event_0;
  if (TYPE_15) {
    event_0 = new ResizeEvent(width_0);
    $fireEvent_0(source, event_0);
  }
}

defineClass(472, 651, {}, ResizeEvent);
_.dispatch = function dispatch_15(handler){
  castTo(handler, 203).onResize(this);
}
;
_.getAssociatedType = function getAssociatedType_16(){
  return TYPE_15;
}
;
_.width_0 = 0;
var TYPE_15;
var Lcom_google_gwt_event_logical_shared_ResizeEvent_2_classLit = createForClass('com.google.gwt.event.logical.shared', 'ResizeEvent', 472);
function ValueChangeEvent(){
}

function fire_2(source){
  var event_0;
  if (TYPE_16) {
    event_0 = new ValueChangeEvent;
    source.fireEvent(event_0);
  }
}

defineClass(615, 651, {}, ValueChangeEvent);
_.dispatch = function dispatch_16(handler){
  castTo(handler, 626).onValueChange(this);
}
;
_.getAssociatedType = function getAssociatedType_17(){
  return TYPE_16;
}
;
var TYPE_16;
var Lcom_google_gwt_event_logical_shared_ValueChangeEvent_2_classLit = createForClass('com.google.gwt.event.logical.shared', 'ValueChangeEvent', 615);
function $addHandler_0(this$static, type_0, handler){
  return new LegacyHandlerWrapper($doAdd(this$static.eventBus, type_0, handler));
}

function $fireEvent_0(this$static, event_0){
  var e, oldSource;
  !event_0.dead || event_0.revive();
  oldSource = event_0.source;
  $overrideSource(event_0, this$static.source);
  try {
    $doFire(this$static.eventBus, event_0);
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 141)) {
      e = $e0;
      throw toJs(new UmbrellaException_0(e.causes));
    }
     else 
      throw toJs($e0);
  }
   finally {
    oldSource == null?(event_0.dead = true , event_0.source = null):(event_0.source = oldSource);
  }
}

function $isEventHandled(this$static, e){
  return $isEventHandled_0(this$static.eventBus, e);
}

function HandlerManager(source){
  HandlerManager_0.call(this, source, false);
}

function HandlerManager_0(source, fireInReverseOrder){
  this.eventBus = new HandlerManager$Bus(fireInReverseOrder);
  this.source = source;
}

defineClass(140, 1, {23:1}, HandlerManager, HandlerManager_0);
_.fireEvent = function fireEvent_0(event_0){
  $fireEvent_0(this, event_0);
}
;
var Lcom_google_gwt_event_shared_HandlerManager_2_classLit = createForClass('com.google.gwt.event.shared', 'HandlerManager', 140);
defineClass(652, 1, {});
var Lcom_google_web_bindery_event_shared_EventBus_2_classLit = createForClass('com.google.web.bindery.event.shared', 'EventBus', 652);
function $defer(this$static, command){
  !this$static.deferredDeltas && (this$static.deferredDeltas = new ArrayList);
  $add_8(this$static.deferredDeltas, command);
}

function $doAdd(this$static, type_0, handler){
  var l_0;
  if (!type_0) {
    throw toJs(new NullPointerException_0('Cannot add a handler with a null type'));
  }
  if (!handler) {
    throw toJs(new NullPointerException_0('Cannot add a null handler'));
  }
  this$static.firingDepth > 0?$defer(this$static, new SimpleEventBus$2(this$static, type_0, handler)):(l_0 = $ensureHandlerList(this$static, type_0, null) , l_0.add_1(handler));
  return new SimpleEventBus$1(this$static, type_0, handler);
}

function $doAddNow(this$static, type_0, source, handler){
  var l_0;
  l_0 = $ensureHandlerList(this$static, type_0, source);
  l_0.add_1(handler);
}

function $doFire(this$static, event_0){
  var causes, directHandlers, e, handler, handlers, it;
  if (!event_0) {
    throw toJs(new NullPointerException_0('Cannot fire null event'));
  }
  try {
    ++this$static.firingDepth;
    handlers = (directHandlers = $getHandlerList(this$static, event_0.getAssociatedType(), null) , directHandlers);
    causes = null;
    it = this$static.isReverseOrder?handlers.listIterator_0(handlers.size_1()):handlers.listIterator();
    while (this$static.isReverseOrder?it.hasPrevious():it.hasNext_0()) {
      handler = this$static.isReverseOrder?it.previous():it.next_0();
      try {
        event_0.dispatch(castTo(handler, 32));
      }
       catch ($e0) {
        $e0 = toJava($e0);
        if (instanceOf($e0, 22)) {
          e = $e0;
          !causes && (causes = new HashSet);
          $put(causes.map_0, e, causes);
        }
         else 
          throw toJs($e0);
      }
    }
    if (causes) {
      throw toJs(new UmbrellaException(causes));
    }
  }
   finally {
    --this$static.firingDepth;
    this$static.firingDepth == 0 && $handleQueuedAddsAndRemoves(this$static);
  }
}

function $doRemoveNow(this$static, type_0, source, handler){
  var l_0, removed, sourceMap;
  l_0 = $getHandlerList(this$static, type_0, source);
  removed = l_0.remove_1(handler);
  removed && l_0.isEmpty() && (sourceMap = castTo($get_0(this$static.map_0, type_0), 173) , castTo($remove_12(sourceMap.hashCodeMap, source), 121) , sourceMap.hashCodeMap.size_0 + sourceMap.stringMap.size_0 == 0 && $remove_6(this$static.map_0, type_0) , undefined);
}

function $ensureHandlerList(this$static, type_0, source){
  var handlers, sourceMap;
  sourceMap = castTo($get_0(this$static.map_0, type_0), 173);
  if (!sourceMap) {
    sourceMap = new HashMap;
    $put(this$static.map_0, type_0, sourceMap);
  }
  handlers = castTo(getEntryValueOrNull($getEntry(sourceMap.hashCodeMap, source)), 121);
  if (!handlers) {
    handlers = new ArrayList;
    $put_0(sourceMap.hashCodeMap, source, handlers);
  }
  return handlers;
}

function $getHandlerList(this$static, type_0, source){
  var handlers, sourceMap;
  sourceMap = castTo($get_0(this$static.map_0, type_0), 173);
  if (!sourceMap) {
    return $clinit_Collections() , $clinit_Collections() , EMPTY_LIST;
  }
  handlers = castTo(getEntryValueOrNull($getEntry(sourceMap.hashCodeMap, source)), 121);
  if (!handlers) {
    return $clinit_Collections() , $clinit_Collections() , EMPTY_LIST;
  }
  return handlers;
}

function $handleQueuedAddsAndRemoves(this$static){
  var c, c$iterator;
  if (this$static.deferredDeltas) {
    try {
      for (c$iterator = new ArrayList$1(this$static.deferredDeltas); c$iterator.i < c$iterator.this$01.array.length;) {
        c = castTo($next_2(c$iterator), 625);
        c.execute_0();
      }
    }
     finally {
      this$static.deferredDeltas = null;
    }
  }
}

function $isEventHandled_0(this$static, eventKey){
  return $containsKey(this$static.map_0, eventKey);
}

defineClass(368, 652, {});
_.firingDepth = 0;
_.isReverseOrder = false;
var Lcom_google_web_bindery_event_shared_SimpleEventBus_2_classLit = createForClass('com.google.web.bindery.event.shared', 'SimpleEventBus', 368);
function $doRemove(this$static, type_0, source, handler){
  this$static.firingDepth > 0?$defer(this$static, new SimpleEventBus$3(this$static, type_0, source, handler)):$doRemoveNow(this$static, type_0, source, handler);
}

function HandlerManager$Bus(fireInReverseOrder){
  this.map_0 = new HashMap;
  this.isReverseOrder = fireInReverseOrder;
}

defineClass(369, 368, {}, HandlerManager$Bus);
var Lcom_google_gwt_event_shared_HandlerManager$Bus_2_classLit = createForClass('com.google.gwt.event.shared', 'HandlerManager/Bus', 369);
function LegacyHandlerWrapper(real){
  this.real = real;
}

defineClass(506, 1, {}, LegacyHandlerWrapper);
var Lcom_google_gwt_event_shared_LegacyHandlerWrapper_2_classLit = createForClass('com.google.gwt.event.shared', 'LegacyHandlerWrapper', 506);
function UmbrellaException(causes){
  var cause, cause$iterator, i;
  RuntimeException_1.call(this, makeMessage(causes), causes.isEmpty()?null:castTo(causes.iterator().next_0(), 22));
  this.causes = causes;
  i = 0;
  for (cause$iterator = causes.iterator(); cause$iterator.hasNext_0();) {
    cause = castTo(cause$iterator.next_0(), 22);
    if (i++ == 0) {
      continue;
    }
    $addSuppressed(this, cause);
  }
}

function makeMessage(causes){
  var b, count, first, t, t$iterator;
  count = causes.size_1();
  if (count == 0) {
    return null;
  }
  b = new StringBuilder_1(count == 1?'Exception caught: ':count + ' exceptions caught: ');
  first = true;
  for (t$iterator = causes.iterator(); t$iterator.hasNext_0();) {
    t = castTo(t$iterator.next_0(), 22);
    first?(first = false):(b.string += '; ' , b);
    $append_2(b, t.getMessage());
  }
  return b.string;
}

defineClass(141, 51, $intern_17, UmbrellaException);
var Lcom_google_web_bindery_event_shared_UmbrellaException_2_classLit = createForClass('com.google.web.bindery.event.shared', 'UmbrellaException', 141);
function UmbrellaException_0(causes){
  UmbrellaException.call(this, causes);
}

defineClass(243, 141, $intern_17, UmbrellaException_0);
var Lcom_google_gwt_event_shared_UmbrellaException_2_classLit = createForClass('com.google.gwt.event.shared', 'UmbrellaException', 243);
function $cancel_1(this$static){
  var xhr;
  if (!this$static.xmlHttpRequest) {
    return;
  }
  $cancel_0(this$static.timer);
  xhr = this$static.xmlHttpRequest;
  this$static.xmlHttpRequest = null;
  $clearOnReadyStateChange(xhr);
  xhr.abort();
}

function $fireOnResponseReceived(this$static, callback){
  var response, xhr;
  if (!this$static.xmlHttpRequest) {
    return;
  }
  $cancel_0(this$static.timer);
  xhr = this$static.xmlHttpRequest;
  this$static.xmlHttpRequest = null;
  response = new Request$RequestImplIE8And9$1(xhr);
  callback.onResponseReceived(this$static, response);
}

function $fireOnTimeout(this$static){
  if (!this$static.xmlHttpRequest) {
    return;
  }
  $cancel_1(this$static);
  this$static.callback.onError(this$static, new RequestTimeoutException(this$static.timeoutMillis));
}

function Request_0(xmlHttpRequest, timeoutMillis, callback){
  this.timer = new Request$1(this);
  if (!xmlHttpRequest) {
    throw toJs(new NullPointerException);
  }
  if (timeoutMillis < 0) {
    throw toJs(new IllegalArgumentException);
  }
  this.callback = callback;
  this.timeoutMillis = timeoutMillis;
  this.xmlHttpRequest = xmlHttpRequest;
  timeoutMillis > 0 && $schedule(this.timer, timeoutMillis);
}

defineClass(344, 1, {}, Request_0);
_.timeoutMillis = 0;
var Lcom_google_gwt_http_client_Request_2_classLit = createForClass('com.google.gwt.http.client', 'Request', 344);
function Request$1(this$0){
  this.this$01 = this$0;
  Timer.call(this);
}

defineClass(347, 178, {}, Request$1);
_.run = function run_0(){
  $fireOnTimeout(this.this$01);
}
;
var Lcom_google_gwt_http_client_Request$1_2_classLit = createForClass('com.google.gwt.http.client', 'Request/1', 347);
defineClass(648, 1, {});
var Lcom_google_gwt_http_client_Response_2_classLit = createForClass('com.google.gwt.http.client', 'Response', 648);
defineClass(345, 648, {});
var Lcom_google_gwt_http_client_ResponseImpl_2_classLit = createForClass('com.google.gwt.http.client', 'ResponseImpl', 345);
function Request$RequestImplIE8And9$1($anonymous0){
  this.xmlHttpRequest = $anonymous0;
}

defineClass(346, 345, {}, Request$RequestImplIE8And9$1);
var Lcom_google_gwt_http_client_Request$RequestImplIE8And9$1_2_classLit = createForClass('com.google.gwt.http.client', 'Request/RequestImplIE8And9/1', 346);
function $clinit_RequestBuilder(){
  $clinit_RequestBuilder = emptyMethod;
  new RequestBuilder$Method('DELETE');
  GET = new RequestBuilder$Method('GET');
  new RequestBuilder$Method('HEAD');
  new RequestBuilder$Method('POST');
  new RequestBuilder$Method('PUT');
}

function $doSend(this$static, callback){
  var e, request, requestPermissionException, xmlHttpRequest;
  xmlHttpRequest = new $wnd.XMLHttpRequest;
  try {
    $open(xmlHttpRequest, this$static.httpMethod, this$static.url_0);
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 131)) {
      e = $e0;
      requestPermissionException = new RequestPermissionException(this$static.url_0);
      $initCause(requestPermissionException, new RequestException(e.getMessage()));
      throw toJs(requestPermissionException);
    }
     else 
      throw toJs($e0);
  }
  xmlHttpRequest.setRequestHeader('Content-Type', 'text/plain; charset=utf-8');
  this$static.includeCredentials && (xmlHttpRequest.withCredentials = true , undefined);
  request = new Request_0(xmlHttpRequest, this$static.timeoutMillis, callback);
  $setOnReadyStateChange(xmlHttpRequest, new RequestBuilder$1(request, callback));
  try {
    xmlHttpRequest.send(null);
  }
   catch ($e1) {
    $e1 = toJava($e1);
    if (instanceOf($e1, 131)) {
      e = $e1;
      throw toJs(new RequestException(e.getMessage()));
    }
     else 
      throw toJs($e1);
  }
  return request;
}

function $sendRequest(this$static, callback){
  throwIfNull('callback', callback);
  return $doSend(this$static, callback);
}

function RequestBuilder(httpMethod, url_0){
  $clinit_RequestBuilder();
  RequestBuilder_0.call(this, !httpMethod?null:httpMethod.name_0, url_0);
}

function RequestBuilder_0(httpMethod, url_0){
  throwIfEmptyOrNull('httpMethod', httpMethod);
  throwIfEmptyOrNull('url', url_0);
  this.httpMethod = httpMethod;
  this.url_0 = url_0;
}

defineClass(155, 1, {}, RequestBuilder);
_.includeCredentials = false;
_.timeoutMillis = 0;
var GET;
var Lcom_google_gwt_http_client_RequestBuilder_2_classLit = createForClass('com.google.gwt.http.client', 'RequestBuilder', 155);
function RequestBuilder$1(val$request, val$callback){
  this.val$request2 = val$request;
  this.val$callback3 = val$callback;
}

defineClass(343, 1, {}, RequestBuilder$1);
_.onReadyStateChange = function onReadyStateChange(xhr){
  if (xhr.readyState == 4) {
    $clearOnReadyStateChange(xhr);
    $fireOnResponseReceived(this.val$request2, this.val$callback3);
  }
}
;
var Lcom_google_gwt_http_client_RequestBuilder$1_2_classLit = createForClass('com.google.gwt.http.client', 'RequestBuilder/1', 343);
function RequestBuilder$Method(name_0){
  this.name_0 = name_0;
}

defineClass(156, 1, {}, RequestBuilder$Method);
_.toString_0 = function toString_6(){
  return this.name_0;
}
;
var Lcom_google_gwt_http_client_RequestBuilder$Method_2_classLit = createForClass('com.google.gwt.http.client', 'RequestBuilder/Method', 156);
function RequestException(message){
  Exception.call(this, message);
}

defineClass(97, 14, $intern_18, RequestException);
var Lcom_google_gwt_http_client_RequestException_2_classLit = createForClass('com.google.gwt.http.client', 'RequestException', 97);
function RequestPermissionException(url_0){
  RequestException.call(this, 'The URL ' + url_0 + ' is invalid or violates the same-origin security restriction');
}

defineClass(474, 97, $intern_18, RequestPermissionException);
var Lcom_google_gwt_http_client_RequestPermissionException_2_classLit = createForClass('com.google.gwt.http.client', 'RequestPermissionException', 474);
function RequestTimeoutException(timeoutMillis){
  RequestException.call(this, 'A request timeout has expired after ' + timeoutMillis + ' ms');
}

defineClass(601, 97, $intern_18, RequestTimeoutException);
var Lcom_google_gwt_http_client_RequestTimeoutException_2_classLit = createForClass('com.google.gwt.http.client', 'RequestTimeoutException', 601);
function throwIfEmptyOrNull(name_0, value_0){
  throwIfNull(name_0, value_0);
  if (0 == $trim(value_0).length) {
    throw toJs(new IllegalArgumentException_0(name_0 + ' cannot be empty'));
  }
}

function throwIfNull(name_0, value_0){
  if (null == value_0) {
    throw toJs(new NullPointerException_0(name_0 + ' cannot be null'));
  }
}

function getDirectionOnElement(elem){
  var dirPropertyValue;
  dirPropertyValue = $getPropertyString(elem, 'dir');
  if ($equalsIgnoreCase('rtl', dirPropertyValue)) {
    return $clinit_HasDirection$Direction() , RTL;
  }
   else if ($equalsIgnoreCase('ltr', dirPropertyValue)) {
    return $clinit_HasDirection$Direction() , LTR;
  }
  return $clinit_HasDirection$Direction() , DEFAULT;
}

function setDirectionOnElement(elem, direction){
  switch (direction.ordinal) {
    case 0:
      {
        elem['dir'] = 'rtl';
        break;
      }

    case 1:
      {
        elem['dir'] = 'ltr';
        break;
      }

    case 2:
      {
        getDirectionOnElement(elem) != ($clinit_HasDirection$Direction() , DEFAULT) && (elem['dir'] = '' , undefined);
        break;
      }

  }
}

function $getDefaultNative(){
  return ['USD', 'US$', 2, 'US$', '$'];
}

function $clinit_DateTimeFormat(){
  $clinit_DateTimeFormat = emptyMethod;
  new HashMap;
}

function $addPart(this$static, buf, count){
  var oldLength;
  if (buf.string.length > 0) {
    $add_8(this$static.patternParts, new DateTimeFormat$PatternPart(buf.string, count));
    oldLength = buf.string.length;
    0 < oldLength?(buf.string = buf.string.substr(0, 0)):0 > oldLength && (buf.string += valueOf_0(initUnidimensionalArray(C_classLit, $intern_19, 9, -oldLength, 15, 1)));
  }
}

function $format(this$static, date, timeZone){
  var ch_0, diff, i, j, keepDate, keepTime, n, toAppendTo, trailQuote;
  !timeZone && (timeZone = createTimeZone(date.jsdate.getTimezoneOffset()));
  diff = (date.jsdate.getTimezoneOffset() - timeZone.standardOffset) * 60000;
  keepDate = new Date_1(add_2(fromDouble_0(date.jsdate.getTime()), diff));
  keepTime = keepDate;
  if (keepDate.jsdate.getTimezoneOffset() != date.jsdate.getTimezoneOffset()) {
    diff > 0?(diff -= 86400000):(diff += 86400000);
    keepTime = new Date_1(add_2(fromDouble_0(date.jsdate.getTime()), diff));
  }
  toAppendTo = new StringBuilder_0;
  n = this$static.pattern.length;
  for (i = 0; i < n;) {
    ch_0 = $charAt_0(this$static.pattern, i);
    if (ch_0 >= 97 && ch_0 <= 122 || ch_0 >= 65 && ch_0 <= 90) {
      for (j = i + 1; j < n && $charAt_0(this$static.pattern, j) == ch_0; ++j)
      ;
      $subFormat(toAppendTo, ch_0, j - i, keepDate, keepTime, timeZone);
      i = j;
    }
     else if (ch_0 == 39) {
      ++i;
      if (i < n && $charAt_0(this$static.pattern, i) == 39) {
        toAppendTo.string += "'";
        ++i;
        continue;
      }
      trailQuote = false;
      while (!trailQuote) {
        j = i;
        while (j < n && $charAt_0(this$static.pattern, j) != 39) {
          ++j;
        }
        if (j >= n) {
          throw toJs(new IllegalArgumentException_0("Missing trailing '"));
        }
        j + 1 < n && $charAt_0(this$static.pattern, j + 1) == 39?++j:(trailQuote = true);
        $append_2(toAppendTo, $substring_0(this$static.pattern, i, j));
        i = j + 1;
      }
    }
     else {
      toAppendTo.string += String.fromCharCode(ch_0);
      ++i;
    }
  }
  return toAppendTo.string;
}

function $formatFractionalSeconds(buf, count, date){
  var time, value_0;
  time = fromDouble_0(date.jsdate.getTime());
  if (compare_0(time, 0) < 0) {
    value_0 = $intern_20 - toInt(mod(neg_0(time), $intern_20));
    value_0 == $intern_20 && (value_0 = 0);
  }
   else {
    value_0 = toInt(mod(time, $intern_20));
  }
  if (count == 1) {
    value_0 = $wnd.Math.min((value_0 + 50) / 100 | 0, 9);
    $append_0(buf, 48 + value_0 & $intern_9);
  }
   else if (count == 2) {
    value_0 = $wnd.Math.min((value_0 + 5) / 10 | 0, 99);
    $zeroPaddingNumber(buf, value_0, 2);
  }
   else {
    $zeroPaddingNumber(buf, value_0, 3);
    count > 3 && $zeroPaddingNumber(buf, 0, count - 3);
  }
}

function $formatMonth(buf, count, date){
  var value_0;
  value_0 = date.jsdate.getMonth();
  switch (count) {
    case 5:
      $append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'])[value_0]);
      break;
    case 4:
      $append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'])[value_0]);
      break;
    case 3:
      $append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])[value_0]);
      break;
    default:$zeroPaddingNumber(buf, value_0 + 1, count);
  }
}

function $formatYear(buf, count, date){
  var value_0;
  value_0 = date.jsdate.getFullYear() - 1900 + 1900;
  value_0 < 0 && (value_0 = -value_0);
  switch (count) {
    case 1:
      buf.string += value_0;
      break;
    case 2:
      $zeroPaddingNumber(buf, value_0 % 100, 2);
      break;
    default:$zeroPaddingNumber(buf, value_0, count);
  }
}

function $getNextCharCountInPattern(start_0){
  var ch_0, next;
  ch_0 = (checkCriticalStringElementIndex(start_0, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(start_0));
  next = start_0 + 1;
  while (next < 'yyyyMMdd-HHmm'.length && (checkCriticalStringElementIndex(next, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(next) == ch_0)) {
    ++next;
  }
  return next - start_0;
}

function $identifyAbutStart(this$static){
  var abut, i, len;
  abut = false;
  len = this$static.patternParts.array.length;
  for (i = 0; i < len; i++) {
    if ($isNumeric(castTo($get_1(this$static.patternParts, i), 170))) {
      if (!abut && i + 1 < len && $isNumeric(castTo($get_1(this$static.patternParts, i + 1), 170))) {
        abut = true;
        castTo($get_1(this$static.patternParts, i), 170).abutStart = true;
      }
    }
     else {
      abut = false;
    }
  }
}

function $isNumeric(part){
  var i;
  if (part.count <= 0) {
    return false;
  }
  i = $indexOf_0('MLydhHmsSDkK', fromCodePoint($charAt_0(part.text_0, 0)));
  return i > 1 || i >= 0 && part.count < 3;
}

function $parsePattern(this$static){
  var buf, ch_0, count, i, inQuote;
  buf = new StringBuilder_0;
  inQuote = false;
  for (i = 0; i < 'yyyyMMdd-HHmm'.length; i++) {
    ch_0 = (checkCriticalStringElementIndex(i, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(i));
    if (ch_0 == 32) {
      $addPart(this$static, buf, 0);
      buf.string += ' ';
      $addPart(this$static, buf, 0);
      while (i + 1 < 'yyyyMMdd-HHmm'.length && (checkCriticalStringElementIndex(i + 1, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(i + 1) == 32)) {
        ++i;
      }
      continue;
    }
    if (inQuote) {
      if (ch_0 == 39) {
        if (i + 1 < 'yyyyMMdd-HHmm'.length && (checkCriticalStringElementIndex(i + 1, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(i + 1) == 39)) {
          buf.string += "'";
          ++i;
        }
         else {
          inQuote = false;
        }
      }
       else {
        buf.string += String.fromCharCode(ch_0);
      }
      continue;
    }
    if ($indexOf_0('GyMLdkHmsSEcDahKzZv', fromCodePoint(ch_0)) > 0) {
      $addPart(this$static, buf, 0);
      buf.string += String.fromCharCode(ch_0);
      count = $getNextCharCountInPattern(i);
      $addPart(this$static, buf, count);
      i += count - 1;
      continue;
    }
    if (ch_0 == 39) {
      if (i + 1 < 'yyyyMMdd-HHmm'.length && (checkCriticalStringElementIndex(i + 1, 'yyyyMMdd-HHmm'.length) , 'yyyyMMdd-HHmm'.charCodeAt(i + 1) == 39)) {
        buf.string += "'";
        ++i;
      }
       else {
        inQuote = true;
      }
    }
     else {
      buf.string += String.fromCharCode(ch_0);
    }
  }
  $addPart(this$static, buf, 0);
  $identifyAbutStart(this$static);
}

function $subFormat(buf, ch_0, count, adjustedDate, adjustedTime, timezone){
  var value_0, value0, value1, value10, value2, value3, value4, value5, value6, value7, value8, value9;
  switch (ch_0) {
    case 71:
      value0 = adjustedDate.jsdate.getFullYear() - 1900 >= -1900?1:0;
      count >= 4?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Before Christ', 'Anno Domini'])[value0]):$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['BC', 'AD'])[value0]);
      break;
    case 121:
      $formatYear(buf, count, adjustedDate);
      break;
    case 77:
      $formatMonth(buf, count, adjustedDate);
      break;
    case 107:
      value1 = adjustedTime.jsdate.getHours();
      value1 == 0?$zeroPaddingNumber(buf, 24, count):$zeroPaddingNumber(buf, value1, count);
      break;
    case 83:
      $formatFractionalSeconds(buf, count, adjustedTime);
      break;
    case 69:
      value2 = adjustedDate.jsdate.getDay();
      count == 5?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['S', 'M', 'T', 'W', 'T', 'F', 'S'])[value2]):count == 4?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'])[value2]):$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'])[value2]);
      break;
    case 97:
      adjustedTime.jsdate.getHours() >= 12 && adjustedTime.jsdate.getHours() < 24?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['AM', 'PM'])[1]):$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['AM', 'PM'])[0]);
      break;
    case 104:
      value3 = adjustedTime.jsdate.getHours() % 12;
      value3 == 0?$zeroPaddingNumber(buf, 12, count):$zeroPaddingNumber(buf, value3, count);
      break;
    case 75:
      value4 = adjustedTime.jsdate.getHours() % 12;
      $zeroPaddingNumber(buf, value4, count);
      break;
    case 72:
      value5 = adjustedTime.jsdate.getHours();
      $zeroPaddingNumber(buf, value5, count);
      break;
    case 99:
      value6 = adjustedDate.jsdate.getDay();
      count == 5?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['S', 'M', 'T', 'W', 'T', 'F', 'S'])[value6]):count == 4?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'])[value6]):count == 3?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'])[value6]):$zeroPaddingNumber(buf, value6, 1);
      break;
    case 76:
      value7 = adjustedDate.jsdate.getMonth();
      count == 5?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'])[value7]):count == 4?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'])[value7]):count == 3?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])[value7]):$zeroPaddingNumber(buf, value7 + 1, count);
      break;
    case 81:
      value8 = adjustedDate.jsdate.getMonth() / 3 | 0;
      count < 4?$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Q1', 'Q2', 'Q3', 'Q4'])[value8]):$append_2(buf, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter'])[value8]);
      break;
    case 100:
      value9 = adjustedDate.jsdate.getDate();
      $zeroPaddingNumber(buf, value9, count);
      break;
    case 109:
      value10 = adjustedTime.jsdate.getMinutes();
      $zeroPaddingNumber(buf, value10, count);
      break;
    case 115:
      value_0 = adjustedTime.jsdate.getSeconds();
      $zeroPaddingNumber(buf, value_0, count);
      break;
    case 122:
      count < 4?$append_2(buf, timezone.tzNames[0]):$append_2(buf, timezone.tzNames[1]);
      break;
    case 118:
      $append_2(buf, timezone.timezoneID);
      break;
    case 90:
      count < 3?$append_2(buf, $getRFCTimeZoneString(timezone)):count == 3?$append_2(buf, $getISOTimeZoneString(timezone)):$append_2(buf, composeGMTString(timezone.standardOffset));
      break;
    default:return false;
  }
  return true;
}

function $zeroPaddingNumber(buf, value_0, minWidth){
  var b, i;
  b = 10;
  for (i = 0; i < minWidth - 1; i++) {
    value_0 < b && (buf.string += '0' , buf);
    b *= 10;
  }
  buf.string += value_0;
}

defineClass(596, 1, {});
var Lcom_google_gwt_i18n_shared_DateTimeFormat_2_classLit = createForClass('com.google.gwt.i18n.shared', 'DateTimeFormat', 596);
function $clinit_DateTimeFormat_0(){
  $clinit_DateTimeFormat_0 = emptyMethod;
  $clinit_DateTimeFormat();
  cache = new HashMap;
}

function DateTimeFormat(){
  $clinit_DateTimeFormat();
  this.patternParts = new ArrayList;
  this.pattern = 'yyyyMMdd-HHmm';
  $parsePattern(this);
}

function getFormat(dtfi){
  $clinit_DateTimeFormat_0();
  var defaultDtfi, dtf;
  defaultDtfi = $getDateTimeFormatInfo(($clinit_LocaleInfo() , $clinit_LocaleInfo() , instance_0));
  dtf = null;
  dtfi == defaultDtfi && (dtf = castTo($getStringValue(cache, 'yyyyMMdd-HHmm'), 222));
  if (!dtf) {
    dtf = new DateTimeFormat;
    dtfi == defaultDtfi && $putStringValue(cache, 'yyyyMMdd-HHmm', dtf);
  }
  return dtf;
}

defineClass(222, 596, {222:1}, DateTimeFormat);
var cache;
var Lcom_google_gwt_i18n_client_DateTimeFormat_2_classLit = createForClass('com.google.gwt.i18n.client', 'DateTimeFormat', 222);
defineClass(665, 1, {});
var Lcom_google_gwt_i18n_shared_DefaultDateTimeFormatInfo_2_classLit = createForClass('com.google.gwt.i18n.shared', 'DefaultDateTimeFormatInfo', 665);
defineClass(666, 665, {});
var Lcom_google_gwt_i18n_client_DefaultDateTimeFormatInfo_2_classLit = createForClass('com.google.gwt.i18n.client', 'DefaultDateTimeFormatInfo', 666);
function $clinit_HasDirection$Direction(){
  $clinit_HasDirection$Direction = emptyMethod;
  RTL = new HasDirection$Direction('RTL', 0);
  LTR = new HasDirection$Direction('LTR', 1);
  DEFAULT = new HasDirection$Direction('DEFAULT', 2);
}

function HasDirection$Direction(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_8(){
  $clinit_HasDirection$Direction();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_i18n_client_HasDirection$Direction_2_classLit, 1), $intern_3, 159, 0, [RTL, LTR, DEFAULT]);
}

defineClass(159, 10, {159:1, 3:1, 11:1, 10:1}, HasDirection$Direction);
var DEFAULT, LTR, RTL;
var Lcom_google_gwt_i18n_client_HasDirection$Direction_2_classLit = createForEnum('com.google.gwt.i18n.client', 'HasDirection/Direction', 159, values_8);
function $clinit_LocaleInfo(){
  $clinit_LocaleInfo = emptyMethod;
  instance_0 = new LocaleInfo;
}

function $getDateTimeFormatInfo(this$static){
  !this$static.dateTimeFormatInfo && (this$static.dateTimeFormatInfo = new DateTimeFormatInfoImpl);
  return this$static.dateTimeFormatInfo;
}

function $getNumberConstants(this$static){
  !this$static.numberConstants && (this$static.numberConstants = new NumberConstantsImpl_);
  return this$static.numberConstants;
}

function LocaleInfo(){
}

defineClass(480, 1, {}, LocaleInfo);
var instance_0;
var Lcom_google_gwt_i18n_client_LocaleInfo_2_classLit = createForClass('com.google.gwt.i18n.client', 'LocaleInfo', 480);
function $clinit_NumberFormat(){
  $clinit_NumberFormat = emptyMethod;
  $getNumberConstants(($clinit_LocaleInfo() , $clinit_LocaleInfo() , instance_0));
}

function $addExponent(this$static, digits){
  var exponentDigits, i;
  digits.string += 'E';
  if (this$static.exponent < 0) {
    this$static.exponent = -this$static.exponent;
    digits.string += '-';
  }
  exponentDigits = '' + this$static.exponent;
  for (i = exponentDigits.length; i < this$static.minExponentDigits; ++i) {
    digits.string += '0';
  }
  digits.string += exponentDigits;
}

function $addZeroAndDecimal(this$static, digits, decimalSeparator){
  if (this$static.digitsLength == 0) {
    digits.string = digits.string.substr(0, 0) + '0' + digits.string.substr(0);
    ++this$static.decimalPosition;
    ++this$static.digitsLength;
  }
  if (this$static.decimalPosition < this$static.digitsLength || this$static.decimalSeparatorAlwaysShown) {
    $insert_4(digits, this$static.decimalPosition, String.fromCharCode(decimalSeparator));
    ++this$static.digitsLength;
  }
}

function $adjustFractionDigits(this$static, digits){
  var requiredDigits, toRemove;
  requiredDigits = this$static.decimalPosition + this$static.minimumFractionDigits;
  if (this$static.digitsLength < requiredDigits) {
    while (this$static.digitsLength < requiredDigits) {
      digits.string += '0';
      ++this$static.digitsLength;
    }
  }
   else {
    toRemove = this$static.decimalPosition + this$static.maximumFractionDigits;
    toRemove > this$static.digitsLength && (toRemove = this$static.digitsLength);
    while (toRemove > requiredDigits && $charAt_0(digits.string, toRemove - 1) == 48) {
      --toRemove;
    }
    if (toRemove < this$static.digitsLength) {
      $delete(digits, toRemove, this$static.digitsLength);
      this$static.digitsLength = toRemove;
    }
  }
}

function $computeExponent(this$static, digits){
  var remainder, strip;
  strip = 0;
  while (strip < this$static.digitsLength - 1 && $charAt_0(digits.string, strip) == 48) {
    ++strip;
  }
  if (strip > 0) {
    digits.string = digits.string.substr(0, 0) + '' + $substring(digits.string, strip);
    this$static.digitsLength -= strip;
    this$static.exponent -= strip;
  }
  if (this$static.maximumIntegerDigits > this$static.minimumIntegerDigits && this$static.maximumIntegerDigits > 0) {
    this$static.exponent += this$static.decimalPosition - 1;
    remainder = this$static.exponent % this$static.maximumIntegerDigits;
    remainder < 0 && (remainder += this$static.maximumIntegerDigits);
    this$static.decimalPosition = remainder + 1;
    this$static.exponent -= remainder;
  }
   else {
    this$static.exponent += this$static.decimalPosition - this$static.minimumIntegerDigits;
    this$static.decimalPosition = this$static.minimumIntegerDigits;
  }
  if (this$static.digitsLength == 1 && $charAt_0(digits.string, 0) == 48) {
    this$static.exponent = 0;
    this$static.decimalPosition = this$static.minimumIntegerDigits;
  }
}

function $format_0(this$static, number){
  var buf, isNegative, preRound, scale;
  if (isNaN(number)) {
    return 'NaN';
  }
  isNegative = number < 0 || number == 0 && 1 / number < 0;
  isNegative && (number = -number);
  buf = new StringBuilder;
  if (!isNaN(number) && !isFinite(number)) {
    $append_2(buf, isNegative?this$static.negativePrefix:this$static.positivePrefix);
    buf.string += '\u221E';
    $append_2(buf, isNegative?this$static.negativeSuffix:this$static.positiveSuffix);
    return buf.string;
  }
  number *= this$static.multiplier;
  scale = toScaledString(buf, number);
  preRound = buf.string.length + scale + this$static.maximumFractionDigits + 3;
  if (preRound > 0 && preRound < buf.string.length && $charAt_0(buf.string, preRound) == 57) {
    $propagateCarry(this$static, buf, preRound - 1);
    scale += buf.string.length - preRound;
    $delete(buf, preRound, buf.string.length);
  }
  $format_1(this$static, isNegative, buf, scale);
  return buf.string;
}

function $format_1(this$static, isNegative, digits, scale){
  var currentGroupingSize, decimalSeparator, groupingSeparator, useExponent, zeroChar;
  if (this$static.isCurrencyFormat) {
    decimalSeparator = (checkCriticalStringElementIndex(0, '.'.length) , '.'.charCodeAt(0));
    groupingSeparator = (checkCriticalStringElementIndex(0, ','.length) , ','.charCodeAt(0));
  }
   else {
    decimalSeparator = (checkCriticalStringElementIndex(0, '.'.length) , '.'.charCodeAt(0));
    groupingSeparator = (checkCriticalStringElementIndex(0, ','.length) , ','.charCodeAt(0));
  }
  this$static.exponent = 0;
  this$static.digitsLength = digits.string.length;
  this$static.decimalPosition = this$static.digitsLength + scale;
  useExponent = this$static.useExponentialNotation;
  currentGroupingSize = this$static.groupingSize;
  this$static.decimalPosition > $intern_21 && (useExponent = true);
  useExponent && $computeExponent(this$static, digits);
  $processLeadingZeros(this$static, digits);
  $roundValue(this$static, digits);
  $insertGroupingSeparators(this$static, digits, groupingSeparator, currentGroupingSize);
  $adjustFractionDigits(this$static, digits);
  $addZeroAndDecimal(this$static, digits, decimalSeparator);
  useExponent && $addExponent(this$static, digits);
  zeroChar = (checkCriticalStringElementIndex(0, '0'.length) , '0'.charCodeAt(0));
  zeroChar != 48 && $localizeDigits(digits, zeroChar);
  $insert_4(digits, 0, isNegative?this$static.negativePrefix:this$static.positivePrefix);
  $append_2(digits, isNegative?this$static.negativeSuffix:this$static.positiveSuffix);
}

function $getDigit(ch_0){
  var zeroChar;
  if (48 <= ch_0 && ch_0 <= 57) {
    return ch_0 - 48;
  }
   else {
    zeroChar = (checkCriticalStringElementIndex(0, '0'.length) , '0'.charCodeAt(0));
    return zeroChar <= ch_0 && ch_0 <= zeroChar + 9?ch_0 - zeroChar:-1;
  }
}

function $insertGroupingSeparators(this$static, digits, groupingSeparator, g){
  var i;
  if (g > 0) {
    for (i = g; i < this$static.decimalPosition; i += g + 1) {
      $insert_4(digits, this$static.decimalPosition - i, String.fromCharCode(groupingSeparator));
      ++this$static.decimalPosition;
      ++this$static.digitsLength;
    }
  }
}

function $localizeDigits(digits, zero){
  var ch_0, i, n;
  n = digits.string.length;
  for (i = 0; i < n; ++i) {
    ch_0 = $charAt_0(digits.string, i);
    ch_0 >= 48 && ch_0 <= 57 && $setCharAt(digits, i, ch_0 - 48 + zero & $intern_9);
  }
}

function $parse_0(this$static, text_0){
  var pos, result;
  pos = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [0]);
  result = $parse_1(this$static, text_0, pos);
  if (pos[0] == 0 || pos[0] != text_0.length) {
    throw toJs(new NumberFormatException(text_0));
  }
  return result;
}

function $parse_1(this$static, text_0, inOutPos){
  var gotNegative, gotNegativePrefix, gotNegativeSuffix, gotPositive, gotPositivePrefix, gotPositiveSuffix, ret, tempPos, valueOnly;
  gotPositivePrefix = $startsWith_0(text_0, this$static.positivePrefix, inOutPos[0]);
  gotNegativePrefix = $startsWith_0(text_0, this$static.negativePrefix, inOutPos[0]);
  gotPositiveSuffix = $endsWith(text_0, this$static.positiveSuffix);
  gotNegativeSuffix = $endsWith(text_0, this$static.negativeSuffix);
  gotPositive = gotPositivePrefix && gotPositiveSuffix;
  gotNegative = gotNegativePrefix && gotNegativeSuffix;
  if (gotPositive && gotNegative) {
    this$static.positivePrefix.length > this$static.negativePrefix.length?(gotNegative = false):this$static.positivePrefix.length < this$static.negativePrefix.length?(gotPositive = false):this$static.positiveSuffix.length > this$static.negativeSuffix.length?(gotNegative = false):this$static.positiveSuffix.length < this$static.negativeSuffix.length?(gotPositive = false):(gotNegative = false);
  }
   else if (!gotPositive && !gotNegative) {
    throw toJs(new NumberFormatException(text_0 + ' does not have either positive or negative affixes'));
  }
  if (gotPositive) {
    inOutPos[0] += this$static.positivePrefix.length;
    valueOnly = $substring_0(text_0, inOutPos[0], text_0.length - this$static.positiveSuffix.length);
  }
   else {
    inOutPos[0] += this$static.negativePrefix.length;
    valueOnly = $substring_0(text_0, inOutPos[0], text_0.length - this$static.negativeSuffix.length);
  }
  if ($equals_1(valueOnly, '\u221E')) {
    inOutPos[0] += '\u221E'.length;
    ret = Infinity;
  }
   else if ($equals_1(valueOnly, 'NaN')) {
    inOutPos[0] += 'NaN'.length;
    ret = NaN;
  }
   else {
    tempPos = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [0]);
    ret = $parseNumber(this$static, valueOnly, tempPos);
    inOutPos[0] += tempPos[0];
  }
  gotPositive?(inOutPos[0] += this$static.positiveSuffix.length):gotNegative && (inOutPos[0] += this$static.negativeSuffix.length);
  gotNegative && (ret = -ret);
  return ret;
}

function $parseAffix(this$static, pattern, start_0, affix, inNegativePattern){
  var ch_0, inQuote, len, pos;
  $delete(affix, 0, affix.string.length);
  inQuote = false;
  len = pattern.length;
  for (pos = start_0; pos < len; ++pos) {
    ch_0 = (checkCriticalStringElementIndex(pos, pattern.length) , pattern.charCodeAt(pos));
    if (ch_0 == 39) {
      if (pos + 1 < len && (checkCriticalStringElementIndex(pos + 1, pattern.length) , pattern.charCodeAt(pos + 1) == 39)) {
        ++pos;
        affix.string += "'";
      }
       else {
        inQuote = !inQuote;
      }
      continue;
    }
    if (inQuote) {
      affix.string += String.fromCharCode(ch_0);
    }
     else {
      switch (ch_0) {
        case 35:
        case 48:
        case 44:
        case 46:
        case 59:
          return pos - start_0;
        case 164:
          this$static.isCurrencyFormat = true;
          if (pos + 1 < len && (checkCriticalStringElementIndex(pos + 1, pattern.length) , pattern.charCodeAt(pos + 1) == 164)) {
            ++pos;
            if (pos < len - 2 && (checkCriticalStringElementIndex(pos + 1, pattern.length) , pattern.charCodeAt(pos + 1) == 164) && (checkCriticalStringElementIndex(pos + 2, pattern.length) , pattern.charCodeAt(pos + 2) == 164)) {
              pos += 2;
              $append_2(affix, $getSimpleCurrencySymbol(this$static.currencyData));
            }
             else {
              $append_2(affix, this$static.currencyData[0]);
            }
          }
           else {
            $append_2(affix, this$static.currencyData[1]);
          }

          break;
        case 37:
          if (!inNegativePattern) {
            if (this$static.multiplier != 1) {
              throw toJs(new IllegalArgumentException_0('Too many percent/per mille characters in pattern "' + pattern + '"'));
            }
            this$static.multiplier = 100;
          }

          affix.string += '%';
          break;
        case 8240:
          if (!inNegativePattern) {
            if (this$static.multiplier != 1) {
              throw toJs(new IllegalArgumentException_0('Too many percent/per mille characters in pattern "' + pattern + '"'));
            }
            this$static.multiplier = $intern_20;
          }

          affix.string += '\u2030';
          break;
        case 45:
          affix.string += '-';
          break;
        default:affix.string += String.fromCharCode(ch_0);
      }
    }
  }
  return len - start_0;
}

function $parseNumber(this$static, text_0, pos){
  var ch_0, decimal, digit, grouping, normalizedText, ret, sawDecimal, sawDigit, sawExponent, scale;
  sawDecimal = false;
  sawExponent = false;
  sawDigit = false;
  scale = 1;
  decimal = this$static.isCurrencyFormat?'.':'.';
  grouping = this$static.isCurrencyFormat?',':',';
  normalizedText = new StringBuilder;
  for (; pos[0] < text_0.length; ++pos[0]) {
    ch_0 = $charAt_0(text_0, pos[0]);
    digit = $getDigit(ch_0);
    if (digit >= 0 && digit <= 9) {
      $append_0(normalizedText, digit + 48 & $intern_9);
      sawDigit = true;
    }
     else if (ch_0 == (checkCriticalStringElementIndex(0, decimal.length) , decimal.charCodeAt(0))) {
      if (sawDecimal || sawExponent) {
        break;
      }
      normalizedText.string += '.';
      sawDecimal = true;
    }
     else if (ch_0 == (checkCriticalStringElementIndex(0, grouping.length) , grouping.charCodeAt(0))) {
      if (sawDecimal || sawExponent) {
        break;
      }
      continue;
    }
     else if (ch_0 == (checkCriticalStringElementIndex(0, 'E'.length) , 'E'.charCodeAt(0))) {
      if (sawExponent) {
        break;
      }
      normalizedText.string += 'E';
      sawExponent = true;
    }
     else if (ch_0 == 43 || ch_0 == 45) {
      normalizedText.string += String.fromCharCode(ch_0);
    }
     else if (ch_0 == (checkCriticalStringElementIndex(0, '%'.length) , '%'.charCodeAt(0))) {
      if (scale != 1) {
        break;
      }
      scale = 100;
      if (sawDigit) {
        ++pos[0];
        break;
      }
    }
     else if (ch_0 == (checkCriticalStringElementIndex(0, '\u2030'.length) , '\u2030'.charCodeAt(0))) {
      if (scale != 1) {
        break;
      }
      scale = $intern_20;
      if (sawDigit) {
        ++pos[0];
        break;
      }
    }
     else {
      break;
    }
  }
  try {
    ret = __parseAndValidateDouble(normalizedText.string);
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 104)) {
      throw toJs(new NumberFormatException(text_0));
    }
     else 
      throw toJs($e0);
  }
  ret = ret / scale;
  return ret;
}

function $parsePattern_0(this$static, pattern){
  var affix, pos;
  pos = 0;
  affix = new StringBuilder;
  pos += $parseAffix(this$static, pattern, 0, affix, false);
  this$static.positivePrefix = affix.string;
  pos += $parseTrunk(this$static, pattern, pos, false);
  pos += $parseAffix(this$static, pattern, pos, affix, false);
  this$static.positiveSuffix = affix.string;
  if (pos < pattern.length && (checkCriticalStringElementIndex(pos, pattern.length) , pattern.charCodeAt(pos) == 59)) {
    ++pos;
    pos += $parseAffix(this$static, pattern, pos, affix, true);
    this$static.negativePrefix = affix.string;
    pos += $parseTrunk(this$static, pattern, pos, true);
    pos += $parseAffix(this$static, pattern, pos, affix, true);
    this$static.negativeSuffix = affix.string;
  }
   else {
    this$static.negativePrefix = '-' + this$static.positivePrefix;
    this$static.negativeSuffix = this$static.positiveSuffix;
  }
}

function $parseTrunk(this$static, pattern, start_0, ignorePattern){
  var ch_0, decimalPos, digitLeftCount, digitRightCount, effectiveDecimalPos, groupingCount, len, loop, n, pos, totalDigits, zeroDigitCount;
  decimalPos = -1;
  digitLeftCount = 0;
  zeroDigitCount = 0;
  digitRightCount = 0;
  groupingCount = -1;
  len = pattern.length;
  pos = start_0;
  loop = true;
  for (; pos < len && loop; ++pos) {
    ch_0 = (checkCriticalStringElementIndex(pos, pattern.length) , pattern.charCodeAt(pos));
    switch (ch_0) {
      case 35:
        zeroDigitCount > 0?++digitRightCount:++digitLeftCount;
        groupingCount >= 0 && decimalPos < 0 && ++groupingCount;
        break;
      case 48:
        if (digitRightCount > 0) {
          throw toJs(new IllegalArgumentException_0("Unexpected '0' in pattern \"" + pattern + '"'));
        }

        ++zeroDigitCount;
        groupingCount >= 0 && decimalPos < 0 && ++groupingCount;
        break;
      case 44:
        groupingCount = 0;
        break;
      case 46:
        if (decimalPos >= 0) {
          throw toJs(new IllegalArgumentException_0('Multiple decimal separators in pattern "' + pattern + '"'));
        }

        decimalPos = digitLeftCount + zeroDigitCount + digitRightCount;
        break;
      case 69:
        if (!ignorePattern) {
          if (this$static.useExponentialNotation) {
            throw toJs(new IllegalArgumentException_0('Multiple exponential symbols in pattern "' + pattern + '"'));
          }
          this$static.useExponentialNotation = true;
          this$static.minExponentDigits = 0;
        }

        while (pos + 1 < len && (checkCriticalStringElementIndex(pos + 1, pattern.length) , pattern.charCodeAt(pos + 1) == 48)) {
          ++pos;
          ignorePattern || ++this$static.minExponentDigits;
        }

        if (!ignorePattern && digitLeftCount + zeroDigitCount < 1 || this$static.minExponentDigits < 1) {
          throw toJs(new IllegalArgumentException_0('Malformed exponential pattern "' + pattern + '"'));
        }

        loop = false;
        break;
      default:--pos;
        loop = false;
    }
  }
  if (zeroDigitCount == 0 && digitLeftCount > 0 && decimalPos >= 0) {
    n = decimalPos;
    decimalPos == 0 && ++n;
    digitRightCount = digitLeftCount - n;
    digitLeftCount = n - 1;
    zeroDigitCount = 1;
  }
  if (decimalPos < 0 && digitRightCount > 0 || decimalPos >= 0 && (decimalPos < digitLeftCount || decimalPos > digitLeftCount + zeroDigitCount) || groupingCount == 0) {
    throw toJs(new IllegalArgumentException_0('Malformed pattern "' + pattern + '"'));
  }
  if (ignorePattern) {
    return pos - start_0;
  }
  totalDigits = digitLeftCount + zeroDigitCount + digitRightCount;
  this$static.maximumFractionDigits = decimalPos >= 0?totalDigits - decimalPos:0;
  if (decimalPos >= 0) {
    this$static.minimumFractionDigits = digitLeftCount + zeroDigitCount - decimalPos;
    this$static.minimumFractionDigits < 0 && (this$static.minimumFractionDigits = 0);
  }
  effectiveDecimalPos = decimalPos >= 0?decimalPos:totalDigits;
  this$static.minimumIntegerDigits = effectiveDecimalPos - digitLeftCount;
  if (this$static.useExponentialNotation) {
    this$static.maximumIntegerDigits = digitLeftCount + this$static.minimumIntegerDigits;
    this$static.maximumFractionDigits == 0 && this$static.minimumIntegerDigits == 0 && (this$static.minimumIntegerDigits = 1);
  }
  this$static.groupingSize = groupingCount > 0?groupingCount:0;
  this$static.decimalSeparatorAlwaysShown = decimalPos == 0 || decimalPos == totalDigits;
  return pos - start_0;
}

function $processLeadingZeros(this$static, digits){
  var i, prefix, strip;
  if (this$static.decimalPosition > this$static.digitsLength) {
    while (this$static.digitsLength < this$static.decimalPosition) {
      digits.string += '0';
      ++this$static.digitsLength;
    }
  }
  if (!this$static.useExponentialNotation) {
    if (this$static.decimalPosition < this$static.minimumIntegerDigits) {
      prefix = new StringBuilder;
      while (this$static.decimalPosition < this$static.minimumIntegerDigits) {
        prefix.string += '0';
        ++this$static.decimalPosition;
        ++this$static.digitsLength;
      }
      $insert_4(digits, 0, prefix.string);
    }
     else if (this$static.decimalPosition > this$static.minimumIntegerDigits) {
      strip = this$static.decimalPosition - this$static.minimumIntegerDigits;
      for (i = 0; i < strip; ++i) {
        if ($charAt_0(digits.string, i) != 48) {
          strip = i;
          break;
        }
      }
      if (strip > 0) {
        digits.string = digits.string.substr(0, 0) + '' + $substring(digits.string, strip);
        this$static.digitsLength -= strip;
        this$static.decimalPosition -= strip;
      }
    }
  }
}

function $propagateCarry(this$static, digits, i){
  var carry, digit;
  carry = true;
  while (carry && i >= 0) {
    digit = $charAt_0(digits.string, i);
    if (digit == 57) {
      $setCharAt(digits, i--, 48);
    }
     else {
      $setCharAt(digits, i, digit + 1 & $intern_9);
      carry = false;
    }
  }
  if (carry) {
    digits.string = digits.string.substr(0, 0) + '1' + digits.string.substr(0);
    ++this$static.decimalPosition;
    ++this$static.digitsLength;
  }
}

function $roundValue(this$static, digits){
  var i;
  if (this$static.digitsLength > this$static.decimalPosition + this$static.maximumFractionDigits && $charAt(digits, this$static.decimalPosition + this$static.maximumFractionDigits) >= 53) {
    i = this$static.decimalPosition + this$static.maximumFractionDigits - 1;
    $propagateCarry(this$static, digits, i);
  }
}

function NumberFormat(pattern, cdata, userSuppliedPattern){
  if (!cdata) {
    throw toJs(new IllegalArgumentException_0('Unknown currency code'));
  }
  this.pattern = pattern;
  this.currencyData = cdata;
  $parsePattern_0(this, this.pattern);
  if (!userSuppliedPattern && this.isCurrencyFormat) {
    this.minimumFractionDigits = this.currencyData[2] & 7;
    this.maximumFractionDigits = this.minimumFractionDigits;
  }
}

function NumberFormat_0(pattern, cdata){
  $clinit_NumberFormat();
  NumberFormat.call(this, pattern, cdata, true);
}

function toScaledString(buf, val){
  var dot, expDigits, expIdx, scale, startLen;
  startLen = buf.string.length;
  $append_2(buf, val.toPrecision(20));
  scale = 0;
  expIdx = $indexOf_1(buf.string, 'e', startLen);
  expIdx < 0 && (expIdx = $indexOf_1(buf.string, 'E', startLen));
  if (expIdx >= 0) {
    expDigits = expIdx + 1;
    expDigits < buf.string.length && $charAt_0(buf.string, expDigits) == 43 && ++expDigits;
    expDigits < buf.string.length && (scale = __parseAndValidateInt($substring(buf.string, expDigits)));
    $delete(buf, expIdx, buf.string.length);
  }
  dot = $indexOf_1(buf.string, '.', startLen);
  if (dot >= 0) {
    buf.string = $substring_0(buf.string, 0, dot) + '' + $substring(buf.string, dot + 1);
    scale -= buf.string.length - dot;
  }
  return scale;
}

defineClass(186, 1, {}, NumberFormat_0);
_.decimalPosition = 0;
_.decimalSeparatorAlwaysShown = false;
_.digitsLength = 0;
_.exponent = 0;
_.groupingSize = 3;
_.isCurrencyFormat = false;
_.maximumFractionDigits = 3;
_.maximumIntegerDigits = 40;
_.minExponentDigits = 0;
_.minimumFractionDigits = 0;
_.minimumIntegerDigits = 1;
_.multiplier = 1;
_.negativePrefix = '-';
_.negativeSuffix = '';
_.positivePrefix = '';
_.positiveSuffix = '';
_.useExponentialNotation = false;
var Lcom_google_gwt_i18n_client_NumberFormat_2_classLit = createForClass('com.google.gwt.i18n.client', 'NumberFormat', 186);
function $getISOTimeZoneString(this$static){
  var data_0, offset;
  offset = -this$static.standardOffset;
  data_0 = stampJavaTypeInfo(getClassLiteralForArray(C_classLit, 1), $intern_19, 9, 15, [43, 48, 48, 58, 48, 48]);
  if (offset < 0) {
    data_0[0] = 45;
    offset = -offset;
  }
  data_0[1] = data_0[1] + ((offset / 60 | 0) / 10 | 0) & $intern_9;
  data_0[2] = data_0[2] + (offset / 60 | 0) % 10 & $intern_9;
  data_0[4] = data_0[4] + (offset % 60 / 10 | 0) & $intern_9;
  data_0[5] = data_0[5] + offset % 10 & $intern_9;
  return valueOf_1(data_0, data_0.length);
}

function $getRFCTimeZoneString(this$static){
  var data_0, offset;
  offset = -this$static.standardOffset;
  data_0 = stampJavaTypeInfo(getClassLiteralForArray(C_classLit, 1), $intern_19, 9, 15, [43, 48, 48, 48, 48]);
  if (offset < 0) {
    data_0[0] = 45;
    offset = -offset;
  }
  data_0[1] = data_0[1] + ((offset / 60 | 0) / 10 | 0) & $intern_9;
  data_0[2] = data_0[2] + (offset / 60 | 0) % 10 & $intern_9;
  data_0[3] = data_0[3] + (offset % 60 / 10 | 0) & $intern_9;
  data_0[4] = data_0[4] + offset % 10 & $intern_9;
  return valueOf_1(data_0, data_0.length);
}

function TimeZone(){
}

function composeGMTString(offset){
  var data_0;
  data_0 = stampJavaTypeInfo(getClassLiteralForArray(C_classLit, 1), $intern_19, 9, 15, [71, 77, 84, 45, 48, 48, 58, 48, 48]);
  if (offset <= 0) {
    data_0[3] = 43;
    offset = -offset;
  }
  data_0[4] = data_0[4] + ((offset / 60 | 0) / 10 | 0) & $intern_9;
  data_0[5] = data_0[5] + (offset / 60 | 0) % 10 & $intern_9;
  data_0[7] = data_0[7] + (offset % 60 / 10 | 0) & $intern_9;
  data_0[8] = data_0[8] + offset % 10 & $intern_9;
  return valueOf_1(data_0, data_0.length);
}

function composePOSIXTimeZoneID(offset){
  var str;
  if (offset == 0) {
    return 'Etc/GMT';
  }
  if (offset < 0) {
    offset = -offset;
    str = 'Etc/GMT-';
  }
   else {
    str = 'Etc/GMT+';
  }
  return str + offsetDisplay(offset);
}

function composeUTCString(offset){
  var str;
  if (offset == 0) {
    return 'UTC';
  }
  if (offset < 0) {
    offset = -offset;
    str = 'UTC+';
  }
   else {
    str = 'UTC-';
  }
  return str + offsetDisplay(offset);
}

function createTimeZone(timeZoneOffsetInMinutes){
  var tz;
  tz = new TimeZone;
  tz.standardOffset = timeZoneOffsetInMinutes;
  tz.timezoneID = composePOSIXTimeZoneID(timeZoneOffsetInMinutes);
  tz.tzNames = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 2, 6, 1);
  tz.tzNames[0] = composeUTCString(timeZoneOffsetInMinutes);
  tz.tzNames[1] = composeUTCString(timeZoneOffsetInMinutes);
  return tz;
}

function offsetDisplay(offset){
  var hour, mins;
  hour = offset / 60 | 0;
  mins = offset % 60;
  if (mins == 0) {
    return '' + hour;
  }
  return '' + hour + ':' + ('' + mins);
}

defineClass(617, 1, {}, TimeZone);
_.standardOffset = 0;
var Lcom_google_gwt_i18n_client_TimeZone_2_classLit = createForClass('com.google.gwt.i18n.client', 'TimeZone', 617);
function NumberConstantsImpl_(){
}

defineClass(598, 1, {}, NumberConstantsImpl_);
var Lcom_google_gwt_i18n_client_constants_NumberConstantsImpl_1_2_classLit = createForClass('com.google.gwt.i18n.client.constants', 'NumberConstantsImpl_', 598);
function $getSimpleCurrencySymbol(this$static){
  return this$static[4] || this$static[1];
}

function DateTimeFormatInfoImpl(){
}

defineClass(616, 666, {}, DateTimeFormatInfoImpl);
var Lcom_google_gwt_i18n_client_impl_cldr_DateTimeFormatInfoImpl_2_classLit = createForClass('com.google.gwt.i18n.client.impl.cldr', 'DateTimeFormatInfoImpl', 616);
function DateTimeFormat$PatternPart(txt, cnt){
  this.text_0 = txt;
  this.count = cnt;
  this.abutStart = false;
}

defineClass(170, 1, {170:1}, DateTimeFormat$PatternPart);
_.abutStart = false;
_.count = 0;
var Lcom_google_gwt_i18n_shared_DateTimeFormat$PatternPart_2_classLit = createForClass('com.google.gwt.i18n.shared', 'DateTimeFormat/PatternPart', 170);
function canSet(array, value_0){
  var elementTypeCategory;
  switch (getElementTypeCategory(array)) {
    case 6:
      return instanceOfString(value_0);
    case 7:
      return instanceOfDouble(value_0);
    case 8:
      return instanceOfBoolean(value_0);
    case 3:
      return Array.isArray(value_0) && (elementTypeCategory = getElementTypeCategory(value_0) , !(elementTypeCategory >= 14 && elementTypeCategory <= 16));
    case 11:
      return value_0 != null && typeof value_0 === 'function';
    case 12:
      return value_0 != null && (typeof value_0 === 'object' || typeof value_0 == 'function');
    case 0:
      return canCast(value_0, array.__elementTypeId$);
    case 2:
      return isJsObjectOrFunction(value_0) && !(value_0.typeMarker === typeMarkerFn);
    case 1:
      return isJsObjectOrFunction(value_0) && !(value_0.typeMarker === typeMarkerFn) || canCast(value_0, array.__elementTypeId$);
    default:return true;
  }
}

function getClassLiteralForArray(clazz, dimensions){
  return getClassLiteralForArray_0(clazz, dimensions);
}

function getElementTypeCategory(array){
  return array.__elementTypeCategory$ == null?10:array.__elementTypeCategory$;
}

function initMultidimensionalArray(leafClassLiteral, castableTypeMapExprs, elementTypeIds, leafElementTypeCategory, dimExprs, count){
  return initMultidimensionalArray_0(leafClassLiteral, castableTypeMapExprs, elementTypeIds, leafElementTypeCategory, dimExprs, 0, count);
}

function initMultidimensionalArray_0(leafClassLiteral, castableTypeMapExprs, elementTypeIds, leafElementTypeCategory, dimExprs, index_0, count){
  var elementTypeCategory, i, isLastDimension, length_0, result;
  length_0 = dimExprs[index_0];
  isLastDimension = index_0 == count - 1;
  elementTypeCategory = isLastDimension?leafElementTypeCategory:0;
  result = initializeArrayElementsWithDefaults(elementTypeCategory, length_0);
  leafElementTypeCategory != 10 && stampJavaTypeInfo(getClassLiteralForArray(leafClassLiteral, count - index_0), castableTypeMapExprs[index_0], elementTypeIds[index_0], elementTypeCategory, result);
  if (!isLastDimension) {
    ++index_0;
    for (i = 0; i < length_0; ++i) {
      result[i] = initMultidimensionalArray_0(leafClassLiteral, castableTypeMapExprs, elementTypeIds, leafElementTypeCategory, dimExprs, index_0, count);
    }
  }
  return result;
}

function initUnidimensionalArray(leafClassLiteral, castableTypeMap, elementTypeId, length_0, elementTypeCategory, dimensions){
  var result;
  result = initializeArrayElementsWithDefaults(elementTypeCategory, length_0);
  elementTypeCategory != 10 && stampJavaTypeInfo(getClassLiteralForArray(leafClassLiteral, dimensions), castableTypeMap, elementTypeId, elementTypeCategory, result);
  return result;
}

function initializeArrayElementsWithDefaults(elementTypeCategory, length_0){
  var array = new Array(length_0);
  var initValue;
  switch (elementTypeCategory) {
    case 14:
    case 15:
      initValue = 0;
      break;
    case 16:
      initValue = false;
      break;
    default:return array;
  }
  for (var i = 0; i < length_0; ++i) {
    array[i] = initValue;
  }
  return array;
}

function isJavaArray(src_0){
  return Array.isArray(src_0) && src_0.typeMarker === typeMarkerFn;
}

function setCheck(array, index_0, value_0){
  checkCriticalArrayType(value_0 == null || canSet(array, value_0));
  return array[index_0] = value_0;
}

function stampJavaTypeInfo(arrayClass, castableTypeMap, elementTypeId, elementTypeCategory, array){
  array.___clazz = arrayClass;
  array.castableTypeMap = castableTypeMap;
  array.typeMarker = typeMarkerFn;
  array.__elementTypeId$ = elementTypeId;
  array.__elementTypeCategory$ = elementTypeCategory;
  return array;
}

function stampJavaTypeInfo_0(array, referenceType){
  getElementTypeCategory(referenceType) != 10 && stampJavaTypeInfo(getClass__Ljava_lang_Class___devirtual$(referenceType), referenceType.castableTypeMap, referenceType.__elementTypeId$, getElementTypeCategory(referenceType), array);
  return array;
}

function create(value_0){
  var a0, a1, a2;
  a0 = value_0 & $intern_23;
  a1 = value_0 >> 22 & $intern_23;
  a2 = value_0 < 0?$intern_24:0;
  return create0(a0, a1, a2);
}

function create_0(a){
  return create0(a.l, a.m, a.h);
}

function create0(l_0, m, h){
  return {l:l_0, m:m, h:h};
}

function divMod(a, b, computeRemainder){
  var aIsCopy, aIsMinValue, aIsNegative, bpower, c, negative;
  if (b.l == 0 && b.m == 0 && b.h == 0) {
    throw toJs(new ArithmeticException);
  }
  if (a.l == 0 && a.m == 0 && a.h == 0) {
    computeRemainder && (remainder_0 = create0(0, 0, 0));
    return create0(0, 0, 0);
  }
  if (b.h == $intern_25 && b.m == 0 && b.l == 0) {
    return divModByMinValue(a, computeRemainder);
  }
  negative = false;
  if (b.h >> 19 != 0) {
    b = neg(b);
    negative = true;
  }
  bpower = powerOfTwo(b);
  aIsNegative = false;
  aIsMinValue = false;
  aIsCopy = false;
  if (a.h == $intern_25 && a.m == 0 && a.l == 0) {
    aIsMinValue = true;
    aIsNegative = true;
    if (bpower == -1) {
      a = create_0(($clinit_BigLongLib$Const() , MAX_VALUE));
      aIsCopy = true;
      negative = !negative;
    }
     else {
      c = shr(a, bpower);
      negative && negate(c);
      computeRemainder && (remainder_0 = create0(0, 0, 0));
      return c;
    }
  }
   else if (a.h >> 19 != 0) {
    aIsNegative = true;
    a = neg(a);
    aIsCopy = true;
    negative = !negative;
  }
  if (bpower != -1) {
    return divModByShift(a, bpower, negative, aIsNegative, computeRemainder);
  }
  if (compare(a, b) < 0) {
    computeRemainder && (aIsNegative?(remainder_0 = neg(a)):(remainder_0 = create0(a.l, a.m, a.h)));
    return create0(0, 0, 0);
  }
  return divModHelper(aIsCopy?a:create0(a.l, a.m, a.h), b, negative, aIsNegative, aIsMinValue, computeRemainder);
}

function divModByMinValue(a, computeRemainder){
  if (a.h == $intern_25 && a.m == 0 && a.l == 0) {
    computeRemainder && (remainder_0 = create0(0, 0, 0));
    return create_0(($clinit_BigLongLib$Const() , ONE));
  }
  computeRemainder && (remainder_0 = create0(a.l, a.m, a.h));
  return create0(0, 0, 0);
}

function divModByShift(a, bpower, negative, aIsNegative, computeRemainder){
  var c;
  c = shr(a, bpower);
  negative && negate(c);
  if (computeRemainder) {
    a = maskRight(a, bpower);
    aIsNegative?(remainder_0 = neg(a)):(remainder_0 = create0(a.l, a.m, a.h));
  }
  return c;
}

function divModHelper(a, b, negative, aIsNegative, aIsMinValue, computeRemainder){
  var bshift, gte, quotient, shift_0, a1, a2, a0;
  shift_0 = numberOfLeadingZeros(b) - numberOfLeadingZeros(a);
  bshift = shl(b, shift_0);
  quotient = create0(0, 0, 0);
  while (shift_0 >= 0) {
    gte = trialSubtract(a, bshift);
    if (gte) {
      shift_0 < 22?(quotient.l |= 1 << shift_0 , undefined):shift_0 < 44?(quotient.m |= 1 << shift_0 - 22 , undefined):(quotient.h |= 1 << shift_0 - 44 , undefined);
      if (a.l == 0 && a.m == 0 && a.h == 0) {
        break;
      }
    }
    a1 = bshift.m;
    a2 = bshift.h;
    a0 = bshift.l;
    bshift.h = a2 >>> 1;
    bshift.m = a1 >>> 1 | (a2 & 1) << 21;
    bshift.l = a0 >>> 1 | (a1 & 1) << 21;
    --shift_0;
  }
  negative && negate(quotient);
  if (computeRemainder) {
    if (aIsNegative) {
      remainder_0 = neg(a);
      aIsMinValue && (remainder_0 = sub_0(remainder_0, ($clinit_BigLongLib$Const() , ONE)));
    }
     else {
      remainder_0 = create0(a.l, a.m, a.h);
    }
  }
  return quotient;
}

function maskRight(a, bits){
  var b0, b1, b2;
  if (bits <= 22) {
    b0 = a.l & (1 << bits) - 1;
    b1 = b2 = 0;
  }
   else if (bits <= 44) {
    b0 = a.l;
    b1 = a.m & (1 << bits - 22) - 1;
    b2 = 0;
  }
   else {
    b0 = a.l;
    b1 = a.m;
    b2 = a.h & (1 << bits - 44) - 1;
  }
  return create0(b0, b1, b2);
}

function negate(a){
  var neg0, neg1, neg2;
  neg0 = ~a.l + 1 & $intern_23;
  neg1 = ~a.m + (neg0 == 0?1:0) & $intern_23;
  neg2 = ~a.h + (neg0 == 0 && neg1 == 0?1:0) & $intern_24;
  a.l = neg0;
  a.m = neg1;
  a.h = neg2;
}

function numberOfLeadingZeros(a){
  var b1, b2;
  b2 = numberOfLeadingZeros_0(a.h);
  if (b2 == 32) {
    b1 = numberOfLeadingZeros_0(a.m);
    return b1 == 32?numberOfLeadingZeros_0(a.l) + 32:b1 + 20 - 10;
  }
   else {
    return b2 - 12;
  }
}

function powerOfTwo(a){
  var h, l_0, m;
  l_0 = a.l;
  if ((l_0 & l_0 - 1) != 0) {
    return -1;
  }
  m = a.m;
  if ((m & m - 1) != 0) {
    return -1;
  }
  h = a.h;
  if ((h & h - 1) != 0) {
    return -1;
  }
  if (h == 0 && m == 0 && l_0 == 0) {
    return -1;
  }
  if (h == 0 && m == 0 && l_0 != 0) {
    return numberOfTrailingZeros(l_0);
  }
  if (h == 0 && m != 0 && l_0 == 0) {
    return numberOfTrailingZeros(m) + 22;
  }
  if (h != 0 && m == 0 && l_0 == 0) {
    return numberOfTrailingZeros(h) + 44;
  }
  return -1;
}

function toDoubleHelper(a){
  return a.l + a.m * $intern_26 + a.h * $intern_27;
}

function trialSubtract(a, b){
  var sum0, sum1, sum2;
  sum2 = a.h - b.h;
  if (sum2 < 0) {
    return false;
  }
  sum0 = a.l - b.l;
  sum1 = a.m - b.m + (sum0 >> 22);
  sum2 += sum1 >> 22;
  if (sum2 < 0) {
    return false;
  }
  a.l = sum0 & $intern_23;
  a.m = sum1 & $intern_23;
  a.h = sum2 & $intern_24;
  return true;
}

var remainder_0;
function add_1(a, b){
  var sum0, sum1, sum2;
  sum0 = a.l + b.l;
  sum1 = a.m + b.m + (sum0 >> 22);
  sum2 = a.h + b.h + (sum1 >> 22);
  return create0(sum0 & $intern_23, sum1 & $intern_23, sum2 & $intern_24);
}

function compare(a, b){
  var a0, a1, a2, b0, b1, b2, signA, signB;
  signA = a.h >> 19;
  signB = b.h >> 19;
  if (signA != signB) {
    return signB - signA;
  }
  a2 = a.h;
  b2 = b.h;
  if (a2 != b2) {
    return a2 - b2;
  }
  a1 = a.m;
  b1 = b.m;
  if (a1 != b1) {
    return a1 - b1;
  }
  a0 = a.l;
  b0 = b.l;
  return a0 - b0;
}

function fromDouble(value_0){
  var a0, a1, a2, negative, result;
  if (isNaN(value_0)) {
    return $clinit_BigLongLib$Const() , ZERO;
  }
  if (value_0 < -9223372036854775808) {
    return $clinit_BigLongLib$Const() , MIN_VALUE;
  }
  if (value_0 >= 9223372036854775807) {
    return $clinit_BigLongLib$Const() , MAX_VALUE;
  }
  negative = false;
  if (value_0 < 0) {
    negative = true;
    value_0 = -value_0;
  }
  a2 = 0;
  if (value_0 >= $intern_27) {
    a2 = round_int(value_0 / $intern_27);
    value_0 -= a2 * $intern_27;
  }
  a1 = 0;
  if (value_0 >= $intern_26) {
    a1 = round_int(value_0 / $intern_26);
    value_0 -= a1 * $intern_26;
  }
  a0 = round_int(value_0);
  result = create0(a0, a1, a2);
  negative && negate(result);
  return result;
}

function mul(a, b){
  var a0, a1, a2, a3, a4, b0, b1, b2, b3, b4, c0, c00, c01, c1, c10, c11, c12, c13, c2, c22, c23, c24, p0, p1, p2, p3, p4;
  a0 = a.l & 8191;
  a1 = a.l >> 13 | (a.m & 15) << 9;
  a2 = a.m >> 4 & 8191;
  a3 = a.m >> 17 | (a.h & 255) << 5;
  a4 = (a.h & 1048320) >> 8;
  b0 = b.l & 8191;
  b1 = b.l >> 13 | (b.m & 15) << 9;
  b2 = b.m >> 4 & 8191;
  b3 = b.m >> 17 | (b.h & 255) << 5;
  b4 = (b.h & 1048320) >> 8;
  p0 = a0 * b0;
  p1 = a1 * b0;
  p2 = a2 * b0;
  p3 = a3 * b0;
  p4 = a4 * b0;
  if (b1 != 0) {
    p1 += a0 * b1;
    p2 += a1 * b1;
    p3 += a2 * b1;
    p4 += a3 * b1;
  }
  if (b2 != 0) {
    p2 += a0 * b2;
    p3 += a1 * b2;
    p4 += a2 * b2;
  }
  if (b3 != 0) {
    p3 += a0 * b3;
    p4 += a1 * b3;
  }
  b4 != 0 && (p4 += a0 * b4);
  c00 = p0 & $intern_23;
  c01 = (p1 & 511) << 13;
  c0 = c00 + c01;
  c10 = p0 >> 22;
  c11 = p1 >> 9;
  c12 = (p2 & 262143) << 4;
  c13 = (p3 & 31) << 17;
  c1 = c10 + c11 + c12 + c13;
  c22 = p2 >> 18;
  c23 = p3 >> 5;
  c24 = (p4 & 4095) << 8;
  c2 = c22 + c23 + c24;
  c1 += c0 >> 22;
  c0 &= $intern_23;
  c2 += c1 >> 22;
  c1 &= $intern_23;
  c2 &= $intern_24;
  return create0(c0, c1, c2);
}

function neg(a){
  var neg0, neg1, neg2;
  neg0 = ~a.l + 1 & $intern_23;
  neg1 = ~a.m + (neg0 == 0?1:0) & $intern_23;
  neg2 = ~a.h + (neg0 == 0 && neg1 == 0?1:0) & $intern_24;
  return create0(neg0, neg1, neg2);
}

function or(a, b){
  return create0(a.l | b.l, a.m | b.m, a.h | b.h);
}

function shl(a, n){
  var res0, res1, res2;
  n &= 63;
  if (n < 22) {
    res0 = a.l << n;
    res1 = a.m << n | a.l >> 22 - n;
    res2 = a.h << n | a.m >> 22 - n;
  }
   else if (n < 44) {
    res0 = 0;
    res1 = a.l << n - 22;
    res2 = a.m << n - 22 | a.l >> 44 - n;
  }
   else {
    res0 = 0;
    res1 = 0;
    res2 = a.l << n - 44;
  }
  return create0(res0 & $intern_23, res1 & $intern_23, res2 & $intern_24);
}

function shr(a, n){
  var a2, negative, res0, res1, res2;
  n &= 63;
  a2 = a.h;
  negative = (a2 & $intern_25) != 0;
  negative && (a2 |= -1048576);
  if (n < 22) {
    res2 = a2 >> n;
    res1 = a.m >> n | a2 << 22 - n;
    res0 = a.l >> n | a.m << 22 - n;
  }
   else if (n < 44) {
    res2 = negative?$intern_24:0;
    res1 = a2 >> n - 22;
    res0 = a.m >> n - 22 | a2 << 44 - n;
  }
   else {
    res2 = negative?$intern_24:0;
    res1 = negative?$intern_23:0;
    res0 = a2 >> n - 44;
  }
  return create0(res0 & $intern_23, res1 & $intern_23, res2 & $intern_24);
}

function shru(a, n){
  var a2, res0, res1, res2;
  n &= 63;
  a2 = a.h & $intern_24;
  if (n < 22) {
    res2 = a2 >>> n;
    res1 = a.m >> n | a2 << 22 - n;
    res0 = a.l >> n | a.m << 22 - n;
  }
   else if (n < 44) {
    res2 = 0;
    res1 = a2 >>> n - 22;
    res0 = a.m >> n - 22 | a.h << 44 - n;
  }
   else {
    res2 = 0;
    res1 = 0;
    res0 = a2 >>> n - 44;
  }
  return create0(res0 & $intern_23, res1 & $intern_23, res2 & $intern_24);
}

function sub_0(a, b){
  var sum0, sum1, sum2;
  sum0 = a.l - b.l;
  sum1 = a.m - b.m + (sum0 >> 22);
  sum2 = a.h - b.h + (sum1 >> 22);
  return create0(sum0 & $intern_23, sum1 & $intern_23, sum2 & $intern_24);
}

function toDouble(a){
  if (compare(a, ($clinit_BigLongLib$Const() , ZERO)) < 0) {
    return -toDoubleHelper(neg(a));
  }
  return a.l + a.m * $intern_26 + a.h * $intern_27;
}

function xor(a, b){
  return create0(a.l ^ b.l, a.m ^ b.m, a.h ^ b.h);
}

function $clinit_BigLongLib$Const(){
  $clinit_BigLongLib$Const = emptyMethod;
  MAX_VALUE = create0($intern_23, $intern_23, 524287);
  MIN_VALUE = create0(0, 0, $intern_25);
  ONE = create(1);
  create(2);
  ZERO = create(0);
}

var MAX_VALUE, MIN_VALUE, ONE, ZERO;
function toJava(e){
  var javaException;
  if (instanceOf(e, 22)) {
    return e;
  }
  javaException = e && e['__java$exception'];
  if (!javaException) {
    javaException = new JavaScriptException(e);
    captureStackTrace(javaException);
  }
  return javaException;
}

function toJs(t){
  return t.backingJsObject;
}

function add_2(a, b){
  var result;
  if (isSmallLong0(a) && isSmallLong0(b)) {
    result = a + b;
    if ($intern_28 < result && result < $intern_27) {
      return result;
    }
  }
  return createLongEmul(add_1(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b));
}

function compare_0(a, b){
  var result;
  if (isSmallLong0(a) && isSmallLong0(b)) {
    result = a - b;
    if (!isNaN(result)) {
      return result;
    }
  }
  return compare(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b);
}

function createLongEmul(big_0){
  var a2;
  a2 = big_0.h;
  if (a2 == 0) {
    return big_0.l + big_0.m * $intern_26;
  }
  if (a2 == $intern_24) {
    return big_0.l + big_0.m * $intern_26 - $intern_27;
  }
  return big_0;
}

function eq(a, b){
  return compare_0(a, b) == 0;
}

function fromDouble_0(value_0){
  if ($intern_28 < value_0 && value_0 < $intern_27) {
    return value_0 < 0?$wnd.Math.ceil(value_0):$wnd.Math.floor(value_0);
  }
  return createLongEmul(fromDouble(value_0));
}

function gt(a, b){
  return compare_0(a, b) > 0;
}

function gte_0(a, b){
  return compare_0(a, b) >= 0;
}

function isSmallLong0(value_0){
  return typeof value_0 === 'number';
}

function lt(a, b){
  return compare_0(a, b) < 0;
}

function mod(a, b){
  var result;
  if (isSmallLong0(a) && isSmallLong0(b)) {
    result = a % b;
    if ($intern_28 < result && result < $intern_27) {
      return result;
    }
  }
  return createLongEmul((divMod(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b, true) , remainder_0));
}

function mul_0(a, b){
  var result;
  if (isSmallLong0(a) && isSmallLong0(b)) {
    result = a * b;
    if ($intern_28 < result && result < $intern_27) {
      return result;
    }
  }
  return createLongEmul(mul(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b));
}

function neg_0(a){
  var result;
  if (isSmallLong0(a)) {
    result = 0 - a;
    if (!isNaN(result)) {
      return result;
    }
  }
  return createLongEmul(neg(a));
}

function neq(a, b){
  return compare_0(a, b) != 0;
}

function or_0(a, b){
  return createLongEmul(or(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b));
}

function sub_1(a, b){
  var result;
  if (isSmallLong0(a) && isSmallLong0(b)) {
    result = a - b;
    if ($intern_28 < result && result < $intern_27) {
      return result;
    }
  }
  return createLongEmul(sub_0(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b));
}

function toBigLong(longValue){
  var a0, a1, a3, value_0;
  value_0 = longValue;
  a3 = 0;
  if (value_0 < 0) {
    value_0 += $intern_27;
    a3 = $intern_24;
  }
  a1 = round_int(value_0 / $intern_26);
  a0 = round_int(value_0 - a1 * $intern_26);
  return create0(a0, a1, a3);
}

function toDouble_0(a){
  var d;
  if (isSmallLong0(a)) {
    d = a;
    return d == -0.?0:d;
  }
  return toDouble(a);
}

function toInt(a){
  if (isSmallLong0(a)) {
    return a | 0;
  }
  return a.l | a.m << 22;
}

function xor_0(a, b){
  return createLongEmul(xor(isSmallLong0(a)?toBigLong(a):a, isSmallLong0(b)?toBigLong(b):b));
}

function init(){
  $wnd.setTimeout($entry(assertCompileTimeUserAgent));
  $onModuleLoad();
  $onModuleLoad_0(new circuitjs1);
}

function $adjustHorizontalConstraints(this$static, parentWidth, l_0){
  var leftPx, rightPx, widthPx;
  leftPx = l_0.left_0 * $getUnitSize(this$static, l_0.leftUnit, false);
  rightPx = l_0.right * $getUnitSize(this$static, l_0.rightUnit, false);
  widthPx = l_0.width_0 * $getUnitSize(this$static, l_0.widthUnit, false);
  if (l_0.setLeft && !l_0.setTargetLeft) {
    l_0.setLeft = false;
    if (l_0.setWidth) {
      l_0.setTargetRight = true;
      l_0.sourceRight = (parentWidth - (leftPx + widthPx)) / $getUnitSize(this$static, l_0.targetRightUnit, false);
    }
     else {
      l_0.setTargetWidth = true;
      l_0.sourceWidth = (parentWidth - (leftPx + rightPx)) / $getUnitSize(this$static, l_0.targetWidthUnit, false);
    }
  }
   else if (l_0.setWidth && !l_0.setTargetWidth) {
    l_0.setWidth = false;
    if (l_0.setLeft) {
      l_0.setTargetRight = true;
      l_0.sourceRight = (parentWidth - (leftPx + widthPx)) / $getUnitSize(this$static, l_0.targetRightUnit, false);
    }
     else {
      l_0.setTargetLeft = true;
      l_0.sourceLeft = (parentWidth - (rightPx + widthPx)) / $getUnitSize(this$static, l_0.targetLeftUnit, false);
    }
  }
   else if (l_0.setRight && !l_0.setTargetRight) {
    l_0.setRight = false;
    if (l_0.setWidth) {
      l_0.setTargetLeft = true;
      l_0.sourceLeft = (parentWidth - (rightPx + widthPx)) / $getUnitSize(this$static, l_0.targetLeftUnit, false);
    }
     else {
      l_0.setTargetWidth = true;
      l_0.sourceWidth = (parentWidth - (leftPx + rightPx)) / $getUnitSize(this$static, l_0.targetWidthUnit, false);
    }
  }
  l_0.setLeft = l_0.setTargetLeft;
  l_0.setRight = l_0.setTargetRight;
  l_0.setWidth = l_0.setTargetWidth;
  l_0.leftUnit = l_0.targetLeftUnit;
  l_0.rightUnit = l_0.targetRightUnit;
  l_0.widthUnit = l_0.targetWidthUnit;
}

function $adjustVerticalConstraints(this$static, parentHeight, l_0){
  var bottomPx, heightPx, topPx;
  topPx = l_0.top_0 * $getUnitSize(this$static, l_0.topUnit, true);
  bottomPx = l_0.bottom * $getUnitSize(this$static, l_0.bottomUnit, true);
  heightPx = l_0.height_0 * $getUnitSize(this$static, l_0.heightUnit, true);
  if (l_0.setTop && !l_0.setTargetTop) {
    l_0.setTop = false;
    if (l_0.setHeight) {
      l_0.setTargetBottom = true;
      l_0.sourceBottom = (parentHeight - (topPx + heightPx)) / $getUnitSize(this$static, l_0.targetBottomUnit, true);
    }
     else {
      l_0.setTargetHeight = true;
      l_0.sourceHeight = (parentHeight - (topPx + bottomPx)) / $getUnitSize(this$static, l_0.targetHeightUnit, true);
    }
  }
   else if (l_0.setHeight && !l_0.setTargetHeight) {
    l_0.setHeight = false;
    if (l_0.setTop) {
      l_0.setTargetBottom = true;
      l_0.sourceBottom = (parentHeight - (topPx + heightPx)) / $getUnitSize(this$static, l_0.targetBottomUnit, true);
    }
     else {
      l_0.setTargetTop = true;
      l_0.sourceTop = (parentHeight - (bottomPx + heightPx)) / $getUnitSize(this$static, l_0.targetTopUnit, true);
    }
  }
   else if (l_0.setBottom && !l_0.setTargetBottom) {
    l_0.setBottom = false;
    if (l_0.setHeight) {
      l_0.setTargetTop = true;
      l_0.sourceTop = (parentHeight - (bottomPx + heightPx)) / $getUnitSize(this$static, l_0.targetTopUnit, true);
    }
     else {
      l_0.setTargetHeight = true;
      l_0.sourceHeight = (parentHeight - (topPx + bottomPx)) / $getUnitSize(this$static, l_0.targetHeightUnit, true);
    }
  }
  l_0.setTop = l_0.setTargetTop;
  l_0.setBottom = l_0.setTargetBottom;
  l_0.setHeight = l_0.setTargetHeight;
  l_0.topUnit = l_0.targetTopUnit;
  l_0.bottomUnit = l_0.targetBottomUnit;
  l_0.heightUnit = l_0.targetHeightUnit;
}

function $attachChild(this$static, child, userObject){
  var container, layer;
  container = $attachChild_0(this$static.parentElem, child);
  layer = new Layout$Layer(container, child, userObject);
  $add_8(this$static.layers, layer);
  return layer;
}

function $getUnitSize(this$static, unit, vertical){
  return $getUnitSizeInPixels(this$static.impl, this$static.parentElem, unit, vertical);
}

function $layout(this$static, duration, callback){
  var child, l_0, l$iterator, l$iterator0, parentHeight, parentWidth;
  !!this$static.animation && $cancel(this$static.animation);
  if (duration == 0) {
    for (l$iterator0 = new ArrayList$1(this$static.layers); l$iterator0.i < l$iterator0.this$01.array.length;) {
      l_0 = castTo($next_2(l$iterator0), 142);
      l_0.left_0 = l_0.sourceLeft = l_0.targetLeft;
      l_0.top_0 = l_0.sourceTop = l_0.targetTop;
      l_0.right = l_0.sourceRight = l_0.targetRight;
      l_0.bottom = l_0.sourceBottom = l_0.targetBottom;
      l_0.width_0 = l_0.sourceWidth = l_0.targetWidth;
      l_0.height_0 = l_0.sourceHeight = l_0.targetHeight;
      l_0.setLeft = l_0.setTargetLeft;
      l_0.setTop = l_0.setTargetTop;
      l_0.setRight = l_0.setTargetRight;
      l_0.setBottom = l_0.setTargetBottom;
      l_0.setWidth = l_0.setTargetWidth;
      l_0.setHeight = l_0.setTargetHeight;
      l_0.leftUnit = l_0.targetLeftUnit;
      l_0.topUnit = l_0.targetTopUnit;
      l_0.rightUnit = l_0.targetRightUnit;
      l_0.bottomUnit = l_0.targetBottomUnit;
      l_0.widthUnit = l_0.targetWidthUnit;
      l_0.heightUnit = l_0.targetHeightUnit;
      $layout_0(this$static.impl, l_0);
      !!callback && (child = l_0.userObject , instanceOf(child, 122) && castTo(child, 122).onResize_0());
    }
    return;
  }
  parentWidth = this$static.parentElem.clientWidth | 0;
  parentHeight = this$static.parentElem.clientHeight | 0;
  for (l$iterator = new ArrayList$1(this$static.layers); l$iterator.i < l$iterator.this$01.array.length;) {
    l_0 = castTo($next_2(l$iterator), 142);
    $adjustHorizontalConstraints(this$static, parentWidth, l_0);
    $adjustVerticalConstraints(this$static, parentHeight, l_0);
  }
  this$static.animation = new Layout$1(this$static, callback);
  $run_0(this$static.animation, duration, this$static.parentElem);
}

function $removeChild_0(this$static, layer){
  $removeChild_1(layer.container, layer.child);
  $remove_10(this$static.layers, layer);
}

function Layout(parent_0){
  this.impl = new LayoutImplIE8;
  this.layers = new ArrayList;
  this.parentElem = parent_0;
  $initParent(this.impl, parent_0);
}

defineClass(244, 1, {}, Layout);
var Lcom_google_gwt_layout_client_Layout_2_classLit = createForClass('com.google.gwt.layout.client', 'Layout', 244);
function Layout$1(this$0, val$callback){
  this.this$01 = this$0;
  this.val$callback2 = val$callback;
  Animation.call(this);
}

defineClass(403, 210, {}, Layout$1);
_.onCancel = function onCancel_0(){
  this.this$01.animation = null;
  $layout(this.this$01, 0, null);
}
;
_.onComplete = function onComplete_0(){
  this.this$01.animation = null;
  $layout(this.this$01, 0, null);
}
;
_.onUpdate = function onUpdate(progress){
  var child, l_0, l$iterator;
  for (l$iterator = new ArrayList$1(this.this$01.layers); l$iterator.i < l$iterator.this$01.array.length;) {
    l_0 = castTo($next_2(l$iterator), 142);
    l_0.setTargetLeft && (l_0.left_0 = l_0.sourceLeft + (l_0.targetLeft - l_0.sourceLeft) * progress);
    l_0.setTargetRight && (l_0.right = l_0.sourceRight + (l_0.targetRight - l_0.sourceRight) * progress);
    l_0.setTargetTop && (l_0.top_0 = l_0.sourceTop + (l_0.targetTop - l_0.sourceTop) * progress);
    l_0.setTargetBottom && (l_0.bottom = l_0.sourceBottom + (l_0.targetBottom - l_0.sourceBottom) * progress);
    l_0.setTargetWidth && (l_0.width_0 = l_0.sourceWidth + (l_0.targetWidth - l_0.sourceWidth) * progress);
    l_0.setTargetHeight && (l_0.height_0 = l_0.sourceHeight + (l_0.targetHeight - l_0.sourceHeight) * progress);
    $layout_0(this.this$01.impl, l_0);
    !!this.val$callback2 && (child = l_0.userObject , instanceOf(child, 122) && castTo(child, 122).onResize_0());
  }
}
;
var Lcom_google_gwt_layout_client_Layout$1_2_classLit = createForClass('com.google.gwt.layout.client', 'Layout/1', 403);
function $setBottomHeight(this$static, bottom, bottomUnit, height, heightUnit){
  this$static.setTargetBottom = this$static.setTargetHeight = true;
  this$static.setTargetTop = false;
  this$static.targetBottom = bottom;
  this$static.targetHeight = height;
  this$static.targetBottomUnit = bottomUnit;
  this$static.targetHeightUnit = heightUnit;
}

function $setLeftRight(this$static, left, leftUnit, right, rightUnit){
  this$static.setTargetLeft = this$static.setTargetRight = true;
  this$static.setTargetWidth = false;
  this$static.targetLeft = left;
  this$static.targetRight = right;
  this$static.targetLeftUnit = leftUnit;
  this$static.targetRightUnit = rightUnit;
}

function $setLeftWidth(this$static, left, leftUnit, width_0, widthUnit){
  this$static.setTargetLeft = this$static.setTargetWidth = true;
  this$static.setTargetRight = false;
  this$static.targetLeft = left;
  this$static.targetWidth = width_0;
  this$static.targetLeftUnit = leftUnit;
  this$static.targetWidthUnit = widthUnit;
}

function $setRightWidth(this$static, right, rightUnit, width_0, widthUnit){
  this$static.setTargetRight = this$static.setTargetWidth = true;
  this$static.setTargetLeft = false;
  this$static.targetRight = right;
  this$static.targetWidth = width_0;
  this$static.targetRightUnit = rightUnit;
  this$static.targetWidthUnit = widthUnit;
}

function $setTopBottom(this$static, top_0, topUnit, bottom, bottomUnit){
  this$static.setTargetTop = this$static.setTargetBottom = true;
  this$static.setTargetHeight = false;
  this$static.targetTop = top_0;
  this$static.targetBottom = bottom;
  this$static.targetTopUnit = topUnit;
  this$static.targetBottomUnit = bottomUnit;
}

function $setTopHeight(this$static, top_0, topUnit, height, heightUnit){
  this$static.setTargetTop = this$static.setTargetHeight = true;
  this$static.setTargetBottom = false;
  this$static.targetTop = top_0;
  this$static.targetHeight = height;
  this$static.targetTopUnit = topUnit;
  this$static.targetHeightUnit = heightUnit;
}

function Layout$Layer(container, child, userObject){
  this.targetLeftUnit = ($clinit_Style$Unit() , PX);
  this.targetTopUnit = PX;
  this.targetRightUnit = PX;
  this.targetBottomUnit = PX;
  this.container = container;
  this.child = child;
  this.userObject = userObject;
}

defineClass(142, 1, {142:1}, Layout$Layer);
_.bottom = 0;
_.height_0 = 0;
_.left_0 = 0;
_.right = 0;
_.setBottom = false;
_.setHeight = false;
_.setLeft = false;
_.setRight = false;
_.setTargetBottom = true;
_.setTargetHeight = false;
_.setTargetLeft = true;
_.setTargetRight = true;
_.setTargetTop = true;
_.setTargetWidth = false;
_.setTop = false;
_.setWidth = false;
_.sourceBottom = 0;
_.sourceHeight = 0;
_.sourceLeft = 0;
_.sourceRight = 0;
_.sourceTop = 0;
_.sourceWidth = 0;
_.targetBottom = 0;
_.targetHeight = 0;
_.targetLeft = 0;
_.targetRight = 0;
_.targetTop = 0;
_.targetWidth = 0;
_.top_0 = 0;
_.visible = true;
_.width_0 = 0;
var Lcom_google_gwt_layout_client_Layout$Layer_2_classLit = createForClass('com.google.gwt.layout.client', 'Layout/Layer', 142);
function $clinit_LayoutImpl(){
  $clinit_LayoutImpl = emptyMethod;
  fixedRuler = createRuler(($clinit_Style$Unit() , CM), CM);
  $appendChild($doc.body, fixedRuler);
}

function $attachChild_0(parent_0, child){
  var container;
  container = $doc.createElement('div');
  container.appendChild(child);
  container.style['position'] = ($clinit_Style$Position() , 'absolute');
  container.style['overflow'] = ($clinit_Style$Overflow() , 'hidden');
  $fillParent(child);
  parent_0.insertBefore(container, null);
  return container;
}

function $fillParent(elem){
  var style;
  style = elem.style;
  style['position'] = ($clinit_Style$Position() , 'absolute');
  style['left'] = ($clinit_Style$Unit() , '0.0px');
  style['top'] = '0.0px';
  style['right'] = '0.0px';
  style['bottom'] = '0.0px';
}

function $getUnitSizeInPixels(this$static, parent_0, unit, vertical){
  if (!unit) {
    return 1;
  }
  switch (unit.ordinal) {
    case 1:
      return (vertical?parent_0.clientHeight | 0:parent_0.clientWidth | 0) / 100;
    case 2:
      return ((this$static.relativeRuler.offsetWidth || 0) | 0) / 10;
    case 3:
      return ((this$static.relativeRuler.offsetHeight || 0) | 0) / 10;
    case 7:
      return ((fixedRuler.offsetWidth || 0) | 0) * 0.1;
    case 8:
      return ((fixedRuler.offsetWidth || 0) | 0) * $intern_29;
    case 6:
      return ((fixedRuler.offsetWidth || 0) | 0) * 0.254;
    case 4:
      return ((fixedRuler.offsetWidth || 0) | 0) * 0.00353;
    case 5:
      return ((fixedRuler.offsetWidth || 0) | 0) * 0.0423;
    default:case 0:
      return 1;
  }
}

function $initParent(this$static, parent_0){
  parent_0.style['position'] = ($clinit_Style$Position() , 'relative');
  $appendChild(parent_0, this$static.relativeRuler = createRuler(($clinit_Style$Unit() , EM), EX));
}

function $removeChild_1(container, child){
  var parent_0, parent0, style;
  parent0 = $getParentElement(container);
  !!parent0 && parent0.removeChild(container);
  $getParentElement(child) == container && (parent_0 = $getParentElement(child) , !!parent_0 && parent_0.removeChild(child));
  style = child.style;
  style['position'] = '';
  style['left'] = '';
  style['top'] = '';
  style['width'] = '';
  style['height'] = '';
}

function createRuler(widthUnit, heightUnit){
  var ruler, style;
  ruler = $doc.createElement('div');
  ruler.innerHTML = '&nbsp;';
  style = ruler.style;
  style['position'] = ($clinit_Style$Position() , 'absolute');
  style['zIndex'] = '-32767';
  style['top'] = -20 + heightUnit.getType();
  style['width'] = 10 + widthUnit.getType();
  style['height'] = 10 + heightUnit.getType();
  style['visibility'] = ($clinit_Style$Visibility() , 'hidden');
  $set_0(($clinit_State() , HIDDEN), ruler, stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_Boolean_2_classLit, 1), $intern_3, 204, 8, [($clinit_Boolean() , true)]));
  return ruler;
}

defineClass(660, 1, {});
var fixedRuler;
var Lcom_google_gwt_layout_client_LayoutImpl_2_classLit = createForClass('com.google.gwt.layout.client', 'LayoutImpl', 660);
function $layout_0(this$static, layer){
  var oldDisplay, style;
  style = layer.container.style;
  setLayer(layer.container, layer);
  if (layer.visible) {
    oldDisplay = style['display'];
    style['display'] = '';
    oldDisplay.length > 0 && $updateVisibility(this$static, layer.container);
  }
   else {
    style['display'] = ($clinit_Style$Display() , 'none');
  }
  layer.setLeft?$setValue(this$static, layer, 'left', layer.left_0, layer.leftUnit, false, false):(style['left'] = '' , undefined);
  layer.setRight?$setValue(this$static, layer, 'right', layer.right, layer.rightUnit, false, false):(style['right'] = '' , undefined);
  layer.setTop?$setValue(this$static, layer, 'top', layer.top_0, layer.topUnit, true, false):(style['top'] = '' , undefined);
  layer.setBottom?$setValue(this$static, layer, 'bottom', layer.bottom, layer.bottomUnit, true, false):(style['bottom'] = '' , undefined);
  layer.setWidth?$setValue(this$static, layer, 'width', layer.width_0, layer.widthUnit, false, true):(style['width'] = '' , undefined);
  layer.setHeight?$setValue(this$static, layer, 'height', layer.height_0, layer.heightUnit, true, true):(style['height'] = '' , undefined);
  style = layer.child.style;
  switch (2) {
    case 2:
      style['left'] = ($clinit_Style$Unit() , '0.0px');
      style['right'] = '0.0px';
  }
  switch (2) {
    case 2:
      style['top'] = ($clinit_Style$Unit() , '0.0px');
      style['bottom'] = '0.0px';
  }
}

function $removeLayerRefs(parent_0){
  for (var i = 0; i < parent_0.childNodes.length; ++i) {
    var container = parent_0.childNodes[i];
    container.__layer && (container.__layer = null);
  }
}

function $setValue(this$static, layer, prop, value_0, unit, vertical, noNegative){
  switch (unit.ordinal) {
    case 0:
    case 1:
      break;
    default:value_0 = value_0 * $getUnitSizeInPixels(this$static, layer.container, unit, vertical);
      value_0 = round_int(value_0 + 0.5);
      $clinit_Style$Unit();
  }
  noNegative && value_0 < 0 && (value_0 = 0);
  layer.container.style[prop] = value_0 + 'px';
}

function $updateVisibility(this$static, container){
  var i, layer, node, nodes;
  layer = container.__layer;
  !!layer && $layout_0(this$static, layer);
  nodes = container.childNodes;
  for (i = 0; i < nodes.length; ++i) {
    node = nodes[i];
    node.nodeType == 1 && $updateVisibility(this$static, node);
  }
}

function LayoutImplIE8(){
  $clinit_LayoutImpl();
}

function setLayer(container, layer){
  container.__layer = layer;
}

defineClass(509, 660, {}, LayoutImplIE8);
var Lcom_google_gwt_layout_client_LayoutImplIE8_2_classLit = createForClass('com.google.gwt.layout.client', 'LayoutImplIE8', 509);
function $replace(this$static, input_0, replacement){
  return input_0.replace(this$static, replacement);
}

function $test(this$static, input_0){
  return this$static.test(input_0);
}

function ImageResourcePrototype(url_0){
  this.left_0 = 0;
  this.top_0 = 0;
  this.height_0 = 9;
  this.width_0 = 5;
  this.url_0 = url_0;
}

defineClass(599, 1, {}, ImageResourcePrototype);
_.height_0 = 0;
_.left_0 = 0;
_.top_0 = 0;
_.width_0 = 0;
var Lcom_google_gwt_resources_client_impl_ImageResourcePrototype_2_classLit = createForClass('com.google.gwt.resources.client.impl', 'ImageResourcePrototype', 599);
function $append(this$static, styles){
  $append_2(this$static.sb, styles.css);
  return this$static;
}

function SafeStylesBuilder(){
  this.sb = new StringBuilder;
}

defineClass(602, 1, {}, SafeStylesBuilder);
var Lcom_google_gwt_safecss_shared_SafeStylesBuilder_2_classLit = createForClass('com.google.gwt.safecss.shared', 'SafeStylesBuilder', 602);
function SafeStylesString(css){
  verifySafeStylesConstraints(css);
  this.css = css;
}

defineClass(130, 1, {677:1, 130:1, 3:1}, SafeStylesString);
_.equals_0 = function equals_1(obj){
  if (!instanceOf(obj, 130)) {
    return false;
  }
  return $equals_1(this.css, castTo(castTo(obj, 677), 130).css);
}
;
_.hashCode_0 = function hashCode_3(){
  return getHashCode_0(this.css);
}
;
var Lcom_google_gwt_safecss_shared_SafeStylesString_2_classLit = createForClass('com.google.gwt.safecss.shared', 'SafeStylesString', 130);
function verifySafeStylesConstraints(styles){
  if (styles == null) {
    throw toJs(new NullPointerException_0('css is null'));
  }
}

function OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(html){
  if (html == null) {
    throw toJs(new NullPointerException_0('html is null'));
  }
  this.html = html;
}

defineClass(620, 1, $intern_30, OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml);
_.asString = function asString(){
  return this.html;
}
;
_.equals_0 = function equals_2(obj){
  if (!instanceOf(obj, 201)) {
    return false;
  }
  return $equals_1(this.html, castTo(obj, 201).asString());
}
;
_.hashCode_0 = function hashCode_4(){
  return getHashCode_0(this.html);
}
;
var Lcom_google_gwt_safehtml_shared_OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml_2_classLit = createForClass('com.google.gwt.safehtml.shared', 'OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml', 620);
function SafeHtmlString(html){
  if (html == null) {
    throw toJs(new NullPointerException_0('html is null'));
  }
  this.html = html;
}

defineClass(54, 1, $intern_30, SafeHtmlString);
_.asString = function asString_0(){
  return this.html;
}
;
_.equals_0 = function equals_3(obj){
  if (!instanceOf(obj, 201)) {
    return false;
  }
  return $equals_1(this.html, castTo(obj, 201).asString());
}
;
_.hashCode_0 = function hashCode_5(){
  return getHashCode_0(this.html);
}
;
_.toString_0 = function toString_8(){
  return 'safe: "' + this.html + '"';
}
;
var Lcom_google_gwt_safehtml_shared_SafeHtmlString_2_classLit = createForClass('com.google.gwt.safehtml.shared', 'SafeHtmlString', 54);
function $clinit_SafeHtmlUtils(){
  $clinit_SafeHtmlUtils = emptyMethod;
  new SafeHtmlString('');
  HTML_CHARS_RE = new RegExp('[&<>\'"]');
  AMP_RE = new RegExp('&', 'g');
  GT_RE = new RegExp('>', 'g');
  LT_RE = new RegExp('<', 'g');
  SQUOT_RE = new RegExp("'", 'g');
  QUOT_RE = new RegExp('"', 'g');
}

function htmlEscape(s){
  $clinit_SafeHtmlUtils();
  if (!$test(HTML_CHARS_RE, s)) {
    return s;
  }
  s.indexOf('&') != -1 && (s = $replace(AMP_RE, s, '&amp;'));
  s.indexOf('<') != -1 && (s = $replace(LT_RE, s, '&lt;'));
  s.indexOf('>') != -1 && (s = $replace(GT_RE, s, '&gt;'));
  s.indexOf('"') != -1 && (s = $replace(QUOT_RE, s, '&quot;'));
  s.indexOf("'") != -1 && (s = $replace(SQUOT_RE, s, '&#39;'));
  return s;
}

var AMP_RE, GT_RE, HTML_CHARS_RE, LT_RE, QUOT_RE, SQUOT_RE;
function SafeUriString(uri_0){
  this.uri_0 = uri_0;
}

defineClass(172, 1, {674:1, 172:1}, SafeUriString);
_.equals_0 = function equals_4(obj){
  if (!instanceOf(obj, 172)) {
    return false;
  }
  return $equals_1(this.uri_0, castTo(castTo(obj, 674), 172).uri_0);
}
;
_.hashCode_0 = function hashCode_6(){
  return getHashCode_0(this.uri_0);
}
;
_.toString_0 = function toString_9(){
  return 'safe: "' + this.uri_0 + '"';
}
;
var Lcom_google_gwt_safehtml_shared_SafeUriString_2_classLit = createForClass('com.google.gwt.safehtml.shared', 'SafeUriString', 172);
function $clinit_UriUtils(){
  $clinit_UriUtils = emptyMethod;
  new RegExp('%5B', 'g');
  new RegExp('%5D', 'g');
}

function $setItem(this$static, data_0){
  $setItem_0(this$static.storage, 'circuitClipboard', data_0);
}

function Storage_0(){
  this.storage = 'localStorage';
}

defineClass(187, 1, {}, Storage_0);
var localStorage_0;
var Lcom_google_gwt_storage_client_Storage_2_classLit = createForClass('com.google.gwt.storage.client', 'Storage', 187);
function $clinit_Storage$StorageSupportDetector(){
  $clinit_Storage$StorageSupportDetector = emptyMethod;
  localStorageSupported = checkStorageSupport('localStorage');
  checkStorageSupport('sessionStorage');
}

function checkStorageSupport(storage){
  var c = '_gwt_dummy_';
  try {
    $wnd[storage].setItem(c, c);
    $wnd[storage].removeItem(c);
    return true;
  }
   catch (e) {
    return false;
  }
}

var localStorageSupported = false;
function $getItem(storage, key){
  return $wnd[storage].getItem(key);
}

function $setItem_0(storage, key, data_0){
  $wnd[storage].getItem(key);
  $wnd[storage].setItem(key, data_0);
}

defineClass(663, 1, {});
var Lcom_google_gwt_text_shared_AbstractRenderer_2_classLit = createForClass('com.google.gwt.text.shared', 'AbstractRenderer', 663);
function PassthroughParser(){
}

defineClass(608, 1, {}, PassthroughParser);
var INSTANCE_0;
var Lcom_google_gwt_text_shared_testing_PassthroughParser_2_classLit = createForClass('com.google.gwt.text.shared.testing', 'PassthroughParser', 608);
function PassthroughRenderer(){
}

defineClass(607, 663, {}, PassthroughRenderer);
var INSTANCE_1;
var Lcom_google_gwt_text_shared_testing_PassthroughRenderer_2_classLit = createForClass('com.google.gwt.text.shared.testing', 'PassthroughRenderer', 607);
defineClass(621, 1, {32:1});
var Lcom_google_gwt_user_client_BaseListenerWrapper_2_classLit = createForClass('com.google.gwt.user.client', 'BaseListenerWrapper', 621);
function $clinit_DOM(){
  $clinit_DOM = emptyMethod;
  $clinit_DOMImplStandard();
}

function dispatchEvent_0(evt, elem){
  $clinit_DOM();
  var eventListener;
  eventListener = getEventListener(elem);
  if (!eventListener) {
    return false;
  }
  dispatchEvent_1(evt, elem, eventListener);
  return true;
}

function dispatchEvent_1(evt, elem, listener){
  $clinit_DOM();
  var prevCurrentEvent;
  prevCurrentEvent = currentEvent;
  currentEvent = evt;
  elem == sCaptureElem && $eventGetTypeInt(evt.type) == 8192 && (sCaptureElem = null);
  listener.onBrowserEvent(evt);
  currentEvent = prevCurrentEvent;
}

function insertChild(parent_0, child, index_0){
  $clinit_DOM();
  $insertChild(parent_0, resolve(child), index_0);
}

function isPotential(o){
  $clinit_DOM();
  try {
    return !!o && !!o.__gwt_resolve;
  }
   catch (e) {
    return false;
  }
}

function previewEvent(evt){
  $clinit_DOM();
  var ret;
  ret = fire_3(handlers_0, evt);
  if (!ret && !!evt) {
    evt.stopPropagation();
    evt.preventDefault();
  }
  return ret;
}

function releaseCapture(elem){
  $clinit_DOM();
  !!sCaptureElem && elem == sCaptureElem && (sCaptureElem = null);
  $maybeInitializeEventSystem();
  ($clinit_DOMImplStandard() , captureElem) == elem && (captureElem = null);
}

function resolve(maybePotential){
  $clinit_DOM();
  return maybePotential.__gwt_resolve?maybePotential.__gwt_resolve():maybePotential;
}

function setCapture(elem){
  $clinit_DOM();
  sCaptureElem = elem;
  $maybeInitializeEventSystem();
  $clinit_DOMImplStandard() , captureElem = elem;
}

function sinkEvents_0(elem, eventBits){
  $clinit_DOM();
  $maybeInitializeEventSystem();
  $sinkEventsImpl(elem, eventBits);
}

var currentEvent = null, sCaptureElem;
function $onModuleLoad(){
  var allowedModes, currentMode, i;
  currentMode = $doc.compatMode;
  allowedModes = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['CSS1Compat']);
  for (i = 0; i < allowedModes.length; i++) {
    if ($equals_1(allowedModes[i], currentMode)) {
      return;
    }
  }
  allowedModes.length == 1 && $equals_1('CSS1Compat', allowedModes[0]) && $equals_1('BackCompat', currentMode)?"GWT no longer supports Quirks Mode (document.compatMode=' BackCompat').<br>Make sure your application's host HTML page has a Standards Mode (document.compatMode=' CSS1Compat') doctype,<br>e.g. by using &lt;!doctype html&gt; at the start of your application's HTML page.<br><br>To continue using this unsupported rendering mode and risk layout problems, suppress this message by adding<br>the following line to your*.gwt.xml module file:<br>&nbsp;&nbsp;&lt;extend-configuration-property name=\"document.compatMode\" value=\"" + currentMode + '"/&gt;':"Your *.gwt.xml module configuration prohibits the use of the current document rendering mode (document.compatMode=' " + currentMode + "').<br>Modify your application's host HTML page doctype, or update your custom " + "'document.compatMode' configuration property settings.";
}

function $getTypeInt(this$static){
  return $clinit_DOM() , $eventGetTypeInt(this$static.type);
}

function addNativePreviewHandler(handler){
  $clinit_DOM();
  $maybeInitializeEventSystem();
  !TYPE_17 && (TYPE_17 = new GwtEvent$Type);
  if (!handlers_0) {
    handlers_0 = new HandlerManager_0(null, true);
    singleton = new Event$NativePreviewEvent;
  }
  return $addHandler_0(handlers_0, TYPE_17, handler);
}

function getEventsSunk(elem){
  return $clinit_DOM() , elem.__eventBits || 0;
}

function getTypeInt(typeName){
  return $eventGetTypeInt(($clinit_DOM() , typeName));
}

function releaseCapture_0(elem){
  $clinit_DOM();
  !!sCaptureElem && elem == sCaptureElem && (sCaptureElem = null);
  $maybeInitializeEventSystem();
  ($clinit_DOMImplStandard() , captureElem) == elem && (captureElem = null);
}

function setCapture_0(elem){
  $clinit_DOM();
  sCaptureElem = elem;
  $maybeInitializeEventSystem();
  $clinit_DOMImplStandard() , captureElem = elem;
}

function sinkEvents_1(elem, eventBits){
  $clinit_DOM();
  $maybeInitializeEventSystem();
  $sinkEventsImpl(elem, eventBits);
}

var handlers_0;
function $revive(this$static){
  this$static.dead = false;
  this$static.source = null;
  this$static.isCanceled = false;
  this$static.isConsumed = false;
  this$static.isFirstHandler = true;
  this$static.nativeEvent = null;
}

function $setNativeEvent_0(this$static, nativeEvent){
  this$static.nativeEvent = nativeEvent;
}

function Event$NativePreviewEvent(){
}

function fire_3(handlers, nativeEvent){
  var lastIsCanceled, lastIsConsumed, lastIsFirstHandler, lastNativeEvent, ret;
  if (!!TYPE_17 && !!handlers && $isEventHandled(handlers, TYPE_17)) {
    lastIsCanceled = singleton.isCanceled;
    lastIsConsumed = singleton.isConsumed;
    lastIsFirstHandler = singleton.isFirstHandler;
    lastNativeEvent = singleton.nativeEvent;
    $revive(singleton);
    $setNativeEvent_0(singleton, nativeEvent);
    $fireEvent_0(handlers, singleton);
    ret = !(singleton.isCanceled && !singleton.isConsumed);
    singleton.isCanceled = lastIsCanceled;
    singleton.isConsumed = lastIsConsumed;
    singleton.isFirstHandler = lastIsFirstHandler;
    singleton.nativeEvent = lastNativeEvent;
    return ret;
  }
  return true;
}

defineClass(365, 651, {}, Event$NativePreviewEvent);
_.dispatch = function dispatch_17(handler){
  castTo(handler, 624).onPreviewNativeEvent(this);
  singleton.isFirstHandler = false;
}
;
_.getAssociatedType = function getAssociatedType_18(){
  return TYPE_17;
}
;
_.revive = function revive_0(){
  $revive(this);
}
;
_.isCanceled = false;
_.isConsumed = false;
_.isFirstHandler = false;
var TYPE_17, singleton;
var Lcom_google_gwt_user_client_Event$NativePreviewEvent_2_classLit = createForClass('com.google.gwt.user.client', 'Event/NativePreviewEvent', 365);
function $clinit_History(){
  $clinit_History = emptyMethod;
  new History$HistoryImpl;
  historyEventSource = new History$HistoryEventSource;
  token = getDecodedHash();
}

function addValueChangeHandler(handler){
  $clinit_History();
  return $addValueChangeHandler(historyEventSource, handler);
}

function getDecodedHash(){
  var hashToken, href_0, hashLoc;
  hashToken = (href_0 = $wnd.location.href , hashLoc = href_0.indexOf('#') , hashLoc > 0?href_0.substring(hashLoc):'');
  if (hashToken == null || hashToken.length == 0) {
    return '';
  }
  return $decode(hashToken.substr(1));
}

function onHashChanged(){
  $clinit_History();
  var hashToken;
  hashToken = getDecodedHash();
  if (!$equals_1(hashToken, token)) {
    token = hashToken;
    fire_2(historyEventSource);
  }
}

var historyEventSource, token;
function $addValueChangeHandler(this$static, handler){
  return $addHandler_0(this$static.handlers, (!TYPE_16 && (TYPE_16 = new GwtEvent$Type) , TYPE_16), handler);
}

function History$HistoryEventSource(){
  this.handlers = new HandlerManager(null);
}

defineClass(605, 1, {23:1}, History$HistoryEventSource);
_.fireEvent = function fireEvent_1(event_0){
  $fireEvent_0(this.handlers, event_0);
}
;
var Lcom_google_gwt_user_client_History$HistoryEventSource_2_classLit = createForClass('com.google.gwt.user.client', 'History/HistoryEventSource', 605);
function History$HistoryImpl(){
  var handler;
  handler = $entry(onHashChanged);
  $wnd.addEventListener('hashchange', handler, false);
}

defineClass(606, 1, {}, History$HistoryImpl);
var Lcom_google_gwt_user_client_History$HistoryImpl_2_classLit = createForClass('com.google.gwt.user.client', 'History/HistoryImpl', 606);
function $decode(toDecode){
  return $wnd.decodeURI(toDecode.replace('%23', '#'));
}

function addCloseHandler(handler){
  maybeInitializeCloseHandlers();
  return addHandler(TYPE_14?TYPE_14:(TYPE_14 = new GwtEvent$Type), handler);
}

function addHandler(type_0, handler){
  return $addHandler_0((!handlers_1 && (handlers_1 = new Window$WindowHandlers) , handlers_1), type_0, handler);
}

function addResizeHandler(handler){
  maybeInitializeCloseHandlers();
  maybeInitializeResizeHandlers();
  return addHandler((!TYPE_15 && (TYPE_15 = new GwtEvent$Type) , TYPE_15), handler);
}

function alert_0(msg){
  $wnd.alert(msg);
}

function maybeInitializeCloseHandlers(){
  if (!closeHandlersInitialized) {
    $initHandler('function __gwt_initWindowCloseHandler(beforeunload, unload) {\n  var wnd = window\n  , oldOnBeforeUnload = wnd.onbeforeunload\n  , oldOnUnload = wnd.onunload;\n  \n  wnd.onbeforeunload = function(evt) {\n    var ret, oldRet;\n    try {\n      ret = beforeunload();\n    } finally {\n      oldRet = oldOnBeforeUnload && oldOnBeforeUnload(evt);\n    }\n    // Avoid returning null as IE6 will coerce it into a string.\n    // Ensure that "" gets returned properly.\n    if (ret != null) {\n      return ret;\n    }\n    if (oldRet != null) {\n      return oldRet;\n    }\n    // returns undefined.\n  };\n  \n  wnd.onunload = function(evt) {\n    try {\n      unload();\n    } finally {\n      oldOnUnload && oldOnUnload(evt);\n      wnd.onresize = null;\n      wnd.onscroll = null;\n      wnd.onbeforeunload = null;\n      wnd.onunload = null;\n    }\n  };\n  \n  // Remove the reference once we\'ve initialize the handler\n  wnd.__gwt_initWindowCloseHandler = undefined;\n}\n', new WindowImplIE$1);
    closeHandlersInitialized = true;
  }
}

function maybeInitializeResizeHandlers(){
  if (!resizeHandlersInitialized) {
    $initHandler("function __gwt_initWindowResizeHandler(resize) {\n  var wnd = window, oldOnResize = wnd.onresize;\n  \n  wnd.onresize = function(evt) {\n    try {\n      resize();\n    } finally {\n      oldOnResize && oldOnResize(evt);\n    }\n  };\n  \n  // Remove the reference once we've initialize the handler\n  wnd.__gwt_initWindowResizeHandler = undefined;\n}\n", new WindowImplIE$2);
    resizeHandlersInitialized = true;
  }
}

function onClosed(){
  closeHandlersInitialized && fire_0((!handlers_1 && (handlers_1 = new Window$WindowHandlers) , handlers_1), false);
}

function onClosing(){
  var event_0;
  if (closeHandlersInitialized) {
    event_0 = new Window$ClosingEvent;
    !!handlers_1 && $fireEvent_0(handlers_1, event_0);
    return null;
  }
  return null;
}

function onResize(){
  var height, width_0;
  if (resizeHandlersInitialized) {
    width_0 = $getClientWidth($doc);
    height = $getClientHeight($doc);
    if (lastResizeWidth != width_0 || lastResizeHeight != height) {
      lastResizeWidth = width_0;
      lastResizeHeight = height;
      fire_1((!handlers_1 && (handlers_1 = new Window$WindowHandlers) , handlers_1), width_0);
    }
  }
}

var closeHandlersInitialized = false, handlers_1, lastResizeHeight = 0, lastResizeWidth = 0, resizeHandlersInitialized = false;
function $clinit_Window$ClosingEvent(){
  $clinit_Window$ClosingEvent = emptyMethod;
  TYPE_18 = new GwtEvent$Type;
}

function Window$ClosingEvent(){
  $clinit_Window$ClosingEvent();
}

defineClass(367, 651, {}, Window$ClosingEvent);
_.dispatch = function dispatch_18(handler){
  checkCriticalType(handler == null);
  null.$_nullMethod();
}
;
_.getAssociatedType = function getAssociatedType_19(){
  return TYPE_18;
}
;
var TYPE_18;
var Lcom_google_gwt_user_client_Window$ClosingEvent_2_classLit = createForClass('com.google.gwt.user.client', 'Window/ClosingEvent', 367);
function Window$WindowHandlers(){
  HandlerManager.call(this, null);
}

defineClass(208, 140, {95:1, 23:1}, Window$WindowHandlers);
var Lcom_google_gwt_user_client_Window$WindowHandlers_2_classLit = createForClass('com.google.gwt.user.client', 'Window/WindowHandlers', 208);
function $eventGetTypeInt(eventType){
  switch (eventType) {
    case 'blur':
      return $intern_31;
    case 'change':
      return $intern_21;
    case 'click':
      return 1;
    case 'dblclick':
      return 2;
    case 'focus':
      return $intern_32;
    case 'keydown':
      return 128;
    case 'keypress':
      return 256;
    case 'keyup':
      return 512;
    case 'load':
      return 32768;
    case 'losecapture':
      return 8192;
    case 'mousedown':
      return 4;
    case 'mousemove':
      return 64;
    case 'mouseout':
      return 32;
    case 'mouseover':
      return 16;
    case 'mouseup':
      return 8;
    case 'scroll':
      return $intern_33;
    case 'error':
      return $intern_34;
    case 'DOMMouseScroll':
    case 'mousewheel':
      return 131072;
    case 'contextmenu':
      return 262144;
    case 'paste':
      return $intern_25;
    case 'touchstart':
      return $intern_35;
    case 'touchmove':
      return $intern_36;
    case 'touchend':
      return $intern_26;
    case 'touchcancel':
      return 8388608;
    case 'gesturestart':
      return $intern_37;
    case 'gesturechange':
      return $intern_38;
    case 'gestureend':
      return $intern_39;
    default:return -1;
  }
}

function $maybeInitializeEventSystem(){
  if (!eventSystemIsInitialized) {
    $initEventSystem();
    eventSystemIsInitialized = true;
  }
}

function getEventListener(elem){
  var maybeListener = elem.__listener;
  return !instanceOfJso(maybeListener) && instanceOf(maybeListener, 25)?maybeListener:null;
}

function setEventListener(elem, listener){
  elem.__listener = listener;
}

var eventSystemIsInitialized = false;
function $clinit_DOMImplStandard(){
  $clinit_DOMImplStandard = emptyMethod;
  bitlessEventDispatchers = {_default_:dispatchEvent_3, dragenter:dispatchDragEvent, dragover:dispatchDragEvent};
  captureEventDispatchers = {click:dispatchCapturedMouseEvent, dblclick:dispatchCapturedMouseEvent, mousedown:dispatchCapturedMouseEvent, mouseup:dispatchCapturedMouseEvent, mousemove:dispatchCapturedMouseEvent, mouseover:dispatchCapturedMouseEvent, mouseout:dispatchCapturedMouseEvent, mousewheel:dispatchCapturedMouseEvent, keydown:dispatchCapturedEvent, keyup:dispatchCapturedEvent, keypress:dispatchCapturedEvent, touchstart:dispatchCapturedMouseEvent, touchend:dispatchCapturedMouseEvent, touchmove:dispatchCapturedMouseEvent, touchcancel:dispatchCapturedMouseEvent, gesturestart:dispatchCapturedMouseEvent, gestureend:dispatchCapturedMouseEvent, gesturechange:dispatchCapturedMouseEvent};
}

function $getChild(elem, index_0){
  var count = 0, child = elem.firstChild;
  while (child) {
    if (child.nodeType == 1) {
      if (index_0 == count)
        return child;
      ++count;
    }
    child = child.nextSibling;
  }
  return null;
}

function $getChildCount(elem){
  var count = 0, child = elem.firstChild;
  while (child) {
    child.nodeType == 1 && ++count;
    child = child.nextSibling;
  }
  return count;
}

function $initEventSystem(){
  dispatchEvent_2 = $entry(dispatchEvent_3);
  dispatchUnhandledEvent = $entry(dispatchUnhandledEvent_0);
  var foreach = foreach_0;
  var bitlessEvents = bitlessEventDispatchers;
  foreach(bitlessEvents, function(e, fn){
    bitlessEvents[e] = $entry(fn);
  }
  );
  var captureEvents_0 = captureEventDispatchers;
  foreach(captureEvents_0, function(e, fn){
    captureEvents_0[e] = $entry(fn);
  }
  );
  foreach(captureEvents_0, function(e, fn){
    $wnd.addEventListener(e, fn, true);
  }
  );
}

function $insertChild(parent_0, toAdd, index_0){
  var count = 0, child = parent_0.firstChild, before = null;
  while (child) {
    if (child.nodeType == 1) {
      if (count == index_0) {
        before = child;
        break;
      }
      ++count;
    }
    child = child.nextSibling;
  }
  parent_0.insertBefore(toAdd, before);
}

function $sinkBitlessEvent_0(elem, eventTypeName){
  $maybeInitializeEventSystem();
  $sinkBitlessEventImpl(elem, eventTypeName);
  $equals_1('dragover', eventTypeName) && $sinkBitlessEventImpl(elem, 'dragenter');
}

function $sinkBitlessEventImpl(elem, eventTypeName){
  var dispatchMap = bitlessEventDispatchers;
  var dispatcher = dispatchMap[eventTypeName] || dispatchMap['_default_'];
  elem.addEventListener(eventTypeName, dispatcher, false);
}

function $sinkEventsImpl(elem, bits){
  var chMask = (elem.__eventBits || 0) ^ bits;
  elem.__eventBits = bits;
  if (!chMask)
    return;
  chMask & 1 && (elem.onclick = bits & 1?dispatchEvent_2:null);
  chMask & 2 && (elem.ondblclick = bits & 2?dispatchEvent_2:null);
  chMask & 4 && (elem.onmousedown = bits & 4?dispatchEvent_2:null);
  chMask & 8 && (elem.onmouseup = bits & 8?dispatchEvent_2:null);
  chMask & 16 && (elem.onmouseover = bits & 16?dispatchEvent_2:null);
  chMask & 32 && (elem.onmouseout = bits & 32?dispatchEvent_2:null);
  chMask & 64 && (elem.onmousemove = bits & 64?dispatchEvent_2:null);
  chMask & 128 && (elem.onkeydown = bits & 128?dispatchEvent_2:null);
  chMask & 256 && (elem.onkeypress = bits & 256?dispatchEvent_2:null);
  chMask & 512 && (elem.onkeyup = bits & 512?dispatchEvent_2:null);
  chMask & $intern_21 && (elem.onchange = bits & $intern_21?dispatchEvent_2:null);
  chMask & $intern_32 && (elem.onfocus = bits & $intern_32?dispatchEvent_2:null);
  chMask & $intern_31 && (elem.onblur = bits & $intern_31?dispatchEvent_2:null);
  chMask & 8192 && (elem.onlosecapture = bits & 8192?dispatchEvent_2:null);
  chMask & $intern_33 && (elem.onscroll = bits & $intern_33?dispatchEvent_2:null);
  chMask & 32768 && (elem.onload = bits & 32768?dispatchUnhandledEvent:null);
  chMask & $intern_34 && (elem.onerror = bits & $intern_34?dispatchEvent_2:null);
  chMask & 131072 && (elem.onmousewheel = bits & 131072?dispatchEvent_2:null);
  chMask & 262144 && (elem.oncontextmenu = bits & 262144?dispatchEvent_2:null);
  chMask & $intern_25 && (elem.onpaste = bits & $intern_25?dispatchEvent_2:null);
  chMask & $intern_35 && (elem.ontouchstart = bits & $intern_35?dispatchEvent_2:null);
  chMask & $intern_36 && (elem.ontouchmove = bits & $intern_36?dispatchEvent_2:null);
  chMask & $intern_26 && (elem.ontouchend = bits & $intern_26?dispatchEvent_2:null);
  chMask & 8388608 && (elem.ontouchcancel = bits & 8388608?dispatchEvent_2:null);
  chMask & $intern_37 && (elem.ongesturestart = bits & $intern_37?dispatchEvent_2:null);
  chMask & $intern_38 && (elem.ongesturechange = bits & $intern_38?dispatchEvent_2:null);
  chMask & $intern_39 && (elem.ongestureend = bits & $intern_39?dispatchEvent_2:null);
}

function dispatchCapturedEvent(evt){
  previewEvent(evt);
}

function dispatchCapturedMouseEvent(evt){
  var cancelled;
  cancelled = !previewEvent(evt);
  if (cancelled || !captureElem) {
    return;
  }
  dispatchEvent_0(evt, captureElem) && (evt.stopPropagation() , undefined);
}

function dispatchDragEvent(evt){
  evt.preventDefault();
  dispatchEvent_3(evt);
}

function dispatchEvent_3(evt){
  var element;
  element = getFirstAncestorWithListener(evt);
  if (!element) {
    return;
  }
  dispatchEvent_1(evt, element.nodeType != 1?null:element, getEventListener(element));
}

function dispatchUnhandledEvent_0(evt){
  var element;
  element = evt.currentTarget || $wnd;
  element['__gwtLastUnhandledEvent'] = evt.type;
  dispatchEvent_3(evt);
}

function getFirstAncestorWithListener(evt){
  var curElem;
  curElem = evt.currentTarget || $wnd;
  while (!!curElem && !getEventListener(curElem)) {
    curElem = curElem.parentNode;
  }
  return curElem;
}

var bitlessEventDispatchers, captureElem, captureEventDispatchers, dispatchEvent_2, dispatchUnhandledEvent;
function foreach_0(map_0, fn){
  for (var e in map_0) {
    map_0.hasOwnProperty(e) && fn(e, map_0[e]);
  }
}

function $initHandler(initFunc, cmd){
  var scriptElem;
  scriptElem = $createScriptElement($doc, initFunc);
  $appendChild($doc.body, scriptElem);
  cmd.execute_0();
  $removeChild($doc.body, scriptElem);
}

function WindowImplIE$1(){
}

defineClass(470, 1, {}, WindowImplIE$1);
_.execute_0 = function execute_0(){
  $wnd.__gwt_initWindowCloseHandler($entry(onClosing), $entry(onClosed));
}
;
var Lcom_google_gwt_user_client_impl_WindowImplIE$1_2_classLit = createForClass('com.google.gwt.user.client.impl', 'WindowImplIE/1', 470);
function WindowImplIE$2(){
}

defineClass(471, 1, {}, WindowImplIE$2);
_.execute_0 = function execute_1(){
  $wnd.__gwt_initWindowResizeHandler($entry(onResize));
}
;
var Lcom_google_gwt_user_client_impl_WindowImplIE$2_2_classLit = createForClass('com.google.gwt.user.client.impl', 'WindowImplIE/2', 471);
function $adopt(this$static, child){
  $setParent(child, this$static);
}

defineClass(654, 19, $intern_40);
_.add_0 = function add_3(child){
  throw toJs(new UnsupportedOperationException_0('This panel does not support no-arg add()'));
}
;
_.doAttachChildren = function doAttachChildren_0(){
  tryCommand(this, ($clinit_AttachDetachException() , attachCommand));
}
;
_.doDetachChildren = function doDetachChildren_0(){
  tryCommand(this, ($clinit_AttachDetachException() , detachCommand));
}
;
var Lcom_google_gwt_user_client_ui_Panel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Panel', 654);
function $add(this$static, child, container){
  $removeFromParent(child);
  $add_5(this$static.children, child);
  $clinit_DOM();
  $appendChild(container, resolve(child.element));
  $setParent(child, this$static);
}

function $adjustIndex(this$static, child, beforeIndex){
  var idx;
  $checkIndexBoundsForInsertion(this$static, beforeIndex);
  if (child.parent_0 == this$static) {
    idx = $indexOf(this$static.children, child);
    idx < beforeIndex && --beforeIndex;
  }
  return beforeIndex;
}

function $checkIndexBoundsForInsertion(this$static, index_0){
  if (index_0 < 0 || index_0 > this$static.children.size_0) {
    throw toJs(new IndexOutOfBoundsException);
  }
}

function $getWidget(this$static, index_0){
  return $get(this$static.children, index_0);
}

function $getWidgetIndex(this$static, child){
  return $indexOf(this$static.children, child);
}

function $insert(this$static, child, container, beforeIndex){
  beforeIndex = $adjustIndex(this$static, child, beforeIndex);
  $removeFromParent(child);
  $insert_3(this$static.children, child, beforeIndex);
  $clinit_DOM();
  $appendChild(container, resolve(child.element));
  $setParent(child, this$static);
}

function $remove(this$static, index_0){
  return $remove_3(this$static, $get(this$static.children, index_0));
}

function $remove_0(this$static, w){
  var elem;
  if (w.parent_0 != this$static) {
    return false;
  }
  try {
    $setParent(w, null);
  }
   finally {
    elem = ($clinit_DOM() , w.element);
    $removeChild((null , $getParentElement(elem)), elem);
    $remove_5(this$static.children, w);
  }
  return true;
}

function ComplexPanel(){
  this.children = new WidgetCollection(this);
}

defineClass(182, 654, $intern_40);
_.iterator = function iterator_0(){
  return new WidgetCollection$WidgetIterator(this.children);
}
;
_.remove = function remove_0(w){
  return $remove_0(this, w);
}
;
var Lcom_google_gwt_user_client_ui_ComplexPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ComplexPanel', 182);
function $add_0(this$static, w){
  $add(this$static, w, ($clinit_DOM() , this$static.element));
}

function $remove_1(this$static, w){
  var removed;
  removed = $remove_0(this$static, w);
  removed && changeToStaticPositioning(($clinit_DOM() , w.element));
  return removed;
}

function changeToStaticPositioning(elem){
  elem.style['left'] = '';
  elem.style['top'] = '';
  elem.style['position'] = '';
}

defineClass(459, 182, $intern_40);
_.add_0 = function add_4(w){
  $add_0(this, w);
}
;
_.remove = function remove_1(w){
  return $remove_1(this, w);
}
;
var Lcom_google_gwt_user_client_ui_AbsolutePanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'AbsolutePanel', 459);
function create_1(resource){
  return new ClippedImagePrototype(resource.url_0, resource.left_0, resource.top_0, resource.width_0, resource.height_0);
}

defineClass(662, 1, {});
var Lcom_google_gwt_user_client_ui_AbstractImagePrototype_2_classLit = createForClass('com.google.gwt.user.client.ui', 'AbstractImagePrototype', 662);
function $clinit_HasHorizontalAlignment(){
  $clinit_HasHorizontalAlignment = emptyMethod;
  ALIGN_CENTER = new HasHorizontalAlignment$HorizontalAlignmentConstant(($clinit_Style$TextAlign() , 'center'));
  new HasHorizontalAlignment$HorizontalAlignmentConstant('justify');
  ALIGN_LEFT = new HasHorizontalAlignment$HorizontalAlignmentConstant('left');
  ALIGN_RIGHT = new HasHorizontalAlignment$HorizontalAlignmentConstant('right');
  ALIGN_LOCALE_START = ($clinit_LocaleInfo() , ALIGN_LEFT);
  ALIGN_LOCALE_END = ALIGN_RIGHT;
  ALIGN_DEFAULT = ALIGN_LOCALE_START;
}

var ALIGN_CENTER, ALIGN_DEFAULT, ALIGN_LEFT, ALIGN_LOCALE_END, ALIGN_LOCALE_START, ALIGN_RIGHT;
function Anchor_0(text_0, href_0){
  $setElement(this, $doc.createElement('a'));
  ($clinit_DOM() , this.element).className = 'gwt-Anchor';
  this.directionalTextHelper = new DirectionalTextHelper(this.element);
  $setTextOrHtml(this.directionalTextHelper, text_0, false);
  $setHref(this.element, href_0);
}

defineClass(171, 212, {62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 23:1, 154:1, 96:1, 25:1, 200:1, 175:1, 48:1, 21:1, 174:1, 28:1, 60:1, 61:1, 18:1, 19:1}, Anchor_0);
_.getTabIndex = function getTabIndex_0(){
  return $getTabIndex(($clinit_DOM() , this.element));
}
;
_.setTabIndex = function setTabIndex_0(index_0){
  $setTabIndex(($clinit_DOM() , this.element), index_0);
}
;
var Lcom_google_gwt_user_client_ui_Anchor_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Anchor', 171);
function $clinit_AttachDetachException(){
  $clinit_AttachDetachException = emptyMethod;
  attachCommand = new AttachDetachException$1;
  detachCommand = new AttachDetachException$2;
}

function AttachDetachException(causes){
  UmbrellaException_0.call(this, causes);
}

function tryCommand(hasWidgets, c){
  $clinit_AttachDetachException();
  var caught, e, w, w$iterator;
  caught = null;
  for (w$iterator = hasWidgets.iterator(); w$iterator.hasNext_0();) {
    w = castTo(w$iterator.next_0(), 19);
    try {
      c.execute_1(w);
    }
     catch ($e0) {
      $e0 = toJava($e0);
      if (instanceOf($e0, 22)) {
        e = $e0;
        !caught && (caught = new HashSet);
        $put(caught.map_0, e, caught);
      }
       else 
        throw toJs($e0);
    }
  }
  if (caught) {
    throw toJs(new AttachDetachException(caught));
  }
}

defineClass(399, 243, $intern_17, AttachDetachException);
var attachCommand, detachCommand;
var Lcom_google_gwt_user_client_ui_AttachDetachException_2_classLit = createForClass('com.google.gwt.user.client.ui', 'AttachDetachException', 399);
function AttachDetachException$1(){
}

defineClass(400, 1, {}, AttachDetachException$1);
_.execute_1 = function execute_2(w){
  w.onAttach();
}
;
var Lcom_google_gwt_user_client_ui_AttachDetachException$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'AttachDetachException/1', 400);
function AttachDetachException$2(){
}

defineClass(401, 1, {}, AttachDetachException$2);
_.execute_1 = function execute_3(w){
  w.onDetach();
}
;
var Lcom_google_gwt_user_client_ui_AttachDetachException$2_2_classLit = createForClass('com.google.gwt.user.client.ui', 'AttachDetachException/2', 401);
function $setHTML(this$static, html){
  $setInnerHTML(($clinit_DOM() , this$static.element), html);
}

function ButtonBase(elem){
  FocusWidget.call(this, elem);
}

defineClass(248, 212, $intern_41);
var Lcom_google_gwt_user_client_ui_ButtonBase_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ButtonBase', 248);
function Button(html){
  Button_0.call(this, html.html);
}

function Button_0(html){
  var e;
  ButtonBase.call(this, (e = $doc.createElement('BUTTON') , e.setAttribute('type', 'button') , e));
  ($clinit_DOM() , this.element).className = 'gwt-Button';
  $setInnerHTML(this.element, html);
}

defineClass(50, 248, $intern_41, Button, Button_0);
var Lcom_google_gwt_user_client_ui_Button_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Button', 50);
function $setCellHorizontalAlignment(td, align_0){
  ($clinit_DOM() , td)['align'] = align_0.textAlignString;
}

function $setCellVerticalAlignment(td, align_0){
  $setCellVerticalAlignment_0(($clinit_DOM() , td), align_0);
}

function $setCellVerticalAlignment_0(td, align_0){
  td.style['verticalAlign'] = align_0.verticalAlignString;
}

function CellPanel(){
  ComplexPanel.call(this);
  this.table = ($clinit_DOM() , $doc.createElement('table'));
  this.body_0 = $doc.createElement('tbody');
  $appendChild(this.table, resolve(this.body_0));
  $setElement(this, this.table);
}

defineClass(247, 182, $intern_40);
var Lcom_google_gwt_user_client_ui_CellPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'CellPanel', 247);
function $addValueChangeHandler_0(this$static, handler){
  if (!this$static.valueChangeHandlerInitialized) {
    $addDomHandler(this$static, new CheckBox$1(this$static), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
    this$static.valueChangeHandlerInitialized = true;
  }
  return $addHandler(this$static, handler, (!TYPE_16 && (TYPE_16 = new GwtEvent$Type) , TYPE_16));
}

function $getValue(this$static){
  return this$static.attached?($clinit_Boolean() , this$static.inputElem.checked?true:false):($clinit_Boolean() , this$static.inputElem.defaultChecked?true:false);
}

function $setValue_0(this$static, value_0){
  var oldValue;
  value_0 == null && (value_0 = ($clinit_Boolean() , FALSE));
  oldValue = this$static.attached?($clinit_Boolean() , this$static.inputElem.checked?true:false):($clinit_Boolean() , this$static.inputElem.defaultChecked?true:false);
  $setChecked(this$static.inputElem, (checkCriticalNotNull(value_0) , value_0));
  $setDefaultChecked(this$static.inputElem, (checkCriticalNotNull(value_0) , value_0));
  checkCriticalNotNull(value_0);
  if (value_0 == oldValue) {
    return;
  }
}

function CheckBox(elem){
  var uid;
  ButtonBase.call(this, ($clinit_DOM() , $doc.createElement('span')));
  this.inputElem = elem;
  this.labelElem = $doc.createElement('label');
  $appendChild(this.element, this.inputElem);
  $appendChild(this.element, this.labelElem);
  uid = $createUniqueId($doc);
  this.inputElem['id'] = uid;
  $setHtmlFor(this.labelElem, uid);
  this.directionalTextHelper = new DirectionalTextHelper(this.labelElem);
  !!this.inputElem && (this.inputElem.tabIndex = 0 , undefined);
}

function CheckBox_0(label_0){
  var e;
  CheckBox.call(this, ($clinit_DOM() , e = $doc.createElement('INPUT') , e.type = 'checkbox' , e.value = 'on' , e));
  this.element.className = 'gwt-CheckBox';
  $setTextOrHtml(this.directionalTextHelper, label_0, false);
}

defineClass(221, 248, $intern_42);
_.getTabIndex = function getTabIndex_1(){
  return $getTabIndex(this.inputElem);
}
;
_.onLoad = function onLoad_0(){
  $clinit_DOM();
  this.inputElem.__listener = this;
}
;
_.onUnload = function onUnload_0(){
  $clinit_DOM();
  this.inputElem.__listener = null;
  $setValue_0(this, this.attached?($clinit_Boolean() , this.inputElem.checked?true:false):($clinit_Boolean() , this.inputElem.defaultChecked?true:false));
}
;
_.setTabIndex = function setTabIndex_1(index_0){
  !!this.inputElem && $setTabIndex(this.inputElem, index_0);
}
;
_.sinkEvents = function sinkEvents_2(eventBitsToAdd){
  this.eventsToSink == -1?sinkEvents_1(this.inputElem, eventBitsToAdd | getEventsSunk(this.inputElem)):this.eventsToSink == -1?sinkEvents_0(($clinit_DOM() , this.element), eventBitsToAdd | (this.element.__eventBits || 0)):(this.eventsToSink |= eventBitsToAdd);
}
;
_.valueChangeHandlerInitialized = false;
var Lcom_google_gwt_user_client_ui_CheckBox_2_classLit = createForClass('com.google.gwt.user.client.ui', 'CheckBox', 221);
function CheckBox$1(this$0){
  this.this$01 = this$0;
}

defineClass(595, 1, $intern_43, CheckBox$1);
_.onClick = function onClick(event_0){
  var lastArg;
  fire_2((lastArg = this.this$01 , $getValue(this.this$01) , lastArg));
}
;
var Lcom_google_gwt_user_client_ui_CheckBox$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'CheckBox/1', 595);
function $checkInit(this$static){
  if (!this$static.widget) {
    throw toJs(new IllegalStateException_0('initWidget() is not called yet'));
  }
}

function $initWidget(this$static, widget){
  var elem;
  if (this$static.widget) {
    throw toJs(new IllegalStateException_0('Composite.initWidget() may only be called once.'));
  }
  if (!widget) {
    throw toJs(new NullPointerException_0('widget cannot be null'));
  }
  $removeFromParent(widget);
  elem = ($clinit_DOM() , widget.element);
  $setElement_0(this$static, elem);
  ($clinit_PotentialElement() , isPotential(elem)) && $setResolver(elem, this$static);
  this$static.widget = widget;
  $setParent(widget, this$static);
}

defineClass(656, 19, $intern_5);
_.isAttached = function isAttached_0(){
  if (this.widget) {
    return this.widget.attached;
  }
  return false;
}
;
_.onAttach = function onAttach_1(){
  $checkInit(this);
  if (this.eventsToSink != -1) {
    $sinkEvents(this.widget, this.eventsToSink);
    this.eventsToSink = -1;
  }
  $onAttach(this.widget);
  $clinit_DOM();
  this.element.__listener = this;
}
;
_.onBrowserEvent = function onBrowserEvent_0(event_0){
  $onBrowserEvent(this, event_0);
  $onBrowserEvent(this.widget, event_0);
}
;
_.onDetach = function onDetach_0(){
  $onDetach(this.widget);
}
;
_.resolvePotentialElement = function resolvePotentialElement_0(){
  $setElement(this, $resolvePotentialElement());
  return $clinit_DOM() , this.element;
}
;
var Lcom_google_gwt_user_client_ui_Composite_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Composite', 656);
function $add_1(this$static, w){
  if (this$static.getWidget()) {
    throw toJs(new IllegalStateException_0('SimplePanel can only contain one child widget'));
  }
  this$static.setWidget(w);
}

function $remove_2(this$static, w){
  if (this$static.widget != w) {
    return false;
  }
  try {
    $setParent(w, null);
  }
   finally {
    $removeChild(this$static.getContainerElement(), ($clinit_DOM() , w.element));
    this$static.widget = null;
  }
  return true;
}

function $setWidget(this$static, w){
  if (w == this$static.widget) {
    return;
  }
  !!w && $removeFromParent(w);
  !!this$static.widget && this$static.remove(this$static.widget);
  this$static.widget = w;
  if (w) {
    $clinit_DOM();
    $appendChild(this$static.getContainerElement(), resolve($getElement(this$static.widget)));
    $setParent(w, this$static);
  }
}

function SimplePanel(elem){
  $setElement_0(this, ($clinit_DOM() , elem));
}

defineClass(209, 654, $intern_40);
_.add_0 = function add_5(w){
  $add_1(this, w);
}
;
_.getContainerElement = function getContainerElement(){
  return $clinit_DOM() , this.element;
}
;
_.getWidget = function getWidget(){
  return this.widget;
}
;
_.iterator = function iterator_1(){
  return new SimplePanel$1(this);
}
;
_.remove = function remove_2(w){
  return $remove_2(this, w);
}
;
_.setWidget = function setWidget(w){
  $setWidget(this, w);
}
;
var Lcom_google_gwt_user_client_ui_SimplePanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'SimplePanel', 209);
function $center(this$static){
  var elem, initiallyAnimated, initiallyShowing, left, top_0;
  initiallyShowing = this$static.showing;
  initiallyAnimated = this$static.isAnimationEnabled;
  if (!initiallyShowing) {
    ($clinit_DOM() , this$static.element).style['visibility'] = 'hidden';
    this$static.isAnimationEnabled = false;
    this$static.show();
  }
  elem = ($clinit_DOM() , this$static.element);
  elem.style['left'] = ($clinit_Style$Unit() , '0.0px');
  elem.style['top'] = '0.0px';
  left = $getClientWidth($doc) - $getPropertyInt(this$static.element, 'offsetWidth') >> 1;
  top_0 = $getClientHeight($doc) - $getPropertyInt(this$static.element, 'offsetHeight') >> 1;
  $setPopupPosition(this$static, $wnd.Math.max(($wnd.pageXOffset | 0) + left, 0), $wnd.Math.max(($wnd.pageYOffset | 0) + top_0, 0));
  if (!initiallyShowing) {
    this$static.isAnimationEnabled = initiallyAnimated;
    if (initiallyAnimated) {
      this$static.element.style['clip'] = 'rect(0px, 0px, 0px, 0px)';
      this$static.element.style['visibility'] = 'visible';
      $run(this$static.resizeAnimation, 200, now_1(), null);
    }
     else {
      this$static.element.style['visibility'] = 'visible';
    }
  }
}

function $eventTargetsPopup(this$static, event_0){
  var target;
  target = event_0.target;
  if (is_0(target)) {
    return isOrHasChildImpl(($clinit_DOM() , this$static.element), target);
  }
  return false;
}

function $getOffsetHeight_0(this$static){
  return $getPropertyInt(($clinit_DOM() , this$static.element), 'offsetHeight');
}

function $getOffsetWidth_0(this$static){
  return $getPropertyInt(($clinit_DOM() , this$static.element), 'offsetWidth');
}

function $hide(this$static, autoClosed){
  if (!this$static.showing) {
    return;
  }
  $setState(this$static.resizeAnimation, false, false);
  fire_0(this$static, autoClosed);
}

function $maybeUpdateSize(this$static){
  var w;
  w = this$static.widget;
  if (w) {
    this$static.desiredHeight != null && w.setHeight_0(this$static.desiredHeight);
    this$static.desiredWidth != null && w.setWidth_0(this$static.desiredWidth);
  }
}

function $previewNativeEvent(this$static, event_0){
  var eventTargetsPopupOrPartner, nativeEvent, target, type_0;
  if (event_0.isCanceled || !this$static.previewAllNativeEvents && event_0.isConsumed) {
    this$static.modal && (event_0.isCanceled = true);
    return;
  }
  this$static.onPreviewNativeEvent(event_0);
  if (event_0.isCanceled) {
    return;
  }
  nativeEvent = event_0.nativeEvent;
  eventTargetsPopupOrPartner = $eventTargetsPopup(this$static, nativeEvent);
  eventTargetsPopupOrPartner && (event_0.isConsumed = true);
  this$static.modal && (event_0.isCanceled = true);
  type_0 = ($clinit_DOM() , $eventGetTypeInt(nativeEvent.type));
  switch (type_0) {
    case 512:
    case 256:
    case 128:
      {
        return;
      }

    case 4:
    case $intern_35:
      {
        if (sCaptureElem) {
          event_0.isConsumed = true;
          return;
        }
      }

      if (!eventTargetsPopupOrPartner && this$static.autoHide) {
        this$static.hide(true);
        return;
      }

      break;
    case 8:
    case 64:
    case 1:
    case 2:
    case $intern_26:
      {
        if (sCaptureElem) {
          event_0.isConsumed = true;
          return;
        }
        break;
      }

    case $intern_32:
      {
        target = nativeEvent.target;
        if (this$static.modal && !eventTargetsPopupOrPartner && !!target) {
          target.blur && target != $doc.body && target.blur();
          event_0.isCanceled = true;
          return;
        }
        break;
      }

  }
}

function $setAnimationType(this$static, type_0){
  this$static.animType = type_0?type_0:($clinit_PopupPanel$AnimationType() , CENTER_1);
}

function $setPopupPosition(this$static, left, top_0){
  var elem;
  this$static.leftPosition = left;
  this$static.topPosition = top_0;
  left -= 0;
  top_0 -= 0;
  elem = ($clinit_DOM() , this$static.element);
  elem.style['left'] = left + ($clinit_Style$Unit() , 'px');
  elem.style['top'] = top_0 + 'px';
}

function $setPopupPositionAndShow(this$static, callback){
  ($clinit_DOM() , this$static.element).style['visibility'] = 'hidden';
  this$static.show();
  callback.setPosition($getPropertyInt(this$static.element, 'offsetWidth'), $getPropertyInt(this$static.element, 'offsetHeight'));
  this$static.element.style['visibility'] = 'visible';
}

function $setVisible_0(this$static){
  ($clinit_DOM() , this$static.element).style['visibility'] = 'hidden';
}

function $setWidget_0(this$static, w){
  $setWidget(this$static, w);
  $maybeUpdateSize(this$static);
}

function $show(this$static){
  if (this$static.showing) {
    return;
  }
   else 
    this$static.attached && $removeFromParent(this$static);
  $setState(this$static.resizeAnimation, true, false);
}

function $updateHandlers(this$static){
  if (this$static.nativePreviewHandlerRegistration) {
    $removeHandler(this$static.nativePreviewHandlerRegistration.real);
    this$static.nativePreviewHandlerRegistration = null;
  }
  if (this$static.historyHandlerRegistration) {
    $removeHandler(this$static.historyHandlerRegistration.real);
    this$static.historyHandlerRegistration = null;
  }
  if (this$static.showing) {
    this$static.nativePreviewHandlerRegistration = addNativePreviewHandler(new PopupPanel$3(this$static));
    this$static.historyHandlerRegistration = addValueChangeHandler(new PopupPanel$4(this$static));
  }
}

function PopupPanel(){
  SimplePanel.call(this, ($clinit_DOM() , $doc.createElement('div')));
  this.glassResizer = new PopupPanel$1;
  this.animType = ($clinit_PopupPanel$AnimationType() , CENTER_1);
  this.isAnimationEnabled = false;
  this.leftPosition = -1;
  this.resizeAnimation = new PopupPanel$ResizeAnimation(this);
  this.topPosition = -1;
  $appendChild(this.element, $doc.createElement('div'));
  $setPopupPosition(this, 0, 0);
  $getParentElement($getFirstChildElement(this.element)).className = 'gwt-PopupPanel';
  (null , $getFirstChildElement(this.element)).className = 'popupContent';
}

function PopupPanel_0(autoHide){
  PopupPanel.call(this);
  this.autoHide = autoHide;
  this.autoHideOnHistoryEvents = autoHide;
}

defineClass(44, 209, $intern_44, PopupPanel_0);
_.getContainerElement = function getContainerElement_0(){
  return $clinit_DOM() , $getFirstChildElement(this.element);
}
;
_.getOffsetHeight = function getOffsetHeight_0(){
  return $getOffsetHeight_0(this);
}
;
_.getStyleElement = function getStyleElement_0(){
  return $getParentElement(($clinit_DOM() , $getFirstChildElement(this.element)));
}
;
_.hide = function hide(autoClosed){
  $hide(this, autoClosed);
}
;
_.onPreviewNativeEvent = function onPreviewNativeEvent(event_0){
  event_0.isFirstHandler && false && (event_0.isCanceled = true);
}
;
_.onUnload = function onUnload_1(){
  this.showing && $setState(this.resizeAnimation, false, true);
}
;
_.setHeight_0 = function setHeight_0(height){
  this.desiredHeight = height;
  $maybeUpdateSize(this);
  height.length == 0 && (this.desiredHeight = null);
}
;
_.setWidget = function setWidget_0(w){
  $setWidget_0(this, w);
}
;
_.setWidth_0 = function setWidth_0(width_0){
  this.desiredWidth = width_0;
  $maybeUpdateSize(this);
  width_0.length == 0 && (this.desiredWidth = null);
}
;
_.show = function show(){
  $show(this);
}
;
_.autoHide = false;
_.autoHideOnHistoryEvents = false;
_.isAnimationEnabled = false;
_.isGlassEnabled = false;
_.leftPosition = 0;
_.modal = false;
_.previewAllNativeEvents = false;
_.showing = false;
_.topPosition = 0;
var Lcom_google_gwt_user_client_ui_PopupPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel', 44);
function $setWidget_1(this$static, w){
  $setWidget(this$static.decPanel, w);
  $maybeUpdateSize(this$static);
}

function DecoratedPopupPanel(autoHide, modal, prefix){
  var rowStyles;
  PopupPanel_0.call(this, autoHide);
  this.modal = modal;
  rowStyles = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, [prefix + 'Top', prefix + 'Middle', prefix + 'Bottom']);
  this.decPanel = new DecoratorPanel(rowStyles);
  $setStyleName(this.decPanel, '');
  setStylePrimaryName($getParentElement(($clinit_DOM() , $getFirstChildElement(this.element))), 'gwt-DecoratedPopupPanel');
  $setWidget_0(this, this.decPanel);
  setStyleName($getFirstChildElement(this.element), 'popupContent', false);
  setStyleName($getContainerElement(this.decPanel), prefix + 'Content', true);
}

defineClass(239, 44, $intern_44);
_.doAttachChildren = function doAttachChildren_1(){
  $onAttach(this.decPanel);
}
;
_.doDetachChildren = function doDetachChildren_1(){
  $onDetach(this.decPanel);
}
;
_.getWidget = function getWidget_0(){
  return this.decPanel.widget;
}
;
_.iterator = function iterator_2(){
  return new SimplePanel$1(this.decPanel);
}
;
_.remove = function remove_3(w){
  return $remove_2(this.decPanel, w);
}
;
_.setWidget = function setWidget_1(w){
  $setWidget_1(this, w);
}
;
var Lcom_google_gwt_user_client_ui_DecoratedPopupPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DecoratedPopupPanel', 239);
function $getCellElement(this$static){
  var td, tr;
  tr = ($clinit_DOM() , $getChild(this$static.tbody, 0));
  td = (null , $getChild(tr, 1));
  return null , $getFirstChildElement(td);
}

function $getContainerElement(this$static){
  return $clinit_DOM() , this$static.containerElem;
}

function DecoratorPanel(rowStyles){
  var i, row, table, trElem;
  SimplePanel.call(this, ($clinit_DOM() , $doc.createElement('table')));
  table = this.element;
  this.tbody = $doc.createElement('tbody');
  $appendChild(table, resolve(this.tbody));
  table['cellSpacing'] = 0;
  table['cellPadding'] = 0;
  for (i = 0; i < rowStyles.length; i++) {
    row = (trElem = $doc.createElement('tr') , trElem.className = rowStyles[i] || '' , undefined , $clinit_LocaleInfo() , $appendChild(trElem, resolve(createTD(rowStyles[i] + 'Left'))) , $appendChild(trElem, resolve(createTD(rowStyles[i] + 'Center'))) , $appendChild(trElem, resolve(createTD(rowStyles[i] + 'Right'))) , trElem);
    $appendChild(this.tbody, resolve(row));
    i == 1 && (this.containerElem = $getFirstChildElement($getChild(row, 1)));
  }
  this.element.className = 'gwt-DecoratorPanel';
}

function createTD(styleName){
  var inner, tdElem;
  tdElem = ($clinit_DOM() , $doc.createElement('td'));
  inner = $doc.createElement('div');
  $appendChild(tdElem, resolve(inner));
  tdElem.className = styleName || '';
  inner.className = styleName + 'Inner' || '';
  return tdElem;
}

defineClass(603, 209, $intern_40, DecoratorPanel);
_.getContainerElement = function getContainerElement_1(){
  return $getContainerElement(this);
}
;
var Lcom_google_gwt_user_client_ui_DecoratorPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DecoratorPanel', 603);
function $beginDragging(this$static, event_0){
  $onMouseDown(this$static, $getX(event_0), $getY(event_0));
}

function $continueDragging(this$static, event_0){
  $onMouseMove(this$static, $getX(event_0), $getY(event_0));
}

function $endDragging(this$static, event_0){
  $onMouseUp(($getX(event_0) , $getY(event_0) , this$static));
}

function $hide_0(this$static, autoClosed){
  if (this$static.resizeHandlerRegistration) {
    $removeHandler(this$static.resizeHandlerRegistration.real);
    this$static.resizeHandlerRegistration = null;
  }
  $hide(this$static, autoClosed);
}

function $isCaptionEvent(this$static, event_0){
  var target;
  target = event_0.target;
  if (is_0(target)) {
    return isOrHasChildImpl($getParentElement(($clinit_DOM() , $getCellElement(this$static.decPanel))), target);
  }
  return false;
}

function $onMouseDown(this$static, x_0, y_0){
  $clinit_DOM();
  if (!sCaptureElem) {
    this$static.dragging = true;
    setCapture(this$static.element);
    this$static.dragStartX = x_0;
    this$static.dragStartY = y_0;
  }
}

function $onMouseMove(this$static, x_0, y_0){
  var absX, absY;
  if (this$static.dragging) {
    absX = x_0 + $getAbsoluteLeft(($clinit_DOM() , this$static.element));
    absY = y_0 + ($getBoundingClientRectTop(this$static.element) + $wnd.pageYOffset | 0);
    if (absX < this$static.clientLeft || absX >= this$static.windowWidth || absY < this$static.clientTop) {
      return;
    }
    $setPopupPosition(this$static, absX - this$static.dragStartX, absY - this$static.dragStartY);
  }
}

function $onMouseUp(this$static){
  this$static.dragging = false;
  releaseCapture(($clinit_DOM() , this$static.element));
}

function $setText(this$static, text_0){
  $setText_0(this$static.caption, text_0);
}

function $show_0(this$static){
  !this$static.resizeHandlerRegistration && (this$static.resizeHandlerRegistration = addResizeHandler(new DialogBox$1(this$static)));
  $show(this$static);
}

function DialogBox(){
  DialogBox_0.call(this, new DialogBox$CaptionImpl);
}

function DialogBox_0(captionWidget){
  var mouseHandler, td;
  DecoratedPopupPanel.call(this, false, true, 'dialog');
  $removeFromParent(captionWidget);
  this.caption = captionWidget;
  td = ($clinit_DOM() , $getCellElement(this.decPanel));
  $appendChild(td, resolve($getElement(this.caption)));
  $adopt(this, this.caption);
  $getParentElement($getFirstChildElement(this.element)).className = 'gwt-DialogBox';
  this.windowWidth = $getClientWidth($doc);
  this.clientLeft = 0;
  this.clientTop = 0;
  mouseHandler = new DialogBox$MouseHandler(this);
  $addDomHandler(this, mouseHandler, ($clinit_MouseDownEvent() , $clinit_MouseDownEvent() , TYPE_4));
  $addDomHandler(this, mouseHandler, ($clinit_MouseUpEvent() , $clinit_MouseUpEvent() , TYPE_8));
  $addDomHandler(this, mouseHandler, ($clinit_MouseMoveEvent() , $clinit_MouseMoveEvent() , TYPE_5));
  $addDomHandler(this, mouseHandler, ($clinit_MouseOverEvent() , $clinit_MouseOverEvent() , TYPE_7));
  $addDomHandler(this, mouseHandler, ($clinit_MouseOutEvent() , $clinit_MouseOutEvent() , TYPE_6));
}

defineClass(117, 239, $intern_45);
_.doAttachChildren = function doAttachChildren_2(){
  try {
    $onAttach(this.decPanel);
  }
   finally {
    $onAttach(this.caption);
  }
}
;
_.doDetachChildren = function doDetachChildren_2(){
  try {
    $onDetach(this.decPanel);
  }
   finally {
    $onDetach(this.caption);
  }
}
;
_.hide = function hide_0(autoClosed){
  $hide_0(this, autoClosed);
}
;
_.onBrowserEvent = function onBrowserEvent_1(event_0){
  switch ($clinit_DOM() , $eventGetTypeInt(event_0.type)) {
    case 4:
    case 8:
    case 64:
    case 16:
    case 32:
      if (!this.dragging && !$isCaptionEvent(this, event_0)) {
        return;
      }

  }
  $onBrowserEvent(this, event_0);
}
;
_.onPreviewNativeEvent = function onPreviewNativeEvent_0(event_0){
  var nativeEvent;
  nativeEvent = event_0.nativeEvent;
  !event_0.isCanceled && $getTypeInt(event_0.nativeEvent) == 4 && $isCaptionEvent(this, nativeEvent) && (nativeEvent.preventDefault() , undefined);
  event_0.isFirstHandler && false && (event_0.isCanceled = true);
}
;
_.show = function show_0(){
  $show_0(this);
}
;
_.clientLeft = 0;
_.clientTop = 0;
_.dragStartX = 0;
_.dragStartY = 0;
_.dragging = false;
_.windowWidth = 0;
var Lcom_google_gwt_user_client_ui_DialogBox_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DialogBox', 117);
function DialogBox$1(this$0){
  this.this$01 = this$0;
}

defineClass(211, 1, $intern_46, DialogBox$1);
_.onResize = function onResize_0(event_0){
  this.this$01.windowWidth = event_0.width_0;
}
;
var Lcom_google_gwt_user_client_ui_DialogBox$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DialogBox/1', 211);
function $clinit_HasAutoHorizontalAlignment(){
  $clinit_HasAutoHorizontalAlignment = emptyMethod;
  ALIGN_CONTENT_START = new HasHorizontalAlignment$AutoHorizontalAlignmentConstant;
}

var ALIGN_CONTENT_START;
function $setHorizontalAlignment(this$static, align_0){
  this$static.autoHorizontalAlignment = align_0;
  $updateHorizontalAlignment(this$static);
}

function $updateHorizontalAlignment(this$static){
  var align_0;
  !this$static.autoHorizontalAlignment?(align_0 = null):this$static.autoHorizontalAlignment?(align_0 = this$static.autoHorizontalAlignment):(align_0 = this$static.autoHorizontalAlignment == ($clinit_HasAutoHorizontalAlignment() , ALIGN_CONTENT_START)?startOf(this$static.directionalTextHelper.textDir):endOf(this$static.directionalTextHelper.textDir));
  if (align_0 != this$static.horzAlign) {
    this$static.horzAlign = align_0;
    ($clinit_DOM() , this$static.element).style['textAlign'] = !this$static.horzAlign?'':this$static.horzAlign.textAlignString;
  }
}

function LabelBase(element){
  $setElement_0(this, ($clinit_DOM() , element));
  this.directionalTextHelper = new DirectionalTextHelper(this.element);
}

defineClass(125, 19, {27:1, 23:1, 96:1, 25:1, 323:1, 175:1, 21:1, 174:1, 28:1, 125:1, 18:1, 19:1});
var Lcom_google_gwt_user_client_ui_LabelBase_2_classLit = createForClass('com.google.gwt.user.client.ui', 'LabelBase', 125);
function $setText_0(this$static, text_0){
  $setTextOrHtml(this$static.directionalTextHelper, text_0, false);
  $updateHorizontalAlignment(this$static);
}

function Label(element){
  LabelBase.call(this, ($equalsIgnoreCase('span', element.tagName) , element));
}

function Label_0(text_0){
  LabelBase.call(this, $doc.createElement('div'));
  ($clinit_DOM() , this.element).className = 'gwt-Label';
  $setTextOrHtml(this.directionalTextHelper, text_0, false);
  $updateHorizontalAlignment(this);
}

function Label_1(text_0){
  Label_0.call(this, text_0);
  ($clinit_DOM() , this.element).style['whiteSpace'] = ($clinit_Style$WhiteSpace() , 'normal');
}

defineClass(36, 125, $intern_47, Label_0, Label_1);
var Lcom_google_gwt_user_client_ui_Label_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Label', 36);
function HTML(){
  Label.call(this, $doc.createElement('div'));
  ($clinit_DOM() , this.element).className = 'gwt-HTML';
}

function HTML_0(html){
  HTML.call(this);
  $setTextOrHtml(this.directionalTextHelper, html, true);
  $updateHorizontalAlignment(this);
}

defineClass(181, 36, $intern_47, HTML_0);
var Lcom_google_gwt_user_client_ui_HTML_2_classLit = createForClass('com.google.gwt.user.client.ui', 'HTML', 181);
function DialogBox$CaptionImpl(){
  HTML.call(this);
  ($clinit_DOM() , this.element).className = 'Caption';
}

defineClass(395, 181, $intern_47, DialogBox$CaptionImpl);
var Lcom_google_gwt_user_client_ui_DialogBox$CaptionImpl_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DialogBox/CaptionImpl', 395);
function DialogBox$MouseHandler(this$0){
  this.this$01 = this$0;
}

defineClass(396, 1, {226:1, 321:1, 227:1, 627:1, 322:1, 32:1}, DialogBox$MouseHandler);
_.onMouseDown = function onMouseDown(event_0){
  $beginDragging(this.this$01, event_0);
}
;
_.onMouseMove = function onMouseMove(event_0){
  $continueDragging(this.this$01, event_0);
}
;
_.onMouseOut = function onMouseOut(event_0){
}
;
_.onMouseOver = function onMouseOver(event_0){
}
;
_.onMouseUp = function onMouseUp(event_0){
  $endDragging(this.this$01, event_0);
}
;
var Lcom_google_gwt_user_client_ui_DialogBox$MouseHandler_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DialogBox/MouseHandler', 396);
function $setTextOrHtml(this$static, content_0, isHtml){
  isHtml?$setInnerHTML(this$static.element, content_0):$setInnerText(this$static.element, content_0);
  if (this$static.textDir != this$static.initialElementDir) {
    this$static.textDir = this$static.initialElementDir;
    setDirectionOnElement(this$static.element, this$static.initialElementDir);
  }
}

function DirectionalTextHelper(element){
  this.element = element;
  this.initialElementDir = getDirectionOnElement(element);
  this.textDir = this.initialElementDir;
}

defineClass(219, 1, {96:1}, DirectionalTextHelper);
var Lcom_google_gwt_user_client_ui_DirectionalTextHelper_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DirectionalTextHelper', 219);
function $addEast(this$static, widget, size_0){
  $insert_0(this$static, widget, ($clinit_DockLayoutPanel$Direction() , EAST), size_0);
}

function $doLayout(this$static){
  var bottom, child, child$iterator, data_0, layer, left, right, top_0;
  left = 0;
  top_0 = 0;
  right = 0;
  bottom = 0;
  for (child$iterator = new WidgetCollection$WidgetIterator(this$static.children); child$iterator.index_0 < child$iterator.this$01.size_0;) {
    child = $next_0(child$iterator);
    data_0 = castTo(child.layoutData, 183);
    layer = data_0.layer;
    if (data_0.hidden) {
      layer.visible = false;
      continue;
    }
    switch ($getResolvedDirection(data_0.direction_0).ordinal) {
      case 0:
        $setLeftRight(layer, left, this$static.unit, right, this$static.unit);
        $setTopHeight(layer, top_0, this$static.unit, data_0.size_0, this$static.unit);
        top_0 += data_0.size_0;
        break;
      case 2:
        $setLeftRight(layer, left, this$static.unit, right, this$static.unit);
        $setBottomHeight(layer, bottom, this$static.unit, data_0.size_0, this$static.unit);
        bottom += data_0.size_0;
        break;
      case 3:
        $setTopBottom(layer, top_0, this$static.unit, bottom, this$static.unit);
        $setLeftWidth(layer, left, this$static.unit, data_0.size_0, this$static.unit);
        left += data_0.size_0;
        break;
      case 1:
        $setTopBottom(layer, top_0, this$static.unit, bottom, this$static.unit);
        $setRightWidth(layer, right, this$static.unit, data_0.size_0, this$static.unit);
        right += data_0.size_0;
        break;
      case 4:
        $setLeftRight(layer, left, this$static.unit, right, this$static.unit);
        $setTopBottom(layer, top_0, this$static.unit, bottom, this$static.unit);
    }
    layer.visible = true;
  }
}

function $getResolvedDirection(direction){
  if (direction == ($clinit_DockLayoutPanel$Direction() , LINE_START)) {
    return $clinit_LocaleInfo() , WEST;
  }
   else if (direction == LINE_END) {
    return $clinit_LocaleInfo() , EAST;
  }
  return direction;
}

function $insert_0(this$static, widget, direction, size_0){
  var children, data_0, layer;
  $removeFromParent(widget);
  children = this$static.children;
  $insert_3(children, widget, children.size_0);
  direction == ($clinit_DockLayoutPanel$Direction() , CENTER_0) && (this$static.center = widget);
  layer = $attachChild(this$static.layout, ($clinit_DOM() , widget.element), widget);
  data_0 = new DockLayoutPanel$LayoutData(direction, size_0, layer);
  widget.layoutData = data_0;
  $setParent(widget, this$static);
  $schedule_0(this$static.layoutCmd);
}

function DockLayoutPanel(unit){
  ComplexPanel.call(this);
  this.unit = unit;
  $setElement(this, $doc.createElement('div'));
  this.layout = new Layout(($clinit_DOM() , this.element));
  this.layoutCmd = new DockLayoutPanel$DockAnimateCommand(this, this.layout);
}

defineClass(397, 182, $intern_48, DockLayoutPanel);
_.add_0 = function add_6(widget){
  $insert_0(this, widget, ($clinit_DockLayoutPanel$Direction() , CENTER_0), 0);
}
;
_.onAttach = function onAttach_2(){
  $onAttach(this);
}
;
_.onDetach = function onDetach_1(){
  $onDetach(this);
  $removeLayerRefs(this.layout.parentElem);
}
;
_.onResize_0 = function onResize_1(){
  var child, child$iterator;
  for (child$iterator = new WidgetCollection$WidgetIterator(this.children); child$iterator.index_0 < child$iterator.this$01.size_0;) {
    child = $next_0(child$iterator);
    instanceOf(child, 122) && castTo(child, 122).onResize_0();
  }
}
;
_.remove = function remove_4(w){
  var data_0, removed;
  removed = $remove_0(this, w);
  if (removed) {
    w == this.center && (this.center = null);
    data_0 = castTo(w.layoutData, 183);
    $removeChild_0(this.layout, data_0.layer);
  }
  return removed;
}
;
var Lcom_google_gwt_user_client_ui_DockLayoutPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DockLayoutPanel', 397);
function $clinit_DockLayoutPanel$Direction(){
  $clinit_DockLayoutPanel$Direction = emptyMethod;
  NORTH = new DockLayoutPanel$Direction('NORTH', 0);
  EAST = new DockLayoutPanel$Direction('EAST', 1);
  SOUTH = new DockLayoutPanel$Direction('SOUTH', 2);
  WEST = new DockLayoutPanel$Direction('WEST', 3);
  CENTER_0 = new DockLayoutPanel$Direction('CENTER', 4);
  LINE_START = new DockLayoutPanel$Direction('LINE_START', 5);
  LINE_END = new DockLayoutPanel$Direction('LINE_END', 6);
}

function DockLayoutPanel$Direction(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_9(){
  $clinit_DockLayoutPanel$Direction();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_user_client_ui_DockLayoutPanel$Direction_2_classLit, 1), $intern_3, 118, 0, [NORTH, EAST, SOUTH, WEST, CENTER_0, LINE_START, LINE_END]);
}

defineClass(118, 10, {118:1, 3:1, 11:1, 10:1}, DockLayoutPanel$Direction);
var CENTER_0, EAST, LINE_END, LINE_START, NORTH, SOUTH, WEST;
var Lcom_google_gwt_user_client_ui_DockLayoutPanel$Direction_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'DockLayoutPanel/Direction', 118, values_9);
function $schedule_0(this$static){
  this$static.duration = 0;
  this$static.canceled = false;
  if (!this$static.scheduled) {
    this$static.scheduled = true;
    $scheduleFinally(($clinit_SchedulerImpl() , INSTANCE), this$static);
  }
}

function LayoutCommand(layout){
  this.layout = layout;
}

defineClass(242, 1, {}, LayoutCommand);
_.doBeforeLayout = function doBeforeLayout(){
}
;
_.execute_0 = function execute_4(){
  this.scheduled = false;
  if (this.canceled) {
    return;
  }
  this.doBeforeLayout();
  $layout(this.layout, this.duration, new LayoutCommand$1);
}
;
_.canceled = false;
_.duration = 0;
_.scheduled = false;
var Lcom_google_gwt_user_client_ui_LayoutCommand_2_classLit = createForClass('com.google.gwt.user.client.ui', 'LayoutCommand', 242);
function DockLayoutPanel$DockAnimateCommand(this$0, layout){
  this.this$01 = this$0;
  LayoutCommand.call(this, layout);
}

defineClass(398, 242, {}, DockLayoutPanel$DockAnimateCommand);
_.doBeforeLayout = function doBeforeLayout_0(){
  $doLayout(this.this$01);
}
;
var Lcom_google_gwt_user_client_ui_DockLayoutPanel$DockAnimateCommand_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DockLayoutPanel/DockAnimateCommand', 398);
function DockLayoutPanel$LayoutData(direction, size_0, layer){
  this.direction_0 = direction;
  this.size_0 = size_0;
  this.layer = layer;
}

defineClass(183, 1, {183:1}, DockLayoutPanel$LayoutData);
_.hidden = false;
_.size_0 = 0;
var Lcom_google_gwt_user_client_ui_DockLayoutPanel$LayoutData_2_classLit = createForClass('com.google.gwt.user.client.ui', 'DockLayoutPanel/LayoutData', 183);
function FileUpload(element){
  $setElement_0(this, ($clinit_DOM() , element));
}

defineClass(245, 212, $intern_6);
var Lcom_google_gwt_user_client_ui_FileUpload_2_classLit = createForClass('com.google.gwt.user.client.ui', 'FileUpload', 245);
function Frame_0(){
  $setElement(this, $doc.createElement('iframe'));
  ($clinit_DOM() , this.element).className = 'gwt-Frame';
  this.element.src = 'iframe.html';
}

defineClass(249, 19, $intern_5, Frame_0);
var Lcom_google_gwt_user_client_ui_Frame_2_classLit = createForClass('com.google.gwt.user.client.ui', 'Frame', 249);
function $clinit_HasVerticalAlignment(){
  $clinit_HasVerticalAlignment = emptyMethod;
  new HasVerticalAlignment$VerticalAlignmentConstant('bottom');
  new HasVerticalAlignment$VerticalAlignmentConstant('middle');
  ALIGN_TOP = new HasVerticalAlignment$VerticalAlignmentConstant('top');
}

var ALIGN_TOP;
function HasHorizontalAlignment$AutoHorizontalAlignmentConstant(){
}

defineClass(388, 1, {}, HasHorizontalAlignment$AutoHorizontalAlignmentConstant);
var Lcom_google_gwt_user_client_ui_HasHorizontalAlignment$AutoHorizontalAlignmentConstant_2_classLit = createForClass('com.google.gwt.user.client.ui', 'HasHorizontalAlignment/AutoHorizontalAlignmentConstant', 388);
function HasHorizontalAlignment$HorizontalAlignmentConstant(textAlignString){
  this.textAlignString = textAlignString;
}

function endOf(direction){
  return direction == ($clinit_HasDirection$Direction() , LTR)?($clinit_HasHorizontalAlignment() , ALIGN_RIGHT):direction == RTL?($clinit_HasHorizontalAlignment() , ALIGN_LEFT):($clinit_HasHorizontalAlignment() , ALIGN_LOCALE_END);
}

function startOf(direction){
  return direction == ($clinit_HasDirection$Direction() , LTR)?($clinit_HasHorizontalAlignment() , ALIGN_LEFT):direction == RTL?($clinit_HasHorizontalAlignment() , ALIGN_RIGHT):($clinit_HasHorizontalAlignment() , ALIGN_LOCALE_START);
}

defineClass(180, 388, {}, HasHorizontalAlignment$HorizontalAlignmentConstant);
var Lcom_google_gwt_user_client_ui_HasHorizontalAlignment$HorizontalAlignmentConstant_2_classLit = createForClass('com.google.gwt.user.client.ui', 'HasHorizontalAlignment/HorizontalAlignmentConstant', 180);
function HasVerticalAlignment$VerticalAlignmentConstant(verticalAlignString){
  this.verticalAlignString = verticalAlignString;
}

defineClass(213, 1, {}, HasVerticalAlignment$VerticalAlignmentConstant);
var Lcom_google_gwt_user_client_ui_HasVerticalAlignment$VerticalAlignmentConstant_2_classLit = createForClass('com.google.gwt.user.client.ui', 'HasVerticalAlignment/VerticalAlignmentConstant', 213);
function $add_2(this$static, w){
  var td, td_0;
  td = (td_0 = ($clinit_DOM() , $doc.createElement('td')) , $setCellHorizontalAlignment(td_0, this$static.horzAlign) , $setCellVerticalAlignment(td_0, this$static.vertAlign) , td_0);
  $appendChild(this$static.tableRow, resolve(td));
  $add(this$static, w, td);
}

function $setHorizontalAlignment_0(this$static, align_0){
  this$static.horzAlign = align_0;
}

function HorizontalPanel(){
  CellPanel.call(this);
  this.horzAlign = ($clinit_HasHorizontalAlignment() , ALIGN_DEFAULT);
  this.vertAlign = ($clinit_HasVerticalAlignment() , ALIGN_TOP);
  this.tableRow = ($clinit_DOM() , $doc.createElement('tr'));
  $appendChild(this.body_0, resolve(this.tableRow));
  this.table['cellSpacing'] = '0';
  this.table['cellPadding'] = '0';
}

defineClass(144, 247, $intern_49, HorizontalPanel);
_.add_0 = function add_7(w){
  $add_2(this, w);
}
;
_.remove = function remove_5(w){
  var removed, td;
  td = ($clinit_DOM() , $getParentElement(w.element));
  removed = $remove_0(this, w);
  removed && $removeChild(this.tableRow, td);
  return removed;
}
;
var Lcom_google_gwt_user_client_ui_HorizontalPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'HorizontalPanel', 144);
function LayoutCommand$1(){
}

defineClass(402, 1, {}, LayoutCommand$1);
var Lcom_google_gwt_user_client_ui_LayoutCommand$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'LayoutCommand/1', 402);
function $add_3(this$static, widget){
  $insert_1(this$static, widget, this$static.children.size_0);
}

function $insert_1(this$static, widget, beforeIndex){
  var layer;
  $removeFromParent(widget);
  $insert_3(this$static.children, widget, beforeIndex);
  layer = $attachChild(this$static.layout, ($clinit_DOM() , widget.element), widget);
  widget.layoutData = layer;
  $setParent(widget, this$static);
  $schedule_0(this$static.layoutCmd);
}

function $onResize(this$static){
  var child, child$iterator;
  for (child$iterator = new WidgetCollection$WidgetIterator(this$static.children); child$iterator.index_0 < child$iterator.this$01.size_0;) {
    child = $next_0(child$iterator);
    instanceOf(child, 122) && castTo(child, 122).onResize_0();
  }
}

defineClass(454, 182, $intern_48);
_.add_0 = function add_8(widget){
  $add_3(this, widget);
}
;
_.onAttach = function onAttach_3(){
  $onAttach(this);
}
;
_.onDetach = function onDetach_2(){
  $onDetach(this);
  $removeLayerRefs(this.layout.parentElem);
}
;
_.onResize_0 = function onResize_2(){
  $onResize(this);
}
;
_.remove = function remove_6(w){
  var removed;
  removed = $remove_0(this, w);
  removed && $removeChild_0(this.layout, castTo(w.layoutData, 142));
  return removed;
}
;
var Lcom_google_gwt_user_client_ui_LayoutPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'LayoutPanel', 454);
function $getSelectElement(this$static){
  return $clinit_DOM() , this$static.element;
}

function $insertItem(this$static, item_0){
  $insertItem_0(this$static, item_0, item_0, -1);
}

function $insertItem_0(this$static, item_0, value_0, index_0){
  var before, itemCount, option, select;
  select = ($clinit_DOM() , this$static.element);
  option = $doc.createElement('option');
  option.text = item_0;
  option.removeAttribute('bidiwrapped');
  option.value = value_0;
  itemCount = select.options.length;
  (index_0 < 0 || index_0 > itemCount) && (index_0 = itemCount);
  if (index_0 == itemCount) {
    select.add(option, null);
  }
   else {
    before = select.options[index_0];
    select.add(option, before);
  }
}

defineClass(594, 212, $intern_50);
var Lcom_google_gwt_user_client_ui_ListBox_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ListBox', 594);
defineClass(622, 621, {32:1});
var Lcom_google_gwt_user_client_ui_ListenerWrapper_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ListenerWrapper', 622);
function ListenerWrapper$WrappedPopupListener(listener){
  this.listener = listener;
}

defineClass(623, 622, $intern_51, ListenerWrapper$WrappedPopupListener);
_.onClose = function onClose(event_0){
  $onPopupClosed(this.listener, (castTo(event_0.source, 44) , event_0.autoClosed));
}
;
var Lcom_google_gwt_user_client_ui_ListenerWrapper$WrappedPopupListener_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ListenerWrapper/WrappedPopupListener', 623);
function $addItem(this$static, item_0){
  return $insertItem_1(this$static, item_0, this$static.allItems.array.length);
}

function $addItemElement(this$static, beforeIndex, tdElem){
  var tr;
  if (this$static.vertical) {
    tr = ($clinit_DOM() , $doc.createElement('tr'));
    insertChild(this$static.body_0, tr, beforeIndex);
    $appendChild(tr, resolve(tdElem));
  }
   else {
    tr = ($clinit_DOM() , $getChild(this$static.body_0, 0));
    $insertChild(tr, resolve(tdElem), beforeIndex);
  }
}

function $addSeparator(this$static, separator){
  return $insertSeparator(this$static, separator, this$static.allItems.array.length);
}

function $close(this$static, focus_0){
  if (this$static.parentMenu) {
    $hide(this$static.parentMenu.popup, !focus_0);
    focus_0 && $focus(this$static.parentMenu);
  }
}

function $doItemAction(this$static, item_0, fireCommand, focus_0){
  var cmd;
  if (!item_0.enabled) {
    return;
  }
  $selectItem(this$static, item_0);
  if (fireCommand && !!item_0.command) {
    this$static.parentMenu?$close(this$static, false):$selectItem(this$static, null);
    ($clinit_DOM() , this$static.element).blur();
    cmd = item_0.command;
    $scheduleFinally(($clinit_SchedulerImpl() , INSTANCE), new MenuBar$1(cmd));
    if (this$static.shownChildMenu) {
      $onHide(this$static.shownChildMenu, focus_0);
      $hide(this$static.popup, false);
      this$static.shownChildMenu = null;
      $selectItem(this$static, null);
    }
  }
   else if (item_0.subMenu) {
    if (!this$static.shownChildMenu) {
      $openPopup(this$static, item_0);
    }
     else if (item_0.subMenu != this$static.shownChildMenu) {
      $onHide(this$static.shownChildMenu, focus_0);
      $hide(this$static.popup, false);
      $openPopup(this$static, item_0);
    }
     else if (fireCommand && !this$static.autoOpen) {
      $onHide(this$static.shownChildMenu, focus_0);
      $hide(this$static.popup, false);
      this$static.shownChildMenu = null;
      $selectItem(this$static, item_0);
    }
  }
   else if (this$static.autoOpen && !!this$static.shownChildMenu) {
    $onHide(this$static.shownChildMenu, focus_0);
    $hide(this$static.popup, false);
    this$static.shownChildMenu = null;
  }
}

function $findItem(this$static, hItem){
  var item_0, item$iterator;
  for (item$iterator = new ArrayList$1(this$static.items); item$iterator.i < item$iterator.this$01.array.length;) {
    item_0 = castTo($next_2(item$iterator), 15);
    if (isOrHasChildImpl(($clinit_DOM() , item_0.element), hItem)) {
      return item_0;
    }
  }
  return null;
}

function $focus(this$static){
  $focus_0(($clinit_DOM() , this$static.element));
}

function $init_0(this$static, vertical, subMenuIcon){
  var outer, table, tr, e;
  this$static.subMenuIcon = subMenuIcon;
  table = ($clinit_DOM() , $doc.createElement('table'));
  this$static.body_0 = $doc.createElement('tbody');
  $appendChild(table, resolve(this$static.body_0));
  if (!vertical) {
    tr = $doc.createElement('tr');
    $appendChild(this$static.body_0, resolve(tr));
  }
  this$static.vertical = vertical;
  outer = (e = $doc.createElement('div') , e.tabIndex = 0 , undefined , e);
  $appendChild(outer, resolve(table));
  $setElement_0(this$static, outer);
  $clinit_Roles();
  $set(MENUBAR, this$static.element);
  this$static.eventsToSink == -1?sinkEvents_0(this$static.element, 2225 | (this$static.element.__eventBits || 0)):(this$static.eventsToSink |= 2225);
  this$static.element.className = 'gwt-MenuBar';
  vertical?$setStyleName_0(this$static, getStylePrimaryName(this$static.element) + '-' + 'vertical', true):$setStyleName_0(this$static, getStylePrimaryName(this$static.element) + '-' + 'horizontal', true);
  this$static.element.style['outline'] = '0px';
  this$static.element.setAttribute('hideFocus', 'true');
  $addDomHandler(this$static, new MenuBar$2(this$static), ($clinit_BlurEvent() , $clinit_BlurEvent() , TYPE));
}

function $insertItem_1(this$static, item_0, beforeIndex){
  var i, itemsIndex;
  if (beforeIndex < 0 || beforeIndex > this$static.allItems.array.length) {
    throw toJs(new IndexOutOfBoundsException);
  }
  $add_7(this$static.allItems, beforeIndex, item_0);
  itemsIndex = 0;
  for (i = 0; i < beforeIndex; i++) {
    instanceOf($get_1(this$static.allItems, i), 15) && ++itemsIndex;
  }
  $add_7(this$static.items, itemsIndex, item_0);
  $addItemElement(this$static, beforeIndex, ($clinit_DOM() , item_0.element));
  item_0.parentMenu = this$static;
  $setStyleName_0(item_0, getStylePrimaryName(item_0.element) + '-' + 'selected', false);
  $updateSubmenuIcon(this$static, item_0);
  return item_0;
}

function $insertSeparator(this$static, separator, beforeIndex){
  if (beforeIndex < 0 || beforeIndex > this$static.allItems.array.length) {
    throw toJs(new IndexOutOfBoundsException);
  }
  this$static.vertical && (($clinit_DOM() , separator.element)['colSpan'] = 2 , undefined);
  $addItemElement(this$static, beforeIndex, ($clinit_DOM() , separator.element));
  $add_7(this$static.allItems, beforeIndex, separator);
  return separator;
}

function $itemOver(this$static, item_0, focus_0){
  if (!item_0) {
    if (!!this$static.selectedItem && !!this$static.shownChildMenu && this$static.shownChildMenu == this$static.selectedItem.subMenu) {
      return;
    }
  }
  if (!!item_0 && !item_0.enabled) {
    return;
  }
  $selectItem(this$static, item_0);
  focus_0 && this$static.focusOnHover && $focus_0(($clinit_DOM() , this$static.element));
  !!item_0 && (!!this$static.shownChildMenu || !!this$static.parentMenu || this$static.autoOpen) && $doItemAction(this$static, item_0, false, this$static.focusOnHover);
}

function $moveSelectionDown(this$static){
  if ($selectFirstItemIfNoneSelected(this$static)) {
    return;
  }
  if (this$static.vertical) {
    $selectNextItem(this$static);
  }
   else {
    if (!!this$static.selectedItem.subMenu && this$static.selectedItem.subMenu.items.array.length != 0 && (!this$static.shownChildMenu || !this$static.shownChildMenu.selectedItem)) {
      !this$static.shownChildMenu && $doItemAction(this$static, this$static.selectedItem, false, true);
      $focus(this$static.selectedItem.subMenu);
    }
     else 
      !!this$static.parentMenu && (this$static.parentMenu.vertical?$selectNextItem(this$static.parentMenu):$moveSelectionDown(this$static.parentMenu));
  }
}

function $moveSelectionUp(this$static){
  if ($selectFirstItemIfNoneSelected(this$static)) {
    return;
  }
  !this$static.shownChildMenu && this$static.vertical?$selectPrevItem(this$static):!!this$static.parentMenu && this$static.parentMenu.vertical?$selectPrevItem(this$static.parentMenu):$close(this$static, true);
}

function $moveToNextItem(this$static){
  if ($selectFirstItemIfNoneSelected(this$static)) {
    return;
  }
  if (this$static.vertical) {
    if (!!this$static.selectedItem.subMenu && this$static.selectedItem.subMenu.items.array.length != 0 && (!this$static.shownChildMenu || !this$static.shownChildMenu.selectedItem)) {
      !this$static.shownChildMenu && $doItemAction(this$static, this$static.selectedItem, false, true);
      $focus(this$static.selectedItem.subMenu);
    }
     else 
      !!this$static.parentMenu && (this$static.parentMenu.vertical?$moveToNextItem(this$static.parentMenu):$selectNextItem(this$static.parentMenu));
  }
   else {
    $selectNextItem(this$static);
  }
}

function $moveToPrevItem(this$static){
  if ($selectFirstItemIfNoneSelected(this$static)) {
    return;
  }
  this$static.vertical?!!this$static.parentMenu && !this$static.parentMenu.vertical?$selectPrevItem(this$static.parentMenu):$close(this$static, true):$selectPrevItem(this$static);
}

function $onHide(this$static, focus_0){
  if (this$static.shownChildMenu) {
    $onHide(this$static.shownChildMenu, focus_0);
    $hide(this$static.popup, false);
    focus_0 && $focus_0(($clinit_DOM() , this$static.element));
  }
}

function $onPopupClosed(this$static, autoClosed){
  autoClosed && (this$static.parentMenu?$close(this$static, false):$selectItem(this$static, null));
  $onHide(this$static, !autoClosed && this$static.focusOnHover);
  fire_0(this$static, false);
  this$static.shownChildMenu = null;
  this$static.popup = null;
  !!this$static.parentMenu && !!this$static.parentMenu.popup && (this$static.parentMenu.popup.previewAllNativeEvents = true , undefined);
}

function $openPopup(this$static, item_0){
  !!this$static.parentMenu && !!this$static.parentMenu.popup && (this$static.parentMenu.popup.previewAllNativeEvents = false , undefined);
  this$static.shownChildMenu = item_0.subMenu;
  $selectItem(this$static.shownChildMenu, null);
  this$static.shownChildMenu.parentMenu = this$static;
  this$static.popup = new MenuBar$MenuPopup(this$static);
  $setWidget_1(this$static.popup, this$static.shownChildMenu);
  $addHandler(this$static.popup, new ListenerWrapper$WrappedPopupListener(this$static), TYPE_14?TYPE_14:(TYPE_14 = new GwtEvent$Type));
  $setPopupPositionAndShow(this$static.popup, new MenuBar$3(this$static, item_0));
}

function $selectFirstItemIfNoneSelected(this$static){
  var nextItem, nextItem$iterator;
  if (!this$static.selectedItem) {
    for (nextItem$iterator = new ArrayList$1(this$static.items); nextItem$iterator.i < nextItem$iterator.this$01.array.length;) {
      nextItem = castTo($next_2(nextItem$iterator), 15);
      if (nextItem.enabled) {
        $selectItem(this$static, nextItem);
        break;
      }
    }
    return true;
  }
  return false;
}

function $selectItem(this$static, item_0){
  var td, tr;
  if (item_0 == this$static.selectedItem) {
    return;
  }
  if (this$static.selectedItem) {
    $setSelectionStyle(this$static.selectedItem);
    if (this$static.vertical) {
      tr = ($clinit_DOM() , $getParentElement($getElement(this$static.selectedItem)));
      if ($getChildCount(tr) == 2) {
        td = $getChild(tr, 1);
        setStyleName(td, 'subMenuIcon-selected', false);
      }
    }
  }
  if (item_0) {
    $setStyleName_0(item_0, getStylePrimaryName(($clinit_DOM() , item_0.element)) + '-' + 'selected', true);
    if (this$static.vertical) {
      tr = $getParentElement(item_0.element);
      if ($getChildCount(tr) == 2) {
        td = $getChild(tr, 1);
        setStyleName(td, 'subMenuIcon-selected', true);
      }
    }
    $clinit_Roles();
    $setAriaActivedescendantProperty(this$static.element, new Id(item_0.element));
  }
  this$static.selectedItem = item_0;
}

function $selectNextItem(this$static){
  var firstIndex, index_0, itemToBeSelected;
  if (!this$static.selectedItem) {
    return;
  }
  index_0 = $indexOf_2(this$static.items, this$static.selectedItem, 0);
  firstIndex = index_0;
  while (true) {
    index_0 = index_0 + 1;
    index_0 == this$static.items.array.length && (index_0 = 0);
    if (index_0 == firstIndex) {
      itemToBeSelected = castTo($get_1(this$static.items, firstIndex), 15);
      break;
    }
     else {
      itemToBeSelected = castTo($get_1(this$static.items, index_0), 15);
      if (itemToBeSelected.enabled) {
        break;
      }
    }
  }
  $selectItem(this$static, itemToBeSelected);
  !!this$static.shownChildMenu && $doItemAction(this$static, itemToBeSelected, false, true);
}

function $selectPrevItem(this$static){
  var firstIndex, index_0, itemToBeSelected;
  if (!this$static.selectedItem) {
    return;
  }
  index_0 = $indexOf_2(this$static.items, this$static.selectedItem, 0);
  firstIndex = index_0;
  while (true) {
    index_0 = index_0 - 1;
    index_0 < 0 && (index_0 = this$static.items.array.length - 1);
    if (index_0 == firstIndex) {
      itemToBeSelected = castTo($get_1(this$static.items, firstIndex), 15);
      break;
    }
     else {
      itemToBeSelected = castTo($get_1(this$static.items, index_0), 15);
      if (itemToBeSelected.enabled) {
        break;
      }
    }
  }
  $selectItem(this$static, itemToBeSelected);
  !!this$static.shownChildMenu && $doItemAction(this$static, itemToBeSelected, false, true);
}

function $updateSubmenuIcon(this$static, item_0){
  var container, idx, submenu, td, tdCount, tr;
  if (!this$static.vertical) {
    return;
  }
  idx = $indexOf_2(this$static.allItems, item_0, 0);
  if (idx == -1) {
    return;
  }
  container = this$static.vertical?this$static.body_0:($clinit_DOM() , $getChild(this$static.body_0, 0));
  tr = ($clinit_DOM() , $getChild(container, idx));
  tdCount = $getChildCount(tr);
  submenu = item_0.subMenu;
  if (!submenu) {
    tdCount == 2 && $removeChild(tr, $getChild(tr, 1));
    item_0.element['colSpan'] = 2;
  }
   else if (tdCount == 1) {
    item_0.element['colSpan'] = 1;
    td = $doc.createElement('td');
    td['vAlign'] = 'middle';
    $setInnerHTML(td, $getSafeHtml_0(this$static.subMenuIcon).html);
    td.className = 'subMenuIcon';
    $appendChild(tr, resolve(td));
  }
}

function MenuBar(){
  MenuBar_0.call(this, false);
}

function MenuBar_0(vertical){
  this.allItems = new ArrayList;
  this.items = new ArrayList;
  $init_0(this, vertical, create_1(($clinit_MenuBar_Resources_default_InlineClientBundleGenerator$menuBarSubMenuIconInitializer() , menuBarSubMenuIcon)));
}

defineClass(35, 19, {27:1, 95:1, 23:1, 25:1, 103:1, 21:1, 28:1, 35:1, 681:1, 18:1, 19:1, 153:1}, MenuBar, MenuBar_0);
_.onBrowserEvent = function onBrowserEvent_2(event_0){
  var item_0, keyCode;
  item_0 = $findItem(this, ($clinit_DOM() , event_0.target));
  switch ($eventGetTypeInt(event_0.type)) {
    case 1:
      {
        $focus_0(this.element);
        !!item_0 && $doItemAction(this, item_0, true, true);
        break;
      }

    case 16:
      {
        !!item_0 && $itemOver(this, item_0, true);
        break;
      }

    case 32:
      {
        !!item_0 && $itemOver(this, null, false);
        break;
      }

    case $intern_32:
      {
        $selectFirstItemIfNoneSelected(this);
        break;
      }

    case 128:
      {
        keyCode = event_0.keyCode | 0;
        $clinit_LocaleInfo();
        keyCode = maybeSwapArrowKeysForRtl(keyCode, false);
        switch (keyCode) {
          case 37:
            $moveToPrevItem(this);
            event_0.stopPropagation();
            event_0.preventDefault();
            break;
          case 39:
            $moveToNextItem(this);
            event_0.stopPropagation();
            event_0.preventDefault();
            break;
          case 38:
            $moveSelectionUp(this);
            event_0.stopPropagation();
            event_0.preventDefault();
            break;
          case 40:
            $moveSelectionDown(this);
            event_0.stopPropagation();
            event_0.preventDefault();
            break;
          case 27:
            this.parentMenu?$close(this, false):$selectItem(this, null);
            !this.parentMenu && !!this.popup && $hide(this.popup, false);
            event_0.stopPropagation();
            event_0.preventDefault();
            break;
          case 9:
            this.parentMenu?$close(this, false):$selectItem(this, null);
            !this.parentMenu && !!this.popup && $hide(this.popup, false);
            break;
          case 13:
            if (!$selectFirstItemIfNoneSelected(this)) {
              $doItemAction(this, this.selectedItem, true, true);
              event_0.stopPropagation();
              event_0.preventDefault();
            }

        }
        break;
      }

  }
  $onBrowserEvent(this, event_0);
}
;
_.onDetach = function onDetach_3(){
  !!this.popup && $hide(this.popup, false);
  $onDetach(this);
}
;
_.autoOpen = false;
_.focusOnHover = true;
_.subMenuIcon = null;
_.vertical = false;
var Lcom_google_gwt_user_client_ui_MenuBar_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuBar', 35);
function MenuBar$1(val$cmd){
  this.val$cmd2 = val$cmd;
}

defineClass(378, 1, {}, MenuBar$1);
_.execute_0 = function execute_5(){
  this.val$cmd2.execute_0();
}
;
var Lcom_google_gwt_user_client_ui_MenuBar$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuBar/1', 378);
function MenuBar$2(this$0){
  this.this$01 = this$0;
}

defineClass(379, 1, {669:1, 32:1}, MenuBar$2);
var Lcom_google_gwt_user_client_ui_MenuBar$2_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuBar/2', 379);
function MenuBar$3(this$0, val$item){
  this.this$01 = this$0;
  this.val$item2 = val$item;
}

defineClass(380, 1, {}, MenuBar$3);
_.setPosition = function setPosition(offsetWidth, offsetHeight){
  this.this$01.vertical?$positionNextTo(this.this$01.popup, this.val$item2):$positionBelow(this.this$01.popup, this.val$item2);
}
;
var Lcom_google_gwt_user_client_ui_MenuBar$3_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuBar/3', 380);
function $leftOf(object){
  return $getAbsoluteLeft(($clinit_DOM() , object.element));
}

function $positionBelow(this$static, target){
  var left, top_0;
  top_0 = $getAbsoluteTop(this$static.this$01) + $getOffsetHeight(this$static.this$01);
  left = this$static.towardsEast?$getAbsoluteLeft(($clinit_DOM() , target.element)):$getAbsoluteLeft(($clinit_DOM() , target.element)) + $getPropertyInt(target.element, 'offsetWidth') - $getPropertyInt(this$static.element, 'offsetWidth');
  $setPositionInClient(this$static, left, top_0);
}

function $positionNextTo(this$static, target){
  var left, leftIfTowardEast, leftIfTowardWest, offsetTop, overflowIfTowardsEast, overflowIfTowardsWest, top_0;
  offsetTop = ($getBoundingClientRectTop($getElement(target.subMenu)) + $wnd.pageYOffset | 0) - ($getBoundingClientRectTop(($clinit_DOM() , this$static.element)) + $wnd.pageYOffset | 0);
  top_0 = ($getBoundingClientRectTop(target.element) + $wnd.pageYOffset | 0) - offsetTop;
  leftIfTowardEast = $rightOf(this$static.this$01);
  leftIfTowardWest = $leftOf(this$static.this$01) - $getPropertyInt(this$static.element, 'offsetWidth');
  overflowIfTowardsEast = leftIfTowardEast + $getPropertyInt(this$static.element, 'offsetWidth') - (($wnd.pageXOffset | 0) + $getClientWidth($doc));
  overflowIfTowardsWest = ($wnd.pageXOffset | 0) - leftIfTowardWest;
  overflowIfTowardsEast <= 0 && overflowIfTowardsWest <= 0?!!this$static.this$01.parentMenu && !!this$static.this$01.parentMenu.popup && (this$static.towardsEast = this$static.this$01.parentMenu.popup.towardsEast):(this$static.towardsEast = overflowIfTowardsEast < overflowIfTowardsWest);
  left = this$static.towardsEast?leftIfTowardEast:leftIfTowardWest;
  $setPositionInClient(this$static, left, top_0);
}

function $rightOf(object){
  return $getAbsoluteLeft(($clinit_DOM() , object.element)) + $getPropertyInt(object.element, 'offsetWidth');
}

function $setPositionInClient(this$static, left, top_0){
  if ($getPropertyInt(($clinit_DOM() , this$static.element), 'offsetWidth') < $getClientWidth($doc)) {
    left = $wnd.Math.min(left, ($wnd.pageXOffset | 0) + $getClientWidth($doc) - $getPropertyInt(this$static.element, 'offsetWidth'));
    left = $wnd.Math.max($wnd.pageXOffset | 0, left);
  }
  $setPopupPosition(this$static, left, top_0);
}

function MenuBar$MenuPopup(this$0){
  var primaryStyleName;
  this.this$01 = this$0;
  DecoratedPopupPanel.call(this, true, false, 'menuPopup');
  this.towardsEast = ($clinit_LocaleInfo() , true);
  $setAnimationType(this, ($clinit_PopupPanel$AnimationType() , ONE_WAY_CORNER));
  this.isAnimationEnabled = false;
  $getParentElement(($clinit_DOM() , $getFirstChildElement(this.element))).className = 'gwt-MenuBarPopup';
  primaryStyleName = getStylePrimaryName(this$0.element);
  $equals_1('gwt-MenuBar', primaryStyleName) || setStyleName($getParentElement($getFirstChildElement(this.element)), primaryStyleName + 'Popup', true);
  this.previewAllNativeEvents = true;
}

defineClass(377, 239, $intern_44, MenuBar$MenuPopup);
_.onPreviewNativeEvent = function onPreviewNativeEvent_1(event_0){
  var parentMenuElement, target;
  if (!event_0.isCanceled) {
    switch ($getTypeInt(event_0.nativeEvent)) {
      case 4:
        target = event_0.nativeEvent.target;
        parentMenuElement = $getElement(this.this$01);
        if (isOrHasChildImpl(parentMenuElement, target)) {
          event_0.isCanceled = true;
          return;
        }

        event_0.isFirstHandler && false && (event_0.isCanceled = true);
        event_0.isCanceled && $selectItem(this.this$01, null);
        return;
    }
  }
  event_0.isFirstHandler && false && (event_0.isCanceled = true);
}
;
_.towardsEast = false;
var Lcom_google_gwt_user_client_ui_MenuBar$MenuPopup_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuBar/MenuPopup', 377);
var menuBarSubMenuIcon;
function $clinit_MenuBar_Resources_default_InlineClientBundleGenerator$menuBarSubMenuIconInitializer(){
  $clinit_MenuBar_Resources_default_InlineClientBundleGenerator$menuBarSubMenuIconInitializer = emptyMethod;
  menuBarSubMenuIcon = new ImageResourcePrototype(($clinit_UriUtils() , new SafeUriString(($clinit_LocaleInfo() , 'data:image/gif;base64,R0lGODlhBQAJAIAAAAAAAAAAACH5BAEAAAEALAAAAAAFAAkAAAIMRB5gp9v2YlJsJRQKADs='))));
}

function $setEnabled(this$static, enabled){
  enabled?$setStyleName_0(this$static, getStylePrimaryName(($clinit_DOM() , this$static.element)) + '-' + 'disabled', false):$setStyleName_0(this$static, getStylePrimaryName(($clinit_DOM() , this$static.element)) + '-' + 'disabled', true);
  this$static.enabled = enabled;
}

function $setScheduledCommand(this$static, cmd){
  this$static.command = cmd;
}

function $setSelectionStyle(this$static){
  $setStyleName_0(this$static, getStylePrimaryName(($clinit_DOM() , this$static.element)) + '-' + 'selected', false);
}

function $setSubMenu(this$static, subMenu){
  this$static.subMenu = subMenu;
  !!this$static.parentMenu && $updateSubmenuIcon(this$static.parentMenu, this$static);
  if (subMenu) {
    ($clinit_DOM() , subMenu.element).tabIndex = -1;
    $clinit_Roles();
    $setAriaHaspopupProperty(this$static.element, true);
  }
   else {
    $clinit_Roles();
    $setAriaHaspopupProperty(($clinit_DOM() , this$static.element), false);
  }
}

function MenuItem(html, cmd){
  MenuItem_4.call(this, html.html, cmd);
}

function MenuItem_0(html, subMenu){
  MenuItem_5.call(this, html.html, subMenu);
}

function MenuItem_1(text_0, cmd){
  MenuItem_3.call(this, text_0, false);
  this.command = cmd;
}

function MenuItem_2(text_0, subMenu){
  MenuItem_3.call(this, text_0, false);
  $setSubMenu(this, subMenu);
}

function MenuItem_3(text_0, asHTML){
  $setElement_0(this, ($clinit_DOM() , $doc.createElement('td')));
  $setStyleName_0(this, getStylePrimaryName(this.element) + '-' + 'selected', false);
  asHTML?$setInnerHTML(this.element, text_0):$setInnerText(this.element, text_0);
  this.element.className = 'gwt-MenuItem';
  $setAttribute(this.element, 'id', $createUniqueId($doc));
  $clinit_Roles();
  $set(MENUITEM, this.element);
}

function MenuItem_4(text_0, cmd){
  MenuItem_3.call(this, text_0, true);
  this.command = cmd;
}

function MenuItem_5(text_0, subMenu){
  MenuItem_3.call(this, text_0, true);
  $setSubMenu(this, subMenu);
}

defineClass(15, 18, $intern_52, MenuItem, MenuItem_0, MenuItem_1, MenuItem_2);
_.enabled = true;
var Lcom_google_gwt_user_client_ui_MenuItem_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuItem', 15);
function MenuItemSeparator(){
  var div;
  $setElement_0(this, ($clinit_DOM() , $doc.createElement('td')));
  this.element.className = 'gwt-MenuItemSeparator';
  div = $doc.createElement('div');
  $appendChild(this.element, resolve(div));
  div.className = 'menuSeparatorInner';
}

defineClass(184, 18, $intern_4, MenuItemSeparator);
var Lcom_google_gwt_user_client_ui_MenuItemSeparator_2_classLit = createForClass('com.google.gwt.user.client.ui', 'MenuItemSeparator', 184);
function $onResize_0(){
  var height, width_0, winHeight, winWidth;
  null.$_nullMethod();
  winWidth = $getClientWidth($doc);
  winHeight = $getClientHeight($doc);
  null.$_nullMethod(($clinit_Style$Display() , 'none'));
  null.$_nullMethod(($clinit_Style$Unit() , '0.0px'));
  null.$_nullMethod('0.0px');
  width_0 = $getScrollWidth($doc);
  height = $getScrollHeight($doc);
  null.$_nullMethod($wnd.Math.max(width_0, winWidth) + 'px');
  null.$_nullMethod($wnd.Math.max(height, winHeight) + 'px');
  null.$_nullMethod('block');
}

function PopupPanel$1(){
}

defineClass(383, 1, $intern_46, PopupPanel$1);
_.onResize = function onResize_3(event_0){
  $onResize_0();
}
;
var Lcom_google_gwt_user_client_ui_PopupPanel$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel/1', 383);
function PopupPanel$3(this$0){
  this.this$01 = this$0;
}

defineClass(384, 1, {32:1, 624:1}, PopupPanel$3);
_.onPreviewNativeEvent = function onPreviewNativeEvent_2(event_0){
  $previewNativeEvent(this.this$01, event_0);
}
;
var Lcom_google_gwt_user_client_ui_PopupPanel$3_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel/3', 384);
function PopupPanel$4(this$0){
  this.this$01 = this$0;
}

defineClass(385, 1, $intern_53, PopupPanel$4);
_.onValueChange = function onValueChange(event_0){
  this.this$01.autoHideOnHistoryEvents && this.this$01.hide(false);
}
;
var Lcom_google_gwt_user_client_ui_PopupPanel$4_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel/4', 385);
function $clinit_PopupPanel$AnimationType(){
  $clinit_PopupPanel$AnimationType = emptyMethod;
  CENTER_1 = new PopupPanel$AnimationType('CENTER', 0);
  ONE_WAY_CORNER = new PopupPanel$AnimationType('ONE_WAY_CORNER', 1);
  ROLL_DOWN = new PopupPanel$AnimationType('ROLL_DOWN', 2);
}

function PopupPanel$AnimationType(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_10(){
  $clinit_PopupPanel$AnimationType();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_user_client_ui_PopupPanel$AnimationType_2_classLit, 1), $intern_3, 158, 0, [CENTER_1, ONE_WAY_CORNER, ROLL_DOWN]);
}

defineClass(158, 10, {158:1, 3:1, 11:1, 10:1}, PopupPanel$AnimationType);
var CENTER_1, ONE_WAY_CORNER, ROLL_DOWN;
var Lcom_google_gwt_user_client_ui_PopupPanel$AnimationType_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'PopupPanel/AnimationType', 158, values_10);
function $maybeShowGlass(this$static){
  if (this$static.showing) {
    if (this$static.curPanel.isGlassEnabled) {
      $appendChild($doc.body, this$static.curPanel.glass);
      this$static.resizeRegistration = addResizeHandler(this$static.curPanel.glassResizer);
      $onResize_0();
      this$static.glassShowing = true;
    }
  }
   else if (this$static.glassShowing) {
    $removeChild($doc.body, this$static.curPanel.glass);
    $removeHandler(this$static.resizeRegistration.real);
    this$static.resizeRegistration = null;
    this$static.glassShowing = false;
  }
}

function $onComplete(this$static){
  if (!this$static.showing) {
    $maybeShowGlass(this$static);
    this$static.isUnloading || $remove_1(($clinit_RootPanel() , get_1()), this$static.curPanel);
  }
  $getElement(this$static.curPanel).style['clip'] = 'rect(auto, auto, auto, auto)';
  $getElement(this$static.curPanel).style['overflow'] = 'visible';
}

function $onInstantaneousRun(this$static){
  $maybeShowGlass(this$static);
  if (this$static.showing) {
    $getElement(this$static.curPanel).style['position'] = 'absolute';
    this$static.curPanel.topPosition != -1 && $setPopupPosition(this$static.curPanel, this$static.curPanel.leftPosition, this$static.curPanel.topPosition);
    $add_0(($clinit_RootPanel() , get_1()), this$static.curPanel);
  }
   else {
    this$static.isUnloading || $remove_1(($clinit_RootPanel() , get_1()), this$static.curPanel);
  }
  $getElement(this$static.curPanel).style['overflow'] = 'visible';
}

function $onUpdate(this$static, progress){
  var bottom, height, left, right, top_0, width_0;
  this$static.showing || (progress = 1 - progress);
  top_0 = 0;
  left = 0;
  right = 0;
  bottom = 0;
  height = round_int(progress * this$static.offsetHeight_0);
  width_0 = round_int(progress * this$static.offsetWidth_0);
  switch (this$static.curPanel.animType.ordinal) {
    case 2:
      right = this$static.offsetWidth_0;
      bottom = height;
      break;
    case 0:
      top_0 = this$static.offsetHeight_0 - height >> 1;
      left = this$static.offsetWidth_0 - width_0 >> 1;
      right = left + width_0;
      bottom = top_0 + height;
      break;
    case 1:
      $clinit_LocaleInfo();
      right = width_0;
      bottom = height;
  }
  $setClip($getElement(this$static.curPanel), 'rect(' + top_0 + 'px, ' + right + 'px, ' + bottom + 'px, ' + left + 'px)');
}

function $setState(this$static, showing, isUnloading){
  var animate;
  this$static.isUnloading = isUnloading;
  $cancel(this$static);
  if (this$static.showTimer) {
    $cancel_0(this$static.showTimer);
    this$static.showTimer = null;
    $onComplete(this$static);
  }
  this$static.curPanel.showing = showing;
  $updateHandlers(this$static.curPanel);
  animate = !isUnloading && this$static.curPanel.isAnimationEnabled;
  this$static.curPanel.animType != ($clinit_PopupPanel$AnimationType() , CENTER_1) && !showing && (animate = false);
  this$static.showing = showing;
  if (animate) {
    if (showing) {
      $maybeShowGlass(this$static);
      $getElement(this$static.curPanel).style['position'] = 'absolute';
      this$static.curPanel.topPosition != -1 && $setPopupPosition(this$static.curPanel, this$static.curPanel.leftPosition, this$static.curPanel.topPosition);
      $getElement(this$static.curPanel).style['clip'] = 'rect(0px, 0px, 0px, 0px)';
      $add_0(($clinit_RootPanel() , get_1()), this$static.curPanel);
      this$static.showTimer = new PopupPanel$ResizeAnimation$1(this$static);
      $schedule(this$static.showTimer, 1);
    }
     else {
      $run(this$static, 200, now_1(), null);
    }
  }
   else {
    $onInstantaneousRun(this$static);
  }
}

function PopupPanel$ResizeAnimation(panel){
  Animation.call(this);
  this.curPanel = panel;
}

defineClass(381, 210, {}, PopupPanel$ResizeAnimation);
_.onComplete = function onComplete_1(){
  $onComplete(this);
}
;
_.onStart = function onStart_0(){
  this.offsetHeight_0 = $getOffsetHeight_0(this.curPanel);
  this.offsetWidth_0 = $getOffsetWidth_0(this.curPanel);
  $getElement(this.curPanel).style['overflow'] = 'hidden';
  $onUpdate(this, (1 + $wnd.Math.cos($intern_1)) / 2);
}
;
_.onUpdate = function onUpdate_0(progress){
  $onUpdate(this, progress);
}
;
_.curPanel = null;
_.glassShowing = false;
_.isUnloading = false;
_.offsetHeight_0 = 0;
_.offsetWidth_0 = -1;
_.showing = false;
var Lcom_google_gwt_user_client_ui_PopupPanel$ResizeAnimation_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel/ResizeAnimation', 381);
function PopupPanel$ResizeAnimation$1(this$1){
  this.this$11 = this$1;
  Timer.call(this);
}

defineClass(382, 178, {}, PopupPanel$ResizeAnimation$1);
_.run = function run_1(){
  this.this$11.showTimer = null;
  $run_0(this.this$11, 200, null);
}
;
var Lcom_google_gwt_user_client_ui_PopupPanel$ResizeAnimation$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'PopupPanel/ResizeAnimation/1', 382);
function $clinit_PotentialElement(){
  $clinit_PotentialElement = emptyMethod;
  declareShim();
}

function $setResolver(this$static, resolver){
  $clinit_PotentialElement();
  this$static.__gwt_resolve = buildResolveCallback(resolver);
}

function buildResolveCallback(resolver){
  return function(){
    this.__gwt_resolve = cannotResolveTwice;
    return resolver.resolvePotentialElement();
  }
  ;
}

function cannotResolveTwice(){
  throw 'A PotentialElement cannot be resolved twice.';
}

function declareShim(){
  var shim = function(){
  }
  ;
  shim.prototype = {className:'', clientHeight:0, clientWidth:0, dir:'', getAttribute:function(name_0, value_0){
    return this[name_0];
  }
  , href:'', id:'', lang:'', nodeType:1, removeAttribute:function(name_0, value_0){
    this[name_0] = undefined;
  }
  , setAttribute:function(name_0, value_0){
    this[name_0] = value_0;
  }
  , src:'', style:{}, title:''};
  $wnd.GwtPotentialElementShim = shim;
}

function $setText_1(this$static, text_0){
  $setText_3(this$static.impl, text_0);
}

function RichTextArea(){
  this.impl = new RichTextAreaImplIE8toIE10;
  $setElement(this, this.impl.elem);
  ($clinit_DOM() , this.element).className = 'gwt-RichTextArea';
}

defineClass(604, 212, $intern_41, RichTextArea);
_.onAttach = function onAttach_4(){
  $onAttach_0(this);
  $initElement(this.impl);
}
;
_.onDetach = function onDetach_4(){
  $onDetach(this);
  $uninitElement(this.impl);
}
;
var Lcom_google_gwt_user_client_ui_RichTextArea_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RichTextArea', 604);
function RootLayoutPanel(){
  ComplexPanel.call(this);
  $setElement(this, $doc.createElement('div'));
  this.layout = new Layout(($clinit_DOM() , this.element));
  this.layoutCmd = new LayoutCommand(this.layout);
  addResizeHandler(new RootLayoutPanel$1(this));
}

function get_0(){
  if (!singleton_0) {
    singleton_0 = new RootLayoutPanel;
    $add_0(($clinit_RootPanel() , get_1()), singleton_0);
  }
  return singleton_0;
}

defineClass(455, 454, $intern_48, RootLayoutPanel);
_.onLoad = function onLoad_1(){
  $fillParent(this.layout.parentElem);
}
;
var singleton_0;
var Lcom_google_gwt_user_client_ui_RootLayoutPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootLayoutPanel', 455);
function RootLayoutPanel$1(this$0){
  this.this$01 = this$0;
}

defineClass(456, 1, $intern_46, RootLayoutPanel$1);
_.onResize = function onResize_4(event_0){
  $onResize(this.this$01);
}
;
var Lcom_google_gwt_user_client_ui_RootLayoutPanel$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootLayoutPanel/1', 456);
function $clinit_RootPanel(){
  $clinit_RootPanel = emptyMethod;
  maybeDetachCommand = new RootPanel$1;
  rootPanels = new HashMap;
  widgetsToDetach = new HashSet;
}

function RootPanel(elem){
  ComplexPanel.call(this);
  $setElement_0(this, ($clinit_DOM() , elem));
  $onAttach(this);
}

function detachNow(widget){
  $clinit_RootPanel();
  try {
    widget.onDetach();
  }
   finally {
    $remove_11(widgetsToDetach, widget);
  }
}

function detachWidgets(){
  $clinit_RootPanel();
  try {
    tryCommand(widgetsToDetach, maybeDetachCommand);
  }
   finally {
    $reset_7(widgetsToDetach.map_0);
    $reset_7(rootPanels);
  }
}

function get_1(){
  $clinit_RootPanel();
  var rp;
  rp = castTo($get_0(rootPanels, null), 185);
  if (rp) {
    return rp;
  }
  if ($size(rootPanels) == 0) {
    addCloseHandler(new RootPanel$2);
    $clinit_LocaleInfo();
  }
  rp = new RootPanel$DefaultRootPanel;
  $put(rootPanels, null, rp);
  $add_9(widgetsToDetach, rp);
  return rp;
}

defineClass(185, 459, $intern_54);
var maybeDetachCommand, rootPanels, widgetsToDetach;
var Lcom_google_gwt_user_client_ui_RootPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootPanel', 185);
function RootPanel$1(){
}

defineClass(461, 1, {}, RootPanel$1);
_.execute_1 = function execute_6(w){
  w.isAttached() && w.onDetach();
}
;
var Lcom_google_gwt_user_client_ui_RootPanel$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootPanel/1', 461);
function RootPanel$2(){
}

defineClass(462, 1, $intern_51, RootPanel$2);
_.onClose = function onClose_0(closeEvent){
  detachWidgets();
}
;
var Lcom_google_gwt_user_client_ui_RootPanel$2_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootPanel/2', 462);
function RootPanel$DefaultRootPanel(){
  RootPanel.call(this, $doc.body);
}

defineClass(460, 185, $intern_54, RootPanel$DefaultRootPanel);
var Lcom_google_gwt_user_client_ui_RootPanel$DefaultRootPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'RootPanel/DefaultRootPanel', 460);
function $next(this$static){
  if (!this$static.hasElement || !this$static.this$01.widget) {
    throw toJs(new NoSuchElementException);
  }
  this$static.hasElement = false;
  return this$static.returned = this$static.this$01.widget;
}

function SimplePanel$1(this$0){
  this.this$01 = this$0;
  this.hasElement = !!this.this$01.widget;
}

defineClass(240, 1, {}, SimplePanel$1);
_.next_0 = function next_0(){
  return $next(this);
}
;
_.hasNext_0 = function hasNext(){
  return this.hasElement;
}
;
_.remove_0 = function remove_7(){
  !!this.returned && this.this$01.remove(this.returned);
}
;
_.hasElement = false;
_.returned = null;
var Lcom_google_gwt_user_client_ui_SimplePanel$1_2_classLit = createForClass('com.google.gwt.user.client.ui', 'SimplePanel/1', 240);
function $getText(this$static){
  return $getPropertyString(($clinit_DOM() , this$static.element), 'value');
}

function $setText_2(this$static, text_0){
  ($clinit_DOM() , this$static.element)['value'] = text_0 != null?text_0:'';
}

function ValueBoxBase(elem){
  FocusWidget.call(this, elem);
  $clinit_LocaleInfo();
}

defineClass(589, 212, $intern_55);
_.onBrowserEvent = function onBrowserEvent_3(event_0){
  var type_0;
  type_0 = ($clinit_DOM() , $eventGetTypeInt(event_0.type));
  (type_0 & 896) != 0?$onBrowserEvent(this, event_0):$onBrowserEvent(this, event_0);
}
;
_.onLoad = function onLoad_2(){
}
;
var Lcom_google_gwt_user_client_ui_ValueBoxBase_2_classLit = createForClass('com.google.gwt.user.client.ui', 'ValueBoxBase', 589);
function $clinit_TextBoxBase(){
  $clinit_TextBoxBase = emptyMethod;
  $clinit_ValueBoxBase$TextAlignment();
}

function TextBoxBase(elem){
  ValueBoxBase.call(this, (!INSTANCE_1 && (INSTANCE_1 = new PassthroughRenderer) , !INSTANCE_0 && (INSTANCE_0 = new PassthroughParser) , elem));
}

defineClass(318, 589, $intern_55);
var Lcom_google_gwt_user_client_ui_TextBoxBase_2_classLit = createForClass('com.google.gwt.user.client.ui', 'TextBoxBase', 318);
function $setVisibleLines(this$static){
  ($clinit_DOM() , this$static.element).rows = 5;
}

function TextArea_0(){
  $clinit_TextBoxBase();
  TextBoxBase.call(this, $doc.createElement('textarea'));
  ($clinit_DOM() , this.element).className = 'gwt-TextArea';
}

defineClass(198, 318, $intern_55, TextArea_0);
var Lcom_google_gwt_user_client_ui_TextArea_2_classLit = createForClass('com.google.gwt.user.client.ui', 'TextArea', 198);
function TextBox(){
  $clinit_TextBoxBase();
  TextBox_0.call(this, $createInputElement($doc, 'text'));
}

function TextBox_0(element){
  TextBoxBase.call(this, element);
  ($clinit_DOM() , this.element).className = 'gwt-TextBox';
}

defineClass(320, 318, $intern_55, TextBox);
var Lcom_google_gwt_user_client_ui_TextBox_2_classLit = createForClass('com.google.gwt.user.client.ui', 'TextBox', 320);
function $clinit_ValueBoxBase$TextAlignment(){
  $clinit_ValueBoxBase$TextAlignment = emptyMethod;
  CENTER_2 = new ValueBoxBase$TextAlignment$1;
  JUSTIFY_0 = new ValueBoxBase$TextAlignment$2;
  LEFT_0 = new ValueBoxBase$TextAlignment$3;
  RIGHT_0 = new ValueBoxBase$TextAlignment$4;
}

function ValueBoxBase$TextAlignment(enum$name, enum$ordinal){
  Enum.call(this, enum$name, enum$ordinal);
}

function values_11(){
  $clinit_ValueBoxBase$TextAlignment();
  return stampJavaTypeInfo(getClassLiteralForArray(Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment_2_classLit, 1), $intern_3, 111, 0, [CENTER_2, JUSTIFY_0, LEFT_0, RIGHT_0]);
}

defineClass(111, 10, $intern_56);
var CENTER_2, JUSTIFY_0, LEFT_0, RIGHT_0;
var Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'ValueBoxBase/TextAlignment', 111, values_11);
function ValueBoxBase$TextAlignment$1(){
  ValueBoxBase$TextAlignment.call(this, 'CENTER', 0);
}

defineClass(590, 111, $intern_56, ValueBoxBase$TextAlignment$1);
var Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment$1_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'ValueBoxBase/TextAlignment/1', 590, null);
function ValueBoxBase$TextAlignment$2(){
  ValueBoxBase$TextAlignment.call(this, 'JUSTIFY', 1);
}

defineClass(591, 111, $intern_56, ValueBoxBase$TextAlignment$2);
var Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment$2_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'ValueBoxBase/TextAlignment/2', 591, null);
function ValueBoxBase$TextAlignment$3(){
  ValueBoxBase$TextAlignment.call(this, 'LEFT', 2);
}

defineClass(592, 111, $intern_56, ValueBoxBase$TextAlignment$3);
var Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment$3_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'ValueBoxBase/TextAlignment/3', 592, null);
function ValueBoxBase$TextAlignment$4(){
  ValueBoxBase$TextAlignment.call(this, 'RIGHT', 3);
}

defineClass(593, 111, $intern_56, ValueBoxBase$TextAlignment$4);
var Lcom_google_gwt_user_client_ui_ValueBoxBase$TextAlignment$4_2_classLit = createForEnum('com.google.gwt.user.client.ui', 'ValueBoxBase/TextAlignment/4', 593, null);
function $add_4(this$static, w){
  var td, tr;
  tr = ($clinit_DOM() , $doc.createElement('tr'));
  td = $createAlignedTd(this$static);
  $appendChild(tr, resolve(td));
  $appendChild(this$static.body_0, resolve(tr));
  $add(this$static, w, td);
}

function $createAlignedTd(this$static){
  var td;
  td = ($clinit_DOM() , $doc.createElement('td'));
  $setCellHorizontalAlignment(td, this$static.horzAlign);
  $setCellVerticalAlignment(td, this$static.vertAlign);
  return td;
}

function $insert_2(this$static, w, beforeIndex){
  var td, tr;
  $checkIndexBoundsForInsertion(this$static, beforeIndex);
  tr = ($clinit_DOM() , $doc.createElement('tr'));
  td = $createAlignedTd(this$static);
  $appendChild(tr, resolve(td));
  insertChild(this$static.body_0, tr, beforeIndex);
  $insert(this$static, w, td, beforeIndex);
}

function $remove_3(this$static, w){
  var removed, td;
  td = ($clinit_DOM() , $getParentElement(w.element));
  removed = $remove_0(this$static, w);
  removed && $removeChild(this$static.body_0, $getParentElement(td));
  return removed;
}

function VerticalPanel(){
  CellPanel.call(this);
  this.horzAlign = ($clinit_HasHorizontalAlignment() , ALIGN_DEFAULT);
  this.vertAlign = ($clinit_HasVerticalAlignment() , ALIGN_TOP);
  ($clinit_DOM() , this.table)['cellSpacing'] = '0';
  this.table['cellPadding'] = '0';
}

defineClass(101, 247, $intern_49, VerticalPanel);
_.add_0 = function add_9(w){
  $add_4(this, w);
}
;
_.remove = function remove_8(w){
  return $remove_3(this, w);
}
;
var Lcom_google_gwt_user_client_ui_VerticalPanel_2_classLit = createForClass('com.google.gwt.user.client.ui', 'VerticalPanel', 101);
function $add_5(this$static, w){
  $insert_3(this$static, w, this$static.size_0);
}

function $get(this$static, index_0){
  if (index_0 < 0 || index_0 >= this$static.size_0) {
    throw toJs(new IndexOutOfBoundsException);
  }
  return this$static.array[index_0];
}

function $indexOf(this$static, w){
  var i;
  for (i = 0; i < this$static.size_0; ++i) {
    if (this$static.array[i] == w) {
      return i;
    }
  }
  return -1;
}

function $insert_3(this$static, w, beforeIndex){
  var i, i0, newArray;
  if (beforeIndex < 0 || beforeIndex > this$static.size_0) {
    throw toJs(new IndexOutOfBoundsException);
  }
  if (this$static.size_0 == this$static.array.length) {
    newArray = initUnidimensionalArray(Lcom_google_gwt_user_client_ui_Widget_2_classLit, $intern_3, 19, this$static.array.length * 2, 0, 1);
    for (i0 = 0; i0 < this$static.array.length; ++i0) {
      newArray[i0] = this$static.array[i0];
    }
    this$static.array = newArray;
  }
  ++this$static.size_0;
  for (i = this$static.size_0 - 1; i > beforeIndex; --i) {
    this$static.array[i] = this$static.array[i - 1];
  }
  this$static.array[beforeIndex] = w;
}

function $remove_4(this$static, index_0){
  var i;
  if (index_0 < 0 || index_0 >= this$static.size_0) {
    throw toJs(new IndexOutOfBoundsException);
  }
  --this$static.size_0;
  for (i = index_0; i < this$static.size_0; ++i) {
    this$static.array[i] = this$static.array[i + 1];
  }
  this$static.array[this$static.size_0] = null;
}

function $remove_5(this$static, w){
  var index_0;
  index_0 = $indexOf(this$static, w);
  if (index_0 == -1) {
    throw toJs(new NoSuchElementException);
  }
  $remove_4(this$static, index_0);
}

function WidgetCollection(parent_0){
  this.parent_0 = parent_0;
  this.array = initUnidimensionalArray(Lcom_google_gwt_user_client_ui_Widget_2_classLit, $intern_3, 19, 4, 0, 1);
}

defineClass(481, 1, {}, WidgetCollection);
_.iterator = function iterator_3(){
  return new WidgetCollection$WidgetIterator(this);
}
;
_.size_0 = 0;
var Lcom_google_gwt_user_client_ui_WidgetCollection_2_classLit = createForClass('com.google.gwt.user.client.ui', 'WidgetCollection', 481);
function $next_0(this$static){
  if (this$static.index_0 >= this$static.this$01.size_0) {
    throw toJs(new NoSuchElementException);
  }
  this$static.currentWidget = this$static.this$01.array[this$static.index_0];
  ++this$static.index_0;
  return this$static.currentWidget;
}

function WidgetCollection$WidgetIterator(this$0){
  this.this$01 = this$0;
}

defineClass(162, 1, {}, WidgetCollection$WidgetIterator);
_.next_0 = function next_1(){
  return $next_0(this);
}
;
_.hasNext_0 = function hasNext_0(){
  return this.index_0 < this.this$01.size_0;
}
;
_.remove_0 = function remove_9(){
  if (!this.currentWidget) {
    throw toJs(new IllegalStateException);
  }
  this.this$01.parent_0.remove(this.currentWidget);
  --this.index_0;
  this.currentWidget = null;
}
;
_.index_0 = 0;
var Lcom_google_gwt_user_client_ui_WidgetCollection$WidgetIterator_2_classLit = createForClass('com.google.gwt.user.client.ui', 'WidgetCollection/WidgetIterator', 162);
function $clinit_ClippedImageImpl(){
  $clinit_ClippedImageImpl = emptyMethod;
  clearImage = ($clinit_UriUtils() , new SafeUriString(getModuleBaseURL() + 'clear.cache.gif'));
}

function $getSafeHtml(url_0, left, top_0, width_0, height){
  var builder;
  builder = new SafeStylesBuilder;
  $append($append($append(builder, new SafeStylesString('width:' + width_0 + ($clinit_Style$Unit() , 'px') + ';')), new SafeStylesString('height:' + height + 'px' + ';')), new SafeStylesString('background:' + ('url(' + url_0.uri_0 + ') ' + 'no-repeat ' + (-left + 'px ') + (-top_0 + 'px')) + ';'));
  return !template && (template = new ClippedImageImpl_TemplateImpl) , $image(clearImage, new SafeStylesString((new SafeStylesString(builder.sb.string)).css));
}

var clearImage, template;
function $image(arg0, arg1){
  var sb;
  sb = new StringBuilder;
  sb.string += "<img src='";
  $append_2(sb, htmlEscape(arg0.uri_0));
  sb.string += "' style='";
  $append_2(sb, htmlEscape(arg1.css));
  sb.string += "' border='0'>";
  return new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb.string);
}

function ClippedImageImpl_TemplateImpl(){
}

defineClass(609, 1, {}, ClippedImageImpl_TemplateImpl);
var Lcom_google_gwt_user_client_ui_impl_ClippedImageImpl_1TemplateImpl_2_classLit = createForClass('com.google.gwt.user.client.ui.impl', 'ClippedImageImpl_TemplateImpl', 609);
function $clinit_ClippedImagePrototype(){
  $clinit_ClippedImagePrototype = emptyMethod;
  $clinit_ClippedImageImpl();
}

function $getSafeHtml_0(this$static){
  return $getSafeHtml(this$static.url_0, this$static.left_0, this$static.top_0, this$static.width_0, this$static.height_0);
}

function ClippedImagePrototype(url_0, left, top_0, width_0, height){
  $clinit_ClippedImagePrototype();
  this.url_0 = url_0;
  this.left_0 = left;
  this.top_0 = top_0;
  this.width_0 = width_0;
  this.height_0 = height;
}

defineClass(510, 662, {}, ClippedImagePrototype);
_.height_0 = 0;
_.left_0 = 0;
_.top_0 = 0;
_.url_0 = null;
_.width_0 = 0;
var Lcom_google_gwt_user_client_ui_impl_ClippedImagePrototype_2_classLit = createForClass('com.google.gwt.user.client.ui.impl', 'ClippedImagePrototype', 510);
function $focus_0(elem){
  try {
    elem.focus();
  }
   catch (e) {
    if (!elem || !elem.focus) {
      throw e;
    }
  }
}

function $setClip(popup, rect){
  popup.style['clip'] = rect;
}

defineClass(610, 1, {});
_.createElement_0 = function createElement(){
  return $clinit_DOM() , $doc.createElement('textarea');
}
;
var Lcom_google_gwt_user_client_ui_impl_RichTextAreaImpl_2_classLit = createForClass('com.google.gwt.user.client.ui.impl', 'RichTextAreaImpl', 610);
function $setHTMLImpl(this$static, html){
  this$static.elem.contentWindow.document.body.innerHTML = html;
}

function $setText_3(this$static, text_0){
  var elem;
  !this$static.beforeInitPlaceholder?(elem = this$static.elem , elem.contentWindow.document.body.innerText = text_0 , undefined):$setInnerText(this$static.beforeInitPlaceholder, text_0);
}

function $uninitElement(this$static){
  var enabled, html;
  if (this$static.initializing) {
    this$static.initializing = false;
    return;
  }
  $unhookEvents(this$static);
  html = !this$static.beforeInitPlaceholder?this$static.elem.contentWindow.document.body.innerHTML:this$static.beforeInitPlaceholder.innerHTML;
  enabled = !this$static.beforeInitPlaceholder?$isEnabledImpl(this$static):!this$static.beforeInitPlaceholder['disabled'];
  this$static.beforeInitPlaceholder = ($clinit_DOM() , $doc.createElement('div'));
  $setInnerHTML(this$static.beforeInitPlaceholder, html);
  !this$static.beforeInitPlaceholder?$setEnabledImpl(this$static, enabled):(this$static.beforeInitPlaceholder['disabled'] = !enabled , undefined);
}

defineClass(618, 610, {});
_.createElement_0 = function createElement_0(){
  return $doc.createElement('iframe');
}
;
_.onElementInitialized = function onElementInitialized(){
  if (!this.initializing) {
    return;
  }
  this.initializing = false;
  if (this.beforeInitPlaceholder) {
    $setHTMLImpl(this, this.beforeInitPlaceholder.innerHTML);
    $setEnabledImpl(this, !this.beforeInitPlaceholder?$isEnabledImpl(this):!this.beforeInitPlaceholder['disabled']);
    this.beforeInitPlaceholder = null;
  }
  $hookEvents(this);
  if (this.isPendingFocus) {
    this.isPendingFocus = false;
    this.initializing?(this.isPendingFocus = true):(this.elem.contentWindow.focus() , undefined);
  }
}
;
_.onElementInitializing = function onElementInitializing(){
  this.initializing = true;
  this.isPendingFocus = false;
}
;
_.initializing = false;
_.isPendingFocus = false;
var Lcom_google_gwt_user_client_ui_impl_RichTextAreaImplStandard_2_classLit = createForClass('com.google.gwt.user.client.ui.impl', 'RichTextAreaImplStandard', 618);
function $hookEvents(this$static){
  var elem = this$static.elem;
  var body_0 = elem.contentWindow.document.body;
  var handler = $entry(function(evt){
    evt = evt || elem.contentWindow.event;
    dispatchEvent_0(evt, elem);
  }
  );
  body_0.onkeydown = body_0.onkeyup = body_0.onkeypress = body_0.onmousedown = body_0.onmouseup = body_0.onmousemove = body_0.onmouseover = body_0.onmouseout = body_0.onclick = handler;
  elem.contentWindow.onfocus = elem.contentWindow.onblur = handler;
}

function $initElement(this$static){
  var _this = this$static;
  _this.onElementInitializing();
  setTimeout($entry(function(){
    if (_this.initializing == false) {
      return;
    }
    var elem = _this.elem;
    var doc = elem.contentWindow.document;
    if (!doc.body) {
      setTimeout(arguments.callee, 50);
      return;
    }
    doc.body.contentEditable = true;
    _this.onElementInitialized();
  }
  , 1));
}

function $isEnabledImpl(this$static){
  var elem = this$static.elem;
  return elem.contentWindow.document.body.contentEditable.toLowerCase() == 'true';
}

function $setEnabledImpl(this$static, enabled){
  var elem = this$static.elem;
  elem.contentWindow.document.body.contentEditable = enabled;
}

function $unhookEvents(this$static){
  var elem = this$static.elem;
  var body_0 = elem.contentWindow.document.body;
  if (body_0) {
    body_0.onkeydown = body_0.onkeyup = body_0.onkeypress = body_0.onmousedown = body_0.onmouseup = body_0.onmousemove = body_0.onmouseover = body_0.onmouseout = body_0.onclick = null;
    elem.contentWindow.onfocus = elem.contentWindow.onblur = null;
  }
}

function RichTextAreaImplIE8toIE10(){
  this.elem = this.createElement_0();
  this.beforeInitPlaceholder = ($clinit_DOM() , $doc.createElement('div'));
}

defineClass(619, 618, {}, RichTextAreaImplIE8toIE10);
_.createElement_0 = function createElement_1(){
  var elem;
  elem = $doc.createElement('iframe');
  elem['src'] = 'about:blank';
  return elem;
}
;
var Lcom_google_gwt_user_client_ui_impl_RichTextAreaImplIE8toIE10_2_classLit = createForClass('com.google.gwt.user.client.ui.impl', 'RichTextAreaImplIE8toIE10', 619);
function assertCompileTimeUserAgent(){
  var runtimeValue;
  runtimeValue = $getRuntimeValue();
  if (!$equals_1('ie9', runtimeValue)) {
    throw toJs(new UserAgentAsserter$UserAgentAssertionError(runtimeValue));
  }
}

function Error_0(message, cause){
  Throwable.call(this, message, cause);
}

defineClass(202, 22, $intern_7);
var Ljava_lang_Error_2_classLit = createForClass('java.lang', 'Error', 202);
defineClass(87, 202, $intern_7);
var Ljava_lang_AssertionError_2_classLit = createForClass('java.lang', 'AssertionError', 87);
function UserAgentAsserter$UserAgentAssertionError(runtimeValue){
  Error_0.call(this, 'Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (ie9) does not match the runtime user.agent value (' + runtimeValue + ').\n' + 'Expect more errors.' == null?'null':toString_7('Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (ie9) does not match the runtime user.agent value (' + runtimeValue + ').\n' + 'Expect more errors.'), instanceOf('Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (ie9) does not match the runtime user.agent value (' + runtimeValue + ').\n' + 'Expect more errors.', 22)?castTo('Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (ie9) does not match the runtime user.agent value (' + runtimeValue + ').\n' + 'Expect more errors.', 22):null);
}

defineClass(325, 87, $intern_7, UserAgentAsserter$UserAgentAssertionError);
var Lcom_google_gwt_useragent_client_UserAgentAsserter$UserAgentAssertionError_2_classLit = createForClass('com.google.gwt.useragent.client', 'UserAgentAsserter/UserAgentAssertionError', 325);
function $getRuntimeValue(){
  var ua = navigator.userAgent.toLowerCase();
  var docMode = $doc.documentMode;
  if (function(){
    return ua.indexOf('webkit') != -1;
  }
  ())
    return 'safari';
  if (function(){
    return ua.indexOf('msie') != -1 && docMode >= 10 && docMode < 11;
  }
  ())
    return 'ie10';
  if (function(){
    return ua.indexOf('msie') != -1 && docMode >= 9 && docMode < 11;
  }
  ())
    return 'ie9';
  if (function(){
    return ua.indexOf('msie') != -1 && docMode >= 8 && docMode < 11;
  }
  ())
    return 'ie8';
  if (function(){
    return ua.indexOf('gecko') != -1 || docMode >= 11;
  }
  ())
    return 'gecko1_8';
  return 'unknown';
}

function $clearOnReadyStateChange(this$static){
  this$static.onreadystatechange = function(){
  }
  ;
}

function $open(this$static, httpMethod, url_0){
  this$static.open(httpMethod, url_0, true);
}

function $setOnReadyStateChange(this$static, handler){
  var _this = this$static;
  this$static.onreadystatechange = $entry(function(){
    handler.onReadyStateChange(_this);
  }
  );
}

function $removeHandler(this$static){
  $doRemove(this$static.this$01, this$static.val$type2, this$static.val$source3, this$static.val$handler4);
}

function SimpleEventBus$1(this$0, val$type, val$handler){
  this.this$01 = this$0;
  this.val$type2 = val$type;
  this.val$source3 = null;
  this.val$handler4 = val$handler;
}

defineClass(370, 1, {}, SimpleEventBus$1);
var Lcom_google_web_bindery_event_shared_SimpleEventBus$1_2_classLit = createForClass('com.google.web.bindery.event.shared', 'SimpleEventBus/1', 370);
function SimpleEventBus$2(this$0, val$type, val$handler){
  this.this$01 = this$0;
  this.val$type2 = val$type;
  this.val$source3 = null;
  this.val$handler4 = val$handler;
}

defineClass(371, 1, {625:1}, SimpleEventBus$2);
_.execute_0 = function execute_7(){
  $doAddNow(this.this$01, this.val$type2, this.val$source3, this.val$handler4);
}
;
var Lcom_google_web_bindery_event_shared_SimpleEventBus$2_2_classLit = createForClass('com.google.web.bindery.event.shared', 'SimpleEventBus/2', 371);
function SimpleEventBus$3(this$0, val$type, val$source, val$handler){
  this.this$01 = this$0;
  this.val$type2 = val$type;
  this.val$source3 = val$source;
  this.val$handler4 = val$handler;
}

defineClass(372, 1, {625:1}, SimpleEventBus$3);
_.execute_0 = function execute_8(){
  $doRemoveNow(this.this$01, this.val$type2, this.val$source3, this.val$handler4);
}
;
var Lcom_google_web_bindery_event_shared_SimpleEventBus$3_2_classLit = createForClass('com.google.web.bindery.event.shared', 'SimpleEventBus/3', 372);
function $$init_0(this$static){
}

function $adjustBbox(this$static, x1, y1, x2, y2){
  var q;
  if (x1 > x2) {
    q = x1;
    x1 = x2;
    x2 = q;
  }
  if (y1 > y2) {
    q = y1;
    y1 = y2;
    y2 = q;
  }
  x1 = min_1(this$static.boundingBox.x_0, x1);
  y1 = min_1(this$static.boundingBox.y_0, y1);
  x2 = max_1(this$static.boundingBox.x_0 + this$static.boundingBox.width_0 - 1, x2);
  y2 = max_1(this$static.boundingBox.y_0 + this$static.boundingBox.height_0 - 1, y2);
  $setBounds(this$static.boundingBox, x1, y1, x2 - x1, y2 - y1);
}

function $adjustBbox_0(this$static, p1, p2){
  $adjustBbox(this$static, p1.x_0, p1.y_0, p2.x_0, p2.y_0);
}

function $allocNodes(this$static){
  var n;
  n = this$static.getPostCount() + this$static.getInternalNodeCount();
  if (this$static.nodes == null || this$static.nodes.length != n) {
    this$static.nodes = initUnidimensionalArray(I_classLit, $intern_22, 9, n, 15, 1);
    this$static.volts = initUnidimensionalArray(D_classLit, $intern_57, 9, n, 15, 1);
  }
}

function $allowMove(this$static, dx, dy){
  var ce, i, nx, nx2, ny, ny2;
  nx = this$static.x_0 + dx;
  ny = this$static.y_0 + dy;
  nx2 = this$static.x2 + dx;
  ny2 = this$static.y2 + dy;
  for (i = 0; i != sim_0.elmList.arrayList.array.length; i++) {
    ce = $getElm(sim_0, i);
    if (ce.x_0 == nx && ce.y_0 == ny && ce.x2 == nx2 && ce.y2 == ny2)
      return false;
    if (ce.x_0 == nx2 && ce.y_0 == ny2 && ce.x2 == nx && ce.y2 == ny)
      return false;
  }
  return true;
}

function $calcArrow(a, b, al, aw){
  var adx, ady, l_0, p1, p2, poly;
  poly = new Polygon;
  p1 = new Point;
  p2 = new Point;
  adx = b.x_0 - a.x_0;
  ady = b.y_0 - a.y_0;
  l_0 = $wnd.Math.sqrt(adx * adx + ady * ady);
  $addPoint(poly, b.x_0, b.y_0);
  $interpPoint2(a, b, p1, p2, 1 - al / l_0, aw);
  $addPoint(poly, p1.x_0, p1.y_0);
  $addPoint(poly, p2.x_0, p2.y_0);
  return poly;
}

function $calcLeads(this$static, len){
  if (this$static.dn < len || len == 0) {
    this$static.lead1 = this$static.point1;
    this$static.lead2 = this$static.point2;
    return;
  }
  this$static.lead1 = $interpPoint(this$static.point1, this$static.point2, (this$static.dn - len) / (2 * this$static.dn));
  this$static.lead2 = $interpPoint(this$static.point1, this$static.point2, (this$static.dn + len) / (2 * this$static.dn));
}

function $comparePair(x1, x2, y1, y2){
  return x1 == y1 && x2 == y2 || x1 == y2 && x2 == y1;
}

function $createPolygon(a, b, c){
  var p;
  p = new Polygon;
  $addPoint(p, a.x_0, a.y_0);
  $addPoint(p, b.x_0, b.y_0);
  $addPoint(p, c.x_0, c.y_0);
  return p;
}

function $createPolygon_0(a, b, c, d){
  var p;
  p = new Polygon;
  $addPoint(p, a.x_0, a.y_0);
  $addPoint(p, b.x_0, b.y_0);
  $addPoint(p, c.x_0, c.y_0);
  $addPoint(p, d.x_0, d.y_0);
  return p;
}

function $createPolygon_1(a){
  var i, p;
  p = new Polygon;
  for (i = 0; i != a.length; i++)
    $addPoint(p, a[i].x_0, a[i].y_0);
  return p;
}

function $draw2Leads(this$static, g){
  $setVoltageColor(this$static, g, this$static.volts[0]);
  drawThickLine_0(g, this$static.point1, this$static.lead1);
  $setVoltageColor(this$static, g, this$static.volts[1]);
  drawThickLine_0(g, this$static.lead2, this$static.point2);
}

function $drawCenteredText(this$static, g, s, x_0, y_0, cx){
  var h2, w;
  w = round_int($measureText(g.context, s).width);
  h2 = g.currentFontSize / 2 | 0;
  g.context.save();
  g.context.textBaseline = 'middle';
  if (cx) {
    g.context.textAlign = 'center';
    $adjustBbox(this$static, x_0 - (w / 2 | 0), y_0 - h2, x_0 + (w / 2 | 0), y_0 + h2);
  }
   else {
    $adjustBbox(this$static, x_0, y_0 - h2, x_0 + w, y_0 + h2);
  }
  cx && (g.context.textAlign = 'center' , undefined);
  $fillText(g.context, s, x_0, y_0);
  g.context.restore();
}

function $drawCoil(this$static, g, hs, p1, p2, v1, v2){
  var grad, len, loop, start_0;
  len = distance(p1, p2);
  g.context.save();
  g.context.lineWidth = 3;
  $transform(g.context, (p2.x_0 - p1.x_0) / len, (p2.y_0 - p1.y_0) / len, -(p2.y_0 - p1.y_0) / len, (p2.x_0 - p1.x_0) / len, p1.x_0, p1.y_0);
  grad = $createLinearGradient(g.context, 0, 0, len, 0);
  $addColorStop(grad, 0, $getHexValue($getVoltageColor(this$static, g, v1)));
  $addColorStop(grad, 1, $getHexValue($getVoltageColor(this$static, g, v2)));
  $setStrokeStyleWeb(g.context, grad);
  $setLineCap(g.context, ($clinit_Context2d$LineCap() , ROUND).value_0);
  len > 24?$scale(g.context, 1, hs / (len / 6)):$scale(g.context, 1, hs > 0?1:-1);
  for (loop = 0; loop != 3; loop++) {
    g.context.beginPath();
    start_0 = len * loop / 3;
    $moveTo(g.context, start_0, 0);
    $arc(g.context, len * (loop + 0.5) / 3, 0, len / 6, $intern_1, $intern_2);
    $lineTo(g.context, len * (loop + 1) / 3, 0);
    g.context.stroke();
  }
  g.context.restore();
}

function $drawDots(g, pa, pb, pos){
  var di, dn, dx, dy, x0, y0;
  if (!sim_0.simRunning || pos == 0 || !sim_0.dotsCheckItem.on)
    return;
  dx = pb.x_0 - pa.x_0;
  dy = pb.y_0 - pa.y_0;
  dn = $wnd.Math.sqrt(dx * dx + dy * dy);
  $setColor(g, sim_0.conventionCheckItem.on?($clinit_Color() , yellow):($clinit_Color() , cyan));
  pos %= 16;
  pos < 0 && (pos += 16);
  for (di = pos; di < dn; di += 16) {
    x0 = round_int(pa.x_0 + di * dx / dn);
    y0 = round_int(pa.y_0 + di * dy / dn);
    $fillRect(g.context, x0 - 2, y0 - 2, 4, 4);
  }
}

function $drawHandles(this$static, g, c){
  $setColor(g, c);
  this$static.lastHandleGrabbed == -1?$fillRect_0(g, this$static.x_0 - 3, this$static.y_0 - 3, 7, 7):this$static.lastHandleGrabbed == 0 && $fillRect_0(g, this$static.x_0 - 4, this$static.y_0 - 4, 9, 9);
  this$static.numHandles == 2 && (this$static.lastHandleGrabbed == -1?$fillRect_0(g, this$static.x2 - 3, this$static.y2 - 3, 7, 7):this$static.lastHandleGrabbed == 1 && $fillRect_0(g, this$static.x2 - 4, this$static.y2 - 4, 9, 9));
}

function $drawPosts(this$static, g){
  var i, p;
  if (!sim_0.dragElm && !(this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static))
    return;
  if (sim_0.mouseMode == 2 || sim_0.mouseMode == 3)
    return;
  for (i = 0; i != this$static.getPostCount(); i++) {
    p = this$static.getPost(i);
    $setColor(g, whiteColor);
    $fillOval(g, p.x_0 - 3, p.y_0 - 3, 7);
  }
}

function $drawValues(this$static, g, s, hs){
  var dpx, dpy, w, xc, xx, ya, yc;
  if (s == null)
    return;
  $setFont_0(g, unitsFont);
  w = round_int($measureText(g.context, s).width);
  $setColor(g, whiteColor);
  ya = g.currentFontSize / 2 | 0;
  if (instanceOf(this$static, 38) || instanceOf(this$static, 189)) {
    xc = this$static.x2;
    yc = this$static.y2;
  }
   else {
    xc = (this$static.x2 + this$static.x_0) / 2 | 0;
    yc = (this$static.y2 + this$static.y_0) / 2 | 0;
  }
  dpx = round_int(this$static.dpx1 * hs);
  dpy = round_int(this$static.dpy1 * hs);
  if (dpx == 0)
    $fillText(g.context, s, xc - (w / 2 | 0), yc - (dpy < 0?-dpy:dpy) - 2);
  else {
    xx = xc + (dpx < 0?-dpx:dpx) + 2;
    (instanceOf(this$static, 41) || this$static.x_0 < this$static.x2 && this$static.y_0 > this$static.y2) && (xx = xc - (w + (dpx < 0?-dpx:dpx) + 2));
    $fillText(g.context, s, xx, yc + dpy + ya);
  }
}

function $flipPosts(this$static){
  var oldx, oldy;
  oldx = this$static.x_0;
  oldy = this$static.y_0;
  this$static.x_0 = this$static.x2;
  this$static.y_0 = this$static.y2;
  this$static.x2 = oldx;
  this$static.y2 = oldy;
  this$static.setPoints();
}

function $getHandleGrabbedClose(this$static, xtest, ytest, minSize){
  this$static.lastHandleGrabbed = -1;
  distanceSq(this$static.x_0, this$static.y_0, this$static.x2, this$static.y2) >= minSize && (distanceSq(this$static.x_0, this$static.y_0, xtest, ytest) <= 25?(this$static.lastHandleGrabbed = 0):distanceSq(this$static.x2, this$static.y2, xtest, ytest) <= 25 && (this$static.lastHandleGrabbed = 1));
  return this$static.lastHandleGrabbed;
}

function $getPost(this$static, n){
  return n == 0?this$static.point1:n == 1?this$static.point2:null;
}

function $getPostVoltage(this$static, x_0){
  return this$static.volts[x_0];
}

function $getSchmittPolygon(this$static, gsize, ctr){
  var h1, h2, hs, len, pts;
  pts = $newPointArray(6);
  hs = 3 * gsize;
  h1 = 3 * gsize;
  h2 = h1 * 2;
  len = distance(this$static.lead1, this$static.lead2);
  pts[0] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr - h2 / len, hs);
  pts[1] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr + h1 / len, hs);
  pts[2] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr + h1 / len, -hs);
  pts[3] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr + h2 / len, -hs);
  pts[4] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr - h1 / len, -hs);
  pts[5] = $interpPoint_0(this$static.lead1, this$static.lead2, ctr - h1 / len, hs);
  return $createPolygon_1(pts);
}

function $getVoltageColor(this$static, g, volts){
  var c;
  if (this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static) {
    return selectColor;
  }
  if (!sim_0.voltsCheckItem.on) {
    if (!sim_0.powerCheckItem.on)
      return whiteColor;
    return g.lastColor;
  }
  c = round_int((volts + voltageRange) * (colorScaleCount - 1) / (voltageRange * 2));
  c < 0 && (c = 0);
  c >= colorScaleCount && (c = colorScaleCount - 1);
  return colorScale[c];
}

function $interpPoint(a, b, f){
  var p;
  p = new Point;
  p.x_0 = round_int($wnd.Math.floor(a.x_0 * (1 - f) + b.x_0 * f + $intern_58));
  p.y_0 = round_int($wnd.Math.floor(a.y_0 * (1 - f) + b.y_0 * f + $intern_58));
  return p;
}

function $interpPoint_0(a, b, f, g){
  var p;
  p = new Point;
  $interpPoint_2(a, b, p, f, g);
  return p;
}

function $interpPoint_1(a, b, c, f){
  c.x_0 = round_int($wnd.Math.floor(a.x_0 * (1 - f) + b.x_0 * f + $intern_58));
  c.y_0 = round_int($wnd.Math.floor(a.y_0 * (1 - f) + b.y_0 * f + $intern_58));
}

function $interpPoint_2(a, b, c, f, g){
  var gx, gy;
  gx = b.y_0 - a.y_0;
  gy = a.x_0 - b.x_0;
  g /= $wnd.Math.sqrt(gx * gx + gy * gy);
  c.x_0 = round_int($wnd.Math.floor(a.x_0 * (1 - f) + b.x_0 * f + g * gx + $intern_58));
  c.y_0 = round_int($wnd.Math.floor(a.y_0 * (1 - f) + b.y_0 * f + g * gy + $intern_58));
}

function $interpPoint2(a, b, c, d, f, g){
  var gx, gy;
  gx = b.y_0 - a.y_0;
  gy = a.x_0 - b.x_0;
  g /= $wnd.Math.sqrt(gx * gx + gy * gy);
  c.x_0 = round_int($wnd.Math.floor(a.x_0 * (1 - f) + b.x_0 * f + g * gx + $intern_58));
  c.y_0 = round_int($wnd.Math.floor(a.y_0 * (1 - f) + b.y_0 * f + g * gy + $intern_58));
  d.x_0 = round_int($wnd.Math.floor(a.x_0 * (1 - f) + b.x_0 * f - g * gx + $intern_58));
  d.y_0 = round_int($wnd.Math.floor(a.y_0 * (1 - f) + b.y_0 * f - g * gy + $intern_58));
}

function $move(this$static, dx, dy){
  this$static.x_0 += dx;
  this$static.y_0 += dy;
  this$static.x2 += dx;
  this$static.y2 += dy;
  $translate_0(this$static.boundingBox, dx, dy);
  this$static.setPoints();
}

function $movePoint(this$static, n, dx, dy){
  var oldx, oldx2, oldy, oldy2;
  oldx = this$static.x_0;
  oldy = this$static.y_0;
  oldx2 = this$static.x2;
  oldy2 = this$static.y2;
  if (n == 0) {
    this$static.x_0 += dx;
    this$static.y_0 += dy;
  }
   else {
    this$static.x2 += dx;
    this$static.y2 += dy;
  }
  if (this$static.x_0 == this$static.x2 && this$static.y_0 == this$static.y2) {
    this$static.x_0 = oldx;
    this$static.y_0 = oldy;
    this$static.x2 = oldx2;
    this$static.y2 = oldy2;
  }
  this$static.setPoints();
}

function $needsHighlight(this$static){
  return this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static;
}

function $newPointArray(n){
  var a;
  a = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, n, 0, 1);
  while (n > 0)
    a[--n] = new Point;
  return a;
}

function $reset(this$static){
  var i;
  for (i = 0; i != this$static.getPostCount() + this$static.getInternalNodeCount(); i++)
    this$static.volts[i] = 0;
  this$static.curcount_0 = 0;
}

function $selectRect(this$static, r){
  this$static.selected = $intersects(r, this$static.boundingBox);
}

function $setBbox(this$static, x1, y1, x2, y2){
  var q;
  if (x1 > x2) {
    q = x1;
    x1 = x2;
    x2 = q;
  }
  if (y1 > y2) {
    q = y1;
    y1 = y2;
    y2 = q;
  }
  $setBounds(this$static.boundingBox, x1, y1, x2 - x1 + 1, y2 - y1 + 1);
}

function $setBbox_0(this$static, p1, p2, w){
  var dpx, dpy;
  $setBbox(this$static, p1.x_0, p1.y_0, p2.x_0, p2.y_0);
  dpx = round_int(this$static.dpx1 * w);
  dpy = round_int(this$static.dpy1 * w);
  $adjustBbox(this$static, p1.x_0 + dpx, p1.y_0 + dpy, p1.x_0 - dpx, p1.y_0 - dpy);
}

function $setCurrent(this$static, c){
  this$static.current_0 = c;
}

function $setPoints(this$static){
  this$static.dx = this$static.x2 - this$static.x_0;
  this$static.dy = this$static.y2 - this$static.y_0;
  this$static.dn = $wnd.Math.sqrt(this$static.dx * this$static.dx + this$static.dy * this$static.dy);
  this$static.dpx1 = this$static.dy / this$static.dn;
  this$static.dpy1 = -this$static.dx / this$static.dn;
  this$static.dsign = this$static.dy == 0?sign(this$static.dx):sign(this$static.dy);
  this$static.point1 = new Point_0(this$static.x_0, this$static.y_0);
  this$static.point2 = new Point_0(this$static.x2, this$static.y2);
}

function $setPowerColor(this$static, g, w0){
  var i;
  if (!sim_0.powerCheckItem.on || this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static)
    return;
  w0 *= powerMult;
  i = round_int((colorScaleCount / 2 | 0) + (colorScaleCount / 2 | 0) * -w0);
  i < 0 && (i = 0);
  i >= colorScaleCount && (i = colorScaleCount - 1);
  $setColor(g, colorScale[i]);
}

function $setPowerColor_0(this$static, g){
  if (!sim_0.powerCheckItem.on || this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static)
    return;
  $setPowerColor(this$static, g, this$static.getPower());
}

function $setSelected(this$static, x_0){
  this$static.selected = x_0;
}

function $setVoltageColor(this$static, g, volts){
  $setColor(g, $getVoltageColor(this$static, g, volts));
}

function $updateDotCount(cur, cc){
  var cadd;
  if (!sim_0.simRunning)
    return cc;
  cadd = cur * currentMult;
  cadd %= 8;
  return cc + cadd;
}

function CircuitElm(xx, yy){
  $$init_0(this);
  this.x_0 = this.x2 = xx;
  this.y_0 = this.y2 = yy;
  this.flags = this.getDefaultFlags();
  $allocNodes(this);
  this.boundingBox = new Rectangle;
  $setBounds(this.boundingBox, min_1(this.x_0, this.x2), min_1(this.y_0, this.y2), abs_0(this.x2 - this.x_0) + 1, abs_0(this.y2 - this.y_0) + 1);
}

function CircuitElm_0(xa, ya, xb, yb, f){
  $$init_0(this);
  this.x_0 = xa;
  this.y_0 = ya;
  this.x2 = xb;
  this.y2 = yb;
  this.flags = f;
  $allocNodes(this);
  this.boundingBox = new Rectangle;
  $setBounds(this.boundingBox, min_1(this.x_0, this.x2), min_1(this.y_0, this.y2), abs_0(this.x2 - this.x_0) + 1, abs_0(this.y2 - this.y_0) + 1);
}

function abs_0(x_0){
  return x_0 < 0?-x_0:x_0;
}

function distance(p1, p2){
  var x_0, y_0;
  x_0 = p1.x_0 - p2.x_0;
  y_0 = p1.y_0 - p2.y_0;
  return $wnd.Math.sqrt(x_0 * x_0 + y_0 * y_0);
}

function drawPolygon(g, p){
  $drawPolyline(g, p.xpoints, p.ypoints, p.npoints);
}

function drawPost(g, pt){
  $setColor(g, whiteColor);
  $fillOval(g, pt.x_0 - 3, pt.y_0 - 3, 7);
}

function drawThickCircle(g, cx, cy, ri){
  g.context.lineWidth = 3;
  g.context.beginPath();
  $arc(g.context, cx, cy, ri * 0.98, 0, $intern_2);
  g.context.stroke();
  g.context.lineWidth = 1;
}

function drawThickLine(g, x_0, y_0, x2, y2){
  g.context.lineWidth = 3;
  $drawLine(g, x_0, y_0, x2, y2);
  g.context.lineWidth = 1;
}

function drawThickLine_0(g, pa, pb){
  g.context.lineWidth = 3;
  $drawLine(g, pa.x_0, pa.y_0, pb.x_0, pb.y_0);
  g.context.lineWidth = 1;
}

function drawThickPolygon(g, p){
  drawThickPolygon_0(g, p.xpoints, p.ypoints, p.npoints);
}

function drawThickPolygon_0(g, xs, ys, c){
  g.context.lineWidth = 3;
  $drawPolyline(g, xs, ys, c);
  g.context.lineWidth = 1;
}

function max_1(a, b){
  return a > b?a:b;
}

function min_1(a, b){
  return a < b?a:b;
}

function myGetUnitText(v, u, sf){
  var s, sp, va;
  sp = '';
  if (sf)
    s = shortFormat;
  else {
    s = showFormat;
    sp = ' ';
  }
  va = $wnd.Math.abs(v);
  if (va < 1.0E-14)
    return '0' + sp + u;
  if (va < $intern_60)
    return $format_0(s, v * $intern_61) + sp + 'p' + u;
  if (va < $intern_62)
    return $format_0(s, v * $intern_63) + sp + 'n' + u;
  if (va < $intern_64)
    return $format_0(s, v * $intern_65) + sp + muString + u;
  if (va < 1)
    return $format_0(s, v * $intern_20) + sp + 'm' + u;
  if (va < $intern_20)
    return $format_0(s, v) + sp + u;
  if (va < $intern_65)
    return $format_0(s, v * $intern_64) + sp + 'k' + u;
  if (va < $intern_63)
    return $format_0(s, v * $intern_62) + sp + 'M' + u;
  return $format_0(s, v * $intern_60) + sp + 'G' + u;
}

function setColorScale(){
  var i, n1, n2, v;
  for (i = 0; i != colorScaleCount; i++) {
    v = i * 2 / colorScaleCount - 1;
    if (v < 0) {
      n1 = round_int(128 * -v) + 127;
      n2 = round_int(127 * (1 + v));
      colorScale[i] = new Color(n1, n2, n2);
    }
     else {
      n1 = round_int(128 * v) + 127;
      n2 = round_int(127 * (1 - v));
      sim_0.alternativeColorCheckItem.on?(colorScale[i] = new Color(n2, n2, n1)):(colorScale[i] = new Color(n2, n1, n2));
    }
  }
}

function sign(x_0){
  return x_0 < 0?-1:x_0 == 0?0:1;
}

defineClass(4, 1, $intern_66);
_.calculateCurrent = function calculateCurrent(){
}
;
_.canShowValueInScope = function canShowValueInScope(v){
  return false;
}
;
_.canViewInScope = function canViewInScope(){
  return this.getPostCount() <= 2;
}
;
_.delete_0 = function delete_0(){
}
;
_.doStep = function doStep(){
}
;
_.drag = function drag(xx, yy){
  xx = $snapGrid(sim_0, xx);
  yy = $snapGrid(sim_0, yy);
  this.noDiagonal && ($wnd.Math.abs(this.x_0 - xx) < $wnd.Math.abs(this.y_0 - yy)?(xx = this.x_0):(yy = this.y_0));
  this.x2 = xx;
  this.y2 = yy;
  this.setPoints();
}
;
_.draggingDone = function draggingDone(){
}
;
_.draw = function draw(g){
}
;
_.dump_0 = function dump_4(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags;
}
;
_.getConnection = function getConnection(n1, n2){
  return true;
}
;
_.getConnectionNode = function getConnectionNode(n){
  return this.nodes[n];
}
;
_.getConnectionNodeCount = function getConnectionNodeCount(){
  return this.getPostCount();
}
;
_.getCurrent = function getCurrent(){
  return this.current_0;
}
;
_.getCurrentIntoNode = function getCurrentIntoNode(n){
  return n == 0 && this.getPostCount() == 2?-this.current_0:this.current_0;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint(xa, ya){
  if (xa == this.x_0 && ya == this.y_0 && this.getPostCount() == 2)
    return -this.current_0;
  return this.current_0;
}
;
_.getDefaultFlags = function getDefaultFlags(){
  return 0;
}
;
_.getDumpType = function getDumpType(){
  throw toJs(new IllegalStateException);
}
;
_.getEditInfo = function getEditInfo(n){
  return null;
}
;
_.getInfo = function getInfo(arr){
}
;
_.getInternalNodeCount = function getInternalNodeCount(){
  return 0;
}
;
_.getPost = function getPost(n){
  return $getPost(this, n);
}
;
_.getPostCount = function getPostCount(){
  return 2;
}
;
_.getPower = function getPower(){
  return this.getVoltageDiff() * this.current_0;
}
;
_.getScopeText = function getScopeText(v){
  var info;
  info = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 10, 6, 1);
  this.getInfo(info);
  return info[0];
}
;
_.getScopeUnits = function getScopeUnits(x_0){
  return x_0 == 3?1:x_0 == 1?2:0;
}
;
_.getScopeValue = function getScopeValue(x_0){
  return x_0 == 3?this.getCurrent():x_0 == 1?this.getPower():this.getVoltageDiff();
}
;
_.getShortcut = function getShortcut(){
  return 0;
}
;
_.getVoltageDiff = function getVoltageDiff(){
  return this.volts[0] - this.volts[1];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount(){
  return 0;
}
;
_.hasGroundConnection = function hasGroundConnection(n1){
  return false;
}
;
_.isCenteredText = function isCenteredText(){
  return false;
}
;
_.isWire = function isWire(){
  return false;
}
;
_.nonLinear = function nonLinear(){
  return false;
}
;
_.reset_0 = function reset_0(){
  $reset(this);
}
;
_.setCurrent = function setCurrent(x_0, c){
  $setCurrent(this, c);
}
;
_.setEditValue = function setEditValue(n, ei){
}
;
_.setMouseElm = function setMouseElm(v){
  this.iAmMouseElm = v;
}
;
_.setNode = function setNode(p, n){
  this.nodes[p] = n;
}
;
_.setNodeVoltage = function setNodeVoltage(n, c){
  this.volts[n] = c;
  this.calculateCurrent();
}
;
_.setPoints = function setPoints(){
  $setPoints(this);
}
;
_.setVoltageSource = function setVoltageSource(n, v){
  this.voltSource = v;
}
;
_.stamp = function stamp(){
}
;
_.startIteration = function startIteration(){
}
;
_.stepFinished = function stepFinished(){
}
;
_.updateModels = function updateModels(){
}
;
_.curcount_0 = 0;
_.current_0 = 0;
_.dn = 0;
_.dpx1 = 0;
_.dpy1 = 0;
_.dsign = 0;
_.dx = 0;
_.dy = 0;
_.flags = 0;
_.iAmMouseElm = false;
_.lastHandleGrabbed = -1;
_.noDiagonal = false;
_.numHandles = 2;
_.selected = false;
_.voltSource = 0;
_.x_0 = 0;
_.x2 = 0;
_.y_0 = 0;
_.y2 = 0;
var colorScale, colorScaleCount = 32, currentMult = 0, lightGrayColor, powerMult = 0, ps1, ps2, selectColor, shortFormat, showFormat, sim_0, unitsFont, voltageRange = 5, whiteColor;
var Lcom_lushprojects_circuitjs1_client_CircuitElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CircuitElm', 4);
function $drawWaveform(this$static, g, center){
  var i, s, xc, xc2, yc, yy;
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:($clinit_Color() , gray));
  $setPowerColor_0(this$static, g);
  xc = center.x_0;
  yc = center.y_0;
  drawThickCircle(g, xc, yc, 17);
  $adjustBbox(this$static, xc - 17, yc - 17, xc + 17, yc + 17);
  switch (this$static.waveform) {
    case 2:
      xc2 = round_int(16 * this$static.dutyCycle - 8 + xc);
      xc2 = xc - 8 + 3 > (xc + 8 - 3 < xc2?xc + 8 - 3:xc2)?xc - 8 + 3:xc + 8 - 3 < xc2?xc + 8 - 3:xc2;
      drawThickLine(g, xc - 8, yc - 8, xc - 8, yc);
      drawThickLine(g, xc - 8, yc - 8, xc2, yc - 8);
      drawThickLine(g, xc2, yc - 8, xc2, yc + 8);
      drawThickLine(g, xc + 8, yc + 8, xc2, yc + 8);
      drawThickLine(g, xc + 8, yc, xc + 8, yc + 8);
      break;
    case 5:
      yc += 4;
      drawThickLine(g, xc - 8, yc - 8, xc - 8, yc);
      drawThickLine(g, xc - 8, yc - 8, xc - 4, yc - 8);
      drawThickLine(g, xc - 4, yc - 8, xc - 4, yc);
      drawThickLine(g, xc - 4, yc, xc + 8, yc);
      break;
    case 4:
      drawThickLine(g, xc, yc - 8, xc - 8, yc);
      drawThickLine(g, xc, yc - 8, xc, yc + 8);
      drawThickLine(g, xc, yc + 8, xc + 8, yc);
      break;
    case 3:
      {
        drawThickLine(g, xc - 10, yc, xc - 5, yc - 8);
        drawThickLine(g, xc - 5, yc - 8, xc, yc);
        drawThickLine(g, xc, yc, xc + 5, yc + 8);
        drawThickLine(g, xc + 5, yc + 8, xc + 10, yc);
        break;
      }

    case 1:
      {
        g.context.beginPath();
        g.context.lineWidth = 3;
        for (i = -10; i <= 10; i++) {
          yy = yc + round_int(0.95 * $wnd.Math.sin(i * $intern_1 / 10) * 8);
          i == -10?$moveTo(g.context, xc + -10, yy):$lineTo(g.context, xc + i, yy);
        }
        g.context.stroke();
        g.context.lineWidth = 1;
        break;
      }

  }
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this$static.frequency, 'Hz', true);
    (this$static.dx == 0 || this$static.dy == 0) && $drawValues(this$static, g, s, 17);
  }
}

function $getEditInfo(this$static, n){
  var ei;
  if (n == 0)
    return new EditInfo(this$static.waveform == 0?'Voltage':'Max Voltage', this$static.maxVoltage, -20, 20);
  if (n == 1) {
    ei = new EditInfo('Waveform', this$static.waveform, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, 'D/C');
    $add_6(ei.choice, 'A/C');
    $add_6(ei.choice, 'Square Wave');
    $add_6(ei.choice, 'Triangle');
    $add_6(ei.choice, 'Sawtooth');
    $add_6(ei.choice, 'Pulse');
    $select(ei.choice, this$static.waveform);
    return ei;
  }
  if (this$static.waveform == 0)
    return null;
  if (n == 2)
    return new EditInfo('Frequency (Hz)', this$static.frequency, 4, 500);
  if (n == 3)
    return new EditInfo('DC Offset (V)', this$static.bias, -20, 20);
  if (n == 4)
    return $setDimensionless(new EditInfo('Phase Offset (degrees)', this$static.phaseShift * 180 / $intern_1, -180, 180));
  if (n == 5 && (this$static.waveform == 5 || this$static.waveform == 2))
    return $setDimensionless(new EditInfo('Duty Cycle', this$static.dutyCycle * 100, 0, 100));
  return null;
}

function $triangleFunc(x_0){
  if (x_0 < $intern_1)
    return x_0 * $intern_67 - 1;
  return 1 - (x_0 - $intern_1) * $intern_67;
}

function VoltageElm(xx, yy, wf){
  CircuitElm.call(this, xx, yy);
  this.waveform = wf;
  this.maxVoltage = 5;
  this.frequency = 40;
  this.dutyCycle = 0.5;
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

function VoltageElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.maxVoltage = 5;
  this.frequency = 40;
  this.waveform = 0;
  this.dutyCycle = 0.5;
  try {
    this.waveform = (new Integer_0($nextToken(st))).value_0;
    this.frequency = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.maxVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.bias = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.phaseShift = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.dutyCycle = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  if ((this.flags & 2) != 0) {
    this.flags &= -3;
    this.phaseShift = 1.5707963267948966;
  }
  (this.flags & 4) == 0 && this.waveform == 5 && (this.dutyCycle = $intern_68);
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

defineClass(41, 4, $intern_69, VoltageElm_0);
_.doStep = function doStep_0(){
  this.waveform != 0 && $updateVoltageSource(sim_0, this.voltSource, this.getVoltage());
}
;
_.draw = function draw_0(g){
  var inds, plusPoint, w;
  $setBbox(this, this.x_0, this.y_0, this.x2, this.y2);
  $draw2Leads(this, g);
  if (this.waveform == 0) {
    $setPowerColor_0(this, g);
    $setVoltageColor(this, g, this.volts[0]);
    $interpPoint2(this.lead1, this.lead2, ps1, ps2, 0, 10);
    drawThickLine_0(g, ps1, ps2);
    $setVoltageColor(this, g, this.volts[1]);
    $setBbox_0(this, this.point1, this.point2, 16);
    $interpPoint2(this.lead1, this.lead2, ps1, ps2, 1, 16);
    drawThickLine_0(g, ps1, ps2);
  }
   else {
    $setBbox_0(this, this.point1, this.point2, 17);
    $interpPoint_1(this.lead1, this.lead2, ps1, 0.5);
    $drawWaveform(this, g, ps1);
    this.bias > 0 || this.bias == 0 && this.waveform == 5?(inds = '+'):(inds = '*');
    $setColor(g, ($clinit_Color() , white));
    $setFont_0(g, unitsFont);
    plusPoint = $interpPoint_0(this.point1, this.point2, (this.dn / 2 + 17 + 4) / this.dn, 10 * this.dsign);
    plusPoint.y_0 += 4;
    w = round_int($measureText(g.context, inds).width);
    $drawString(g, inds, plusPoint.x_0 - (w / 2 | 0), plusPoint.y_0);
  }
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  if (sim_0.dragElm != this) {
    if (this.waveform == 0)
      $drawDots(g, this.point1, this.point2, this.curcount_0);
    else {
      $drawDots(g, this.point1, this.lead1, this.curcount_0);
      $drawDots(g, this.point2, this.lead2, -this.curcount_0);
    }
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_5(){
  var t;
  return this.waveform == 5?(this.flags |= 4):(this.flags &= -5) , t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.waveform + ' ' + this.frequency + ' ' + this.maxVoltage + ' ' + this.bias + ' ' + this.phaseShift + ' ' + this.dutyCycle;
}
;
_.getDumpType = function getDumpType_0(){
  return 118;
}
;
_.getEditInfo = function getEditInfo_0(n){
  return $getEditInfo(this, n);
}
;
_.getInfo = function getInfo_0(arr){
  var i;
  switch (this.waveform) {
    case 0:
    case 6:
      arr[0] = 'voltage source';
      break;
    case 1:
      arr[0] = 'A/C source';
      break;
    case 2:
      arr[0] = 'square wave gen';
      break;
    case 5:
      arr[0] = 'pulse gen';
      break;
    case 4:
      arr[0] = 'sawtooth gen';
      break;
    case 3:
      arr[0] = 'triangle gen';
  }
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
  arr[2] = (instanceOf(this, 38)?'V = ':'Vd = ') + myGetUnitText(this.getVoltageDiff(), 'V', false);
  if (this.waveform != 0 && this.waveform != 6) {
    arr[3] = 'f = ' + myGetUnitText(this.frequency, 'Hz', false);
    arr[4] = 'Vmax = ' + myGetUnitText(this.maxVoltage, 'V', false);
    i = 5;
    this.waveform == 1 && this.bias == 0 && (arr[i++] = 'V(rms) = ' + myGetUnitText(this.maxVoltage / 1.41421356, 'V', false));
    this.bias != 0?(arr[i++] = 'Voff = ' + myGetUnitText(this.bias, 'V', false)):this.frequency > 500 && (arr[i++] = 'wavelength = ' + myGetUnitText(299790000 / this.frequency, 'm', false));
    arr[i++] = 'P = ' + myGetUnitText(-this.getVoltageDiff() * this.current_0, 'W', false);
  }
  this.waveform == 0 && this.current_0 != 0 && sim_0.showResistanceInVoltageSources && (arr[3] = '(R = ' + myGetUnitText(this.maxVoltage / this.current_0, ohmString, false) + ')');
}
;
_.getPower = function getPower_0(){
  return -this.getVoltageDiff() * this.current_0;
}
;
_.getVoltage = function getVoltage(){
  var w;
  w = $intern_2 * (sim_0.t - this.freqTimeZero) * this.frequency + this.phaseShift;
  switch (this.waveform) {
    case 0:
      return this.maxVoltage + this.bias;
    case 1:
      return $wnd.Math.sin(w) * this.maxVoltage + this.bias;
    case 2:
      return this.bias + (w % $intern_2 > $intern_2 * this.dutyCycle?-this.maxVoltage:this.maxVoltage);
    case 3:
      return this.bias + $triangleFunc(w % $intern_2) * this.maxVoltage;
    case 4:
      return this.bias + w % $intern_2 * (this.maxVoltage / $intern_1) - this.maxVoltage;
    case 5:
      return w % $intern_2 < $intern_2 * this.dutyCycle?this.maxVoltage + this.bias:this.bias;
    default:return 0;
  }
}
;
_.getVoltageDiff = function getVoltageDiff_0(){
  return this.volts[1] - this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_0(){
  return 1;
}
;
_.reset_0 = function reset_1(){
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_0(n, ei){
  var maxfreq, oldfreq, ow;
  n == 0 && (this.maxVoltage = ei.value_0);
  n == 3 && (this.bias = ei.value_0);
  if (n == 2) {
    oldfreq = this.frequency;
    this.frequency = ei.value_0;
    maxfreq = 1 / (8 * sim_0.timeStep);
    this.frequency > maxfreq && ($wnd.confirm('Adjust timestep to allow for higher frequencies?')?(sim_0.timeStep = 1 / (32 * this.frequency)):(this.frequency = maxfreq));
    this.freqTimeZero = sim_0.t - oldfreq * (sim_0.t - this.freqTimeZero) / this.frequency;
  }
  if (n == 1) {
    ow = this.waveform;
    this.waveform = $getElement(ei.choice).selectedIndex;
    if (this.waveform == 0 && ow != 0) {
      ei.newDialog = true;
      this.bias = 0;
    }
     else 
      this.waveform != ow && (ei.newDialog = true);
    this.waveform == 5 && ow != 5?(this.dutyCycle = $intern_68):ow == 5 && this.waveform != 5 && (this.dutyCycle = 0.5);
    this.setPoints();
  }
  n == 4 && (this.phaseShift = ei.value_0 * $intern_1 / 180);
  n == 5 && (this.dutyCycle = ei.value_0 * $intern_29);
}
;
_.setPoints = function setPoints_0(){
  $setPoints(this);
  $calcLeads(this, this.waveform == 0 || this.waveform == 6?8:34);
}
;
_.stamp = function stamp_0(){
  this.waveform == 0?$stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[1], this.voltSource, this.getVoltage()):$stampVoltageSource(sim_0, this.nodes[0], this.nodes[1], this.voltSource);
}
;
_.bias = 0;
_.dutyCycle = 0;
_.freqTimeZero = 0;
_.frequency = 0;
_.maxVoltage = 0;
_.phaseShift = 0;
_.waveform = 0;
var Lcom_lushprojects_circuitjs1_client_VoltageElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VoltageElm', 41);
function $drawRailText(this$static, g, s){
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:whiteColor);
  $setPowerColor_0(this$static, g);
  $drawCenteredText(this$static, g, s, this$static.x2, this$static.y2, true);
}

function RailElm(xx, yy){
  VoltageElm.call(this, xx, yy, 0);
  this.numHandles = 1;
}

function RailElm_0(xx, yy, wf){
  VoltageElm.call(this, xx, yy, wf);
  this.numHandles = 1;
}

function RailElm_1(xa, ya, xb, yb, f, st){
  VoltageElm_0.call(this, xa, ya, xb, yb, f, st);
  this.numHandles = 1;
}

defineClass(38, 41, $intern_70, RailElm, RailElm_1);
_.doStep = function doStep_1(){
  this.waveform != 0 && $updateVoltageSource(sim_0, this.voltSource, this.getVoltage());
}
;
_.draw = function draw_1(g){
  $setBbox_0(this, this.point1, this.point2, 17);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  this.drawRail(g);
  $drawPosts(this, g);
  this.curcount_0 = $updateDotCount(-this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.lead1, this.curcount_0);
}
;
_.drawRail = function drawRail(g){
  var s, v;
  if (this.waveform == 2 && (this.flags & 1) != 0)
    $drawRailText(this, g, 'CLK');
  else if (this.waveform == 0 || this.waveform == 6) {
    $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:whiteColor);
    $setPowerColor_0(this, g);
    v = this.getVoltage();
    $wnd.Math.abs(v) < 1?(s = $format_0(showFormat, v) + ' V'):(s = myGetUnitText(v, 'V', true));
    this.getVoltage() > 0 && (s = '+' + s);
    $drawCenteredText(this, g, s, this.x2, this.y2, true);
  }
   else {
    $drawWaveform(this, g, this.point2);
  }
}
;
_.getDumpType = function getDumpType_1(){
  return 82;
}
;
_.getPostCount = function getPostCount_0(){
  return 1;
}
;
_.getShortcut = function getShortcut_0(){
  return 86;
}
;
_.getVoltageDiff = function getVoltageDiff_1(){
  return this.volts[0];
}
;
_.hasGroundConnection = function hasGroundConnection_0(n1){
  return true;
}
;
_.setPoints = function setPoints_1(){
  $setPoints(this);
  $calcLeads(this, this.waveform == 0 || this.waveform == 6?8:34);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 17 / this.dn);
}
;
_.stamp = function stamp_1(){
  this.waveform == 0?$stampVoltageSource_0(sim_0, 0, this.nodes[0], this.voltSource, this.getVoltage()):$stampVoltageSource(sim_0, 0, this.nodes[0], this.voltSource);
}
;
var Lcom_lushprojects_circuitjs1_client_RailElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'RailElm', 38);
function ACRailElm(xx, yy){
  RailElm_0.call(this, xx, yy, 1);
}

defineClass(486, 38, $intern_70, ACRailElm);
_.getShortcut = function getShortcut_1(){
  return 0;
}
;
var Lcom_lushprojects_circuitjs1_client_ACRailElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ACRailElm', 486);
function ACVoltageElm(xx, yy){
  VoltageElm.call(this, xx, yy, 1);
}

defineClass(485, 41, $intern_69, ACVoltageElm);
var Lcom_lushprojects_circuitjs1_client_ACVoltageElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ACVoltageElm', 485);
function $drawChip(this$static, g){
  var a, asc, b, f, i, oldfont, p, sw, ya;
  oldfont = g.currentFont;
  f = new Font('SansSerif', 0, 10 * this$static.csize);
  $setFont_0(g, f);
  for (i = 0; i != this$static.getPostCount(); i++) {
    p = this$static.pins[i];
    $setVoltageColor(this$static, g, this$static.volts[i]);
    a = p.post;
    b = p.stub;
    drawThickLine_0(g, a, b);
    p.curcount = $updateDotCount(p.current, p.curcount);
    $drawDots(g, b, a, p.curcount);
    if (p.bubble) {
      $setColor(g, sim_0.printableCheckItem.on?($clinit_Color() , white):($clinit_Color() , black));
      drawThickCircle(g, p.bubbleX, p.bubbleY, 1);
      $setColor(g, lightGrayColor);
      drawThickCircle(g, p.bubbleX, p.bubbleY, 3);
    }
    $setColor(g, whiteColor);
    sw = round_int($measureText(g.context, p.text_0).width);
    asc = g.currentFontSize;
    $drawString(g, p.text_0, p.textloc.x_0 - (sw / 2 | 0), p.textloc.y_0 + (asc / 2 | 0));
    if (p.lineOver) {
      ya = p.textloc.y_0 - (asc / 2 | 0);
      $drawLine(g, p.textloc.x_0 - (sw / 2 | 0), ya, p.textloc.x_0 + (sw / 2 | 0), ya);
    }
  }
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:lightGrayColor);
  drawThickPolygon_0(g, this$static.rectPointsX, this$static.rectPointsY, 4);
  this$static.clockPointsX != null && $drawPolyline(g, this$static.clockPointsX, this$static.clockPointsY, 3);
  $drawPosts(this$static, g);
  $setFont_0(g, oldfont);
}

function $dump(this$static){
  var i, s, t;
  s = (t = this$static.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this$static.x_0 + ' ' + this$static.y_0 + ' ' + this$static.x2 + ' ' + this$static.y2 + ' ' + this$static.flags);
  this$static.needsBits() && (s += ' ' + this$static.bits);
  for (i = 0; i != this$static.getPostCount(); i++) {
    this$static.pins[i].state && (s += ' ' + this$static.volts[i]);
  }
  return s;
}

function $getEditInfo_0(this$static, n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Flip X', (this$static.flags & $intern_21) != 0);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Flip Y', (this$static.flags & $intern_32) != 0);
    return ei;
  }
  return null;
}

function $getInfo(this$static, arr){
  var a, i, p, t;
  arr[0] = this$static.getChipName();
  a = 1;
  for (i = 0; i != this$static.getPostCount(); i++) {
    p = this$static.pins[i];
    arr[a] != null?(arr[a] += '; '):(arr[a] = '');
    t = p.text_0;
    p.lineOver && (t += "'");
    p.clock && (t = 'Clk');
    arr[a] += t + ' = ' + myGetUnitText(this$static.volts[i], 'V', false);
    i % 2 == 1 && ++a;
  }
}

function $reset_0(this$static){
  var i;
  for (i = 0; i != this$static.getPostCount(); i++) {
    this$static.pins[i].value_0 = false;
    this$static.pins[i].curcount = 0;
    this$static.volts[i] = 0;
  }
  this$static.lastClock = false;
}

function $setEditValue(this$static, n, ei){
  if (n == 0) {
    $getState(ei.checkbox)?(this$static.flags |= $intern_21):(this$static.flags &= -1025);
    $setPoints_0(this$static);
  }
  if (n == 1) {
    $getState(ei.checkbox)?(this$static.flags |= $intern_32):(this$static.flags &= -2049);
    $setPoints_0(this$static);
  }
}

function $setPoints_0(this$static){
  var i, p, x0, xr, xs, y0, yr, ys;
  this$static.clockPointsX = null;
  this$static.x2 - this$static.x_0 > this$static.sizeX * this$static.cspc2 && this$static == sim_0.dragElm && $setSize(this$static, 2);
  x0 = this$static.x_0 + this$static.cspc2;
  y0 = this$static.y_0;
  xr = x0 - this$static.cspc;
  yr = y0 - this$static.cspc;
  xs = this$static.sizeX * this$static.cspc2;
  ys = this$static.sizeY * this$static.cspc2;
  this$static.rectPointsX = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [xr, xr + xs, xr + xs, xr]);
  this$static.rectPointsY = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [yr, yr, yr + ys, yr + ys]);
  $setBbox(this$static, xr, yr, this$static.rectPointsX[2], this$static.rectPointsY[2]);
  for (i = 0; i != this$static.getPostCount(); i++) {
    p = this$static.pins[i];
    switch (p.side) {
      case 0:
        $setPoint(p, x0, y0, 1, 0, 0, -1, 0, 0);
        break;
      case 1:
        $setPoint(p, x0, y0, 1, 0, 0, 1, 0, ys - this$static.cspc2);
        break;
      case 2:
        $setPoint(p, x0, y0, 0, 1, -1, 0, 0, 0);
        break;
      case 3:
        $setPoint(p, x0, y0, 0, 1, 1, 0, xs - this$static.cspc2, 0);
    }
  }
}

function $setSize(this$static, s){
  this$static.csize = s;
  this$static.cspc = 8 * s;
  this$static.cspc2 = this$static.cspc * 2;
  this$static.flags &= -2;
  this$static.flags |= s == 1?1:0;
}

function ChipElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.needsBits() && (this.bits = instanceOf(this, 194)?10:4);
  this.noDiagonal = true;
  this.setupPins();
  $setSize(this, sim_0.smallGridCheckItem.on?1:2);
}

function ChipElm_0(xa, ya, xb, yb, f, st){
  var i;
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.needsBits() && (this.bits = (new Integer_0($nextToken(st))).value_0);
  this.noDiagonal = true;
  this.setupPins();
  $setSize(this, (f & 1) != 0?1:2);
  for (i = 0; i != this.getPostCount(); i++) {
    if (this.pins == null)
      this.volts[i] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    else if (this.pins[i].state) {
      this.volts[i] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
      this.pins[i].value_0 = this.volts[i] > 2.5;
    }
  }
}

function log_0(msg){
  console.log(msg);
}

defineClass(13, 4, $intern_66);
_.doStep = function doStep_2(){
  var i, p;
  for (i = 0; i != this.getPostCount(); i++) {
    p = this.pins[i];
    p.output || (p.value_0 = this.volts[i] > 2.5);
  }
  this.execute_2();
  for (i = 0; i != this.getPostCount(); i++) {
    p = this.pins[i];
    p.output && $updateVoltageSource(sim_0, p.voltSource, p.value_0?5:0);
  }
}
;
_.drag = function drag_0(xx, yy){
  yy = $snapGrid(sim_0, yy);
  if (xx < this.x_0)
  ;
  else {
    this.y_0 = this.y2 = yy;
    this.x2 = $snapGrid(sim_0, xx);
  }
  $setPoints_0(this);
}
;
_.draw = function draw_2(g){
  $drawChip(this, g);
}
;
_.dump_0 = function dump_6(){
  return $dump(this);
}
;
_.execute_2 = function execute_9(){
}
;
_.getChipName = function getChipName(){
  return 'chip';
}
;
_.getConnection = function getConnection_0(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_0(xa, ya){
  var i;
  for (i = 0; i != this.getPostCount(); i++)
    if (this.pins[i].post.x_0 == xa && this.pins[i].post.y_0 == ya)
      return this.pins[i].current;
  return 0;
}
;
_.getEditInfo = function getEditInfo_1(n){
  return $getEditInfo_0(this, n);
}
;
_.getInfo = function getInfo_1(arr){
  $getInfo(this, arr);
}
;
_.getPost = function getPost_0(n){
  return this.pins[n].post;
}
;
_.hasGroundConnection = function hasGroundConnection_1(n1){
  return this.pins[n1].output;
}
;
_.needsBits = function needsBits(){
  return false;
}
;
_.reset_0 = function reset_2(){
  $reset_0(this);
}
;
_.setCurrent = function setCurrent_0(x_0, c){
  var i;
  for (i = 0; i != this.getPostCount(); i++)
    this.pins[i].output && this.pins[i].voltSource == x_0 && (this.pins[i].current = c);
}
;
_.setEditValue = function setEditValue_1(n, ei){
  $setEditValue(this, n, ei);
}
;
_.setPoints = function setPoints_2(){
  $setPoints_0(this);
}
;
_.setVoltageSource = function setVoltageSource_0(j, vs){
  var i, p;
  for (i = 0; i != this.getPostCount(); i++) {
    p = this.pins[i];
    if (p.output && j-- == 0) {
      p.voltSource = vs;
      return;
    }
  }
  $clinit_System();
}
;
_.stamp = function stamp_2(){
  var i, p;
  for (i = 0; i != this.getPostCount(); i++) {
    p = this.pins[i];
    p.output && $stampVoltageSource(sim_0, 0, this.nodes[i], p.voltSource);
  }
}
;
_.bits = 0;
_.csize = 0;
_.cspc = 0;
_.cspc2 = 0;
_.lastClock = false;
_.sizeX = 0;
_.sizeY = 0;
var Lcom_lushprojects_circuitjs1_client_ChipElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ChipElm', 13);
function ADCElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function ADCElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(298, 13, $intern_66, ADCElm, ADCElm_0);
_.execute_2 = function execute_10(){
  var i, imax, ival, val;
  imax = (1 << this.bits) - 1;
  val = imax * this.volts[this.bits] / this.volts[this.bits + 1];
  ival = round_int(val);
  ival = imax < (0 > ival?0:ival)?imax:0 > ival?0:ival;
  for (i = 0; i != this.bits; i++)
    this.pins[i].value_0 = (ival & 1 << i) != 0;
}
;
_.getChipName = function getChipName_0(){
  return 'ADC';
}
;
_.getDumpType = function getDumpType_2(){
  return 167;
}
;
_.getPostCount = function getPostCount_1(){
  return this.bits + 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_1(){
  return this.bits;
}
;
_.needsBits = function needsBits_0(){
  return true;
}
;
_.setupPins = function setupPins(){
  var i;
  this.sizeX = 2;
  this.sizeY = this.bits > 2?this.bits:2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.bits + 2, 0, 1);
  for (i = 0; i != this.bits; i++) {
    this.pins[i] = new ChipElm$Pin(this, this.bits - 1 - i, 3, 'D' + i);
    this.pins[i].output = true;
  }
  this.pins[this.bits] = new ChipElm$Pin(this, 0, 2, 'In');
  this.pins[this.bits + 1] = new ChipElm$Pin(this, this.sizeY - 1, 2, 'V+');
  $allocNodes(this);
}
;
var Lcom_lushprojects_circuitjs1_client_ADCElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ADCElm', 298);
function $drawWaveform_0(this$static, g, center){
  var xc, yc;
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:($clinit_Color() , gray));
  $setPowerColor_0(this$static, g);
  xc = center.x_0;
  yc = center.y_0;
  drawThickCircle(g, xc, yc, 17);
  $adjustBbox(this$static, xc - 17, yc - 17, xc + 17, yc + 17);
}

function AMElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.maxVoltage = 5;
  this.carrierfreq = $intern_20;
  this.signalfreq = 40;
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

function AMElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.carrierfreq = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.signalfreq = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.maxVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  (this.flags & 2) != 0 && (this.flags &= -3);
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

defineClass(271, 4, $intern_66, AMElm, AMElm_0);
_.doStep = function doStep_3(){
  var w;
  $updateVoltageSource(sim_0, this.voltSource, (w = $intern_2 * (sim_0.t - this.freqTimeZero) , ($wnd.Math.sin(w * this.signalfreq) + 1) / 2 * $wnd.Math.sin(w * this.carrierfreq) * this.maxVoltage));
}
;
_.draw = function draw_3(g){
  var f, w;
  $setBbox_0(this, this.point1, this.point2, 17);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  f = new Font('SansSerif', 0, 12);
  $setFont_0(g, f);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:whiteColor);
  $setPowerColor_0(this, g);
  w = $intern_2 * (sim_0.t - this.freqTimeZero);
  ($wnd.Math.sin(w * this.signalfreq) + 1) / 2 * $wnd.Math.sin(w * this.carrierfreq) * this.maxVoltage;
  $drawCenteredText(this, g, 'AM', this.x2, this.y2, true);
  $drawWaveform_0(this, g, this.point2);
  $drawPosts(this, g);
  this.curcount_0 = $updateDotCount(-this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.lead1, this.curcount_0);
}
;
_.dump_0 = function dump_7(){
  return '200 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.carrierfreq + ' ' + this.signalfreq + ' ' + this.maxVoltage;
}
;
_.getDumpType = function getDumpType_3(){
  return 200;
}
;
_.getEditInfo = function getEditInfo_2(n){
  if (n == 0)
    return new EditInfo('Max Voltage', this.maxVoltage, -20, 20);
  if (n == 1)
    return new EditInfo('Carrier Frequency (Hz)', this.carrierfreq, 4, 500);
  if (n == 2)
    return new EditInfo('Signal Frequency (Hz)', this.signalfreq, 4, 500);
  return null;
}
;
_.getInfo = function getInfo_2(arr){
  arr[0] = 'AM Source';
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[3] = 'cf = ' + myGetUnitText(this.carrierfreq, 'Hz', false);
  arr[4] = 'sf = ' + myGetUnitText(this.signalfreq, 'Hz', false);
  arr[5] = 'Vmax = ' + myGetUnitText(this.maxVoltage, 'V', false);
}
;
_.getPostCount = function getPostCount_2(){
  return 1;
}
;
_.getPower = function getPower_1(){
  return -this.volts[0] * this.current_0;
}
;
_.getVoltageDiff = function getVoltageDiff_2(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_2(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_2(n1){
  return true;
}
;
_.reset_0 = function reset_3(){
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_2(n, ei){
  n == 0 && (this.maxVoltage = ei.value_0);
  n == 1 && (this.carrierfreq = ei.value_0);
  n == 2 && (this.signalfreq = ei.value_0);
}
;
_.setPoints = function setPoints_3(){
  $setPoints(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 17 / this.dn);
}
;
_.stamp = function stamp_3(){
  $stampVoltageSource(sim_0, 0, this.nodes[0], this.voltSource);
}
;
_.carrierfreq = 0;
_.freqTimeZero = 0;
_.maxVoltage = 0;
_.signalfreq = 0;
var Lcom_lushprojects_circuitjs1_client_AMElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AMElm', 271);
function AboutBox(){
  PopupPanel.call(this);
  this.vp = new VerticalPanel;
  $setWidget_0(this, this.vp);
  $setWidth(this.vp, '500px');
  $add_4(this.vp, new HTML_0('<p>Circuit Simulator version 2.1.11js (isharp).<\/p><p>Original by Paul Falstad.<br><a href="http://www.falstad.com/" target="_blank">http://www.falstad.com/<\/a><\/p><p>JavaScript conversion by Iain Sharp.<br><a href="http://lushprojects.com/" target="_blank">http://lushprojects.com/<\/a><\/p><p>Translation into Brazilian Portuguese, re-organization of menus and creation of new elements (LogicInput with legend, memory chips and ULA) by Wancharle S Quirino.<br><a href="http://wancharle.com.br/" target="_blank">http://wancharle.com.br/<\/a><\/p><p>Thanks to: Edward Calver for 15 new components and other improvements; Rodrigo Hausen for file import/export and many other UI improvements; J. Mike Rollins for the Zener diode code; Julius Schmidt for the spark gap code and some examples; Dustin Soodak for help with the user interface improvements; Jacob Calvert for the T Flip Flop; Ben Hayden for scope spectrum; Thomas Reitinger for the German translation; Andre Adrian for improved emitter coupled oscillator; Felthry for many examples; Colin Howell for code improvements.<\/p><p style="font-size:9px">This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.<\/p><p style="font-size:9px">This program is distributed in the hope that it will be useful,but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.<\/p><p style="font-size:9px">For details of licensing see <A href="http://www.gnu.org/licenses/" target="_blank">http://www.gnu.org/licenses/<\/A>.<\/p><p style="font-size:9px">Source code (Paul):<A href="https://github.com/pfalstad/circuitjs1" target="_blank">https://github.com/pfalstad/circuitjs1<\/A><\/p><p style="font-size:9px">Source code (Iain):<A href="https://github.com/sharpie7/circuitjs1" target="_blank">https://github.com/sharpie7/circuitjs1<\/A><\/p><p style="font-size:9px">Source code (Wancharle):<A href="https://github.com/wancharle/circuitjs1" target="_blank">https://github.com/wancharle/circuitjs1<\/A><\/p>'));
  $add_4(this.vp, this.okButton = new Button_0('OK'));
  $addDomHandler(this.okButton, new AboutBox$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $center(this);
  $show(this);
}

defineClass(583, 44, $intern_44, AboutBox);
var Lcom_lushprojects_circuitjs1_client_AboutBox_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AboutBox', 583);
function AboutBox$1(this$0){
  this.this$01 = this$0;
}

defineClass(584, 1, $intern_43, AboutBox$1);
_.onClick = function onClick_0(event_0){
  $hide(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_AboutBox$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AboutBox/1', 584);
function $$init_1(this$static){
  this$static.zerocount = 0;
  this$static.rmsI = 0;
  this$static.maxI = 0;
  this$static.minI = 0;
  this$static.selectedValue = 0;
  this$static.increasingI = true;
  this$static.decreasingI = true;
}

function AmmeterElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $$init_1(this);
  this.flags = 1;
}

function AmmeterElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_1(this);
  this.meter = (new Integer_0($nextToken(st))).value_0;
}

defineClass(310, 4, $intern_66, AmmeterElm, AmmeterElm_0);
_.draw = function draw_4(g){
  var s;
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.point2);
  $fillPolygon(g, this.arrowPoly);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $setBbox_0(this, this.point1, this.point2, 3);
  s = 'A';
  switch (this.meter) {
    case 0:
      s = myGetUnitText(this.current_0, 'A', false);
      break;
    case 1:
      s = myGetUnitText(this.rmsI, 'A(rms)', false);
  }
  $drawValues(this, g, s, 4);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_8(){
  return '370 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.meter;
}
;
_.getDumpType = function getDumpType_4(){
  return 370;
}
;
_.getEditInfo = function getEditInfo_3(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('Value', this.selectedValue, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, 'Current');
    $add_6(ei.choice, 'RMS Current');
    $select(ei.choice, this.meter);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_3(arr){
  arr[0] = 'Ammeter';
  switch (this.meter) {
    case 0:
      arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
      break;
    case 1:
      arr[1] = 'Irms = ' + myGetUnitText(this.rmsI, 'A', false);
  }
}
;
_.getPower = function getPower_2(){
  return 0;
}
;
_.getVoltageDiff = function getVoltageDiff_3(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_3(){
  return 1;
}
;
_.isWire = function isWire_0(){
  return true;
}
;
_.setEditValue = function setEditValue_3(n, ei){
  n == 0 && (this.meter = $getElement(ei.choice).selectedIndex);
}
;
_.setPoints = function setPoints_4(){
  $setPoints(this);
  this.mid = $interpPoint(this.point1, this.point2, 0.6);
  this.arrowPoly = $calcArrow(this.point1, this.mid, 14, 7);
}
;
_.stamp = function stamp_4(){
  $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[1], this.voltSource, 0);
}
;
_.stepFinished = function stepFinished_0(){
  ++this.count;
  this.total += this.current_0 * this.current_0;
  if (this.current_0 > this.maxI && this.increasingI) {
    this.maxI = this.current_0;
    this.increasingI = true;
    this.decreasingI = false;
  }
  if (this.current_0 < this.maxI && this.increasingI) {
    this.minI = this.current_0;
    this.increasingI = false;
    this.decreasingI = true;
    this.total = this.total / this.count;
    this.rmsI = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsI) && (this.rmsI = 0);
    this.count = 0;
    this.total = 0;
  }
  if (this.current_0 < this.minI && this.decreasingI) {
    this.minI = this.current_0;
    this.increasingI = false;
    this.decreasingI = true;
  }
  if (this.current_0 > this.minI && this.decreasingI) {
    this.maxI = this.current_0;
    this.increasingI = true;
    this.decreasingI = false;
    this.total = this.total / this.count;
    this.rmsI = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsI) && (this.rmsI = 0);
    this.count = 0;
    this.total = 0;
  }
  if (this.current_0 == 0) {
    ++this.zerocount;
    if (this.zerocount > 5) {
      this.total = 0;
      this.rmsI = 0;
      this.maxI = 0;
      this.minI = 0;
    }
  }
   else {
    this.zerocount = 0;
  }
  switch (this.meter) {
    case 0:
      this.selectedValue = this.current_0;
      break;
    case 1:
      this.selectedValue = this.rmsI;
  }
}
;
_.count = 0;
_.decreasingI = false;
_.increasingI = false;
_.maxI = 0;
_.meter = 0;
_.minI = 0;
_.rmsI = 0;
_.selectedValue = 0;
_.total = 0;
_.zerocount = 0;
var Lcom_lushprojects_circuitjs1_client_AmmeterElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AmmeterElm', 310);
function $setPoints_1(this$static){
  $setPoints(this$static);
  $calcLeads(this$static, 32);
  this$static.ps = new Point;
  this$static.point3 = $interpPoint_0(this$static.point1, this$static.point2, 0.5, -16);
  this$static.lead3 = $interpPoint_0(this$static.point1, this$static.point2, 0.5, -8);
}

function AnalogSwitchElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.r_on = 20;
  this.r_off = $intern_71;
}

function AnalogSwitchElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.r_on = 20;
  this.r_off = $intern_71;
  try {
    this.r_on = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.r_off = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
}

defineClass(190, 4, $intern_66, AnalogSwitchElm, AnalogSwitchElm_0);
_.calculateCurrent = function calculateCurrent_0(){
  this.current_0 = (this.volts[0] - this.volts[1]) / this.resistance;
}
;
_.doStep = function doStep_4(){
  this.open_0 = this.volts[2] < 2.5;
  (this.flags & 1) != 0 && (this.open_0 = !this.open_0);
  this.resistance = this.open_0?this.r_off:this.r_on;
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.resistance);
}
;
_.drag = function drag_1(xx, yy){
  var q1, q2;
  xx = $snapGrid(sim_0, xx);
  yy = $snapGrid(sim_0, yy);
  abs_0(this.x_0 - xx) < abs_0(this.y_0 - yy)?(xx = this.x_0):(yy = this.y_0);
  q1 = abs_0(this.x_0 - xx) + abs_0(this.y_0 - yy);
  q2 = (q1 / 2 | 0) % sim_0.gridSize;
  if (q2 != 0)
    return;
  this.x2 = xx;
  this.y2 = yy;
  this.setPoints();
}
;
_.draw = function draw_5(g){
  var hs;
  hs = this.open_0?16:0;
  $setBbox_0(this, this.point1, this.point2, 16);
  $draw2Leads(this, g);
  $setColor(g, lightGrayColor);
  $interpPoint_2(this.lead1, this.lead2, this.ps, 1, hs);
  drawThickLine_0(g, this.lead1, this.ps);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.point3, this.lead3);
  this.open_0 || (this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0) , sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0));
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_9(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.r_on + ' ' + this.r_off;
}
;
_.getConnection = function getConnection_1(n1, n2){
  if (n1 == 2 || n2 == 2)
    return false;
  return true;
}
;
_.getCurrentIntoNode = function getCurrentIntoNode_0(n){
  if (n == 2)
    return 0;
  if (n == 0)
    return -this.current_0;
  return this.current_0;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_1(xa, ya){
  if (xa == this.point3.x_0 && ya == this.point3.y_0)
    return 0;
  if (xa == this.x_0 && ya == this.y_0)
    return -this.current_0;
  return this.current_0;
}
;
_.getDumpType = function getDumpType_5(){
  return 159;
}
;
_.getEditInfo = function getEditInfo_4(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Normally closed', (this.flags & 1) != 0);
    return ei;
  }
  if (n == 1)
    return new EditInfo('On Resistance (ohms)', this.r_on, 0, 0);
  if (n == 2)
    return new EditInfo('Off Resistance (ohms)', this.r_off, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_4(arr){
  arr[0] = 'analog switch';
  arr[1] = this.open_0?'open':'closed';
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[4] = 'Vc = ' + myGetUnitText(this.volts[2], 'V', false);
}
;
_.getPost = function getPost_1(n){
  return n == 0?this.point1:n == 1?this.point2:this.point3;
}
;
_.getPostCount = function getPostCount_3(){
  return 3;
}
;
_.nonLinear = function nonLinear_0(){
  return true;
}
;
_.setEditValue = function setEditValue_4(n, ei){
  n == 0 && (this.flags = $getState(ei.checkbox)?this.flags | 1:this.flags & -2);
  n == 1 && ei.value_0 > 0 && (this.r_on = ei.value_0);
  n == 2 && ei.value_0 > 0 && (this.r_off = ei.value_0);
}
;
_.setPoints = function setPoints_5(){
  $setPoints_1(this);
}
;
_.stamp = function stamp_5(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.open_0 = false;
_.r_off = 0;
_.r_on = 0;
_.resistance = 0;
var Lcom_lushprojects_circuitjs1_client_AnalogSwitchElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AnalogSwitchElm', 190);
function AnalogSwitch2Elm(xx, yy){
  AnalogSwitchElm.call(this, xx, yy);
}

function AnalogSwitch2Elm_0(xa, ya, xb, yb, f, st){
  AnalogSwitchElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(274, 190, $intern_66, AnalogSwitch2Elm, AnalogSwitch2Elm_0);
_.calculateCurrent = function calculateCurrent_1(){
  this.open_0?(this.current_0 = (this.volts[0] - this.volts[2]) / this.r_on):(this.current_0 = (this.volts[0] - this.volts[1]) / this.r_on);
}
;
_.doStep = function doStep_5(){
  this.open_0 = this.volts[3] < 2.5;
  (this.flags & 1) != 0 && (this.open_0 = !this.open_0);
  if (this.open_0) {
    $stampResistor(sim_0, this.nodes[0], this.nodes[2], this.r_on);
    $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.r_off);
  }
   else {
    $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.r_on);
    $stampResistor(sim_0, this.nodes[0], this.nodes[2], this.r_off);
  }
}
;
_.draw = function draw_6(g){
  var position;
  $setBbox_0(this, this.point1, this.point2, 16);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.swpoles[0], this.swposts[0]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.swpoles[1], this.swposts[1]);
  $setColor(g, lightGrayColor);
  position = this.open_0?1:0;
  drawThickLine_0(g, this.lead1, this.swpoles[position]);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.point1, this.lead1, this.curcount_0);
  $drawDots(g, this.swpoles[position], this.swposts[position], this.curcount_0);
  $drawPosts(this, g);
}
;
_.getConnection = function getConnection_2(n1, n2){
  if (n1 == 3 || n2 == 3)
    return false;
  return true;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_2(xa, ya){
  var position;
  if (xa == this.x_0 && ya == this.y_0)
    return -this.current_0;
  position = this.open_0?1:0;
  if (xa == this.swposts[position].x_0 && ya == this.swposts[position].y_0)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_6(){
  return 160;
}
;
_.getInfo = function getInfo_5(arr){
  arr[0] = 'analog switch (SPDT)';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
}
;
_.getPost = function getPost_2(n){
  return n == 0?this.point1:n == 3?this.ctlPoint:this.swposts[n - 1];
}
;
_.getPostCount = function getPostCount_4(){
  return 4;
}
;
_.setPoints = function setPoints_6(){
  $setPoints_1(this);
  $calcLeads(this, 32);
  this.swposts = $newPointArray(2);
  this.swpoles = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, this.swpoles[0], this.swpoles[1], 1, 16);
  $interpPoint2(this.point1, this.point2, this.swposts[0], this.swposts[1], 1, 16);
  this.ctlPoint = $interpPoint_0(this.point1, this.point2, 0.5, 16);
}
;
_.stamp = function stamp_6(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
}
;
var Lcom_lushprojects_circuitjs1_client_AnalogSwitch2Elm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AnalogSwitch2Elm', 274);
function $getInput(this$static, x_0){
  var res;
  if ((this$static.flags & 2) == 0)
    return this$static.volts[x_0] > this$static.highVoltage * 0.5;
  res = this$static.volts[x_0] > this$static.highVoltage * (this$static.inputStates[x_0]?0.35:0.55);
  this$static.inputStates[x_0] = res;
  return res;
}

function $setPoints_2(this$static){
  var hs, i, i0;
  $setPoints(this$static);
  this$static.inputStates = initUnidimensionalArray(Z_classLit, $intern_72, 9, this$static.inputCount, 16, 1);
  this$static.dn > 150 && this$static == sim_0.dragElm && $setSize_0(this$static, 2);
  hs = this$static.gheight;
  this$static.ww = this$static.gwidth2;
  this$static.ww > this$static.dn / 2 && (this$static.ww = round_int(this$static.dn / 2));
  this$static.isInverting() && this$static.ww + 8 > this$static.dn / 2 && (this$static.ww = round_int(this$static.dn / 2 - 8));
  $calcLeads(this$static, this$static.ww * 2);
  this$static.inPosts = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, this$static.inputCount, 0, 1);
  this$static.inGates = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, this$static.inputCount, 0, 1);
  $allocNodes(this$static);
  i0 = -this$static.inputCount / 2 | 0;
  for (i = 0; i != this$static.inputCount; ++i , i0++) {
    i0 == 0 && (this$static.inputCount & 1) == 0 && ++i0;
    this$static.inPosts[i] = $interpPoint_0(this$static.point1, this$static.point2, 0, hs * i0);
    this$static.inGates[i] = $interpPoint_0(this$static.lead1, this$static.lead2, 0, hs * i0);
    this$static.volts[i] = this$static.lastOutput ^ this$static.isInverting()?5:0;
  }
  this$static.hs2 = this$static.gwidth * ((this$static.inputCount / 2 | 0) + 1);
  $setBbox_0(this$static, this$static.point1, this$static.point2, this$static.hs2);
  (this$static.flags & 2) != 0 && (this$static.schmittPoly = $getSchmittPolygon(this$static, this$static.gsize, 0.4699999988079071));
}

function $setSize_0(this$static, s){
  this$static.gsize = s;
  this$static.gwidth = 7 * s;
  this$static.gwidth2 = 14 * s;
  this$static.gheight = 8 * s;
  this$static.flags &= -2;
  this$static.flags |= s == 1?1:0;
}

function GateElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.inputCount = 2;
  this.noDiagonal = true;
  this.inputCount = 2;
  this.highVoltage = lastHighVoltage;
  lastSchmitt && (this.flags |= 2);
  $setSize_0(this, sim_0.smallGridCheckItem.on?1:2);
}

function GateElm_0(xa, ya, xb, yb, f, st){
  var lastOutputVoltage;
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.inputCount = 2;
  this.inputCount = (new Integer_0($nextToken(st))).value_0;
  lastOutputVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.noDiagonal = true;
  this.highVoltage = 5;
  try {
    this.highVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.lastOutput = lastOutputVoltage > this.highVoltage * 0.5;
  $setSize_0(this, (f & 1) != 0?1:2);
}

defineClass(192, 4, $intern_66);
_.doStep = function doStep_6(){
  var f, res;
  f = this.calcFunction();
  this.isInverting() && (f = !f);
  this.lastOutput = f;
  res = f?this.highVoltage:0;
  $updateVoltageSource(sim_0, this.voltSource, res);
}
;
_.draw = function draw_7(g){
  var i;
  for (i = 0; i != this.inputCount; i++) {
    $setVoltageColor(this, g, this.volts[i]);
    drawThickLine_0(g, this.inPosts[i], this.inGates[i]);
  }
  $setVoltageColor(this, g, this.volts[this.inputCount]);
  drawThickLine_0(g, this.lead2, this.point2);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  drawThickPolygon(g, this.gatePoly);
  g.context.lineWidth = 2;
  (this.flags & 2) != 0 && drawPolygon(g, this.schmittPoly);
  g.context.lineWidth = 1;
  if (this.linePoints != null)
    for (i = 0; i != this.linePoints.length - 1; i++)
      drawThickLine_0(g, this.linePoints[i], this.linePoints[i + 1]);
  this.isInverting() && drawThickCircle(g, this.pcircle.x_0, this.pcircle.y_0, 3);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.lead2, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_10(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.inputCount + ' ' + this.volts[this.inputCount] + ' ' + this.highVoltage;
}
;
_.getConnection = function getConnection_3(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_3(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return this.current_0;
  return 0;
}
;
_.getEditInfo = function getEditInfo_5(n){
  var ei;
  if (n == 0)
    return $setDimensionless(new EditInfo('# of Inputs', this.inputCount, 1, 8));
  if (n == 1)
    return new EditInfo('High Voltage (V)', this.highVoltage, 1, 10);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Schmitt Inputs', (this.flags & 2) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_6(arr){
  arr[0] = this.getGateName();
  arr[1] = 'Vout = ' + myGetUnitText(this.volts[this.inputCount], 'V', false);
  arr[2] = 'Iout = ' + myGetUnitText(this.current_0, 'A', false);
}
;
_.getPost = function getPost_3(n){
  if (n == this.inputCount)
    return this.point2;
  return this.inPosts[n];
}
;
_.getPostCount = function getPostCount_5(){
  return this.inputCount + 1;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_4(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_3(n1){
  return n1 == this.inputCount;
}
;
_.isInverting = function isInverting(){
  return false;
}
;
_.setEditValue = function setEditValue_5(n, ei){
  if (n == 0) {
    this.inputCount = round_int(ei.value_0);
    this.setPoints();
  }
  n == 1 && (this.highVoltage = lastHighVoltage = ei.value_0);
  if (n == 2) {
    $getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3);
    lastSchmitt = (this.flags & 2) != 0;
    this.setPoints();
  }
}
;
_.setPoints = function setPoints_7(){
  $setPoints_2(this);
}
;
_.stamp = function stamp_7(){
  $stampVoltageSource(sim_0, 0, this.nodes[this.inputCount], this.voltSource);
}
;
_.gheight = 0;
_.gsize = 0;
_.gwidth = 0;
_.gwidth2 = 0;
_.highVoltage = 0;
_.hs2 = 0;
_.inputCount = 0;
_.lastOutput = false;
_.ww = 0;
var lastHighVoltage = 5, lastSchmitt = false;
var Lcom_lushprojects_circuitjs1_client_GateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'GateElm', 192);
function AndGateElm(xx, yy){
  GateElm.call(this, xx, yy);
}

function AndGateElm_0(xa, ya, xb, yb, f, st){
  GateElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(193, 192, $intern_66, AndGateElm, AndGateElm_0);
_.calcFunction = function calcFunction(){
  var f, i;
  f = true;
  for (i = 0; i != this.inputCount; i++)
    f = f & $getInput(this, i);
  return f;
}
;
_.getDumpType = function getDumpType_7(){
  return 150;
}
;
_.getGateName = function getGateName(){
  return 'AND gate';
}
;
_.getShortcut = function getShortcut_2(){
  return 50;
}
;
_.setPoints = function setPoints_8(){
  var a, b, i, triPoints;
  $setPoints_2(this);
  triPoints = $newPointArray(23);
  $interpPoint2(this.lead1, this.lead2, triPoints[0], triPoints[22], 0, this.hs2);
  for (i = 0; i != 10; i++) {
    a = i * 0.1;
    b = $wnd.Math.sqrt(1 - a * a);
    $interpPoint2(this.lead1, this.lead2, triPoints[i + 1], triPoints[21 - i], 0.5 + a / 2, b * this.hs2);
  }
  triPoints[11] = new Point_1(this.lead2);
  if (this.isInverting()) {
    this.pcircle = $interpPoint(this.point1, this.point2, 0.5 + (this.ww + 4) / this.dn);
    this.lead2 = $interpPoint(this.point1, this.point2, 0.5 + (this.ww + 8) / this.dn);
  }
  this.gatePoly = $createPolygon_1(triPoints);
}
;
var Lcom_lushprojects_circuitjs1_client_AndGateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AndGateElm', 193);
function AntennaElm(xx, yy){
  RailElm_0.call(this, xx, yy, 1);
}

function AntennaElm_0(xa, ya, xb, yb, f, st){
  RailElm_1.call(this, xa, ya, xb, yb, f, st);
  this.waveform = 1;
}

defineClass(257, 38, $intern_70, AntennaElm, AntennaElm_0);
_.drawRail = function drawRail_0(g){
  $drawRailText(this, g, 'Ant');
}
;
_.getDumpType = function getDumpType_8(){
  return 65;
}
;
_.getEditInfo = function getEditInfo_6(n){
  return null;
}
;
_.getShortcut = function getShortcut_3(){
  return 0;
}
;
_.getVoltage = function getVoltage_0(){
  var fm;
  this.fmphase += $intern_2 * (2200 + $wnd.Math.sin($intern_2 * sim_0.t * 13) * 100) * sim_0.timeStep;
  fm = 3 * $wnd.Math.sin(this.fmphase);
  return $wnd.Math.sin($intern_2 * sim_0.t * 3000) * (1.3 + $wnd.Math.sin($intern_2 * sim_0.t * 12)) * 3 + $wnd.Math.sin($intern_2 * sim_0.t * 2710) * (1.3 + $wnd.Math.sin($intern_2 * sim_0.t * 13)) * 3 + $wnd.Math.sin($intern_2 * sim_0.t * 2433) * (1.3 + $wnd.Math.sin($intern_2 * sim_0.t * 14)) * 3 + fm;
}
;
_.fmphase = 0;
var Lcom_lushprojects_circuitjs1_client_AntennaElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AntennaElm', 257);
function $$init_2(this$static){
  this$static.dataSampleCount = 0;
  this$static.nextDataSample = 0;
  this$static.samplingRateChoices = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [8000, 11025, 16000, 22050, 44100]);
}

function $createButton(this$static){
  var label_0;
  label_0 = '&#9654; Play Audio';
  this$static.labelNum > 1 && (label_0 += ' ' + this$static.labelNum);
  $addWidgetToVerticalPanel(sim_0, this$static.button_0 = new Button_0(label_0));
  $setStylePrimaryName(this$static.button_0, 'topButton');
  $addDomHandler(this$static.button_0, new AudioOutputElm$1(this$static), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
}

function $getNextLabelNum(){
  var ce, i, ln, num;
  num = 1;
  if (!sim_0.elmList)
    return 0;
  for (i = 0; i != sim_0.elmList.arrayList.array.length; i++) {
    ce = $getElm(sim_0, i);
    if (!instanceOf(ce, 149))
      continue;
    ln = castTo(ce, 149).labelNum;
    ln >= num && (num = ln + 1);
  }
  return num;
}

function $play(this$static){
  var adj, arr, base, ct, i, max_0, min_0, mult, s;
  arr = [];
  ct = this$static.dataPtr;
  base = 0;
  if (this$static.dataFull) {
    ct = this$static.dataCount;
    base = this$static.dataPtr;
  }
  if (ct * this$static.sampleStep < 0.05) {
    $wnd.alert('Audio data is not ready yet.  Increase simulation speed to make data ready sooner.');
    return;
  }
  max_0 = -100000000;
  min_0 = $intern_73;
  for (i = 0; i != ct; i++) {
    this$static.data_0[i] > max_0 && (max_0 = this$static.data_0[i]);
    this$static.data_0[i] < min_0 && (min_0 = this$static.data_0[i]);
  }
  adj = -(max_0 + min_0) / 2;
  mult = 32766 / (max_0 + adj);
  for (i = 0; i != ct; i++) {
    s = round_int((this$static.data_0[(i + base) % this$static.dataCount] + adj) * mult);
    arr[arr.length] = s;
  }
  playJS(arr, this$static.samplingRate);
}

function $setDataCount(this$static){
  this$static.dataCount = round_int(this$static.samplingRate * this$static.duration);
  this$static.data_0 = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.dataCount, 15, 1);
  this$static.dataStart = sim_0.t;
  this$static.dataPtr = 0;
  this$static.dataFull = false;
  this$static.sampleStep = 1 / this$static.samplingRate;
  this$static.nextDataSample = sim_0.t + this$static.sampleStep;
}

function $setTimeStep(this$static){
  var target;
  target = this$static.sampleStep / 8;
  if (sim_0.timeStep != target) {
    if (okToChangeTimeStep || $wnd.confirm('Adjust timestep for best audio quality and performance?')) {
      sim_0.timeStep = target;
      okToChangeTimeStep = true;
    }
  }
}

function AudioOutputElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $$init_2(this);
  this.duration = 1;
  this.samplingRate = lastSamplingRate;
  this.labelNum = $getNextLabelNum();
  $setDataCount(this);
  $createButton(this);
}

function AudioOutputElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_2(this);
  this.duration = __parseAndValidateDouble($nextToken(st));
  this.samplingRate = __parseAndValidateInt($nextToken(st));
  this.labelNum = __parseAndValidateInt($nextToken(st));
  $setDataCount(this);
  $createButton(this);
}

function playJS(samples, sampleRate){
  var Wav = function(opt_params){
    this._sampleRate = opt_params && opt_params.sampleRate?opt_params.sampleRate:44100;
    this._channels = opt_params && opt_params.channels?opt_params.channels:2;
    this._eof = true;
    this._bufferNeedle = 0;
  }
  ;
  Wav.prototype.setBuffer = function(buffer){
    this._buffer = this.getWavInt16Array(buffer);
    this._bufferNeedle = 0;
    this._internalBuffer = '';
    this._hasOutputHeader = false;
    this._eof = false;
  }
  ;
  Wav.prototype.getBuffer = function(len){
    var rt;
    if (this._bufferNeedle + len >= this._buffer.length) {
      rt = new Int16Array(this._buffer.length - this._bufferNeedle);
      this._eof = true;
    }
     else {
      rt = new Int16Array(len);
    }
    for (var i = 0; i < rt.length; i++) {
      rt[i] = this._buffer[i + this._bufferNeedle];
    }
    this._bufferNeedle += rt.length;
    return rt.buffer;
  }
  ;
  Wav.prototype.eof = function(){
    return this._eof;
  }
  ;
  Wav.prototype.getWavInt16Array = function(buffer){
    var intBuffer = new Int16Array(buffer.length + 23), tmp;
    intBuffer[0] = 18770;
    intBuffer[1] = 17990;
    intBuffer[2] = 2 * buffer.length + 15 & $intern_9;
    intBuffer[3] = (2 * buffer.length + 15 & $intern_74) >> 16;
    intBuffer[4] = 16727;
    intBuffer[5] = 17750;
    intBuffer[6] = 28006;
    intBuffer[7] = 8308;
    intBuffer[8] = 18;
    intBuffer[9] = 0;
    intBuffer[10] = 1;
    intBuffer[11] = this._channels;
    intBuffer[12] = this._sampleRate & $intern_9;
    intBuffer[13] = (this._sampleRate & $intern_74) >> 16;
    intBuffer[14] = 2 * this._channels * this._sampleRate & $intern_9;
    intBuffer[15] = (2 * this._channels * this._sampleRate & $intern_74) >> 16;
    intBuffer[16] = 4;
    intBuffer[17] = 16;
    intBuffer[18] = 0;
    intBuffer[19] = 24932;
    intBuffer[20] = 24948;
    intBuffer[21] = 2 * buffer.length & $intern_9;
    intBuffer[22] = (2 * buffer.length & $intern_74) >> 16;
    for (var i = 0; i < buffer.length; i++)
      intBuffer[i + 23] = buffer[i];
    return intBuffer;
  }
  ;
  var i_0 = 0, wav = new Wav({sampleRate:sampleRate, channels:1});
  wav.setBuffer(samples);
  var srclist = [];
  while (!wav.eof()) {
    srclist.push(wav.getBuffer($intern_20));
  }
  var oldblob = $doc.audioBlob;
  var oldobj = $doc.audioObject;
  if (oldblob) {
    oldobj.parentNode.removeChild(oldobj);
    URL.revokeObjectURL(oldblob);
  }
  var b = new Blob(srclist, {type:'audio/wav'});
  var url_0 = URL.createObjectURL(b);
  $doc.audioBlob = url_0;
  var audio = $doc.createElement('audio');
  $doc.audioObject = audio;
  audio.src = url_0;
  $doc.body.appendChild(audio);
  audio.play();
}

defineClass(149, 4, {149:1, 4:1, 8:1}, AudioOutputElm, AudioOutputElm_0);
_.delete_0 = function delete_1(){
  $removeWidgetFromVerticalPanel(sim_0, this.button_0);
}
;
_.draggingDone = function draggingDone_0(){
  $setTimeStep(this);
}
;
_.draw = function draw_8(g){
  var f, pct, s, selected, textWidth;
  selected = this.iAmMouseElm || this.selected || sim_0.plotYElm == this;
  f = new Font('SansSerif', selected?1:0, 14);
  s = 'Audio Out';
  this.labelNum > 1 && (s = 'Audio ' + this.labelNum);
  $setFont_0(g, f);
  textWidth = round_int($measureText(g.context, s).width);
  $setColor(g, ($clinit_Color() , darkGray));
  pct = this.dataFull?textWidth:textWidth * this.dataPtr / this.dataCount | 0;
  $fillRect_0(g, this.x2 - (textWidth / 2 | 0), this.y2 - 10, pct, 20);
  $setColor(g, selected?selectColor:whiteColor);
  $interpPoint_1(this.point1, this.point2, this.lead1, 1 - (textWidth / 2 + 8) / this.dn);
  $setBbox_0(this, this.point1, this.lead1, 0);
  $drawCenteredText(this, g, s, this.x2, this.y2, true);
  $setVoltageColor(this, g, this.volts[0]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.point1, this.lead1);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_11(){
  return '211 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.duration + ' ' + this.samplingRate + ' ' + this.labelNum;
}
;
_.getDumpType = function getDumpType_9(){
  return 211;
}
;
_.getEditInfo = function getEditInfo_7(n){
  var ei, i;
  if (n == 0) {
    ei = new EditInfo('Duration (s)', this.duration, 0, 5);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('Sampling Rate', 0, -1, -1);
    ei.choice = new Choice;
    for (i = 0; i != this.samplingRateChoices.length; i++) {
      $add_6(ei.choice, this.samplingRateChoices[i] + '');
      this.samplingRateChoices[i] == this.samplingRate && $select(ei.choice, i);
    }
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_7(arr){
  var ct, dur;
  arr[0] = 'audio output';
  arr[1] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
  ct = this.dataFull?this.dataCount:this.dataPtr;
  dur = this.sampleStep * ct;
  arr[2] = 'start = ' + myGetUnitText(this.dataFull?sim_0.t - this.duration:this.dataStart, 's', false);
  arr[3] = 'dur = ' + myGetUnitText(dur, 's', false);
  arr[4] = 'samples = ' + ct + (this.dataFull?'':'/' + this.dataCount);
}
;
_.getPostCount = function getPostCount_6(){
  return 1;
}
;
_.getVoltageDiff = function getVoltageDiff_4(){
  return this.volts[0];
}
;
_.reset_0 = function reset_4(){
  this.dataPtr = 0;
  this.dataFull = false;
  this.dataSampleCount = 0;
  this.nextDataSample = 0;
  this.dataSample = 0;
}
;
_.setEditValue = function setEditValue_6(n, ei){
  var nsr;
  if (n == 0 && ei.value_0 > 0) {
    this.duration = ei.value_0;
    $setDataCount(this);
  }
  if (n == 1) {
    nsr = this.samplingRateChoices[$getSelectElement(ei.choice).selectedIndex];
    if (nsr != this.samplingRate) {
      this.samplingRate = nsr;
      lastSamplingRate = nsr;
      $setDataCount(this);
      $setTimeStep(this);
    }
  }
}
;
_.setPoints = function setPoints_9(){
  $setPoints(this);
  this.lead1 = new Point;
}
;
_.stepFinished = function stepFinished_1(){
  this.dataSample += this.volts[0];
  ++this.dataSampleCount;
  if (sim_0.t >= this.nextDataSample) {
    this.nextDataSample += this.sampleStep;
    this.data_0[this.dataPtr++] = this.dataSample / this.dataSampleCount;
    this.dataSampleCount = 0;
    this.dataSample = 0;
    if (this.dataPtr >= this.dataCount) {
      this.dataPtr = 0;
      this.dataFull = true;
    }
  }
}
;
_.dataCount = 0;
_.dataFull = false;
_.dataPtr = 0;
_.dataSample = 0;
_.dataSampleCount = 0;
_.dataStart = 0;
_.duration = 0;
_.labelNum = 0;
_.nextDataSample = 0;
_.sampleStep = 0;
_.samplingRate = 0;
var lastSamplingRate = 8000, okToChangeTimeStep = false;
var Lcom_lushprojects_circuitjs1_client_AudioOutputElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AudioOutputElm', 149);
function AudioOutputElm$1(this$0){
  this.this$01 = this$0;
}

defineClass(496, 1, $intern_43, AudioOutputElm$1);
_.onClick = function onClick_1(event_0){
  $play(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_AudioOutputElm$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'AudioOutputElm/1', 496);
function GraphicElm(xx, yy){
  CircuitElm.call(this, xx, yy);
}

function GraphicElm_0(xa, ya, xb, yb, flags){
  CircuitElm_0.call(this, xa, ya, xb, yb, flags);
}

defineClass(110, 4, $intern_75);
_.getPostCount = function getPostCount_7(){
  return 0;
}
;
var Lcom_lushprojects_circuitjs1_client_GraphicElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'GraphicElm', 110);
function BoxElm(xx, yy){
  GraphicElm.call(this, xx, yy);
  this.x2 = xx + 16;
  this.y2 = yy + 16;
  $setBbox(this, this.x_0, this.y_0, this.x2, this.y2);
}

function BoxElm_0(xa, ya, xb, yb, f){
  GraphicElm_0.call(this, xa, ya, xb, yb, f);
  this.x2 = xb;
  this.y2 = yb;
  $setBbox(this, this.x_0, this.y_0, this.x2, this.y2);
}

defineClass(302, 110, $intern_75, BoxElm, BoxElm_0);
_.drag = function drag_2(xx, yy){
  this.x_0 = xx;
  this.y_0 = yy;
}
;
_.draw = function draw_9(g){
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:($clinit_Color() , GRAY));
  $setBbox(this, this.x_0, this.y_0, this.x2, this.y2);
  this.x_0 < this.x2 && this.y_0 < this.y2?$fillRect_0(g, this.x_0, this.y_0, this.x2 - this.x_0, this.y2 - this.y_0):this.x_0 > this.x2 && this.y_0 < this.y2?$fillRect_0(g, this.x2, this.y_0, this.x_0 - this.x2, this.y2 - this.y_0):this.x_0 < this.x2 && this.y_0 > this.y2?$fillRect_0(g, this.x_0, this.y2, this.x2 - this.x_0, this.y_0 - this.y2):$fillRect_0(g, this.x2, this.y2, this.x_0 - this.x2, this.y_0 - this.y2);
}
;
_.dump_0 = function dump_12(){
  return 'b ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags;
}
;
_.getDumpType = function getDumpType_10(){
  return 98;
}
;
_.getEditInfo = function getEditInfo_8(n){
  return null;
}
;
_.getInfo = function getInfo_8(arr){
}
;
_.getShortcut = function getShortcut_4(){
  return 0;
}
;
_.setEditValue = function setEditValue_7(n, ei){
}
;
var Lcom_lushprojects_circuitjs1_client_BoxElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'BoxElm', 302);
function CC2Elm(xx, yy){
  ChipElm.call(this, xx, yy);
  this.gain = 1;
}

function CC2Elm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.gain = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(217, 13, $intern_66, CC2Elm, CC2Elm_0);
_.draw = function draw_10(g){
  this.pins[2].current = this.pins[0].current * this.gain;
  $drawChip(this, g);
}
;
_.dump_0 = function dump_13(){
  return $dump(this) + ' ' + this.gain;
}
;
_.getChipName = function getChipName_1(){
  return 'CC2';
}
;
_.getDumpType = function getDumpType_11(){
  return 179;
}
;
_.getInfo = function getInfo_9(arr){
  arr[0] = this.gain == 1?'CCII+':'CCII-';
  arr[1] = 'X,Y = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[2] = 'Z = ' + myGetUnitText(this.volts[2], 'V', false);
  arr[3] = 'I = ' + myGetUnitText(this.pins[0].current, 'A', false);
}
;
_.getPostCount = function getPostCount_8(){
  return 3;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_5(){
  return 1;
}
;
_.setupPins = function setupPins_0(){
  this.sizeX = 2;
  this.sizeY = 3;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, 'X');
  this.pins[0].output = true;
  this.pins[1] = new ChipElm$Pin(this, 2, 2, 'Y');
  this.pins[2] = new ChipElm$Pin(this, 1, 3, 'Z');
}
;
_.stamp = function stamp_8(){
  $stampVoltageSource(sim_0, 0, this.nodes[0], this.pins[0].voltSource);
  $stampVCVS(sim_0, this.nodes[1], 1, this.pins[0].voltSource);
  $stampCCCS(sim_0, 0, this.nodes[2], this.pins[0].voltSource, this.gain);
}
;
_.gain = 0;
var Lcom_lushprojects_circuitjs1_client_CC2Elm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CC2Elm', 217);
function CC2NegElm(xx, yy){
  ChipElm.call(this, xx, yy);
  this.gain = -1;
}

defineClass(495, 217, $intern_66, CC2NegElm);
var Lcom_lushprojects_circuitjs1_client_CC2NegElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CC2NegElm', 495);
function $getConvergeLimit(){
  if (sim_0.subIterations < 10)
    return $intern_64;
  if (sim_0.subIterations < 200)
    return $intern_29;
  return 0.1;
}

function $getLimitStep(){
  if (sim_0.subIterations < 4)
    return 10;
  if (sim_0.subIterations < 10)
    return 1;
  if (sim_0.subIterations < 20)
    return 0.1;
  if (sim_0.subIterations < 40)
    return $intern_29;
  return $intern_64;
}

function $sign(a, b){
  return a > 0?b:-b;
}

function VCCSElm(xx, yy){
  var parser;
  ChipElm.call(this, xx, yy);
  this.inputCount = 2;
  this.exprString = '.1*(a-b)';
  parser = new ExprParser(this.exprString);
  this.expr = $parseExpression(parser);
  this.setupPins();
}

function VCCSElm_0(xa, ya, xb, yb, f, st){
  var parser;
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.inputCount = __parseAndValidateInt($nextToken(st));
  this.exprString = unescape_0($nextToken(st));
  parser = new ExprParser(this.exprString);
  this.expr = $parseExpression(parser);
  this.setupPins();
}

defineClass(91, 13, $intern_76, VCCSElm, VCCSElm_0);
_.doStep = function doStep_7(){
  var convergeLimit, dx, i, limitStep, rs, v, v0, v2;
  if (this.broken) {
    this.pins[this.inputCount].current = 0;
    this.pins[this.inputCount + 1].current = 0;
    $stampResistor(sim_0, this.nodes[this.inputCount], this.nodes[this.inputCount + 1], $intern_73);
    return;
  }
  limitStep = $getLimitStep();
  convergeLimit = $getConvergeLimit();
  for (i = 0; i != this.inputCount; i++) {
    $wnd.Math.abs(this.volts[i] - this.lastVolts[i]) > convergeLimit && (sim_0.converged = false);
    isNaN(this.volts[i]) && (this.volts[i] = 0);
    $wnd.Math.abs(this.volts[i] - this.lastVolts[i]) > limitStep && (this.volts[i] = this.lastVolts[i] + $sign(this.volts[i] - this.lastVolts[i], limitStep));
  }
  if (this.expr) {
    for (i = 0; i != this.inputCount; i++)
      this.exprState.values[i] = this.volts[i];
    this.exprState.t = sim_0.t;
    v0 = -$eval(this.expr, this.exprState);
    rs = v0;
    for (i = 0; i != this.inputCount; i++) {
      this.exprState.values[i] = this.volts[i] + $intern_62;
      v = -$eval(this.expr, this.exprState);
      this.exprState.values[i] = this.volts[i] - $intern_62;
      v2 = -$eval(this.expr, this.exprState);
      dx = (v - v2) / $intern_77;
      $wnd.Math.abs(dx) < $intern_62 && (dx = dx > 0?$intern_62:$intern_78);
      $stampVCCurrentSource(sim_0, this.nodes[this.inputCount], this.nodes[this.inputCount + 1], this.nodes[i], 0, dx);
      rs -= dx * this.volts[i];
      this.exprState.values[i] = this.volts[i];
    }
    $stampCurrentSource(sim_0, this.nodes[this.inputCount], this.nodes[this.inputCount + 1], rs);
    this.pins[this.inputCount].current = -v0;
    this.pins[this.inputCount + 1].current = v0;
  }
  for (i = 0; i != this.inputCount; i++)
    this.lastVolts[i] = this.volts[i];
}
;
_.draw = function draw_11(g){
  $drawChip(this, g);
}
;
_.dump_0 = function dump_14(){
  return $dump(this) + ' ' + this.inputCount + ' ' + escape_0(this.exprString);
}
;
_.getChipName = function getChipName_2(){
  return 'VCCS';
}
;
_.getConnection = function getConnection_4(n1, n2){
  return $comparePair(this.inputCount, this.inputCount + 1, n1, n2);
}
;
_.getDumpType = function getDumpType_12(){
  return 213;
}
;
_.getEditInfo = function getEditInfo_9(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('<a href="customfunction.html" target="_blank">Output Function<\/a>', 0, -1, -1);
    ei.text_0 = this.exprString;
    return ei;
  }
  if (n == 1)
    return $setDimensionless(new EditInfo('# of Inputs', this.inputCount, 1, 8));
  return null;
}
;
_.getInfo = function getInfo_10(arr){
  var i;
  $getInfo(this, arr);
  for (i = 0; arr[i] != null; i++)
  ;
  arr[i] = 'I = ' + myGetUnitText(this.pins[this.inputCount].current, 'A', false);
}
;
_.getPostCount = function getPostCount_9(){
  return this.inputCount + 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_6(){
  return 0;
}
;
_.hasCurrentOutput = function hasCurrentOutput(){
  return true;
}
;
_.hasGroundConnection = function hasGroundConnection_4(n1){
  return false;
}
;
_.nonLinear = function nonLinear_1(){
  return true;
}
;
_.setEditValue = function setEditValue_8(n, ei){
  var parser;
  if (n == 0) {
    this.exprString = $getPropertyString($getElement(ei.textf), 'value');
    parser = new ExprParser(this.exprString);
    this.expr = $parseExpression(parser);
    return;
  }
  if (n == 1) {
    if (ei.value_0 < 0 || ei.value_0 > 8)
      return;
    this.inputCount = round_int(ei.value_0);
    this.setupPins();
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_1(){
  var i;
  this.sizeX = 2;
  this.sizeY = this.inputCount > 2?this.inputCount:2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.inputCount + 2, 0, 1);
  for (i = 0; i != this.inputCount; i++)
    this.pins[i] = new ChipElm$Pin(this, i, 2, String.fromCharCode(65 + i & $intern_9));
  this.pins[this.inputCount] = new ChipElm$Pin(this, 0, 3, 'C+');
  this.pins[this.inputCount + 1] = new ChipElm$Pin(this, 1, 3, 'C-');
  this.lastVolts = initUnidimensionalArray(D_classLit, $intern_57, 9, this.inputCount, 15, 1);
  this.exprState = new ExprState;
}
;
_.stamp = function stamp_9(){
  $stampNonLinear(sim_0, this.nodes[this.inputCount]);
  $stampNonLinear(sim_0, this.nodes[this.inputCount + 1]);
}
;
_.broken = false;
_.inputCount = 0;
var Lcom_lushprojects_circuitjs1_client_VCCSElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VCCSElm', 91);
function $setupPins(this$static){
  this$static.sizeX = 2;
  this$static.sizeY = 2;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'C+');
  this$static.pins[1] = new ChipElm$Pin(this$static, 1, 2, 'C-');
  this$static.pins[1].output = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, 0, 3, 'O+');
  this$static.pins[2].output = true;
  this$static.pins[3] = new ChipElm$Pin(this$static, 1, 3, 'O-');
  this$static.exprState = new ExprState;
}

function CCCSElm(xx, yy){
  var parser;
  VCCSElm.call(this, xx, yy);
  this.exprString = '2*i';
  parser = new ExprParser(this.exprString);
  this.expr = $parseExpression(parser);
}

function CCCSElm_0(xa, ya, xb, yb, f, st){
  VCCSElm_0.call(this, xa, ya, xb, yb, f, st);
  this.inputCount = 2;
  $setupPins(this);
}

defineClass(317, 91, $intern_76, CCCSElm, CCCSElm_0);
_.doStep = function doStep_8(){
  var convergeLimit, cur, dx, rs, v, v0, v2;
  if (this.broken) {
    this.pins[this.inputCount].current = 0;
    this.pins[this.inputCount + 1].current = 0;
    $stampResistor(sim_0, this.nodes[this.inputCount], this.nodes[this.inputCount + 1], $intern_73);
    return;
  }
  convergeLimit = $getConvergeLimit() * 0.1;
  cur = this.pins[1].current;
  $wnd.Math.abs(cur - this.lastCurrent) > convergeLimit && (sim_0.converged = false);
  if (this.expr) {
    this.exprState.values[8] = cur;
    this.exprState.t = sim_0.t;
    v0 = $eval(this.expr, this.exprState);
    rs = v0;
    this.pins[2].current = v0;
    this.pins[3].current = -v0;
    this.exprState.values[8] = cur + $intern_62;
    v = $eval(this.expr, this.exprState);
    this.exprState.values[8] = cur - $intern_62;
    v2 = $eval(this.expr, this.exprState);
    dx = (v - v2) / $intern_77;
    $wnd.Math.abs(dx) < $intern_62 && (dx = dx > 0?$intern_62:$intern_78);
    $stampCCCS(sim_0, this.nodes[3], this.nodes[2], this.pins[1].voltSource, dx);
    rs -= dx * cur;
    $stampCurrentSource(sim_0, this.nodes[3], this.nodes[2], rs);
  }
  this.lastCurrent = cur;
}
;
_.getChipName = function getChipName_3(){
  return 'CCCS';
}
;
_.getConnection = function getConnection_5(n1, n2){
  if (0 == n1 && 1 == n2 || 0 == n2 && 1 == n1)
    return true;
  if (2 == n1 && 3 == n2 || 2 == n2 && 3 == n1)
    return true;
  return false;
}
;
_.getDumpType = function getDumpType_13(){
  return 215;
}
;
_.getPostCount = function getPostCount_10(){
  return 4;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_7(){
  return 1;
}
;
_.hasCurrentOutput = function hasCurrentOutput_0(){
  return true;
}
;
_.setCurrent = function setCurrent_1(vn, c){
  if (this.pins[1].voltSource == vn) {
    this.pins[0].current = -c;
    this.pins[1].current = c;
  }
}
;
_.setupPins = function setupPins_2(){
  $setupPins(this);
}
;
_.stamp = function stamp_10(){
  var vn1;
  vn1 = this.pins[1].voltSource;
  $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[1], vn1, 0);
  $stampNonLinear(sim_0, this.nodes[2]);
  $stampNonLinear(sim_0, this.nodes[3]);
}
;
_.lastCurrent = 0;
var Lcom_lushprojects_circuitjs1_client_CCCSElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CCCSElm', 317);
function $setupPins_0(this$static){
  this$static.sizeX = 2;
  this$static.sizeY = 2;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'C+');
  this$static.pins[1] = new ChipElm$Pin(this$static, 1, 2, 'C-');
  this$static.pins[1].output = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, 0, 3, 'V+');
  this$static.pins[2].output = true;
  this$static.pins[3] = new ChipElm$Pin(this$static, 1, 3, 'V-');
  this$static.exprState = new ExprState;
}

function CCVSElm(xx, yy){
  var parser;
  VCCSElm.call(this, xx, yy);
  this.exprString = '2*i';
  parser = new ExprParser(this.exprString);
  this.expr = $parseExpression(parser);
}

function CCVSElm_0(xa, ya, xb, yb, f, st){
  VCCSElm_0.call(this, xa, ya, xb, yb, f, st);
  this.inputCount = 2;
  $setupPins_0(this);
}

defineClass(316, 91, $intern_76, CCVSElm, CCVSElm_0);
_.doStep = function doStep_9(){
  var convergeLimit, cur, dx, rs, v, v0, v2, vn1, vn2;
  convergeLimit = $getConvergeLimit() * 0.1;
  cur = this.pins[1].current;
  $wnd.Math.abs(cur - this.lastCurrent) > convergeLimit && (sim_0.converged = false);
  vn1 = this.pins[1].voltSource + sim_0.nodeList.arrayList.array.length;
  vn2 = this.pins[2].voltSource + sim_0.nodeList.arrayList.array.length;
  if (this.expr) {
    this.exprState.values[8] = cur;
    this.exprState.t = sim_0.t;
    v0 = $eval(this.expr, this.exprState);
    rs = v0;
    this.exprState.values[8] = cur + $intern_62;
    v = $eval(this.expr, this.exprState);
    this.exprState.values[8] = cur - $intern_62;
    v2 = $eval(this.expr, this.exprState);
    dx = (v - v2) / $intern_77;
    $wnd.Math.abs(dx) < $intern_62 && (dx = dx > 0?$intern_62:$intern_78);
    $stampMatrix(sim_0, vn2, vn1, -dx);
    rs -= dx * cur;
    $stampRightSide_0(sim_0, vn2, rs);
  }
  this.lastCurrent = cur;
}
;
_.getChipName = function getChipName_4(){
  return 'CCVS';
}
;
_.getConnection = function getConnection_6(n1, n2){
  if (0 == n1 && 1 == n2 || 0 == n2 && 1 == n1)
    return true;
  if (2 == n1 && 3 == n2 || 2 == n2 && 3 == n1)
    return true;
  return false;
}
;
_.getDumpType = function getDumpType_14(){
  return 214;
}
;
_.getPostCount = function getPostCount_11(){
  return 4;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_8(){
  return 2;
}
;
_.hasCurrentOutput = function hasCurrentOutput_1(){
  return false;
}
;
_.setCurrent = function setCurrent_2(vn, c){
  if (this.pins[1].voltSource == vn) {
    this.pins[0].current = -c;
    this.pins[1].current = c;
  }
  if (this.pins[2].voltSource == vn) {
    this.pins[2].current = c;
    this.pins[3].current = -c;
  }
}
;
_.setupPins = function setupPins_3(){
  $setupPins_0(this);
}
;
_.stamp = function stamp_11(){
  var vn1, vn2;
  vn1 = this.pins[1].voltSource;
  $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[1], vn1, 0);
  vn2 = this.pins[2].voltSource;
  $stampNonLinear(sim_0, vn2 + sim_0.nodeList.arrayList.array.length);
  $stampVoltageSource(sim_0, this.nodes[3], this.nodes[2], vn2);
}
;
_.lastCurrent = 0;
var Lcom_lushprojects_circuitjs1_client_CCVSElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CCVSElm', 316);
function $draw(this$static, g){
  var i, s;
  $setBbox_0(this$static, this$static.point1, this$static.point2, 12);
  $setVoltageColor(this$static, g, this$static.volts[0]);
  drawThickLine_0(g, this$static.point1, this$static.lead1);
  $setPowerColor_0(this$static, g);
  drawThickLine_0(g, this$static.plate1[0], this$static.plate1[1]);
  sim_0.powerCheckItem.on && $setColor(g, ($clinit_Color() , gray));
  $setVoltageColor(this$static, g, this$static.volts[1]);
  drawThickLine_0(g, this$static.point2, this$static.lead2);
  $setPowerColor_0(this$static, g);
  if (this$static.platePoints == null)
    drawThickLine_0(g, this$static.plate2[0], this$static.plate2[1]);
  else {
    for (i = 0; i != 7; i++)
      drawThickLine_0(g, this$static.platePoints[i], this$static.platePoints[i + 1]);
  }
  this$static.curcount_0 = $updateDotCount(this$static.current_0, this$static.curcount_0);
  if (sim_0.dragElm != this$static) {
    $drawDots(g, this$static.point1, this$static.lead1, this$static.curcount_0);
    $drawDots(g, this$static.point2, this$static.lead2, -this$static.curcount_0);
  }
  $drawPosts(this$static, g);
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this$static.capacitance, 'F', true);
    $drawValues(this$static, g, s, 12);
  }
}

function $getEditInfo_1(this$static, n){
  var ei;
  if (n == 0)
    return new EditInfo('Capacitance (F)', this$static.capacitance, 0, 0);
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Trapezoidal Approximation', (this$static.flags & 2) == 0);
    return ei;
  }
  return null;
}

function $getInfo_0(this$static, arr){
  arr[0] = 'capacitor';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this$static.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this$static.volts[0] - this$static.volts[1]), 'V', false);
  arr[3] = 'C = ' + myGetUnitText(this$static.capacitance, 'F', false);
  arr[4] = 'P = ' + myGetUnitText((this$static.volts[0] - this$static.volts[1]) * this$static.current_0, 'W', false);
}

function $setPoints_3(this$static){
  var f;
  $setPoints(this$static);
  f = (this$static.dn / 2 - 4) / this$static.dn;
  this$static.lead1 = $interpPoint(this$static.point1, this$static.point2, f);
  this$static.lead2 = $interpPoint(this$static.point1, this$static.point2, 1 - f);
  this$static.plate1 = $newPointArray(2);
  this$static.plate2 = $newPointArray(2);
  $interpPoint2(this$static.point1, this$static.point2, this$static.plate1[0], this$static.plate1[1], f, 12);
  $interpPoint2(this$static.point1, this$static.point2, this$static.plate2[0], this$static.plate2[1], 1 - f, 12);
}

function CapacitorElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.capacitance = 1.0E-5;
}

function CapacitorElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.capacitance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.voltdiff = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(53, 4, $intern_79, CapacitorElm, CapacitorElm_0);
_.calculateCurrent = function calculateCurrent_2(){
  var voltdiff;
  voltdiff = this.volts[0] - this.volts[1];
  this.compResistance > 0 && (this.current_0 = voltdiff / this.compResistance + this.curSourceValue);
}
;
_.doStep = function doStep_10(){
  $stampCurrentSource(sim_0, this.nodes[0], this.nodes[1], this.curSourceValue);
}
;
_.draw = function draw_12(g){
  $draw(this, g);
}
;
_.dump_0 = function dump_15(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.capacitance + ' ' + this.voltdiff;
}
;
_.getDumpType = function getDumpType_15(){
  return 99;
}
;
_.getEditInfo = function getEditInfo_10(n){
  return $getEditInfo_1(this, n);
}
;
_.getInfo = function getInfo_11(arr){
  $getInfo_0(this, arr);
}
;
_.getScopeText = function getScopeText_0(v){
  var sm;
  return sm = castToString($getStringValue(localizationMap, 'capacitor')) , (sm != null?sm:'capacitor') + ', ' + myGetUnitText(this.capacitance, 'F', false);
}
;
_.getShortcut = function getShortcut_5(){
  return 99;
}
;
_.reset_0 = function reset_5(){
  $reset(this);
  this.current_0 = this.curcount_0 = this.curSourceValue = 0;
  this.voltdiff = $intern_64;
}
;
_.setEditValue = function setEditValue_9(n, ei){
  n == 0 && ei.value_0 > 0 && (this.capacitance = ei.value_0);
  n == 1 && ($getState(ei.checkbox)?(this.flags &= -3):(this.flags |= 2));
}
;
_.setNodeVoltage = function setNodeVoltage_0(n, c){
  var voltdiff;
  this.volts[n] = c;
  voltdiff = this.volts[0] - this.volts[1];
  this.compResistance > 0 && (this.current_0 = voltdiff / this.compResistance + this.curSourceValue);
  this.voltdiff = this.volts[0] - this.volts[1];
}
;
_.setPoints = function setPoints_10(){
  $setPoints_3(this);
}
;
_.stamp = function stamp_12(){
  (this.flags & 2) == 0?(this.compResistance = sim_0.timeStep / (2 * this.capacitance)):(this.compResistance = sim_0.timeStep / this.capacitance);
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.compResistance);
  $stampRightSide(sim_0, this.nodes[0]);
  $stampRightSide(sim_0, this.nodes[1]);
}
;
_.startIteration = function startIteration_0(){
  (this.flags & 2) == 0?(this.curSourceValue = -this.voltdiff / this.compResistance - this.current_0):(this.curSourceValue = -this.voltdiff / this.compResistance);
}
;
_.capacitance = 0;
_.compResistance = 0;
_.curSourceValue = 0;
_.voltdiff = 0;
var Lcom_lushprojects_circuitjs1_client_CapacitorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CapacitorElm', 53);
function $getState(this$static){
  return $booleanValue(this$static.attached?($clinit_Boolean() , this$static.inputElem.checked?true:false):($clinit_Boolean() , this$static.inputElem.defaultChecked?true:false));
}

function Checkbox(s, b){
  var sm;
  CheckBox_0.call(this, (sm = castToString($getStringValue(localizationMap, s)) , sm != null?sm:s));
  $setValue_0(this, ($clinit_Boolean() , b?true:false));
}

defineClass(26, 221, $intern_42, Checkbox);
var Lcom_lushprojects_circuitjs1_client_Checkbox_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Checkbox', 26);
function CheckboxAlignedMenuItem(s, cmd){
  MenuItem.call(this, ($clinit_SafeHtmlUtils() , new SafeHtmlString(checkBoxHtml + '&nbsp;<\/div>' + s)), cmd);
}

defineClass(108, 15, $intern_52, CheckboxAlignedMenuItem);
var Lcom_lushprojects_circuitjs1_client_CheckboxAlignedMenuItem_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CheckboxAlignedMenuItem', 108);
function $$init_3(this$static){
  this$static.on = false;
  this$static.name_0 = '';
  this$static.shortcut = '';
  this$static.extcmd = null;
}

function $addShortcut(this$static, s){
  this$static.shortcut = s;
}

function $setState_0(this$static, newstate){
  var s;
  this$static.on = newstate;
  this$static.on?(s = checkBoxHtml + '&#10004;<\/div>' + this$static.name_0):(s = checkBoxHtml + '&nbsp;<\/div>' + this$static.name_0);
  if (this$static.shortcut != '')
    if (this$static.shortcut.length == 1) {
      s = s + '<div style="display:inline-block;width:20px;right:10px;text-align:center;position:absolute;">' + this$static.shortcut + '<\/div>';
    }
     else {
      s = s + '<span style="display:inline-block; width: 60px;"><\/span>';
      s = s + '<div style="display:inline-block;right:10px;text-align:right;position:absolute;">' + this$static.shortcut + '<\/div>';
    }
  $setInnerHTML(($clinit_DOM() , this$static.element), s);
}

function CheckboxMenuItem(s){
  MenuItem_1.call(this, s, null);
  $$init_3(this);
  this.command = this;
  this.name_0 = s;
  $setState_0(this, false);
}

function CheckboxMenuItem_0(s, cmd){
  MenuItem_1.call(this, s, null);
  $$init_3(this);
  this.command = this;
  this.extcmd = cmd;
  this.name_0 = s;
  $setState_0(this, false);
}

function CheckboxMenuItem_1(s, c){
  CheckboxMenuItem.call(this, s);
  this.shortcut = c;
}

defineClass(33, 15, {48:1, 21:1, 15:1, 18:1, 33:1}, CheckboxMenuItem, CheckboxMenuItem_0, CheckboxMenuItem_1);
_.execute_0 = function execute_11(){
  $setState_0(this, !this.on);
  !!this.extcmd && this.extcmd.execute_0();
}
;
_.on = false;
var checkBoxHtml = '<div style="display:inline-block;width:15px;">';
var Lcom_lushprojects_circuitjs1_client_CheckboxMenuItem_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CheckboxMenuItem', 33);
function $setPoint(this$static, px, py, dx, dy, dax, day, sx, sy){
  var xa, ya;
  if ((this$static.this$01.flags & $intern_21) != 0) {
    dx = -dx;
    dax = -dax;
    px += this$static.this$01.cspc2 * (this$static.this$01.sizeX - 1);
    sx = -sx;
  }
  if ((this$static.this$01.flags & $intern_32) != 0) {
    dy = -dy;
    day = -day;
    py += this$static.this$01.cspc2 * (this$static.this$01.sizeY - 1);
    sy = -sy;
  }
  xa = px + this$static.this$01.cspc2 * dx * this$static.pos + sx;
  ya = py + this$static.this$01.cspc2 * dy * this$static.pos + sy;
  this$static.post = new Point_0(xa + dax * this$static.this$01.cspc2, ya + day * this$static.this$01.cspc2);
  this$static.stub = new Point_0(xa + dax * this$static.this$01.cspc, ya + day * this$static.this$01.cspc);
  this$static.textloc = new Point_0(xa, ya);
  if (this$static.bubble) {
    this$static.bubbleX = xa + dax * 10 * this$static.this$01.csize;
    this$static.bubbleY = ya + day * 10 * this$static.this$01.csize;
  }
  if (this$static.clock) {
    this$static.this$01.clockPointsX = initUnidimensionalArray(I_classLit, $intern_22, 9, 3, 15, 1);
    this$static.this$01.clockPointsY = initUnidimensionalArray(I_classLit, $intern_22, 9, 3, 15, 1);
    this$static.this$01.clockPointsX[0] = xa + dax * this$static.this$01.cspc - (dx * this$static.this$01.cspc / 2 | 0);
    this$static.this$01.clockPointsY[0] = ya + day * this$static.this$01.cspc - (dy * this$static.this$01.cspc / 2 | 0);
    this$static.this$01.clockPointsX[1] = xa;
    this$static.this$01.clockPointsY[1] = ya;
    this$static.this$01.clockPointsX[2] = xa + dax * this$static.this$01.cspc + (dx * this$static.this$01.cspc / 2 | 0);
    this$static.this$01.clockPointsY[2] = ya + day * this$static.this$01.cspc + (dy * this$static.this$01.cspc / 2 | 0);
  }
}

function ChipElm$Pin(this$0, p, s, t){
  this.this$01 = this$0;
  this.pos = p;
  this.side = s;
  this.text_0 = t;
}

defineClass(5, 1, {5:1}, ChipElm$Pin);
_.bubble = false;
_.bubbleX = 0;
_.bubbleY = 0;
_.clock = false;
_.curcount = 0;
_.current = 0;
_.lineOver = false;
_.output = false;
_.pos = 0;
_.side = 0;
_.state = false;
_.value_0 = false;
_.voltSource = 0;
var Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ChipElm/Pin', 5);
function $add_6(this$static, s){
  var sm;
  $insertItem(this$static, (sm = castToString($getStringValue(localizationMap, s)) , sm != null?sm:s));
}

function $select(this$static, i){
  $setSelectedIndex(($clinit_DOM() , this$static.element), i);
}

function Choice(){
  FocusWidget.call(this, $doc.createElement('select'));
  ($clinit_DOM() , this.element).className = 'gwt-ListBox';
}

defineClass(136, 594, $intern_50, Choice);
var Lcom_lushprojects_circuitjs1_client_Choice_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Choice', 136);
function $addWidgetToVerticalPanel(this$static, w){
  var i;
  if (this$static.iFrame) {
    i = $getWidgetIndex(this$static.verticalPanel, this$static.iFrame);
    $insert_2(this$static.verticalPanel, w, i);
    $setiFrameHeight(this$static);
  }
   else 
    $add_4(this$static.verticalPanel, w);
}

function $analyzeCircuit(this$static){
  var ce, changed, cln, closure, cn, cnl, cur, fpi, g, gotGround, gotRail, gotVoltageSource, i, inodes, ivs, j, k, kn, matrixSize, n, posts, pt, sm, volt, vscount;
  if (this$static.elmList.arrayList.array.length == 0) {
    this$static.postDrawList = new Vector;
    this$static.badConnectionList = new Vector;
    return;
  }
  this$static.stopMessage = null;
  this$static.stopElm = null;
  vscount = 0;
  this$static.nodeList = new Vector;
  this$static.postCountMap = new HashMap;
  gotGround = false;
  gotRail = false;
  volt = null;
  $calculateWireClosure(this$static);
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (instanceOf(ce, 188)) {
      gotGround = true;
      break;
    }
    instanceOf(ce, 38) && (gotRail = true);
    !volt && instanceOf(ce, 41) && (volt = ce);
  }
  if (!gotGround && !!volt && !gotRail) {
    cn = new CircuitNode;
    pt = volt.getPost(0);
    $addElement(this$static.nodeList, cn);
    cln = castTo($get_0(this$static.nodeMap, pt), 123);
    cln?(cln.node = 0):$put(this$static.nodeMap, pt, new CirSim$NodeMapEntry_0(0));
  }
   else {
    cn = new CircuitNode;
    $addElement(this$static.nodeList, cn);
  }
  nodeList = new HashMap;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    inodes = ce.getInternalNodeCount();
    ivs = ce.getVoltageSourceCount();
    posts = ce.getPostCount();
    for (j = 0; j != posts; j++) {
      pt = ce.getPost(j);
      g = castTo($get_0(this$static.postCountMap, pt), 24);
      $put(this$static.postCountMap, pt, valueOf(!g?1:g.value_0 + 1));
      cln = castTo($get_0(this$static.nodeMap, pt), 123);
      if (!cln || cln.node == -1) {
        cn = new CircuitNode;
        cnl = new CircuitNodeLink;
        cnl.num = j;
        cnl.elm = ce;
        $addElement(cn.links_0, cnl);
        ce.setNode(j, this$static.nodeList.arrayList.array.length);
        cln?(cln.node = this$static.nodeList.arrayList.array.length):$put(this$static.nodeMap, pt, new CirSim$NodeMapEntry_0(this$static.nodeList.arrayList.array.length));
        $addElement(this$static.nodeList, cn);
      }
       else {
        n = cln.node;
        cnl = new CircuitNodeLink;
        cnl.num = j;
        cnl.elm = ce;
        $addElement($getCircuitNode(this$static, n).links_0, cnl);
        ce.setNode(j, n);
        n == 0 && ce.setNodeVoltage(j, 0);
      }
    }
    for (j = 0; j != inodes; j++) {
      cn = new CircuitNode;
      cn.internal = true;
      cnl = new CircuitNodeLink;
      cnl.num = j + posts;
      cnl.elm = ce;
      $addElement(cn.links_0, cnl);
      ce.setNode(cnl.num, this$static.nodeList.arrayList.array.length);
      $addElement(this$static.nodeList, cn);
    }
    vscount += ivs;
  }
  $makePostDrawList(this$static);
  if (!$calcWireInfo(this$static))
    return;
  this$static.nodeMap = null;
  this$static.voltageSources = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_CircuitElm_2_classLit, $intern_3, 4, vscount, 0, 1);
  vscount = 0;
  this$static.circuitNonLinear = false;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.nonLinear() && (this$static.circuitNonLinear = true);
    ivs = ce.getVoltageSourceCount();
    for (j = 0; j != ivs; j++) {
      this$static.voltageSources[vscount] = ce;
      ce.setVoltageSource(j, vscount++);
    }
  }
  matrixSize = this$static.nodeList.arrayList.array.length - 1 + vscount;
  this$static.circuitMatrix = initMultidimensionalArray(D_classLit, [$intern_3, $intern_57], [29, 9], 15, [matrixSize, matrixSize], 2);
  this$static.circuitRightSide = initUnidimensionalArray(D_classLit, $intern_57, 9, matrixSize, 15, 1);
  this$static.origMatrix = initMultidimensionalArray(D_classLit, [$intern_3, $intern_57], [29, 9], 15, [matrixSize, matrixSize], 2);
  this$static.origRightSide = initUnidimensionalArray(D_classLit, $intern_57, 9, matrixSize, 15, 1);
  this$static.circuitMatrixSize = this$static.circuitMatrixFullSize = matrixSize;
  this$static.circuitRowInfo = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_RowInfo_2_classLit, $intern_3, 207, matrixSize, 0, 1);
  this$static.circuitPermute = initUnidimensionalArray(I_classLit, $intern_22, 9, matrixSize, 15, 1);
  for (i = 0; i != matrixSize; i++)
    this$static.circuitRowInfo[i] = new RowInfo;
  this$static.circuitNeedsMap = false;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.stamp();
  }
  closure = initUnidimensionalArray(Z_classLit, $intern_72, 9, this$static.nodeList.arrayList.array.length, 16, 1);
  changed = true;
  closure[0] = true;
  while (changed) {
    changed = false;
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      if (instanceOf(ce, 120))
        continue;
      for (j = 0; j < ce.getConnectionNodeCount(); j++) {
        if (!closure[ce.getConnectionNode(j)]) {
          ce.hasGroundConnection(j) && (closure[ce.getConnectionNode(j)] = changed = true);
          continue;
        }
        for (k = 0; k != ce.getConnectionNodeCount(); k++) {
          if (j == k)
            continue;
          kn = ce.getConnectionNode(k);
          if (ce.getConnection(j, k) && !closure[kn]) {
            closure[kn] = true;
            changed = true;
          }
        }
      }
    }
    if (changed)
      continue;
    for (i = 0; i != this$static.nodeList.arrayList.array.length; i++)
      if (!closure[i] && !$getCircuitNode(this$static, i).internal) {
        console.log('node ' + i + ' unconnected');
        $stampResistor(this$static, 0, i, $intern_73);
        closure[i] = true;
        changed = true;
        break;
      }
  }
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (instanceOf(ce, 102)) {
      fpi = new CirSim$FindPathInfo(this$static, 1, ce, ce.nodes[1]);
      !$findPath(fpi, ce.nodes[0], 5) && !$findPath(fpi, ce.nodes[0], -1) && ce.reset_0();
    }
    if (instanceOf(ce, 146)) {
      cur = castTo(ce, 146);
      fpi = new CirSim$FindPathInfo(this$static, 1, ce, ce.nodes[1]);
      $findPath(fpi, ce.nodes[0], -1)?$stampCurrentSource_0(cur, false):$stampCurrentSource_0(cur, true);
    }
    if (instanceOf(ce, 91)) {
      cur = castTo(ce, 91);
      fpi = new CirSim$FindPathInfo(this$static, 1, ce, cur.nodes[cur.inputCount]);
      cur.hasCurrentOutput() && !$findPath(fpi, cur.nodes[1 + cur.inputCount], -1)?(cur.broken = true):(cur.broken = false);
    }
    if (instanceOf(ce, 41) && ce.getPostCount() == 2) {
      fpi = new CirSim$FindPathInfo(this$static, 2, ce, ce.nodes[1]);
      if ($findPath(fpi, ce.nodes[0], -1)) {
        $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Voltage source/wire loop with no resistance!')) , sm != null?sm:'Voltage source/wire loop with no resistance!'), ce);
        return;
      }
    }
    if (instanceOf(ce, 53)) {
      fpi = new CirSim$FindPathInfo(this$static, 3, ce, ce.nodes[1]);
      if ($findPath(fpi, ce.nodes[0], -1)) {
        console.log(ce + ' shorted');
        ce.reset_0();
      }
       else {
        fpi = new CirSim$FindPathInfo(this$static, 4, ce, ce.nodes[1]);
        if ($findPath(fpi, ce.nodes[0], -1)) {
          $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Capacitor loop with no resistance!')) , sm != null?sm:'Capacitor loop with no resistance!'), ce);
          return;
        }
      }
    }
  }
  $simplifyMatrix(this$static, matrixSize);
  if (!this$static.circuitNonLinear) {
    if (!$lu_factor(this$static.circuitMatrix, this$static.circuitMatrixSize, this$static.circuitPermute)) {
      $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Singular matrix!')) , sm != null?sm:'Singular matrix!'), null);
      return;
    }
  }
  gotVoltageSource = false;
  this$static.showResistanceInVoltageSources = true;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    instanceOf(ce, 41) && (gotVoltageSource?(this$static.showResistanceInVoltageSources = false):(gotVoltageSource = true));
  }
}

function $anySelectedButMouse(this$static){
  var i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++)
    if ($getElm(this$static, i) != this$static.mouseElm && $getElm(this$static, i).selected)
      return true;
  return false;
}

function $buildScopeMenu(this$static, t){
  var m, mi, sm, sm0, sm1, sm10, sm11, sm12, sm13, sm14, sm15, sm16, sm17, sm18, sm19, sm2, sm20, sm3, sm4, sm5, sm6, sm7, sm8, sm9;
  m = new MenuBar_0(true);
  $addItem(m, new CheckboxAlignedMenuItem((sm0 = castToString($getStringValue(localizationMap, 'Remove Scope')) , sm0 != null?sm0:'Remove Scope'), new MyCommand('scopepop', 'remove')));
  $addItem(m, new CheckboxAlignedMenuItem((sm1 = castToString($getStringValue(localizationMap, 'Speed 2x')) , sm1 != null?sm1:'Speed 2x'), new MyCommand('scopepop', 'speed2')));
  $addItem(m, new CheckboxAlignedMenuItem((sm2 = castToString($getStringValue(localizationMap, 'Speed 1/2x')) , sm2 != null?sm2:'Speed 1/2x'), new MyCommand('scopepop', 'speed1/2')));
  $addItem(m, mi = new CheckboxMenuItem_0((sm3 = castToString($getStringValue(localizationMap, 'Max Scale')) , sm3 != null?sm3:'Max Scale'), new MyCommand('scopepop', 'maxscale')));
  t?(this$static.scopeMaxScaleTransMenuItem = mi):(this$static.scopeMaxScaleMenuItem = mi);
  $addItem(m, new CheckboxAlignedMenuItem((sm4 = castToString($getStringValue(localizationMap, 'Stack')) , sm4 != null?sm4:'Stack'), new MyCommand('scopepop', 'stack')));
  $addItem(m, new CheckboxAlignedMenuItem((sm5 = castToString($getStringValue(localizationMap, 'Unstack')) , sm5 != null?sm5:'Unstack'), new MyCommand('scopepop', 'unstack')));
  $addItem(m, new CheckboxAlignedMenuItem((sm6 = castToString($getStringValue(localizationMap, 'Combine')) , sm6 != null?sm6:'Combine'), new MyCommand('scopepop', 'combine')));
  t || $addItem(m, this$static.scopeRemovePlotMenuItem = new CheckboxAlignedMenuItem((sm7 = castToString($getStringValue(localizationMap, 'Remove Plot')) , sm7 != null?sm7:'Remove Plot'), new MyCommand('scopepop', 'removeplot')));
  $addItem(m, new CheckboxAlignedMenuItem((sm8 = castToString($getStringValue(localizationMap, 'Reset')) , sm8 != null?sm8:'Reset'), new MyCommand('scopepop', 'reset')));
  if (t) {
    $addItem(m, this$static.scopeIbMenuItem = new CheckboxMenuItem_0((sm9 = castToString($getStringValue(localizationMap, 'Show Ib')) , sm9 != null?sm9:'Show Ib'), new MyCommand('scopepop', 'showib')));
    $addItem(m, this$static.scopeIcMenuItem = new CheckboxMenuItem_0((sm10 = castToString($getStringValue(localizationMap, 'Show Ic')) , sm10 != null?sm10:'Show Ic'), new MyCommand('scopepop', 'showic')));
    $addItem(m, this$static.scopeIeMenuItem = new CheckboxMenuItem_0((sm11 = castToString($getStringValue(localizationMap, 'Show Ie')) , sm11 != null?sm11:'Show Ie'), new MyCommand('scopepop', 'showie')));
    $addItem(m, this$static.scopeVbeMenuItem = new CheckboxMenuItem_0((sm12 = castToString($getStringValue(localizationMap, 'Show Vbe')) , sm12 != null?sm12:'Show Vbe'), new MyCommand('scopepop', 'showvbe')));
    $addItem(m, this$static.scopeVbcMenuItem = new CheckboxMenuItem_0((sm13 = castToString($getStringValue(localizationMap, 'Show Vbc')) , sm13 != null?sm13:'Show Vbc'), new MyCommand('scopepop', 'showvbc')));
    $addItem(m, this$static.scopeVceMenuItem = new CheckboxMenuItem_0((sm14 = castToString($getStringValue(localizationMap, 'Show Vce')) , sm14 != null?sm14:'Show Vce'), new MyCommand('scopepop', 'showvce')));
    $addItem(m, this$static.scopeVceIcMenuItem = new CheckboxMenuItem_0((sm = castToString($getStringValue(localizationMap, 'Show Vce vs Ic')) , sm != null?sm:'Show Vce vs Ic'), new MyCommand('scopepop', 'showvcevsic')));
  }
   else {
    $addItem(m, this$static.scopeVMenuItem = new CheckboxMenuItem_0((sm9 = castToString($getStringValue(localizationMap, 'Show Voltage')) , sm9 != null?sm9:'Show Voltage'), new MyCommand('scopepop', 'showvoltage')));
    $addItem(m, this$static.scopeIMenuItem = new CheckboxMenuItem_0((sm10 = castToString($getStringValue(localizationMap, 'Show Current')) , sm10 != null?sm10:'Show Current'), new MyCommand('scopepop', 'showcurrent')));
    $addItem(m, this$static.scopePowerMenuItem = new CheckboxMenuItem_0((sm11 = castToString($getStringValue(localizationMap, 'Show Power Consumed')) , sm11 != null?sm11:'Show Power Consumed'), new MyCommand('scopepop', 'showpower')));
    $addItem(m, this$static.scopeScaleMenuItem = new CheckboxMenuItem_0((sm12 = castToString($getStringValue(localizationMap, 'Show Scale')) , sm12 != null?sm12:'Show Scale'), new MyCommand('scopepop', 'showscale')));
    $addItem(m, this$static.scopeMaxMenuItem = new CheckboxMenuItem_0((sm13 = castToString($getStringValue(localizationMap, 'Show Peak Value')) , sm13 != null?sm13:'Show Peak Value'), new MyCommand('scopepop', 'showpeak')));
    $addItem(m, this$static.scopeMinMenuItem = new CheckboxMenuItem_0((sm14 = castToString($getStringValue(localizationMap, 'Show Negative Peak Value')) , sm14 != null?sm14:'Show Negative Peak Value'), new MyCommand('scopepop', 'shownegpeak')));
    $addItem(m, this$static.scopeFreqMenuItem = new CheckboxMenuItem_0((sm15 = castToString($getStringValue(localizationMap, 'Show Frequency')) , sm15 != null?sm15:'Show Frequency'), new MyCommand('scopepop', 'showfreq')));
    $addItem(m, this$static.scopeFFTMenuItem = new CheckboxMenuItem_0((sm16 = castToString($getStringValue(localizationMap, 'Show Spectrum')) , sm16 != null?sm16:'Show Spectrum'), new MyCommand('scopepop', 'showfft')));
    $addItem(m, this$static.scopeRMSMenuItem = new CheckboxMenuItem_0((sm17 = castToString($getStringValue(localizationMap, 'Show RMS Average')) , sm17 != null?sm17:'Show RMS Average'), new MyCommand('scopepop', 'showrms')));
    $addItem(m, this$static.scopeVIMenuItem = new CheckboxMenuItem_0((sm18 = castToString($getStringValue(localizationMap, 'Show V vs I')) , sm18 != null?sm18:'Show V vs I'), new MyCommand('scopepop', 'showvvsi')));
    $addItem(m, this$static.scopeXYMenuItem = new CheckboxMenuItem_0((sm19 = castToString($getStringValue(localizationMap, 'Plot X/Y')) , sm19 != null?sm19:'Plot X/Y'), new MyCommand('scopepop', 'plotxy')));
    $addItem(m, this$static.scopeSelectYMenuItem = new CheckboxAlignedMenuItem((sm20 = castToString($getStringValue(localizationMap, 'Select Y')) , sm20 != null?sm20:'Select Y'), new MyCommand('scopepop', 'selecty')));
    $addItem(m, this$static.scopeResistMenuItem = new CheckboxMenuItem_0((sm = castToString($getStringValue(localizationMap, 'Show Resistance')) , sm != null?sm:'Show Resistance'), new MyCommand('scopepop', 'showresistance')));
  }
  return m;
}

function $calcWireCurrents(this$static){
  var ce, cur, i, j, p, wi;
  for (i = 0; i != this$static.wireInfoList.arrayList.array.length; i++) {
    wi = castTo($get_3(this$static.wireInfoList, i), 157);
    cur = 0;
    p = $getPost(wi.wire, wi.post);
    for (j = 0; j != wi.neighbors.arrayList.array.length; j++) {
      ce = castTo($get_3(wi.neighbors, j), 4);
      cur += ce.getCurrentIntoPoint(p.x_0, p.y_0);
    }
    wi.post == 0?$setCurrent(wi.wire, cur):$setCurrent(wi.wire, -cur);
  }
}

function $calcWireInfo(this$static){
  var ce, cn1, cnl, i, isReady0, isReady1, j, moved, neighbors0, neighbors1, notReady, pt, sm, wi, wire;
  moved = 0;
  for (i = 0; i != this$static.wireInfoList.arrayList.array.length; i++) {
    wi = castTo($get_3(this$static.wireInfoList, i), 157);
    wire = wi.wire;
    cn1 = castTo($get_3(this$static.nodeList, wire.nodes[0]), 88);
    neighbors0 = new Vector;
    neighbors1 = new Vector;
    isReady0 = true;
    isReady1 = true;
    for (j = 0; j != cn1.links_0.arrayList.array.length; j++) {
      cnl = castTo($get_3(cn1.links_0, j), 89);
      ce = cnl.elm;
      if (ce == wire)
        continue;
      pt = cnl.elm.getPost(cnl.num);
      notReady = instanceOf(ce, 120) && !castTo(ce, 120).hasWireInfo;
      if (pt.x_0 == wire.x_0 && pt.y_0 == wire.y_0) {
        $add_8(neighbors0.arrayList, ce);
        notReady && (isReady0 = false);
      }
       else if (pt.x_0 == wire.x2 && pt.y_0 == wire.y2) {
        $add_8(neighbors1.arrayList, ce);
        notReady && (isReady1 = false);
      }
    }
    if (isReady0) {
      wi.neighbors = neighbors0;
      wi.post = 0;
      wire.hasWireInfo = true;
    }
     else if (isReady1) {
      wi.neighbors = neighbors1;
      wi.post = 1;
      wire.hasWireInfo = true;
    }
     else {
      $add_11(this$static.wireInfoList, castTo($remove_14(this$static.wireInfoList, i--), 157));
      ++moved;
      if (moved > this$static.wireInfoList.arrayList.array.length * 2) {
        $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'wire loop detected')) , sm != null?sm:'wire loop detected'), wire);
        return false;
      }
    }
  }
  return true;
}

function $calculateWireClosure(this$static){
  var ce, cn, cn2, entry, entry$iterator, i, we;
  this$static.nodeMap = new HashMap;
  this$static.wireInfoList = new Vector;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (!instanceOf(ce, 120))
      continue;
    we = castTo(ce, 120);
    we.hasWireInfo = false;
    $add_11(this$static.wireInfoList, new CirSim$WireInfo(we));
    cn = castTo($get_0(this$static.nodeMap, ce.getPost(0)), 123);
    cn2 = castTo($get_0(this$static.nodeMap, ce.getPost(1)), 123);
    if (!!cn && !!cn2) {
      for (entry$iterator = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(this$static.nodeMap)).this$01); entry$iterator.hasNext;) {
        entry = $next_1(entry$iterator);
        maskUndefined(entry.getValue()) === maskUndefined(cn2) && entry.setValue(cn);
      }
      continue;
    }
    if (cn) {
      $put(this$static.nodeMap, ce.getPost(1), cn);
      continue;
    }
    if (cn2) {
      $put(this$static.nodeMap, ce.getPost(0), cn2);
      continue;
    }
    cn = new CirSim$NodeMapEntry;
    $put(this$static.nodeMap, ce.getPost(0), cn);
    $put(this$static.nodeMap, ce.getPost(1), cn);
  }
}

function $canDelayWireProcessing(this$static){
  var i;
  for (i = 0; i != this$static.scopeCount; i++)
    if ($viewingWire(this$static.scopes[i]))
      return false;
  return true;
}

function $centreCircuit(this$static){
  var bounds, scale;
  bounds = $getCircuitBounds(this$static);
  scale = 1;
  !!bounds && (scale = $wnd.Math.min(this$static.circuitArea.width_0 / (bounds.width_0 + 140), this$static.circuitArea.height_0 / (bounds.height_0 + 100)));
  scale = $wnd.Math.min(scale, 1.5);
  this$static.transform_0[0] = this$static.transform_0[3] = scale;
  this$static.transform_0[1] = this$static.transform_0[2] = this$static.transform_0[4] = this$static.transform_0[5] = 0;
  if (bounds) {
    this$static.transform_0[4] = (this$static.circuitArea.width_0 - bounds.width_0 * scale) / 2 - bounds.x_0 * scale;
    this$static.transform_0[5] = (this$static.circuitArea.height_0 - bounds.height_0 * scale) / 2 - bounds.y_0 * scale;
  }
}

function $clearSelection(this$static){
  var ce, i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.selected = false;
  }
}

function $combineAll(this$static){
  var i;
  for (i = this$static.scopeCount - 2; i >= 0; i--) {
    $combine(this$static.scopes[i], this$static.scopes[i + 1]);
    $setElm(this$static.scopes[i + 1], null);
  }
}

function $combineScope(this$static, s){
  if (s == 0) {
    if (this$static.scopeCount < 2)
      return;
    s = 1;
  }
  $combine(this$static.scopes[s - 1], this$static.scopes[s]);
  $setElm(this$static.scopes[s], null);
}

function $composeMainMenu(this$static, mainMenuBar){
  var achipMenuBar, activeBlocMenuBar, activeMenuBar, chipMenuBar, gateMenuBar, inputMenuBar, mi, otherMenuBar, outputMenuBar, passMenuBar, sm, sm0, sm1, sm10, sm100, sm101, sm102, sm103, sm104, sm105, sm106, sm107, sm108, sm109, sm11, sm110, sm111, sm112, sm113, sm114, sm115, sm116, sm117, sm12, sm13, sm14, sm15, sm16, sm17, sm18, sm19, sm2, sm20, sm21, sm22, sm23, sm24, sm25, sm26, sm27, sm28, sm29, sm3, sm30, sm31, sm32, sm33, sm34, sm35, sm36, sm37, sm38, sm39, sm4, sm40, sm41, sm42, sm43, sm44, sm45, sm46, sm47, sm48, sm49, sm5, sm50, sm51, sm52, sm53, sm54, sm55, sm56, sm57, sm58, sm59, sm6, sm60, sm61, sm62, sm63, sm64, sm65, sm66, sm67, sm68, sm69, sm7, sm70, sm71, sm72, sm73, sm74, sm75, sm76, sm77, sm78, sm79, sm8, sm80, sm81, sm82, sm83, sm84, sm85, sm86, sm87, sm88, sm89, sm9, sm90, sm91, sm92, sm93, sm94, sm95, sm96, sm97, sm98, sm99;
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm0 = castToString($getStringValue(localizationMap, 'Add Wire')) , sm0 != null?sm0:'Add Wire'), 'WireElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm1 = castToString($getStringValue(localizationMap, 'Add Resistor')) , sm1 != null?sm1:'Add Resistor'), 'ResistorElm'));
  passMenuBar = new MenuBar_0(true);
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm2 = castToString($getStringValue(localizationMap, 'Add Capacitor')) , sm2 != null?sm2:'Add Capacitor'), 'CapacitorElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm3 = castToString($getStringValue(localizationMap, 'Add Capacitor (polarized)')) , sm3 != null?sm3:'Add Capacitor (polarized)'), 'PolarCapacitorElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm4 = castToString($getStringValue(localizationMap, 'Add Inductor')) , sm4 != null?sm4:'Add Inductor'), 'InductorElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm5 = castToString($getStringValue(localizationMap, 'Add Switch')) , sm5 != null?sm5:'Add Switch'), 'SwitchElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm6 = castToString($getStringValue(localizationMap, 'Add Push Switch')) , sm6 != null?sm6:'Add Push Switch'), 'PushSwitchElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm7 = castToString($getStringValue(localizationMap, 'Add SPDT Switch')) , sm7 != null?sm7:'Add SPDT Switch'), 'Switch2Elm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm8 = castToString($getStringValue(localizationMap, 'Add Potentiometer')) , sm8 != null?sm8:'Add Potentiometer'), 'PotElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm9 = castToString($getStringValue(localizationMap, 'Add Transformer')) , sm9 != null?sm9:'Add Transformer'), 'TransformerElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm10 = castToString($getStringValue(localizationMap, 'Add Tapped Transformer')) , sm10 != null?sm10:'Add Tapped Transformer'), 'TappedTransformerElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm11 = castToString($getStringValue(localizationMap, 'Add Transmission Line')) , sm11 != null?sm11:'Add Transmission Line'), 'TransLineElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm12 = castToString($getStringValue(localizationMap, 'Add Relay')) , sm12 != null?sm12:'Add Relay'), 'RelayElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm13 = castToString($getStringValue(localizationMap, 'Add Memristor')) , sm13 != null?sm13:'Add Memristor'), 'MemristorElm'));
  $addItem(passMenuBar, $getClassCheckItem(this$static, (sm14 = castToString($getStringValue(localizationMap, 'Add Spark Gap')) , sm14 != null?sm14:'Add Spark Gap'), 'SparkGapElm'));
  $addItem(mainMenuBar, new MenuItem_0(($clinit_SafeHtmlUtils() , new SafeHtmlString(checkBoxHtml + (sm15 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Passive Components')) , sm15 != null?sm15:'&nbsp;<\/div>Passive Components'))), passMenuBar));
  inputMenuBar = new MenuBar_0(true);
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm16 = castToString($getStringValue(localizationMap, 'Add Ground')) , sm16 != null?sm16:'Add Ground'), 'GroundElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm17 = castToString($getStringValue(localizationMap, 'Add Voltage Source (2-terminal)')) , sm17 != null?sm17:'Add Voltage Source (2-terminal)'), 'DCVoltageElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm18 = castToString($getStringValue(localizationMap, 'Add A/C Voltage Source (2-terminal)')) , sm18 != null?sm18:'Add A/C Voltage Source (2-terminal)'), 'ACVoltageElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm19 = castToString($getStringValue(localizationMap, 'Add Voltage Source (1-terminal)')) , sm19 != null?sm19:'Add Voltage Source (1-terminal)'), 'RailElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm20 = castToString($getStringValue(localizationMap, 'Add A/C Voltage Source (1-terminal)')) , sm20 != null?sm20:'Add A/C Voltage Source (1-terminal)'), 'ACRailElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm21 = castToString($getStringValue(localizationMap, 'Add Square Wave Source (1-terminal)')) , sm21 != null?sm21:'Add Square Wave Source (1-terminal)'), 'SquareRailElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm22 = castToString($getStringValue(localizationMap, 'Add Clock')) , sm22 != null?sm22:'Add Clock'), 'ClockElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm23 = castToString($getStringValue(localizationMap, 'Add A/C Sweep')) , sm23 != null?sm23:'Add A/C Sweep'), 'SweepElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm24 = castToString($getStringValue(localizationMap, 'Add Variable Voltage')) , sm24 != null?sm24:'Add Variable Voltage'), 'VarRailElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm25 = castToString($getStringValue(localizationMap, 'Add Antenna')) , sm25 != null?sm25:'Add Antenna'), 'AntennaElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm26 = castToString($getStringValue(localizationMap, 'Add AM Source')) , sm26 != null?sm26:'Add AM Source'), 'AMElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm27 = castToString($getStringValue(localizationMap, 'Add FM Source')) , sm27 != null?sm27:'Add FM Source'), 'FMElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm28 = castToString($getStringValue(localizationMap, 'Add Current Source')) , sm28 != null?sm28:'Add Current Source'), 'CurrentElm'));
  $addItem(inputMenuBar, $getClassCheckItem(this$static, (sm29 = castToString($getStringValue(localizationMap, 'Add Noise Generator')) , sm29 != null?sm29:'Add Noise Generator'), 'NoiseElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm30 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Inputs and Sources')) , sm30 != null?sm30:'&nbsp;<\/div>Inputs and Sources')), inputMenuBar));
  outputMenuBar = new MenuBar_0(true);
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm31 = castToString($getStringValue(localizationMap, 'Add Analog Output')) , sm31 != null?sm31:'Add Analog Output'), 'OutputElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm32 = castToString($getStringValue(localizationMap, 'Add LED')) , sm32 != null?sm32:'Add LED'), 'LEDElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm33 = castToString($getStringValue(localizationMap, 'Add Lamp')) , sm33 != null?sm33:'Add Lamp'), 'LampElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm34 = castToString($getStringValue(localizationMap, 'Add Text')) , sm34 != null?sm34:'Add Text'), 'TextElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm35 = castToString($getStringValue(localizationMap, 'Add Box')) , sm35 != null?sm35:'Add Box'), 'BoxElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm36 = castToString($getStringValue(localizationMap, 'Add Voltmeter/Scobe Probe')) , sm36 != null?sm36:'Add Voltmeter/Scobe Probe'), 'ProbeElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm37 = castToString($getStringValue(localizationMap, 'Add Labeled Node')) , sm37 != null?sm37:'Add Labeled Node'), 'LabeledNodeElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm38 = castToString($getStringValue(localizationMap, 'Add Test Point')) , sm38 != null?sm38:'Add Test Point'), 'TestPointElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm39 = castToString($getStringValue(localizationMap, 'Add Ammeter')) , sm39 != null?sm39:'Add Ammeter'), 'AmmeterElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm40 = castToString($getStringValue(localizationMap, 'Add Data Export')) , sm40 != null?sm40:'Add Data Export'), 'DataRecorderElm'));
  $addItem(outputMenuBar, $getClassCheckItem(this$static, (sm41 = castToString($getStringValue(localizationMap, 'Add Audio Output')) , sm41 != null?sm41:'Add Audio Output'), 'AudioOutputElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm42 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Outputs and Labels')) , sm42 != null?sm42:'&nbsp;<\/div>Outputs and Labels')), outputMenuBar));
  activeMenuBar = new MenuBar_0(true);
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm43 = castToString($getStringValue(localizationMap, 'Add Diode')) , sm43 != null?sm43:'Add Diode'), 'DiodeElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm44 = castToString($getStringValue(localizationMap, 'Add Zener Diode')) , sm44 != null?sm44:'Add Zener Diode'), 'ZenerElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm45 = castToString($getStringValue(localizationMap, 'Add Transistor (bipolar, NPN)')) , sm45 != null?sm45:'Add Transistor (bipolar, NPN)'), 'NTransistorElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm46 = castToString($getStringValue(localizationMap, 'Add Transistor (bipolar, PNP)')) , sm46 != null?sm46:'Add Transistor (bipolar, PNP)'), 'PTransistorElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm47 = castToString($getStringValue(localizationMap, 'Add MOSFET (N-Channel)')) , sm47 != null?sm47:'Add MOSFET (N-Channel)'), 'NMosfetElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm48 = castToString($getStringValue(localizationMap, 'Add MOSFET (P-Channel)')) , sm48 != null?sm48:'Add MOSFET (P-Channel)'), 'PMosfetElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm49 = castToString($getStringValue(localizationMap, 'Add JFET (N-Channel)')) , sm49 != null?sm49:'Add JFET (N-Channel)'), 'NJfetElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm50 = castToString($getStringValue(localizationMap, 'Add JFET (P-Channel)')) , sm50 != null?sm50:'Add JFET (P-Channel)'), 'PJfetElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm51 = castToString($getStringValue(localizationMap, 'Add SCR')) , sm51 != null?sm51:'Add SCR'), 'SCRElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm52 = castToString($getStringValue(localizationMap, 'Add Darlington Pair (NPN)')) , sm52 != null?sm52:'Add Darlington Pair (NPN)'), 'NDarlingtonElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm53 = castToString($getStringValue(localizationMap, 'Add Darlington Pair (PNP)')) , sm53 != null?sm53:'Add Darlington Pair (PNP)'), 'PDarlingtonElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm54 = castToString($getStringValue(localizationMap, 'Add Tunnel Diode')) , sm54 != null?sm54:'Add Tunnel Diode'), 'TunnelDiodeElm'));
  $addItem(activeMenuBar, $getClassCheckItem(this$static, (sm55 = castToString($getStringValue(localizationMap, 'Add Triode')) , sm55 != null?sm55:'Add Triode'), 'TriodeElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm56 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Active Components')) , sm56 != null?sm56:'&nbsp;<\/div>Active Components')), activeMenuBar));
  activeBlocMenuBar = new MenuBar_0(true);
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm57 = castToString($getStringValue(localizationMap, 'Add Op Amp (- on top)')) , sm57 != null?sm57:'Add Op Amp (- on top)'), 'OpAmpElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm58 = castToString($getStringValue(localizationMap, 'Add Op Amp (+ on top)')) , sm58 != null?sm58:'Add Op Amp (+ on top)'), 'OpAmpSwapElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm59 = castToString($getStringValue(localizationMap, 'Add Analog Switch (SPST)')) , sm59 != null?sm59:'Add Analog Switch (SPST)'), 'AnalogSwitchElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm60 = castToString($getStringValue(localizationMap, 'Add Analog Switch (SPDT)')) , sm60 != null?sm60:'Add Analog Switch (SPDT)'), 'AnalogSwitch2Elm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm61 = castToString($getStringValue(localizationMap, 'Add Tristate Buffer')) , sm61 != null?sm61:'Add Tristate Buffer'), 'TriStateElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm62 = castToString($getStringValue(localizationMap, 'Add Schmitt Trigger')) , sm62 != null?sm62:'Add Schmitt Trigger'), 'SchmittElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm63 = castToString($getStringValue(localizationMap, 'Add Schmitt Trigger (Inverting)')) , sm63 != null?sm63:'Add Schmitt Trigger (Inverting)'), 'InvertingSchmittElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm64 = castToString($getStringValue(localizationMap, 'Add CCII+')) , sm64 != null?sm64:'Add CCII+'), 'CC2Elm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm65 = castToString($getStringValue(localizationMap, 'Add CCII-')) , sm65 != null?sm65:'Add CCII-'), 'CC2NegElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm66 = castToString($getStringValue(localizationMap, 'Add Comparator (Hi-Z/GND output)')) , sm66 != null?sm66:'Add Comparator (Hi-Z/GND output)'), 'ComparatorElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm67 = castToString($getStringValue(localizationMap, 'Add OTA (LM13700 style)')) , sm67 != null?sm67:'Add OTA (LM13700 style)'), 'OTAElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm68 = castToString($getStringValue(localizationMap, 'Add Voltage-Controlled Voltage Source')) , sm68 != null?sm68:'Add Voltage-Controlled Voltage Source'), 'VCVSElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm69 = castToString($getStringValue(localizationMap, 'Add Voltage-Controlled Current Source')) , sm69 != null?sm69:'Add Voltage-Controlled Current Source'), 'VCCSElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm70 = castToString($getStringValue(localizationMap, 'Add Current-Controlled Voltage Source')) , sm70 != null?sm70:'Add Current-Controlled Voltage Source'), 'CCVSElm'));
  $addItem(activeBlocMenuBar, $getClassCheckItem(this$static, (sm71 = castToString($getStringValue(localizationMap, 'Add Current-Controlled Current Source')) , sm71 != null?sm71:'Add Current-Controlled Current Source'), 'CCCSElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm72 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Active Building Blocks')) , sm72 != null?sm72:'&nbsp;<\/div>Active Building Blocks')), activeBlocMenuBar));
  gateMenuBar = new MenuBar_0(true);
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm73 = castToString($getStringValue(localizationMap, 'Add Logic Input')) , sm73 != null?sm73:'Add Logic Input'), 'LogicInputElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm74 = castToString($getStringValue(localizationMap, 'Add Logic Input2')) , sm74 != null?sm74:'Add Logic Input2'), 'LogicInputElm2'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm75 = castToString($getStringValue(localizationMap, 'Add Logic Output')) , sm75 != null?sm75:'Add Logic Output'), 'LogicOutputElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm76 = castToString($getStringValue(localizationMap, 'Add Inverter')) , sm76 != null?sm76:'Add Inverter'), 'InverterElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm77 = castToString($getStringValue(localizationMap, 'Add NAND Gate')) , sm77 != null?sm77:'Add NAND Gate'), 'NandGateElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm78 = castToString($getStringValue(localizationMap, 'Add NOR Gate')) , sm78 != null?sm78:'Add NOR Gate'), 'NorGateElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm79 = castToString($getStringValue(localizationMap, 'Add AND Gate')) , sm79 != null?sm79:'Add AND Gate'), 'AndGateElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm80 = castToString($getStringValue(localizationMap, 'Add OR Gate')) , sm80 != null?sm80:'Add OR Gate'), 'OrGateElm'));
  $addItem(gateMenuBar, $getClassCheckItem(this$static, (sm81 = castToString($getStringValue(localizationMap, 'Add XOR Gate')) , sm81 != null?sm81:'Add XOR Gate'), 'XorGateElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm82 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Logic Gates, Input and Output')) , sm82 != null?sm82:'&nbsp;<\/div>Logic Gates, Input and Output')), gateMenuBar));
  chipMenuBar = new MenuBar_0(true);
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm83 = castToString($getStringValue(localizationMap, 'Add D Flip-Flop')) , sm83 != null?sm83:'Add D Flip-Flop'), 'DFlipFlopElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm84 = castToString($getStringValue(localizationMap, 'Add JK Flip-Flop')) , sm84 != null?sm84:'Add JK Flip-Flop'), 'JKFlipFlopElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm85 = castToString($getStringValue(localizationMap, 'Add T Flip-Flop')) , sm85 != null?sm85:'Add T Flip-Flop'), 'TFlipFlopElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm86 = castToString($getStringValue(localizationMap, 'Add 7 Segment LED')) , sm86 != null?sm86:'Add 7 Segment LED'), 'SevenSegElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm87 = castToString($getStringValue(localizationMap, 'Add 7 Segment Decoder')) , sm87 != null?sm87:'Add 7 Segment Decoder'), 'SevenSegDecoderElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm88 = castToString($getStringValue(localizationMap, 'Add Multiplexer')) , sm88 != null?sm88:'Add Multiplexer'), 'MultiplexerElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm89 = castToString($getStringValue(localizationMap, 'Add Demultiplexer')) , sm89 != null?sm89:'Add Demultiplexer'), 'DeMultiplexerElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm90 = castToString($getStringValue(localizationMap, 'Add SIPO shift register')) , sm90 != null?sm90:'Add SIPO shift register'), 'SipoShiftElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm91 = castToString($getStringValue(localizationMap, 'Add PISO shift register')) , sm91 != null?sm91:'Add PISO shift register'), 'PisoShiftElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm92 = castToString($getStringValue(localizationMap, 'Add Counter')) , sm92 != null?sm92:'Add Counter'), 'CounterElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm93 = castToString($getStringValue(localizationMap, 'Add Decade Counter')) , sm93 != null?sm93:'Add Decade Counter'), 'DecadeElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm94 = castToString($getStringValue(localizationMap, 'Add Latch')) , sm94 != null?sm94:'Add Latch'), 'LatchElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm95 = castToString($getStringValue(localizationMap, 'Add Sequence generator')) , sm95 != null?sm95:'Add Sequence generator'), 'SeqGenElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm96 = castToString($getStringValue(localizationMap, 'Add Full Adder')) , sm96 != null?sm96:'Add Full Adder'), 'FullAdderElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm97 = castToString($getStringValue(localizationMap, 'Add Half Adder')) , sm97 != null?sm97:'Add Half Adder'), 'HalfAdderElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm98 = castToString($getStringValue(localizationMap, 'Add Custom Logic')) , sm98 != null?sm98:'Add Custom Logic'), 'UserDefinedLogicElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm99 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Digital Chips')) , sm99 != null?sm99:'&nbsp;<\/div>Digital Chips')), chipMenuBar));
  achipMenuBar = new MenuBar_0(true);
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm100 = castToString($getStringValue(localizationMap, 'Add 555 Timer')) , sm100 != null?sm100:'Add 555 Timer'), 'TimerElm'));
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm101 = castToString($getStringValue(localizationMap, 'Add Phase Comparator')) , sm101 != null?sm101:'Add Phase Comparator'), 'PhaseCompElm'));
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm102 = castToString($getStringValue(localizationMap, 'Add DAC')) , sm102 != null?sm102:'Add DAC'), 'DACElm'));
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm103 = castToString($getStringValue(localizationMap, 'Add ADC')) , sm103 != null?sm103:'Add ADC'), 'ADCElm'));
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm104 = castToString($getStringValue(localizationMap, 'Add VCO')) , sm104 != null?sm104:'Add VCO'), 'VCOElm'));
  $addItem(achipMenuBar, $getClassCheckItem(this$static, (sm105 = castToString($getStringValue(localizationMap, 'Add Monostable')) , sm105 != null?sm105:'Add Monostable'), 'MonostableElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm106 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Analog and Hybrid Chips')) , sm106 != null?sm106:'&nbsp;<\/div>Analog and Hybrid Chips')), achipMenuBar));
  otherMenuBar = new MenuBar_0(true);
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm107 = castToString($getStringValue(localizationMap, 'Drag All')) , sm107 != null?sm107:'Drag All'), 'DragAll'));
  $addShortcut(mi, (sm108 = castToString($getStringValue(localizationMap, '(Alt-drag)')) , sm108 != null?sm108:'(Alt-drag)'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm109 = castToString($getStringValue(localizationMap, 'Drag Row')) , sm109 != null?sm109:'Drag Row'), 'DragRow'));
  $addShortcut(mi, (sm110 = castToString($getStringValue(localizationMap, '(A-S-drag)')) , sm110 != null?sm110:'(A-S-drag)'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm111 = castToString($getStringValue(localizationMap, 'Drag Column')) , sm111 != null?sm111:'Drag Column'), 'DragColumn'));
  $addShortcut(mi, this$static.isMac?(sm112 = castToString($getStringValue(localizationMap, '(A-Cmd-drag)')) , sm112 != null?sm112:'(A-Cmd-drag)'):(sm113 = castToString($getStringValue(localizationMap, '(A-M-drag)')) , sm113 != null?sm113:'(A-M-drag)'));
  $addItem(otherMenuBar, $getClassCheckItem(this$static, (sm114 = castToString($getStringValue(localizationMap, 'Drag Selected')) , sm114 != null?sm114:'Drag Selected'), 'DragSelected'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm115 = castToString($getStringValue(localizationMap, 'Drag Post')) , sm115 != null?sm115:'Drag Post'), 'DragPost'));
  $addShortcut(mi, '(' + this$static.ctrlMetaKey + '-drag)');
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm116 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Drag')) , sm116 != null?sm116:'&nbsp;<\/div>Drag')), otherMenuBar));
  $addItem(mainMenuBar, mi = $getClassCheckItem(this$static, (sm117 = castToString($getStringValue(localizationMap, 'Select/Drag Sel')) , sm117 != null?sm117:'Select/Drag Sel'), 'Select'));
  $addShortcut(mi, (sm = castToString($getStringValue(localizationMap, '(space or Shift-drag)')) , sm != null?sm:'(space or Shift-drag)'));
}

function $composeOACMenu(this$static, mainMenuBar){
  var ariMenuBar, chipMenuBar, menMenuBar, sm, sm0, sm1, sm10, sm11, sm12, sm13, sm14, sm15, sm16, sm17, sm18, sm19, sm2, sm20, sm21, sm22, sm23, sm24, sm25, sm26, sm27, sm28, sm29, sm3, sm30, sm31, sm32, sm33, sm34, sm35, sm4, sm5, sm6, sm7, sm8, sm9;
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm0 = castToString($getStringValue(localizationMap, 'Adicionar Fio')) , sm0 != null?sm0:'Adicionar Fio'), 'WireElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm1 = castToString($getStringValue(localizationMap, 'Adicionar Texto')) , sm1 != null?sm1:'Adicionar Texto'), 'TextElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm2 = castToString($getStringValue(localizationMap, 'Adicionar Clock')) , sm2 != null?sm2:'Adicionar Clock'), 'ClockElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm3 = castToString($getStringValue(localizationMap, 'Adicionar Entrada L\xF3gica')) , sm3 != null?sm3:'Adicionar Entrada L\xF3gica'), 'LogicInputElm2'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm4 = castToString($getStringValue(localizationMap, 'Adicionar Sa\xEDda L\xF3gica')) , sm4 != null?sm4:'Adicionar Sa\xEDda L\xF3gica'), 'LogicOutputElm2'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm5 = castToString($getStringValue(localizationMap, 'Adicionar Inversor')) , sm5 != null?sm5:'Adicionar Inversor'), 'InverterElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm6 = castToString($getStringValue(localizationMap, 'Adicionar porta AND')) , sm6 != null?sm6:'Adicionar porta AND'), 'AndGateElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm7 = castToString($getStringValue(localizationMap, 'Adicionar porta OR')) , sm7 != null?sm7:'Adicionar porta OR'), 'OrGateElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm8 = castToString($getStringValue(localizationMap, 'Adicionar porta NAND')) , sm8 != null?sm8:'Adicionar porta NAND'), 'NandGateElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm9 = castToString($getStringValue(localizationMap, 'Adicionar porta NOR')) , sm9 != null?sm9:'Adicionar porta NOR'), 'NorGateElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm10 = castToString($getStringValue(localizationMap, 'Adicionar porta XOR')) , sm10 != null?sm10:'Adicionar porta XOR'), 'XorGateElm'));
  $addItem(mainMenuBar, $getClassCheckItem(this$static, (sm11 = castToString($getStringValue(localizationMap, 'Adicionar Circuito L\xF3gico Personalizado')) , sm11 != null?sm11:'Adicionar Circuito L\xF3gico Personalizado'), 'UserDefinedLogicElm'));
  menMenuBar = new MenuBar_0(true);
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm12 = castToString($getStringValue(localizationMap, 'Adicionar Latch')) , sm12 != null?sm12:'Adicionar Latch'), 'LatchElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm13 = castToString($getStringValue(localizationMap, 'Adicionar Flip-Flop Tipo D')) , sm13 != null?sm13:'Adicionar Flip-Flop Tipo D'), 'DFlipFlopElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm14 = castToString($getStringValue(localizationMap, 'Adicionar Flip-Flop Tipo JK')) , sm14 != null?sm14:'Adicionar Flip-Flop Tipo JK'), 'JKFlipFlopElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm15 = castToString($getStringValue(localizationMap, 'Adicionar Flip-Flop Tipo T')) , sm15 != null?sm15:'Adicionar Flip-Flop Tipo T'), 'TFlipFlopElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm16 = castToString($getStringValue(localizationMap, 'Adicionar Contador')) , sm16 != null?sm16:'Adicionar Contador'), 'CounterElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm17 = castToString($getStringValue(localizationMap, 'Adicionar Contador de D\xE9cada')) , sm17 != null?sm17:'Adicionar Contador de D\xE9cada'), 'DecadeElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm18 = castToString($getStringValue(localizationMap, 'Adicionar Registrador de deslocamento SIPO')) , sm18 != null?sm18:'Adicionar Registrador de deslocamento SIPO'), 'SipoShiftElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm19 = castToString($getStringValue(localizationMap, 'Adicionar Registrador de deslocamento PISO')) , sm19 != null?sm19:'Adicionar Registrador de deslocamento PISO'), 'PisoShiftElm'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm20 = castToString($getStringValue(localizationMap, 'Adicionar Registrador de 4 ou 8 Bits')) , sm20 != null?sm20:'Adicionar Registrador de 4 ou 8 Bits'), 'Registrador'));
  $addItem(menMenuBar, $getClassCheckItem(this$static, (sm21 = castToString($getStringValue(localizationMap, 'Adicionar Memoria de 256 bytes')) , sm21 != null?sm21:'Adicionar Memoria de 256 bytes'), 'Memoria'));
  $addItem(mainMenuBar, new MenuItem_0(($clinit_SafeHtmlUtils() , new SafeHtmlString(checkBoxHtml + (sm22 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Circuitos com Memoria')) , sm22 != null?sm22:'&nbsp;<\/div>Circuitos com Memoria'))), menMenuBar));
  ariMenuBar = new MenuBar_0(true);
  $addItem(ariMenuBar, $getClassCheckItem(this$static, (sm23 = castToString($getStringValue(localizationMap, 'Adicionar Somador Completo')) , sm23 != null?sm23:'Adicionar Somador Completo'), 'FullAdderElm'));
  $addItem(ariMenuBar, $getClassCheckItem(this$static, (sm24 = castToString($getStringValue(localizationMap, 'Adicionar Somador Incompleto')) , sm24 != null?sm24:'Adicionar Somador Incompleto'), 'HalfAdderElm'));
  $addItem(ariMenuBar, $getClassCheckItem(this$static, (sm25 = castToString($getStringValue(localizationMap, 'Adicionar Complemento de 1 de 8 bits')) , sm25 != null?sm25:'Adicionar Complemento de 1 de 8 bits'), 'Complemento1'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm26 = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Circuitos Aritim\xE9ticos')) , sm26 != null?sm26:'&nbsp;<\/div>Circuitos Aritim\xE9ticos')), ariMenuBar));
  chipMenuBar = new MenuBar_0(true);
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm27 = castToString($getStringValue(localizationMap, 'Adicionar LED de 7 Segmentos')) , sm27 != null?sm27:'Adicionar LED de 7 Segmentos'), 'SevenSegElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm28 = castToString($getStringValue(localizationMap, 'Adicionar Decodificador de 7 Segmentos')) , sm28 != null?sm28:'Adicionar Decodificador de 7 Segmentos'), 'SevenSegDecoderElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm29 = castToString($getStringValue(localizationMap, 'Adicionar Multiplexador')) , sm29 != null?sm29:'Adicionar Multiplexador'), 'MultiplexerElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm30 = castToString($getStringValue(localizationMap, 'Adicionar Multiplexador de 8 bits')) , sm30 != null?sm30:'Adicionar Multiplexador de 8 bits'), 'MultiplexerElm8'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm31 = castToString($getStringValue(localizationMap, 'Adicionar Demultiplexador')) , sm31 != null?sm31:'Adicionar Demultiplexador'), 'DeMultiplexerElm'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm32 = castToString($getStringValue(localizationMap, 'Adicionar Demultiplexador de 8 bits')) , sm32 != null?sm32:'Adicionar Demultiplexador de 8 bits'), 'DeMultiplexerElm8'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm33 = castToString($getStringValue(localizationMap, 'Adicionar Jointer de 8 Bits')) , sm33 != null?sm33:'Adicionar Jointer de 8 Bits'), 'Jointer'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm34 = castToString($getStringValue(localizationMap, 'Adicionar Spliter de 8 Bits')) , sm34 != null?sm34:'Adicionar Spliter de 8 Bits'), 'Spliter'));
  $addItem(chipMenuBar, $getClassCheckItem(this$static, (sm35 = castToString($getStringValue(localizationMap, 'Adicionar Gerador de Sequencia')) , sm35 != null?sm35:'Adicionar Gerador de Sequencia'), 'SeqGenElm'));
  $addItem(mainMenuBar, new MenuItem_0(new SafeHtmlString(checkBoxHtml + (sm = castToString($getStringValue(localizationMap, '&nbsp;<\/div>Outros')) , sm != null?sm:'&nbsp;<\/div>Outros')), chipMenuBar));
}

function $createNewLoadFile(this$static){
  var idx, newlf;
  idx = $getWidgetIndex(this$static.verticalPanel, this$static.loadFileInput);
  newlf = new LoadFile(this$static);
  $insert_2(this$static.verticalPanel, newlf, idx);
  $remove(this$static.verticalPanel, idx + 1);
  this$static.loadFileInput = newlf;
}

function $dialogIsShowing(this$static){
  if (!!editDialog_0 && editDialog_0.showing)
    return true;
  if (!!customLogicEditDialog && customLogicEditDialog.showing)
    return true;
  if (!!exportAsUrlDialog && exportAsUrlDialog.showing)
    return true;
  if (!!exportAsTextDialog && exportAsTextDialog.showing)
    return true;
  if (!!exportAsLocalFileDialog && exportAsLocalFileDialog.showing)
    return true;
  if (!!this$static.contextPanel && this$static.contextPanel.showing)
    return true;
  if (!!scrollValuePopup && scrollValuePopup.showing)
    return true;
  if (!!aboutBox && aboutBox.showing)
    return true;
  if (!!importFromTextDialog && importFromTextDialog.showing)
    return true;
  if (!!importFromDropboxDialog && importFromDropboxDialog.showing)
    return true;
  return false;
}

function $doCopy(this$static){
  var ce, clearSel, i;
  this$static.clipboard = '';
  clearSel = !!this$static.menuElm && !this$static.menuElm.selected;
  $setMenuSelection(this$static);
  for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
    ce = $getElm(this$static, i);
    ce.selected && (this$static.clipboard += ce.dump_0() + '\n');
  }
  clearSel && $clearSelection(this$static);
  $writeClipboardToStorage(this$static);
  (this$static.clipboard == null || this$static.clipboard.length == 0) && $readClipboardFromStorage(this$static);
  $setEnabled(this$static.pasteItem, this$static.clipboard != null && this$static.clipboard.length > 0);
}

function $doCut(this$static){
  var ce, i;
  $pushUndo(this$static);
  $setMenuSelection(this$static);
  this$static.clipboard = '';
  for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
    ce = $getElm(this$static, i);
    if (ce.selected) {
      this$static.clipboard += ce.dump_0() + '\n';
      ce.delete_0();
      $remove_14(this$static.elmList, i);
    }
  }
  $writeClipboardToStorage(this$static);
  (this$static.clipboard == null || this$static.clipboard.length == 0) && $readClipboardFromStorage(this$static);
  $setEnabled(this$static.pasteItem, this$static.clipboard != null && this$static.clipboard.length > 0);
  this$static.analyzeFlag = true;
}

function $doDelete(this$static){
  var ce, hasDeleted, i;
  $pushUndo(this$static);
  $setMenuSelection(this$static);
  hasDeleted = false;
  for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
    ce = $getElm(this$static, i);
    if (ce.selected) {
      ce.delete_0();
      $removeElementAt(this$static.elmList, i);
      hasDeleted = true;
    }
  }
  if (!hasDeleted) {
    for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
      ce = $getElm(this$static, i);
      if (ce == this$static.mouseElm) {
        ce.delete_0();
        $removeElementAt(this$static.elmList, i);
        hasDeleted = true;
        $setMouseElm(this$static, null);
        break;
      }
    }
  }
  hasDeleted && (this$static.analyzeFlag = true);
}

function $doDuplicate(this$static){
  var ce, i, s;
  s = '';
  $setMenuSelection(this$static);
  for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
    ce = $getElm(this$static, i);
    ce.selected && (s += ce.dump_0() + '\n');
  }
  $doPaste(this$static, s);
}

function $doEdit(this$static, eable){
  $clearSelection(this$static);
  $pushUndo(this$static);
  if (editDialog_0) {
    $setVisible_0(editDialog_0);
    editDialog_0 = null;
  }
  editDialog_0 = new EditDialog(eable, this$static);
  $show_0(editDialog_0);
}

function $doMainMenuChecks(this$static){
  var c, i;
  c = this$static.mainMenuItems.arrayList.array.length;
  for (i = 0; i < c; i++)
    $setState_0(castTo($get_3(this$static.mainMenuItems, i), 33), maskUndefined($get_3(this$static.mainMenuItemNames, i)) === maskUndefined(this$static.mouseModeStr));
}

function $doPaste(this$static, dump_0){
  var bb, ce, dx, dy, i, lastArg, newbb, oldbb, oldsz, spaceh, spacew;
  $pushUndo(this$static);
  $clearSelection(this$static);
  oldbb = null;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    bb = ce.boundingBox;
    oldbb?(oldbb = $union(oldbb, bb)):(oldbb = bb);
  }
  oldsz = this$static.elmList.arrayList.array.length;
  if (dump_0 != null) {
    $readSetup_1(this$static, $getBytes((lastArg = dump_0 , $clinit_EmulatedCharset() , lastArg)), dump_0.length, true, false);
    $setText_0(this$static.titleLabel, null);
  }
   else {
    $readClipboardFromStorage(this$static);
    $readSetup_0(this$static, this$static.clipboard);
  }
  newbb = null;
  for (i = oldsz; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.selected = true;
    bb = ce.boundingBox;
    newbb?(newbb = $union(newbb, bb)):(newbb = bb);
  }
  if (!!oldbb && !!newbb && $intersects(oldbb, newbb)) {
    dx = 0;
    dy = 0;
    spacew = this$static.circuitArea.width_0 - oldbb.width_0 - newbb.width_0;
    spaceh = this$static.circuitArea.height_0 - oldbb.height_0 - newbb.height_0;
    spacew > spaceh?(dx = $snapGrid(this$static, oldbb.x_0 + oldbb.width_0 - newbb.x_0 + this$static.gridSize)):(dy = $snapGrid(this$static, oldbb.y_0 + oldbb.height_0 - newbb.y_0 + this$static.gridSize));
    for (i = oldsz; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      $move(ce, dx, dy);
    }
  }
  this$static.analyzeFlag = true;
}

function $doPopupMenu(this$static){
  var m, x_0, y_0;
  this$static.menuElm = this$static.mouseElm;
  this$static.menuScope = -1;
  this$static.menuPlot = -1;
  if (this$static.scopeSelected != -1) {
    m = $getMenu(this$static.scopes[this$static.scopeSelected]);
    this$static.menuScope = this$static.scopeSelected;
    this$static.menuPlot = this$static.scopes[this$static.scopeSelected].selectedPlot;
    if (m) {
      this$static.contextPanel = new PopupPanel_0(true);
      $add_1(this$static.contextPanel, m);
      y_0 = $wnd.Math.max(0, $wnd.Math.min(this$static.menuY, $getCoordinateSpaceHeight(this$static.cv) - 430));
      $setPopupPosition(this$static.contextPanel, this$static.menuX, y_0);
      $show(this$static.contextPanel);
    }
  }
   else if (this$static.mouseElm) {
    $setEnabled(this$static.elmScopeMenuItem, this$static.mouseElm.canViewInScope());
    $setEnabled(this$static.elmEditMenuItem, !!this$static.mouseElm.getEditInfo(0));
    $setEnabled(this$static.elmFlipMenuItem, this$static.mouseElm.getPostCount() == 2);
    this$static.contextPanel = new PopupPanel_0(true);
    $add_1(this$static.contextPanel, this$static.elmMenuBar);
    $setPopupPosition(this$static.contextPanel, this$static.menuX, this$static.menuY);
    $show(this$static.contextPanel);
  }
   else {
    $doMainMenuChecks(this$static);
    this$static.contextPanel = new PopupPanel_0(true);
    $add_1(this$static.contextPanel, this$static.mainMenuBar);
    x_0 = $wnd.Math.max(0, $wnd.Math.min(this$static.menuX, $getCoordinateSpaceWidth(this$static.cv) - 400));
    y_0 = $wnd.Math.max(0, $wnd.Math.min(this$static.menuY, $getCoordinateSpaceHeight(this$static.cv) - 450));
    $setPopupPosition(this$static.contextPanel, x_0, y_0);
    $show(this$static.contextPanel);
  }
}

function $doRedo(this$static){
  var lastArg, s;
  if (this$static.redoStack.arrayList.array.length == 0)
    return;
  $add_11(this$static.undoStack, $dumpCircuit(this$static));
  s = castToString($remove_14(this$static.redoStack, this$static.redoStack.arrayList.array.length - 1));
  $readSetup_1(this$static, $getBytes((lastArg = s , $clinit_EmulatedCharset() , lastArg)), s.length, false, false);
  $setText_0(this$static.titleLabel, null);
  $setText_0(this$static.titleLabel, null);
  $setEnabled(this$static.redoItem, this$static.redoStack.arrayList.array.length > 0);
  $setEnabled(this$static.undoItem, this$static.undoStack.arrayList.array.length > 0);
}

function $doSelectAll(this$static){
  var ce, i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.selected = true;
  }
}

function $doSwitch(this$static, x_0, y_0){
  var se;
  if (!this$static.mouseElm || !instanceOf(this$static.mouseElm, 90))
    return false;
  se = castTo(this$static.mouseElm, 90);
  if (!$contains(se.getSwitchRect(), x_0, y_0))
    return false;
  se.toggle();
  se.momentary && (this$static.heldSwitchElm = se);
  this$static.analyzeFlag = true;
  return true;
}

function $doTouchHandlers(this$static, cv){
  var lastTap;
  var tmout;
  var sim = this$static;
  cv.addEventListener('touchstart', function(e){
    mousePos = getTouchPos(cv, e);
    var touch = e.touches[0];
    var etype = 'mousedown';
    clearTimeout(tmout);
    e.timeStamp - lastTap < 300?(etype = 'dblclick'):(tmout = setTimeout(function(){
      sim.longPress();
    }
    , 500));
    lastTap = e.timeStamp;
    var mouseEvent = new MouseEvent(etype, {clientX:touch.clientX, clientY:touch.clientY});
    e.preventDefault();
    cv.dispatchEvent(mouseEvent);
  }
  , false);
  cv.addEventListener('touchend', function(e){
    var mouseEvent = new MouseEvent('mouseup', {});
    e.preventDefault();
    clearTimeout(tmout);
    cv.dispatchEvent(mouseEvent);
  }
  , false);
  cv.addEventListener('touchmove', function(e){
    var touch = e.touches[0];
    var mouseEvent = new MouseEvent('mousemove', {clientX:touch.clientX, clientY:touch.clientY});
    e.preventDefault();
    clearTimeout(tmout);
    cv.dispatchEvent(mouseEvent);
  }
  , false);
  function getTouchPos(canvasDom, touchEvent){
    var rect = canvasDom.getBoundingClientRect();
    return {x:touchEvent.touches[0].clientX - rect.left, y:touchEvent.touches[0].clientY - rect.top};
  }

}

function $doUndo(this$static){
  var lastArg, s;
  if (this$static.undoStack.arrayList.array.length == 0)
    return;
  $add_11(this$static.redoStack, $dumpCircuit(this$static));
  s = castToString($remove_14(this$static.undoStack, this$static.undoStack.arrayList.array.length - 1));
  $readSetup_1(this$static, $getBytes((lastArg = s , $clinit_EmulatedCharset() , lastArg)), s.length, false, false);
  $setText_0(this$static.titleLabel, null);
  $setText_0(this$static.titleLabel, null);
  $setEnabled(this$static.redoItem, this$static.redoStack.arrayList.array.length > 0);
  $setEnabled(this$static.undoItem, this$static.undoStack.arrayList.array.length > 0);
}

function $dragAll(this$static, x_0, y_0){
  var dx, dy;
  dx = x_0 - this$static.dragScreenX;
  dy = y_0 - this$static.dragScreenY;
  if (dx == 0 && dy == 0)
    return;
  this$static.transform_0[4] += dx;
  this$static.transform_0[5] += dy;
  this$static.dragScreenX = x_0;
  this$static.dragScreenY = y_0;
}

function $dragColumn(this$static, x_0){
  var ce, dx, i;
  dx = x_0 - this$static.dragGridX;
  if (dx == 0)
    return;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.x_0 == this$static.dragGridX && $movePoint(ce, 0, dx, 0);
    ce.x2 == this$static.dragGridX && $movePoint(ce, 1, dx, 0);
  }
  $removeZeroLengthElements(this$static);
}

function $dragPost(this$static, x_0, y_0){
  var dx, dy;
  this$static.draggingPost == -1 && (this$static.draggingPost = distanceSq(this$static.mouseElm.x_0, this$static.mouseElm.y_0, x_0, y_0) > distanceSq(this$static.mouseElm.x2, this$static.mouseElm.y2, x_0, y_0)?1:0);
  dx = x_0 - this$static.dragGridX;
  dy = y_0 - this$static.dragGridY;
  if (dx == 0 && dy == 0)
    return;
  $movePoint(this$static.mouseElm, this$static.draggingPost, dx, dy);
  this$static.analyzeFlag = true;
}

function $dragRow(this$static, y_0){
  var ce, dy, i;
  dy = y_0 - this$static.dragGridY;
  if (dy == 0)
    return;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.y_0 == this$static.dragGridY && $movePoint(ce, 0, 0, dy);
    ce.y2 == this$static.dragGridY && $movePoint(ce, 1, 0, dy);
  }
  $removeZeroLengthElements(this$static);
}

function $dragSelected(this$static, x_0, y_0){
  var allowed, ce, dx, dy, i, me;
  me = false;
  !!this$static.mouseElm && !this$static.mouseElm.selected && $setSelected(this$static.mouseElm, me = true);
  if (!$onlyGraphicsElmsSelected(this$static)) {
    x_0 = x_0 + this$static.gridRound & this$static.gridMask;
    y_0 = y_0 + this$static.gridRound & this$static.gridMask;
  }
  dx = x_0 - this$static.dragGridX;
  dy = y_0 - this$static.dragGridY;
  if (dx == 0 && dy == 0) {
    me && (this$static.mouseElm.selected = false , undefined);
    return false;
  }
  allowed = true;
  for (i = 0; allowed && i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    ce.selected && !$allowMove(ce, dx, dy) && (allowed = false);
  }
  if (allowed) {
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      ce.selected && $move(ce, dx, dy);
    }
    this$static.analyzeFlag = true;
  }
  me && (this$static.mouseElm.selected = false , undefined);
  return allowed;
}

function $dragSplitter(this$static, y_0){
  var h;
  h = $getCanvasElement(this$static.cv).height;
  h < 1 && (h = 1);
  this$static.scopeHeightFraction = 1 - y_0 / h;
  this$static.scopeHeightFraction < 0.1 && (this$static.scopeHeightFraction = 0.1);
  this$static.scopeHeightFraction > 0.9 && (this$static.scopeHeightFraction = 0.9);
  $setCircuitArea(this$static);
}

function $dumpCircuit(this$static){
  var ce, d, dump_0, f, i, m;
  clearDumpedFlags();
  f = this$static.dotsCheckItem.on?1:0;
  f |= this$static.smallGridCheckItem.on?2:0;
  f |= this$static.voltsCheckItem.on?0:4;
  f |= this$static.powerCheckItem.on?8:0;
  f |= this$static.showValuesCheckItem.on?0:16;
  dump_0 = '$ ' + f + ' ' + this$static.timeStep + ' ' + $getIterCount(this$static) + ' ' + this$static.currentBar.val_0 + ' ' + voltageRange + ' ' + this$static.powerBar.val_0 + '\n';
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (instanceOf(ce, 168)) {
      m = $dumpModel(castTo(ce, 168));
      m.length == 0 || (dump_0 += m + '\n');
    }
    dump_0 += ce.dump_0() + '\n';
  }
  for (i = 0; i != this$static.scopeCount; i++) {
    d = $dump_2(this$static.scopes[i]);
    d != null && (dump_0 += d + '\n');
  }
  this$static.hintType != -1 && (dump_0 += 'h ' + this$static.hintType + ' ' + this$static.hintItem1 + ' ' + this$static.hintItem2 + '\n');
  return dump_0;
}

function $getCircuitBounds(this$static){
  var ce, i, maxx, maxy, minx, miny;
  minx = $intern_20;
  maxx = 0;
  miny = $intern_20;
  maxy = 0;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (!ce.isCenteredText()) {
      minx = $min(ce.x_0, $min(ce.x2, minx));
      maxx = $max(ce.x_0, $max(ce.x2, maxx));
    }
    miny = $min(ce.y_0, $min(ce.y2, miny));
    maxy = $max(ce.y_0, $max(ce.y2, maxy));
  }
  if (minx > maxx)
    return null;
  return new Rectangle_0(minx, miny, maxx - minx, maxy - miny);
}

function $getCircuitNode(this$static, n){
  if (n >= this$static.nodeList.arrayList.array.length)
    return null;
  return castTo($get_3(this$static.nodeList, n), 88);
}

function $getClassCheckItem(this$static, s, t){
  var elm, mi, shortcut;
  shortcut = '';
  elm = constructElement(t, 0, 0);
  if (elm) {
    if (elm.getShortcut() > 0) {
      shortcut += charToString(elm.getShortcut() & $intern_9);
      this$static.shortcuts[elm.getShortcut()] = t;
    }
    elm.delete_0();
  }
  shortcut == ''?(mi = new CheckboxMenuItem(s)):(mi = new CheckboxMenuItem_1(s, shortcut));
  $setScheduledCommand(mi, new MyCommand('main', t));
  $add_11(this$static.mainMenuItems, mi);
  $add_11(this$static.mainMenuItemNames, t);
  return mi;
}

function $getElm(this$static, n){
  if (n >= this$static.elmList.arrayList.array.length)
    return null;
  return castTo($get_3(this$static.elmList, n), 4);
}

function $getHint(this$static){
  var c1, c2, ce, ie, re, sm;
  c1 = $getElm(this$static, this$static.hintItem1);
  c2 = $getElm(this$static, this$static.hintItem2);
  if (!c1 || !c2)
    return null;
  if (this$static.hintType == 1) {
    if (!instanceOf(c1, 102))
      return null;
    if (!instanceOf(c2, 53))
      return null;
    ie = castTo(c1, 102);
    ce = castTo(c2, 53);
    return sm = castToString($getStringValue(localizationMap, 'res.f = ')) , (sm != null?sm:'res.f = ') + myGetUnitText(1 / ($intern_2 * $wnd.Math.sqrt(ie.inductance * ce.capacitance)), 'Hz', false);
  }
  if (this$static.hintType == 2) {
    if (!instanceOf(c1, 92))
      return null;
    if (!instanceOf(c2, 53))
      return null;
    re = castTo(c1, 92);
    ce = castTo(c2, 53);
    return 'RC = ' + myGetUnitText(re.resistance * ce.capacitance, 's', false);
  }
  if (this$static.hintType == 3) {
    if (!instanceOf(c1, 92))
      return null;
    if (!instanceOf(c2, 53))
      return null;
    re = castTo(c1, 92);
    ce = castTo(c2, 53);
    return sm = castToString($getStringValue(localizationMap, 'f.3db = ')) , (sm != null?sm:'f.3db = ') + myGetUnitText(1 / ($intern_2 * re.resistance * ce.capacitance), 'Hz', false);
  }
  if (this$static.hintType == 5) {
    if (!instanceOf(c1, 92))
      return null;
    if (!instanceOf(c2, 102))
      return null;
    re = castTo(c1, 92);
    ie = castTo(c2, 102);
    return sm = castToString($getStringValue(localizationMap, 'f.3db = ')) , (sm != null?sm:'f.3db = ') + myGetUnitText(re.resistance / ($intern_2 * ie.inductance), 'Hz', false);
  }
  if (this$static.hintType == 4) {
    if (!instanceOf(c1, 92))
      return null;
    if (!instanceOf(c2, 53))
      return null;
    re = castTo(c1, 92);
    ce = castTo(c2, 53);
    return sm = castToString($getStringValue(localizationMap, 'fc = ')) , (sm != null?sm:'fc = ') + myGetUnitText(1 / ($intern_2 * re.resistance * ce.capacitance), 'Hz', false);
  }
  return null;
}

function $getIterCount(this$static){
  if (this$static.speedBar.val_0 == 0)
    return 0;
  return 0.1 * $wnd.Math.exp((this$static.speedBar.val_0 - 61) / 24);
}

function $getOptionFromStorage(key, val){
  var s, stor;
  stor = (!localStorage_0 && ($clinit_Storage$StorageSupportDetector() , localStorageSupported) && (localStorage_0 = new Storage_0) , localStorage_0);
  if (!stor)
    return val;
  s = $getItem(stor.storage, key);
  if (s == null)
    return val;
  return s == 'true';
}

function $getSetupList(this$static, openDefault){
  var requestBuilder, url_0;
  url_0 = getModuleBaseURL() + 'setuplist.txt' + '?v=' + round_int($nextInternal(this$static.random, 32));
  requestBuilder = new RequestBuilder(($clinit_RequestBuilder() , GET), url_0);
  try {
    $sendRequest(requestBuilder, new CirSim$13(this$static, openDefault));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 97))
      throw toJs($e0);
  }
}

function $getrand(this$static){
  var q;
  q = round_int($nextInternal(this$static.random, 32));
  q < 0 && (q = -q);
  return q % 4;
}

function $init_1(this$static){
  var cct, convention, drawMenuBar, euroRes, euroSetting, l_0, m, mi, oacMenuBar, os, otherMenuBar, printable, qp, sm, sm0, sm1, sm10, sm11, sm12, sm13, sm14, sm15, sm16, sm17, sm18, sm19, sm2, sm20, sm21, sm22, sm23, sm24, sm25, sm26, sm27, sm28, sm29, sm3, sm30, sm31, sm32, sm33, sm34, sm35, sm36, sm37, sm38, sm39, sm4, sm40, sm41, sm42, sm43, sm44, sm45, sm46, sm47, sm48, sm49, sm5, sm50, sm51, sm52, sm53, sm54, sm55, sm56, sm57, sm58, sm59, sm6, sm60, sm61, sm62, sm63, sm64, sm65, sm66, sm67, sm68, sm7, sm8, sm9, usRes, val, val0, width_0;
  printable = false;
  convention = true;
  euroRes = false;
  usRes = false;
  unitsFont = new Font('SansSerif', 0, 12);
  sim_0 = this$static;
  colorScale = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Color_2_classLit, $intern_3, 39, colorScaleCount, 0, 1);
  ps1 = new Point;
  ps2 = new Point;
  showFormat = ($clinit_NumberFormat() , new NumberFormat_0('####.##', $getDefaultNative()));
  shortFormat = new NumberFormat_0('####.#', $getDefaultNative());
  qp = new QueryParameters;
  try {
    cct = castToString($getStringValue(qp.map_0, 'cct'));
    cct != null && (this$static.startCircuitText = $replace_1(cct, '%24', '$'));
    this$static.startCircuit = castToString($getStringValue(qp.map_0, 'startCircuit'));
    this$static.startLabel = castToString($getStringValue(qp.map_0, 'startLabel'));
    this$static.startCircuitLink = castToString($getStringValue(qp.map_0, 'startCircuitLink'));
    euroRes = (val0 = castToString($getStringValue(qp.map_0, 'euroResistors')) , val0 != null && (val0 == '1' || $equalsIgnoreCase(val0, 'true')));
    usRes = (val = castToString($getStringValue(qp.map_0, 'usResistors')) , val != null && (val == '1' || $equalsIgnoreCase(val, 'true')));
    printable = $getBooleanValue(qp, 'whiteBackground', $getOptionFromStorage('whiteBackground', false));
    convention = $getBooleanValue(qp, 'conventionalCurrent', $getOptionFromStorage('conventionalCurrent', true));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  euroRes?(euroSetting = true):usRes?(euroSetting = false):(euroSetting = $getOptionFromStorage('euroResistors', !$weAreInUS()));
  this$static.transform_0 = initUnidimensionalArray(D_classLit, $intern_57, 9, 6, 15, 1);
  os = $wnd.navigator.platform;
  this$static.isMac = os.toLowerCase().indexOf('mac') != -1;
  this$static.ctrlMetaKey = this$static.isMac?'Cmd':'Ctrl';
  this$static.shortcuts = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 127, 6, 1);
  this$static.layoutPanel = new DockLayoutPanel(($clinit_Style$Unit() , PX));
  this$static.fileMenuBar = new MenuBar_0(true);
  this$static.importFromLocalFileItem = new MenuItem_1((sm0 = castToString($getStringValue(localizationMap, 'Importar de arquivo Local')) , sm0 != null?sm0:'Importar de arquivo Local'), new MyCommand('file', 'importfromlocalfile'));
  $setEnabled(this$static.importFromLocalFileItem, isSupported_1());
  $addItem(this$static.fileMenuBar, this$static.importFromLocalFileItem);
  this$static.importFromTextItem = new MenuItem_1((sm1 = castToString($getStringValue(localizationMap, 'Importar de texto')) , sm1 != null?sm1:'Importar de texto'), new MyCommand('file', 'importfromtext'));
  $addItem(this$static.fileMenuBar, this$static.importFromTextItem);
  this$static.importFromDropboxItem = new MenuItem_1((sm2 = castToString($getStringValue(localizationMap, 'Importar do Dropbox')) , sm2 != null?sm2:'Importar do Dropbox'), new MyCommand('file', 'importfromdropbox'));
  $addItem(this$static.fileMenuBar, this$static.importFromDropboxItem);
  this$static.exportAsUrlItem = new MenuItem_1((sm3 = castToString($getStringValue(localizationMap, 'Exportar como link')) , sm3 != null?sm3:'Exportar como link'), new MyCommand('file', 'exportasurl'));
  $addItem(this$static.fileMenuBar, this$static.exportAsUrlItem);
  this$static.exportAsLocalFileItem = new MenuItem_1((sm4 = castToString($getStringValue(localizationMap, 'Exportar como arquivo local')) , sm4 != null?sm4:'Exportar como arquivo local'), new MyCommand('file', 'exportaslocalfile'));
  $setEnabled(this$static.exportAsLocalFileItem, !!('download' in $doc.createElement('a')));
  $addItem(this$static.fileMenuBar, this$static.exportAsLocalFileItem);
  this$static.exportAsTextItem = new MenuItem_1((sm5 = castToString($getStringValue(localizationMap, 'Exportar como texto')) , sm5 != null?sm5:'Exportar como texto'), new MyCommand('file', 'exportastext'));
  $addItem(this$static.fileMenuBar, this$static.exportAsTextItem);
  this$static.exportToDropboxItem = new MenuItem_1((sm6 = castToString($getStringValue(localizationMap, 'Exportar para Dropbox')) , sm6 != null?sm6:'Exportar para Dropbox'), new MyCommand('file', 'exporttodropbox'));
  $setEnabled(this$static.exportToDropboxItem, isSupported());
  $addItem(this$static.fileMenuBar, this$static.exportToDropboxItem);
  $addSeparator(this$static.fileMenuBar, new MenuItemSeparator);
  this$static.aboutItem = new MenuItem_1((sm7 = castToString($getStringValue(localizationMap, 'Sobre')) , sm7 != null?sm7:'Sobre'), null);
  $addItem(this$static.fileMenuBar, this$static.aboutItem);
  $setScheduledCommand(this$static.aboutItem, new MyCommand('file', 'about'));
  width_0 = $getOffsetWidth(get_0());
  VERTICALPANELWIDTH = width_0 / 5 | 0;
  VERTICALPANELWIDTH > 166 && (VERTICALPANELWIDTH = 166);
  VERTICALPANELWIDTH < 128 && (VERTICALPANELWIDTH = 128);
  this$static.menuBar = new MenuBar;
  $addItem(this$static.menuBar, new MenuItem_2((sm8 = castToString($getStringValue(localizationMap, 'Arquivo')) , sm8 != null?sm8:'Arquivo'), this$static.fileMenuBar));
  this$static.verticalPanel = new VerticalPanel;
  this$static.buttonPanel = VERTICALPANELWIDTH == 166?new HorizontalPanel:new VerticalPanel;
  m = new MenuBar_0(true);
  $addItem(m, this$static.undoItem = $menuItemWithShortcut((sm9 = castToString($getStringValue(localizationMap, 'Undo')) , sm9 != null?sm9:'Undo'), (sm10 = castToString($getStringValue(localizationMap, 'Ctrl-Z')) , sm10 != null?sm10:'Ctrl-Z'), new MyCommand('edit', 'undo')));
  $addItem(m, this$static.redoItem = $menuItemWithShortcut((sm11 = castToString($getStringValue(localizationMap, 'Redo')) , sm11 != null?sm11:'Redo'), (sm12 = castToString($getStringValue(localizationMap, 'Ctrl-Y')) , sm12 != null?sm12:'Ctrl-Y'), new MyCommand('edit', 'redo')));
  $addSeparator(m, new MenuItemSeparator);
  $addItem(m, $menuItemWithShortcut((sm13 = castToString($getStringValue(localizationMap, 'Cortar')) , sm13 != null?sm13:'Cortar'), (sm14 = castToString($getStringValue(localizationMap, 'Ctrl-X')) , sm14 != null?sm14:'Ctrl-X'), new MyCommand('edit', 'cut')));
  $addItem(m, $menuItemWithShortcut((sm15 = castToString($getStringValue(localizationMap, 'Copiar')) , sm15 != null?sm15:'Copiar'), (sm16 = castToString($getStringValue(localizationMap, 'Ctrl-C')) , sm16 != null?sm16:'Ctrl-C'), new MyCommand('edit', 'copy')));
  $addItem(m, this$static.pasteItem = $menuItemWithShortcut((sm17 = castToString($getStringValue(localizationMap, 'Colar')) , sm17 != null?sm17:'Colar'), (sm18 = castToString($getStringValue(localizationMap, 'Ctrl-V')) , sm18 != null?sm18:'Ctrl-V'), new MyCommand('edit', 'paste')));
  $setEnabled(this$static.pasteItem, false);
  $addItem(m, $menuItemWithShortcut((sm19 = castToString($getStringValue(localizationMap, 'Duplicar')) , sm19 != null?sm19:'Duplicar'), (sm20 = castToString($getStringValue(localizationMap, 'Ctrl-D')) , sm20 != null?sm20:'Ctrl-D'), new MyCommand('edit', 'duplicate')));
  $addSeparator(m, new MenuItemSeparator);
  $addItem(m, $menuItemWithShortcut((sm21 = castToString($getStringValue(localizationMap, 'Selecionar todos')) , sm21 != null?sm21:'Selecionar todos'), (sm22 = castToString($getStringValue(localizationMap, 'Ctrl-A')) , sm22 != null?sm22:'Ctrl-A'), new MyCommand('edit', 'selectAll')));
  $addSeparator(m, new MenuItemSeparator);
  $addItem(m, new MenuItem_1($weAreInUS()?(sm23 = castToString($getStringValue(localizationMap, 'Centralizar Circuito')) , sm23 != null?sm23:'Centralizar Circuito'):(sm24 = castToString($getStringValue(localizationMap, 'Centre Circuit')) , sm24 != null?sm24:'Centre Circuit'), new MyCommand('edit', 'centrecircuit')));
  $addItem(m, $menuItemWithShortcut((sm25 = castToString($getStringValue(localizationMap, 'Zoom 100%')) , sm25 != null?sm25:'Zoom 100%'), '0', new MyCommand('edit', 'zoom100')));
  $addItem(m, $menuItemWithShortcut((sm26 = castToString($getStringValue(localizationMap, 'Zoom In')) , sm26 != null?sm26:'Zoom In'), '+', new MyCommand('edit', 'zoomin')));
  $addItem(m, $menuItemWithShortcut((sm27 = castToString($getStringValue(localizationMap, 'Zoom Out')) , sm27 != null?sm27:'Zoom Out'), '-', new MyCommand('edit', 'zoomout')));
  $addItem(this$static.menuBar, new MenuItem_2((sm28 = castToString($getStringValue(localizationMap, 'Editar')) , sm28 != null?sm28:'Editar'), m));
  otherMenuBar = new MenuBar_0(true);
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm29 = castToString($getStringValue(localizationMap, 'Arrastar todos os elementos')) , sm29 != null?sm29:'Arrastar todos os elementos'), 'DragAll'));
  $addShortcut(mi, (sm30 = castToString($getStringValue(localizationMap, '(Alt-arrastar)')) , sm30 != null?sm30:'(Alt-arrastar)'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm31 = castToString($getStringValue(localizationMap, 'Arrastar linha')) , sm31 != null?sm31:'Arrastar linha'), 'DragRow'));
  $addShortcut(mi, (sm32 = castToString($getStringValue(localizationMap, '(A-S-arrastar)')) , sm32 != null?sm32:'(A-S-arrastar)'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm33 = castToString($getStringValue(localizationMap, 'Arrastar Coluna')) , sm33 != null?sm33:'Arrastar Coluna'), 'DragColumn'));
  $addShortcut(mi, this$static.isMac?(sm34 = castToString($getStringValue(localizationMap, '(A-Cmd-arrastar)')) , sm34 != null?sm34:'(A-Cmd-arrastar)'):(sm35 = castToString($getStringValue(localizationMap, '(A-M-drag)')) , sm35 != null?sm35:'(A-M-drag)'));
  $addItem(otherMenuBar, $getClassCheckItem(this$static, (sm36 = castToString($getStringValue(localizationMap, 'Arrastar Selecionado')) , sm36 != null?sm36:'Arrastar Selecionado'), 'DragSelected'));
  $addItem(otherMenuBar, mi = $getClassCheckItem(this$static, (sm37 = castToString($getStringValue(localizationMap, 'Arrastar Pino')) , sm37 != null?sm37:'Arrastar Pino'), 'DragPost'));
  $addShortcut(mi, '(' + this$static.ctrlMetaKey + '-arrastar)');
  drawMenuBar = new MenuBar_0(true);
  drawMenuBar.autoOpen = true;
  oacMenuBar = new MenuBar_0(true);
  oacMenuBar.autoOpen = true;
  $addItem(this$static.menuBar, new MenuItem_2((sm38 = castToString($getStringValue(localizationMap, 'Desenhar')) , sm38 != null?sm38:'Desenhar'), oacMenuBar));
  $addItem(this$static.menuBar, new MenuItem_2((sm39 = castToString($getStringValue(localizationMap, 'Arrastar')) , sm39 != null?sm39:'Arrastar'), otherMenuBar));
  m = new MenuBar_0(true);
  $addItem(m, new MenuItem_1((sm40 = castToString($getStringValue(localizationMap, 'Empilhar todos')) , sm40 != null?sm40:'Empilhar todos'), new MyCommand('scopes', 'stackAll')));
  $addItem(m, new MenuItem_1((sm41 = castToString($getStringValue(localizationMap, 'Desempilhar todos')) , sm41 != null?sm41:'Desempilhar todos'), new MyCommand('scopes', 'unstackAll')));
  $addItem(m, new MenuItem_1((sm42 = castToString($getStringValue(localizationMap, 'Combinar todos')) , sm42 != null?sm42:'Combinar todos'), new MyCommand('scopes', 'combineAll')));
  $addItem(this$static.menuBar, new MenuItem_2((sm43 = castToString($getStringValue(localizationMap, 'Scopes')) , sm43 != null?sm43:'Scopes'), m));
  this$static.optionsMenuBar = m = new MenuBar_0(true);
  $addItem(this$static.menuBar, new MenuItem_2((sm44 = castToString($getStringValue(localizationMap, 'Prefer\xEAncias')) , sm44 != null?sm44:'Prefer\xEAncias'), this$static.optionsMenuBar));
  $addItem(this$static.menuBar, new MenuItem_2((sm45 = castToString($getStringValue(localizationMap, 'Draw')) , sm45 != null?sm45:'Draw'), drawMenuBar));
  $addItem(m, this$static.dotsCheckItem = new CheckboxMenuItem((sm46 = castToString($getStringValue(localizationMap, 'Mostrar Corrente')) , sm46 != null?sm46:'Mostrar Corrente')));
  $setState_0(this$static.dotsCheckItem, true);
  $addItem(m, this$static.voltsCheckItem = new CheckboxMenuItem_0((sm47 = castToString($getStringValue(localizationMap, 'Mostrar Voltagem')) , sm47 != null?sm47:'Mostrar Voltagem'), new CirSim$2(this$static)));
  $setState_0(this$static.voltsCheckItem, true);
  $addItem(m, this$static.powerCheckItem = new CheckboxMenuItem_0((sm48 = castToString($getStringValue(localizationMap, 'Mostrar Pot\xEAncia')) , sm48 != null?sm48:'Mostrar Pot\xEAncia'), new CirSim$3(this$static)));
  $addItem(m, this$static.showValuesCheckItem = new CheckboxMenuItem((sm49 = castToString($getStringValue(localizationMap, 'Mostrar Valores')) , sm49 != null?sm49:'Mostrar Valores')));
  $setState_0(this$static.showValuesCheckItem, true);
  $addItem(m, this$static.smallGridCheckItem = new CheckboxMenuItem_0((sm50 = castToString($getStringValue(localizationMap, 'Grade Pequena')) , sm50 != null?sm50:'Grade Pequena'), new CirSim$4(this$static)));
  $addItem(m, this$static.crossHairCheckItem = new CheckboxMenuItem_0((sm51 = castToString($getStringValue(localizationMap, 'Mostrar Cursor em Cruz')) , sm51 != null?sm51:'Mostrar Cursor em Cruz'), new CirSim$5(this$static)));
  $setState_0(this$static.crossHairCheckItem, $getOptionFromStorage('crossHair', false));
  $addItem(m, this$static.euroResistorCheckItem = new CheckboxMenuItem_0((sm52 = castToString($getStringValue(localizationMap, 'Resistores Europeus ')) , sm52 != null?sm52:'Resistores Europeus '), new CirSim$6(this$static)));
  $setState_0(this$static.euroResistorCheckItem, euroSetting);
  $addItem(m, this$static.printableCheckItem = new CheckboxMenuItem_0((sm53 = castToString($getStringValue(localizationMap, 'Fundo Branco')) , sm53 != null?sm53:'Fundo Branco'), new CirSim$7(this$static)));
  $setState_0(this$static.printableCheckItem, printable);
  $addItem(m, this$static.alternativeColorCheckItem = new CheckboxMenuItem_0((sm54 = castToString($getStringValue(localizationMap, 'Cores alternativas para Volts & Pwr')) , sm54 != null?sm54:'Cores alternativas para Volts & Pwr'), new CirSim$8(this$static)));
  $setState_0(this$static.alternativeColorCheckItem, $getOptionFromStorage('alternativeColor', false));
  $addItem(m, this$static.conventionCheckItem = new CheckboxMenuItem_0((sm55 = castToString($getStringValue(localizationMap, 'Movimento convencional da corrente')) , sm55 != null?sm55:'Movimento convencional da corrente'), new CirSim$9(this$static)));
  $setState_0(this$static.conventionCheckItem, convention);
  $addItem(m, new CheckboxAlignedMenuItem((sm56 = castToString($getStringValue(localizationMap, 'Outras prefer\xEAncias...')) , sm56 != null?sm56:'Outras prefer\xEAncias...'), new MyCommand('options', 'other')));
  this$static.mainMenuBar = new MenuBar_0(true);
  this$static.mainMenuBar.autoOpen = true;
  $composeMainMenu(this$static, this$static.mainMenuBar);
  $composeMainMenu(this$static, drawMenuBar);
  $composeOACMenu(this$static, oacMenuBar);
  $insert_0(this$static.layoutPanel, this$static.menuBar, ($clinit_DockLayoutPanel$Direction() , NORTH), 30);
  $addEast(this$static.layoutPanel, this$static.verticalPanel, VERTICALPANELWIDTH);
  $add_3(get_0(), this$static.layoutPanel);
  this$static.cv = createIfSupported();
  if (!this$static.cv) {
    $add_0(($clinit_RootPanel() , get_1()), new Label_0('Not working. You need a browser that supports the CANVAS element.'));
    return;
  }
  this$static.cvcontext = $getContext2d(this$static.cv);
  this$static.backcv = createIfSupported();
  this$static.backcontext = $getContext2d(this$static.backcv);
  $setCanvasSize(this$static);
  $insert_0(this$static.layoutPanel, this$static.cv, CENTER_0, 0);
  $add_4(this$static.verticalPanel, this$static.buttonPanel);
  this$static.buttonPanel.add_0(this$static.resetButton = new Button_0((sm57 = castToString($getStringValue(localizationMap, 'Reset')) , sm57 != null?sm57:'Reset')));
  $addDomHandler(this$static.resetButton, new CirSim$10(this$static), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $setStylePrimaryName(this$static.resetButton, 'topButton');
  this$static.buttonPanel.add_0(this$static.runStopButton = new Button(($clinit_SafeHtmlUtils() , new SafeHtmlString((sm58 = castToString($getStringValue(localizationMap, '<Strong>RUN<\/Strong>&nbsp;/&nbsp;Stop')) , sm58 != null?sm58:'<Strong>RUN<\/Strong>&nbsp;/&nbsp;Stop')))));
  $addDomHandler(this$static.runStopButton, new CirSim$11(this$static), (null , TYPE_1));
  isSupported_1() && $add_4(this$static.verticalPanel, this$static.loadFileInput = new LoadFile(this$static));
  $add_4(this$static.verticalPanel, l_0 = new Label_0((sm59 = castToString($getStringValue(localizationMap, 'Simulation Speed')) , sm59 != null?sm59:'Simulation Speed')));
  setStyleName(($clinit_DOM() , l_0.element), 'topSpace', true);
  $add_4(this$static.verticalPanel, this$static.speedBar = new Scrollbar(3, 0, 260));
  $add_4(this$static.verticalPanel, l_0 = new Label_0((sm60 = castToString($getStringValue(localizationMap, 'Current Speed')) , sm60 != null?sm60:'Current Speed')));
  setStyleName(l_0.element, 'topSpace', true);
  this$static.currentBar = new Scrollbar(50, 1, 100);
  $add_4(this$static.verticalPanel, this$static.currentBar);
  $add_4(this$static.verticalPanel, this$static.powerLabel = new Label_0((sm61 = castToString($getStringValue(localizationMap, 'Power Brightness')) , sm61 != null?sm61:'Power Brightness')));
  $addStyleName(this$static.powerLabel, 'topSpace');
  $add_4(this$static.verticalPanel, this$static.powerBar = new Scrollbar(50, 1, 100));
  $setPowerBarEnable(this$static);
  l_0 = new Label_0((sm62 = castToString($getStringValue(localizationMap, 'Current Circuit:')) , sm62 != null?sm62:'Current Circuit:'));
  setStyleName(l_0.element, 'topSpace', true);
  this$static.titleLabel = new Label_0('Label');
  $add_4(this$static.verticalPanel, l_0);
  $add_4(this$static.verticalPanel, this$static.titleLabel);
  $add_4(this$static.verticalPanel, this$static.iFrame = new Frame_0);
  $setWidth(this$static.iFrame, VERTICALPANELWIDTH + 'px');
  $setHeight(this$static.iFrame, '100 px');
  $getElement(this$static.iFrame).setAttribute('scrolling', 'no');
  $setGrid(this$static);
  this$static.elmList = new Vector;
  this$static.undoStack = new Vector;
  this$static.redoStack = new Vector;
  this$static.scopes = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Scope_2_classLit, $intern_3, 179, 20, 0, 1);
  this$static.scopeColCount = initUnidimensionalArray(I_classLit, $intern_22, 9, 20, 15, 1);
  this$static.scopeCount = 0;
  this$static.random = new Random;
  this$static.elmMenuBar = new MenuBar_0(true);
  $addItem(this$static.elmMenuBar, this$static.elmEditMenuItem = new MenuItem_1((sm63 = castToString($getStringValue(localizationMap, 'Edit')) , sm63 != null?sm63:'Edit'), new MyCommand('elm', 'edit')));
  $addItem(this$static.elmMenuBar, this$static.elmScopeMenuItem = new MenuItem_1((sm64 = castToString($getStringValue(localizationMap, 'View in Scope')) , sm64 != null?sm64:'View in Scope'), new MyCommand('elm', 'viewInScope')));
  $addItem(this$static.elmMenuBar, new MenuItem_1((sm65 = castToString($getStringValue(localizationMap, 'Cut')) , sm65 != null?sm65:'Cut'), new MyCommand('elm', 'cut')));
  $addItem(this$static.elmMenuBar, new MenuItem_1((sm66 = castToString($getStringValue(localizationMap, 'Copy')) , sm66 != null?sm66:'Copy'), new MyCommand('elm', 'copy')));
  $addItem(this$static.elmMenuBar, new MenuItem_1((sm67 = castToString($getStringValue(localizationMap, 'Delete')) , sm67 != null?sm67:'Delete'), new MyCommand('elm', 'delete')));
  $addItem(this$static.elmMenuBar, new MenuItem_1((sm68 = castToString($getStringValue(localizationMap, 'Duplicate')) , sm68 != null?sm68:'Duplicate'), new MyCommand('elm', 'duplicate')));
  $addItem(this$static.elmMenuBar, this$static.elmFlipMenuItem = new MenuItem_1((sm = castToString($getStringValue(localizationMap, 'Swap Terminals')) , sm != null?sm:'Swap Terminals'), new MyCommand('elm', 'flip')));
  this$static.scopeMenuBar = $buildScopeMenu(this$static, false);
  this$static.transScopeMenuBar = $buildScopeMenu(this$static, true);
  setColorScale();
  if (this$static.startCircuitText != null) {
    $getSetupList(this$static, false);
    $readSetup(this$static, this$static.startCircuitText);
  }
   else {
    if (this$static.stopMessage == null && this$static.startCircuitLink != null) {
      $readSetup_1(this$static, null, 0, false, true);
      $getSetupList(this$static, false);
      sim_2 = this$static;
      doImportDropboxLink(this$static.startCircuitLink, ($clinit_Boolean() , false));
    }
     else {
      $readSetup_1(this$static, null, 0, false, true);
      if (this$static.stopMessage == null && this$static.startCircuit != null) {
        $getSetupList(this$static, false);
        $readSetupFile(this$static, this$static.startCircuit, this$static.startLabel);
      }
       else 
        $getSetupList(this$static, true);
    }
  }
  $setEnabled(this$static.redoItem, this$static.redoStack.arrayList.array.length > 0);
  $setEnabled(this$static.undoItem, this$static.undoStack.arrayList.array.length > 0);
  (this$static.clipboard == null || this$static.clipboard.length == 0) && $readClipboardFromStorage(this$static);
  $setEnabled(this$static.pasteItem, this$static.clipboard != null && this$static.clipboard.length > 0);
  $setiFrameHeight(this$static);
  $addDomHandler(this$static.cv, this$static, ($clinit_MouseDownEvent() , $clinit_MouseDownEvent() , TYPE_4));
  $addDomHandler(this$static.cv, this$static, ($clinit_MouseMoveEvent() , $clinit_MouseMoveEvent() , TYPE_5));
  $addDomHandler(this$static.cv, this$static, ($clinit_MouseOutEvent() , $clinit_MouseOutEvent() , TYPE_6));
  $addDomHandler(this$static.cv, this$static, ($clinit_MouseUpEvent() , $clinit_MouseUpEvent() , TYPE_8));
  $addDomHandler(this$static.cv, this$static, (null , TYPE_1));
  $addDomHandler(this$static.cv, this$static, ($clinit_DoubleClickEvent() , $clinit_DoubleClickEvent() , TYPE_3));
  $doTouchHandlers(this$static, $getCanvasElement(this$static.cv));
  $addDomHandler(this$static.cv, this$static, ($clinit_ContextMenuEvent() , $clinit_ContextMenuEvent() , TYPE_2));
  $addDomHandler(this$static.menuBar, new CirSim$12(this$static), (null , TYPE_1));
  addNativePreviewHandler(this$static);
  $addDomHandler(this$static.cv, this$static, ($clinit_MouseWheelEvent() , $clinit_MouseWheelEvent() , TYPE_9));
  $setSimRunning(this$static, true);
  $scheduleRepeating(this$static.timer);
}

function $inverseTransformX(this$static, x_0){
  return round_int((x_0 - this$static.transform_0[4]) / this$static.transform_0[0]);
}

function $inverseTransformY(this$static, y_0){
  return round_int((y_0 - this$static.transform_0[5]) / this$static.transform_0[3]);
}

function $loadFileFromURL(this$static, url_0){
  var requestBuilder;
  requestBuilder = new RequestBuilder(($clinit_RequestBuilder() , GET), url_0);
  try {
    $sendRequest(requestBuilder, new CirSim$14(this$static));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 97))
      throw toJs($e0);
  }
}

function $locateElm(this$static, elm){
  var i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++)
    if (maskUndefined(elm) === maskUndefined($elementAt(this$static.elmList, i)))
      return i;
  return -1;
}

function $lu_factor(a, n, ipvt){
  var i, j, k, largest, largestRow, mult, q, row_all_zeros, x_0;
  for (i = 0; i != n; i++) {
    row_all_zeros = true;
    for (j = 0; j != n; j++) {
      if (a[i][j] != 0) {
        row_all_zeros = false;
        break;
      }
    }
    if (row_all_zeros)
      return false;
  }
  for (j = 0; j != n; j++) {
    for (i = 0; i != j; i++) {
      q = a[i][j];
      for (k = 0; k != i; k++)
        q -= a[i][k] * a[k][j];
      a[i][j] = q;
    }
    largest = 0;
    largestRow = -1;
    for (i = j; i != n; i++) {
      q = a[i][j];
      for (k = 0; k != j; k++)
        q -= a[i][k] * a[k][j];
      a[i][j] = q;
      x_0 = $wnd.Math.abs(q);
      if (x_0 >= largest) {
        largest = x_0;
        largestRow = i;
      }
    }
    if (j != largestRow) {
      for (k = 0; k != n; k++) {
        x_0 = a[largestRow][k];
        a[largestRow][k] = a[j][k];
        a[j][k] = x_0;
      }
    }
    ipvt[j] = largestRow;
    if (a[j][j] == 0) {
      $clinit_System();
      a[j][j] = 1.0E-18;
    }
    if (j != n - 1) {
      mult = 1 / a[j][j];
      for (i = j + 1; i != n; i++)
        a[i][j] *= mult;
    }
  }
  return true;
}

function $lu_solve(a, n, ipvt, b){
  var bi, i, j, row, swap, tot;
  for (i = 0; i != n; i++) {
    row = ipvt[i];
    swap = b[row];
    b[row] = b[i];
    b[i] = swap;
    if (swap != 0)
      break;
  }
  bi = i++;
  for (; i < n; i++) {
    row = ipvt[i];
    tot = b[row];
    b[row] = b[i];
    for (j = bi; j < i; j++)
      tot -= a[i][j] * b[j];
    b[i] = tot;
  }
  for (i = n - 1; i >= 0; i--) {
    tot = b[i];
    for (j = i + 1; j != n; j++)
      tot -= a[i][j] * b[j];
    b[i] = tot / a[i][i];
  }
}

function $makePostDrawList(this$static){
  var bad, ce, cn, entry, entry$iterator, j, k, pc;
  this$static.postDrawList = new Vector;
  this$static.badConnectionList = new Vector;
  for (entry$iterator = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(this$static.postCountMap)).this$01); entry$iterator.hasNext;) {
    entry = $next_1(entry$iterator);
    castTo(entry.getValue(), 24).value_0 != 2 && $add_11(this$static.postDrawList, castTo(entry.getKey(), 20));
    if (castTo(entry.getValue(), 24).value_0 == 1) {
      bad = false;
      cn = castTo(entry.getKey(), 20);
      for (j = 0; j != this$static.elmList.arrayList.array.length && !bad; j++) {
        ce = $getElm(this$static, j);
        if (instanceOf(ce, 110))
          continue;
        if (!$contains(ce.boundingBox, cn.x_0, cn.y_0))
          continue;
        pc = ce.getPostCount();
        for (k = 0; k != pc; k++)
          if ($equals(ce.getPost(k), cn))
            break;
        k == pc && (bad = true);
      }
      bad && $add_11(this$static.badConnectionList, cn);
    }
  }
  this$static.postCountMap = null;
}

function $max(a, b){
  return a > b?a:b;
}

function $menuItemWithShortcut(text_0, shortcut, cmd){
  var sn;
  sn = '<div style="display:inline-block;width:80px;">' + text_0 + '<\/div>' + shortcut;
  return new MenuItem(($clinit_SafeHtmlUtils() , new SafeHtmlString(sn)), cmd);
}

function $menuPerformed(this$static, menu, item_0){
  var dump_0, i, sp, dump_1, dump_2, dump_3;
  item_0 == 'about' && (aboutBox = new AboutBox);
  if (item_0 == 'importfromlocalfile') {
    $pushUndo(this$static);
    $doc.getElementById('LoadFileElement').click();
  }
  item_0 == 'importfromtext' && (importFromTextDialog = new ImportFromTextDialog(this$static));
  item_0 == 'importfromdropbox' && (importFromDropboxDialog = new ImportFromDropboxDialog(this$static));
  item_0 == 'exportasurl' && (dump_1 = $dumpCircuit(this$static) , exportAsUrlDialog = new ExportAsUrlDialog(dump_1) , $show_0(exportAsUrlDialog) , undefined);
  item_0 == 'exportaslocalfile' && (dump_2 = $dumpCircuit(this$static) , exportAsLocalFileDialog = new ExportAsLocalFileDialog(dump_2) , $show_0(exportAsLocalFileDialog) , undefined);
  item_0 == 'exportastext' && (dump_3 = $dumpCircuit(this$static) , exportAsTextDialog = new ExportAsTextDialog(this$static, dump_3) , $show_0(exportAsTextDialog) , undefined);
  item_0 == 'exporttodropbox' && (dump_0 = $dumpCircuit(this$static) , new ExportToDropbox(dump_0));
  (menu == 'elm' || menu == 'scopepop') && !!this$static.contextPanel && $hide(this$static.contextPanel, false);
  menu == 'options' && item_0 == 'other' && $doEdit(this$static, new EditOptions(this$static));
  item_0 == 'undo' && $doUndo(this$static);
  item_0 == 'redo' && $doRedo(this$static);
  if (item_0 == 'cut') {
    menu != 'elm' && (this$static.menuElm = null);
    $doCut(this$static);
  }
  if (item_0 == 'copy') {
    menu != 'elm' && (this$static.menuElm = null);
    $doCopy(this$static);
  }
  item_0 == 'paste' && $doPaste(this$static, null);
  if (item_0 == 'duplicate') {
    menu != 'elm' && (this$static.menuElm = null);
    $doDuplicate(this$static);
  }
  item_0 == 'flip' && ($flipPosts(this$static.menuElm) , this$static.analyzeFlag = true);
  item_0 == 'selectAll' && $doSelectAll(this$static);
  if (item_0 == 'centrecircuit') {
    $pushUndo(this$static);
    $centreCircuit(this$static);
  }
  item_0 == 'stackAll' && $stackAll(this$static);
  item_0 == 'unstackAll' && $unstackAll(this$static);
  item_0 == 'combineAll' && $combineAll(this$static);
  item_0 == 'zoomin' && $zoomCircuit(this$static, 20);
  item_0 == 'zoomout' && $zoomCircuit(this$static, -20);
  item_0 == 'zoom100' && $setCircuitScale(this$static, 1);
  menu == 'elm' && item_0 == 'edit' && $doEdit(this$static, this$static.menuElm);
  if (item_0 == 'delete') {
    menu != 'elm' && (this$static.menuElm = null);
    $doDelete(this$static);
  }
  if (item_0 == 'viewInScope' && !!this$static.menuElm) {
    for (i = 0; i != this$static.scopeCount; i++)
      if (!$getElm_0(this$static.scopes[i]))
        break;
    if (i == this$static.scopeCount) {
      if (this$static.scopeCount == this$static.scopes.length)
        return;
      ++this$static.scopeCount;
      this$static.scopes[i] = new Scope(this$static);
      this$static.scopes[i].position = i;
    }
    $setElm(this$static.scopes[i], this$static.menuElm);
    i > 0 && (this$static.scopes[i].speed = this$static.scopes[i - 1].speed);
  }
  if (menu == 'scopepop') {
    $pushUndo(this$static);
    item_0 == 'remove' && $setElm(this$static.scopes[this$static.menuScope], null);
    item_0 == 'removeplot' && $removePlot(this$static.scopes[this$static.menuScope], this$static.menuPlot);
    item_0 == 'speed2' && $speedUp(this$static.scopes[this$static.menuScope]);
    item_0 == 'speed1/2' && $slowDown(this$static.scopes[this$static.menuScope]);
    item_0 == 'maxscale' && $maxScale(this$static.scopes[this$static.menuScope]);
    item_0 == 'stack' && $stackScope(this$static, this$static.menuScope);
    item_0 == 'unstack' && $unstackScope(this$static, this$static.menuScope);
    item_0 == 'combine' && $combineScope(this$static, this$static.menuScope);
    item_0 == 'selecty' && $selectY(this$static.scopes[this$static.menuScope]);
    item_0 == 'reset' && $resetGraph(this$static.scopes[this$static.menuScope]);
    (item_0.indexOf('show') == 0 || item_0 == 'plotxy' || item_0 == 'showfft') && $handleMenu(this$static.scopes[this$static.menuScope], item_0);
  }
  if (menu == 'circuits' && item_0.indexOf('setup ') == 0) {
    $pushUndo(this$static);
    sp = $indexOf_1(item_0, fromCodePoint(32), 6);
    $readSetupFile(this$static, item_0.substr(6, sp - 6), item_0.substr(sp + 1));
  }
  if (menu == 'main') {
    !!this$static.contextPanel && $hide(this$static.contextPanel, false);
    this$static.mouseMode = 0;
    $setCursorStyle(this$static, 'cursorCross');
    item_0.length > 0 && (this$static.mouseModeStr = item_0);
    $compareTo(item_0, 'DragAll') == 0?(this$static.mouseMode = 1 , $setCursorStyle(this$static, 'cursorPointer')):$compareTo(item_0, 'DragRow') == 0?(this$static.mouseMode = 2 , $setCursorStyle(this$static, 'cursorPointer')):$compareTo(item_0, 'DragColumn') == 0?(this$static.mouseMode = 3 , $setCursorStyle(this$static, 'cursorPointer')):$compareTo(item_0, 'DragSelected') == 0?(this$static.mouseMode = 4 , $setCursorStyle(this$static, 'cursorPointer')):$compareTo(item_0, 'DragPost') == 0?(this$static.mouseMode = 5 , $setCursorStyle(this$static, 'cursorPointer')):$compareTo(item_0, 'Select') == 0 && (this$static.mouseMode = 6 , $setCursorStyle(this$static, 'cursorPointer'));
    this$static.tempMouseMode = this$static.mouseMode;
  }
}

function $min(a, b){
  return a < b?a:b;
}

function $mouseDragged(this$static, e){
  var gx, gy, success;
  if ($eventGetButton(e.nativeEvent) == 2) {
    if (!(!!e.nativeEvent.metaKey || !!e.nativeEvent.shiftKey || !!e.nativeEvent.ctrlKey || !!e.nativeEvent.altKey))
      return;
  }
  if (this$static.tempMouseMode == 7) {
    $dragSplitter(this$static, ($getX(e) , $getY(e)));
    return;
  }
  gx = $inverseTransformX(this$static, $getX(e));
  gy = $inverseTransformY(this$static, $getY(e));
  if (!$contains(this$static.circuitArea, $getX(e), $getY(e)))
    return;
  !!this$static.dragElm && this$static.dragElm.drag(gx, gy);
  success = true;
  switch (this$static.tempMouseMode) {
    case 1:
      $dragAll(this$static, $getX(e), $getY(e));
      break;
    case 2:
      $dragRow(this$static, gy + this$static.gridRound & this$static.gridMask);
      break;
    case 3:
      $dragColumn(this$static, gx + this$static.gridRound & this$static.gridMask);
      break;
    case 5:
      !!this$static.mouseElm && $dragPost(this$static, gx + this$static.gridRound & this$static.gridMask, gy + this$static.gridRound & this$static.gridMask);
      break;
    case 6:
      if (!this$static.mouseElm)
        $selectArea(this$static, gx, gy);
      else {
        $clinit_System();
        if (lt(sub_1(fromDouble_0(Date.now()), this$static.mouseDownTime), 150))
          return;
        this$static.tempMouseMode = 4;
        success = $dragSelected(this$static, gx, gy);
      }

      break;
    case 4:
      success = $dragSelected(this$static, gx, gy);
  }
  if (success) {
    this$static.dragScreenX = $getX(e);
    this$static.dragScreenY = $getY(e);
    this$static.dragGridX = $inverseTransformX(this$static, this$static.dragScreenX);
    this$static.dragGridY = $inverseTransformY(this$static, this$static.dragScreenY);
    if (!(this$static.tempMouseMode == 4 && $onlyGraphicsElmsSelected(this$static))) {
      this$static.dragGridX = $snapGrid(this$static, this$static.dragGridX);
      this$static.dragGridY = $snapGrid(this$static, this$static.dragGridY);
    }
  }
}

function $mouseSelect(this$static, e){
  var area, bestArea, bestDist, ce, dist, gx, gy, i, j, jn, newMouseElm, pt, s, sx, sy, isOverSplitter;
  newMouseElm = null;
  this$static.mouseCursorX = $getX(e);
  this$static.mouseCursorY = $getY(e);
  sx = $getX(e);
  sy = $getY(e);
  gx = round_int((sx - this$static.transform_0[4]) / this$static.transform_0[0]);
  gy = round_int((sy - this$static.transform_0[5]) / this$static.transform_0[3]);
  this$static.dragGridX = gx + this$static.gridRound & this$static.gridMask;
  this$static.dragGridY = gy + this$static.gridRound & this$static.gridMask;
  this$static.dragScreenX = sx;
  this$static.dragScreenY = sy;
  this$static.draggingPost = -1;
  this$static.mousePost = -1;
  this$static.plotXElm = this$static.plotYElm = null;
  if (isOverSplitter = sx >= 0 && sx < this$static.circuitArea.width_0 && sy >= this$static.circuitArea.height_0 - 5 && sy < this$static.circuitArea.height_0 , isOverSplitter != this$static.mouseWasOverSplitter && (isOverSplitter?$setCursorStyle(this$static, 'cursorSplitter'):$setMouseMode(this$static, this$static.mouseMode)) , this$static.mouseWasOverSplitter = isOverSplitter , isOverSplitter) {
    $setMouseElm(this$static, null);
    return;
  }
  if (!!this$static.mouseElm && $getHandleGrabbedClose(this$static.mouseElm, gx, gy, 256) >= 0) {
    newMouseElm = this$static.mouseElm;
  }
   else {
    bestDist = $intern_73;
    bestArea = $intern_73;
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      if ($contains(ce.boundingBox, gx, gy)) {
        area = ce.boundingBox.width_0 * ce.boundingBox.height_0;
        jn = ce.getPostCount();
        jn > 2 && (jn = 2);
        for (j = 0; j != jn; j++) {
          pt = ce.getPost(j);
          dist = distanceSq(gx, gy, pt.x_0, pt.y_0);
          if (dist <= bestDist && area <= bestArea) {
            bestDist = dist;
            bestArea = area;
            newMouseElm = ce;
          }
        }
        ce.getPostCount() == 0 && (newMouseElm = ce);
      }
    }
  }
  this$static.scopeSelected = -1;
  if (!newMouseElm) {
    for (i = 0; i != this$static.scopeCount; i++) {
      s = this$static.scopes[i];
      if ($contains(s.rect, sx, sy)) {
        newMouseElm = $getElm_0(s);
        if (s.plotXY) {
          this$static.plotXElm = $getElm_0(s);
          this$static.plotYElm = $getYElm(s);
        }
        this$static.scopeSelected = i;
      }
    }
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      if (this$static.mouseMode == 5) {
        if ($getHandleGrabbedClose(ce, gx, gy, 0) > 0) {
          newMouseElm = ce;
          break;
        }
      }
      jn = ce.getPostCount();
      for (j = 0; j != jn; j++) {
        pt = ce.getPost(j);
        if (distanceSq(pt.x_0, pt.y_0, gx, gy) < 26) {
          newMouseElm = ce;
          this$static.mousePost = j;
          break;
        }
      }
    }
  }
   else {
    this$static.mousePost = -1;
    for (i = 0; i != newMouseElm.getPostCount(); i++) {
      pt = newMouseElm.getPost(i);
      distanceSq(pt.x_0, pt.y_0, gx, gy) < 26 && (this$static.mousePost = i);
    }
  }
  $setMouseElm(this$static, newMouseElm);
}

function $onlyGraphicsElmsSelected(this$static){
  var ce, i;
  if (!!this$static.mouseElm && !instanceOf(this$static.mouseElm, 110))
    return false;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    if (ce.selected && !instanceOf(ce, 110))
      return false;
  }
  return true;
}

function $processSetupList(this$static, b, len, openDefault){
  var currentMenuBar, file, first, i, l_0, lastArg, line, n, p, sm, stack_0, stackptr, title_0;
  stack_0 = initUnidimensionalArray(Lcom_google_gwt_user_client_ui_MenuBar_2_classLit, $intern_3, 35, 6, 0, 1);
  stackptr = 0;
  currentMenuBar = new MenuBar_0(true);
  currentMenuBar.autoOpen = true;
  $addItem(this$static.menuBar, new MenuItem_2((sm = castToString($getStringValue(localizationMap, 'Circuits')) , sm != null?sm:'Circuits'), currentMenuBar));
  stack_0[stackptr++] = currentMenuBar;
  for (p = 0; p < len;) {
    for (l_0 = 0; l_0 != len - p; l_0++)
      if (b[l_0 + p] == 10) {
        ++l_0;
        break;
      }
    line = valueOf_0($decodeString(b, p, (lastArg = l_0 - 1 , $clinit_EmulatedCharset() , lastArg)));
    checkCriticalStringElementIndex(0, line.length);
    if (line.charCodeAt(0) == 35)
    ;
    else {
      checkCriticalStringElementIndex(0, line.length);
      if (line.charCodeAt(0) == 43) {
        n = new MenuBar_0(true);
        n.autoOpen = true;
        $addItem(currentMenuBar, new MenuItem_2(LS(line.substr(1)), n));
        currentMenuBar = stack_0[stackptr++] = n;
      }
       else {
        checkCriticalStringElementIndex(0, line.length);
        if (line.charCodeAt(0) == 45) {
          currentMenuBar = stack_0[--stackptr - 1];
        }
         else {
          i = $indexOf_0(line, fromCodePoint(32));
          if (i > 0) {
            title_0 = LS(line.substr(i + 1));
            first = false;
            checkCriticalStringElementIndex(0, line.length);
            line.charCodeAt(0) == 62 && (first = true);
            file = line.substr(first?1:0, i - (first?1:0));
            $addItem(currentMenuBar, new MenuItem_1(title_0, new MyCommand('circuits', 'setup ' + file + ' ' + title_0)));
            if ($equals_1(file, this$static.startCircuit) && this$static.startLabel == null) {
              this$static.startLabel = title_0;
              $setText_0(this$static.titleLabel, title_0);
            }
            if (first && this$static.startCircuit == null) {
              this$static.startCircuit = file;
              this$static.startLabel = title_0;
              openDefault && this$static.stopMessage == null && $readSetupFile(this$static, this$static.startCircuit, this$static.startLabel);
            }
          }
        }
      }
    }
    p += l_0;
  }
}

function $pushUndo(this$static){
  var s;
  this$static.redoStack.arrayList.array = initUnidimensionalArray(Ljava_lang_Object_2_classLit, $intern_3, 1, 0, 5, 1);
  s = $dumpCircuit(this$static);
  if (this$static.undoStack.arrayList.array.length > 0 && $compareTo(s, castToString($lastElement(this$static.undoStack))) == 0)
    return;
  $add_11(this$static.undoStack, s);
  $setEnabled(this$static.redoItem, this$static.redoStack.arrayList.array.length > 0);
  $setEnabled(this$static.undoItem, this$static.undoStack.arrayList.array.length > 0);
}

function $readClipboardFromStorage(this$static){
  var stor;
  stor = (!localStorage_0 && ($clinit_Storage$StorageSupportDetector() , localStorageSupported) && (localStorage_0 = new Storage_0) , localStorage_0);
  if (!stor)
    return;
  this$static.clipboard = $getItem(stor.storage, 'circuitClipboard');
}

function $readOptions(this$static, st){
  var flags, sp, sp2;
  flags = (new Integer_0($nextToken(st))).value_0;
  $setState_0(this$static.dotsCheckItem, (flags & 1) != 0);
  $setState_0(this$static.smallGridCheckItem, (flags & 2) != 0);
  $setState_0(this$static.voltsCheckItem, (flags & 4) == 0);
  $setState_0(this$static.powerCheckItem, (flags & 8) == 8);
  $setState_0(this$static.showValuesCheckItem, (flags & 16) == 0);
  this$static.timeStep = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  sp = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  sp2 = round_int($wnd.Math.log(10 * sp) * 24 + 61.5);
  $setValue_3(this$static.speedBar, sp2);
  $setValue_3(this$static.currentBar, (new Integer_0($nextToken(st))).value_0);
  voltageRange = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  try {
    $setValue_3(this$static.powerBar, (new Integer_0($nextToken(st))).value_0);
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  $setGrid(this$static);
}

function $readSetup(this$static, text_0){
  var lastArg;
  $readSetup_1(this$static, $getBytes((lastArg = text_0 , $clinit_EmulatedCharset() , lastArg)), text_0.length, false, true);
  $setText_0(this$static.titleLabel, null);
  $setText_0(this$static.titleLabel, null);
}

function $readSetup_0(this$static, text_0){
  var lastArg;
  $readSetup_1(this$static, $getBytes((lastArg = text_0 , $clinit_EmulatedCharset() , lastArg)), text_0.length, true, false);
  $setText_0(this$static.titleLabel, null);
}

function $readSetup_1(this$static, b, len, retain, centre){
  var ce, ee, f, i, l_0, line, linelen, newce, p, sc, st, tint, type_0, x1, x2, y1, y2;
  if (!retain) {
    this$static.scopeSelected = -1;
    this$static.mouseElm = this$static.plotXElm = this$static.plotYElm = null;
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      ce.delete_0();
    }
    this$static.elmList.arrayList.array = initUnidimensionalArray(Ljava_lang_Object_2_classLit, $intern_3, 1, 0, 5, 1);
    this$static.hintType = -1;
    this$static.timeStep = 5.0E-6;
    $setState_0(this$static.dotsCheckItem, false);
    $setState_0(this$static.smallGridCheckItem, false);
    $setState_0(this$static.powerCheckItem, false);
    $setState_0(this$static.voltsCheckItem, true);
    $setState_0(this$static.showValuesCheckItem, true);
    $setGrid(this$static);
    $setValue_3(this$static.speedBar, 117);
    $setValue_3(this$static.currentBar, 50);
    $setValue_3(this$static.powerBar, 50);
    voltageRange = 5;
    this$static.scopeCount = 0;
    this$static.lastIterTime = 0;
  }
  for (p = 0; p < len;) {
    linelen = len - p;
    for (l_0 = 0; l_0 != len - p; l_0++)
      if (b[l_0 + p] == 10 || b[l_0 + p] == 13) {
        linelen = l_0++;
        l_0 + p < b.length && b[l_0 + p] == 10 && ++l_0;
        break;
      }
    line = valueOf_0($decodeString(b, p, ($clinit_EmulatedCharset() , linelen)));
    st = new StringTokenizer(line, ' +\t\n\r\f');
    while ($hasMoreTokens(st)) {
      type_0 = $nextToken(st);
      tint = (checkCriticalStringElementIndex(0, type_0.length) , type_0.charCodeAt(0));
      try {
        if (tint == 111) {
          sc = new Scope(this$static);
          sc.position = this$static.scopeCount;
          $undump(sc, st);
          this$static.scopes[this$static.scopeCount++] = sc;
          break;
        }
        if (tint == 104) {
          this$static.hintType = (new Integer_0($nextToken(st))).value_0;
          this$static.hintItem1 = (new Integer_0($nextToken(st))).value_0;
          this$static.hintItem2 = (new Integer_0($nextToken(st))).value_0;
          break;
        }
        if (tint == 36) {
          $readOptions(this$static, st);
          break;
        }
        if (tint == 33) {
          new CustomLogicModel_1(st);
          break;
        }
        if (tint == 37 || tint == 63 || tint == 66) {
          break;
        }
        tint >= 48 && tint <= 57 && (tint = (new Integer_0(type_0)).value_0);
        x1 = (new Integer_0($nextToken(st))).value_0;
        y1 = (new Integer_0($nextToken(st))).value_0;
        x2 = (new Integer_0($nextToken(st))).value_0;
        y2 = (new Integer_0($nextToken(st))).value_0;
        f = (new Integer_0($nextToken(st))).value_0;
        newce = createCe(tint, x1, y1, x2, y2, f, st);
        if (!newce) {
          $clinit_System();
          break;
        }
        newce.setPoints();
        $addElement(this$static.elmList, newce);
      }
       catch ($e0) {
        $e0 = toJava($e0);
        if (instanceOf($e0, 14)) {
          ee = $e0;
          $printStackTraceImpl(ee, ($clinit_System() , err_0), '');
          console.log('exception while undumping ' + ee);
          break;
        }
         else 
          throw toJs($e0);
      }
      break;
    }
    p += l_0;
  }
  $setPowerBarEnable(this$static);
  this$static.analyzeFlag = true;
  centre && $centreCircuit(this$static);
}

function $readSetupFile(this$static, str, title_0){
  var url_0;
  this$static.t = 0;
  $clinit_System();
  url_0 = getModuleBaseURL() + 'circuits/' + str + '?v=' + round_int($nextInternal(this$static.random, 32));
  $loadFileFromURL(this$static, url_0);
  title_0 != null && $setText_0(this$static.titleLabel, title_0);
}

function $removeWidgetFromVerticalPanel(this$static, w){
  $remove_3(this$static.verticalPanel, w);
  !!this$static.iFrame && $setiFrameHeight(this$static);
}

function $removeZeroLengthElements(this$static){
  var ce, i;
  for (i = this$static.elmList.arrayList.array.length - 1; i >= 0; i--) {
    ce = $getElm(this$static, i);
    if (ce.x_0 == ce.x2 && ce.y_0 == ce.y2) {
      $removeElementAt(this$static.elmList, i);
      ce.delete_0();
    }
  }
  this$static.analyzeFlag = true;
}

function $resetAction(this$static){
  var i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++)
    $getElm(this$static, i).reset_0();
  for (i = 0; i != this$static.scopeCount; i++)
    $resetGraph(this$static.scopes[i]);
  this$static.analyzeFlag = true;
  this$static.t == 0?$setSimRunning(this$static, true):(this$static.t = 0);
}

function $runCircuit(this$static, didAnalyze){
  var ce, cn, cnl, debugprint, delayWireProcessing, i, iter, j, ji, k, lit, printit, res, ri, sm, steprate, subiter, tm, x_0;
  if (this$static.circuitMatrix == null || this$static.elmList.arrayList.array.length == 0) {
    this$static.circuitMatrix = null;
    return;
  }
  debugprint = this$static.dumpMatrix;
  this$static.dumpMatrix = false;
  steprate = fromDouble_0(160 * $getIterCount(this$static));
  tm = ($clinit_System() , fromDouble_0(Date.now()));
  lit = this$static.lastIterTime;
  if (compare_0(lit, 0) == 0) {
    this$static.lastIterTime = tm;
    return;
  }
  if (gte_0($intern_20, mul_0(steprate, sub_1(tm, this$static.lastIterTime))) && !didAnalyze)
    return;
  delayWireProcessing = $canDelayWireProcessing(this$static);
  for (iter = 1;; iter++) {
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      ce.startIteration();
    }
    ++this$static.steps;
    for (subiter = 0; subiter != 5000; subiter++) {
      this$static.converged = true;
      this$static.subIterations = subiter;
      for (i = 0; i != this$static.circuitMatrixSize; i++)
        this$static.circuitRightSide[i] = this$static.origRightSide[i];
      if (this$static.circuitNonLinear) {
        for (i = 0; i != this$static.circuitMatrixSize; i++)
          for (j = 0; j != this$static.circuitMatrixSize; j++)
            this$static.circuitMatrix[i][j] = this$static.origMatrix[i][j];
      }
      for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
        ce = $getElm(this$static, i);
        ce.doStep();
      }
      if (this$static.stopMessage != null)
        return;
      printit = debugprint;
      debugprint = false;
      for (j = 0; j != this$static.circuitMatrixSize; j++) {
        for (i = 0; i != this$static.circuitMatrixSize; i++) {
          x_0 = this$static.circuitMatrix[i][j];
          if (isNaN(x_0) || !isNaN(x_0) && !isFinite(x_0)) {
            $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'nan/infinite matrix!')) , sm != null?sm:'nan/infinite matrix!'), null);
            return;
          }
        }
      }
      if (printit) {
        for (j = 0; j != this$static.circuitMatrixSize; j++) {
          x_0 = '';
          for (i = 0; i != this$static.circuitMatrixSize; i++)
            x_0 += this$static.circuitMatrix[j][i] + ',';
          x_0 += '\n';
          console.log(x_0);
        }
        console.log('');
      }
      if (this$static.circuitNonLinear) {
        if (this$static.converged && subiter > 0)
          break;
        if (!$lu_factor(this$static.circuitMatrix, this$static.circuitMatrixSize, this$static.circuitPermute)) {
          $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Singular matrix!')) , sm != null?sm:'Singular matrix!'), null);
          return;
        }
      }
      $lu_solve(this$static.circuitMatrix, this$static.circuitMatrixSize, this$static.circuitPermute, this$static.circuitRightSide);
      for (j = 0; j != this$static.circuitMatrixFullSize; j++) {
        ri = this$static.circuitRowInfo[j];
        ri.type_0 == 1?(res = ri.value_0):(res = this$static.circuitRightSide[ri.mapCol]);
        if (isNaN(res)) {
          this$static.converged = false;
          break;
        }
        if (j < this$static.nodeList.arrayList.array.length - 1) {
          cn = $getCircuitNode(this$static, j + 1);
          for (k = 0; k != cn.links_0.arrayList.array.length; k++) {
            cnl = castTo($elementAt(cn.links_0, k), 89);
            cnl.elm.setNodeVoltage(cnl.num, res);
          }
        }
         else {
          ji = j - (this$static.nodeList.arrayList.array.length - 1);
          this$static.voltageSources[ji].setCurrent(ji, res);
        }
      }
      if (!this$static.circuitNonLinear)
        break;
    }
    subiter > 5 && (console.log('converged after ' + subiter + ' iterations\n') , undefined);
    if (subiter == 5000) {
      $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Convergence failed!')) , sm != null?sm:'Convergence failed!'), null);
      break;
    }
    this$static.t += this$static.timeStep;
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      ce.stepFinished();
    }
    delayWireProcessing || $calcWireCurrents(this$static);
    for (i = 0; i != this$static.scopeCount; i++)
      $timeStep(this$static.scopes[i]);
    tm = fromDouble_0(Date.now());
    lit = tm;
    if (gte_0((iter + 1) * $intern_20, mul_0(steprate, sub_1(tm, this$static.lastIterTime))) || gt(sub_1(tm, this$static.lastFrameTime), 500))
      break;
  }
  this$static.lastIterTime = lit;
  delayWireProcessing && $calcWireCurrents(this$static);
}

function $scrollValues(this$static, x_0, y_0, deltay){
  !!this$static.mouseElm && !$dialogIsShowing(this$static) && this$static.scopeSelected == -1 && (instanceOf(this$static.mouseElm, 92) || instanceOf(this$static.mouseElm, 53) || instanceOf(this$static.mouseElm, 102)) && (scrollValuePopup = new ScrollValuePopup(x_0, y_0, deltay, this$static.mouseElm, this$static));
}

function $selectArea(this$static, x_0, y_0){
  var ce, i, x1, x2, y1, y2;
  x1 = $min(x_0, this$static.initDragGridX);
  x2 = $max(x_0, this$static.initDragGridX);
  y1 = $min(y_0, this$static.initDragGridY);
  y2 = $max(y_0, this$static.initDragGridY);
  this$static.selectedArea = new Rectangle_0(x1, y1, x2 - x1, y2 - y1);
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static, i);
    $selectRect(ce, this$static.selectedArea);
  }
}

function $setCanvasSize(this$static){
  var height, width_0;
  width_0 = $getOffsetWidth(get_0());
  height = $getOffsetHeight(get_0());
  height = height - 30;
  width_0 = width_0 - VERTICALPANELWIDTH;
  if (this$static.cv) {
    $setWidth(this$static.cv, width_0 + 'PX');
    $setHeight(this$static.cv, height + 'PX');
    $setCoordinateSpaceWidth(this$static.cv, width_0);
    $setCoordinateSpaceHeight(this$static.cv, height);
  }
  if (this$static.backcv) {
    $setWidth(this$static.backcv, width_0 + 'PX');
    $setHeight(this$static.backcv, height + 'PX');
    $setCoordinateSpaceWidth(this$static.backcv, width_0);
    $setCoordinateSpaceHeight(this$static.backcv, height);
  }
  $setCircuitArea(this$static);
}

function $setCircuitArea(this$static){
  var h, height, width_0;
  height = $getElement(this$static.cv).height;
  width_0 = $getElement(this$static.cv).width;
  h = round_int(height * this$static.scopeHeightFraction);
  this$static.circuitArea = new Rectangle_0(0, 0, width_0, height - h);
}

function $setCircuitScale(this$static, newScale){
  var cx, cy;
  cx = $inverseTransformX(this$static, this$static.circuitArea.width_0 / 2 | 0);
  cy = $inverseTransformY(this$static, this$static.circuitArea.height_0 / 2 | 0);
  this$static.transform_0[0] = this$static.transform_0[3] = newScale;
  this$static.transform_0[4] = (this$static.circuitArea.width_0 / 2 | 0) - cx * newScale;
  this$static.transform_0[5] = (this$static.circuitArea.height_0 / 2 | 0) - cy * newScale;
}

function $setCursorStyle(this$static, s){
  this$static.lastCursorStyle != null && $removeStyleName(this$static.cv, this$static.lastCursorStyle);
  $addStyleName(this$static.cv, s);
  this$static.lastCursorStyle = s;
}

function $setGrid(this$static){
  this$static.gridSize = this$static.smallGridCheckItem.on?8:16;
  this$static.gridMask = ~(this$static.gridSize - 1);
  this$static.gridRound = (this$static.gridSize / 2 | 0) - 1;
}

function $setMenuSelection(this$static){
  if (this$static.menuElm) {
    if (this$static.menuElm.selected)
      return;
    $clearSelection(this$static);
    this$static.menuElm.selected = true;
  }
}

function $setMouseElm(this$static, ce){
  if (ce != this$static.mouseElm) {
    !!this$static.mouseElm && this$static.mouseElm.setMouseElm(false);
    !!ce && ce.setMouseElm(true);
    this$static.mouseElm = ce;
  }
}

function $setMouseMode(this$static, mode){
  this$static.mouseMode = mode;
  mode == 0?$setCursorStyle(this$static, 'cursorCross'):$setCursorStyle(this$static, 'cursorPointer');
}

function $setOptionInStorage(key, val){
  var stor;
  stor = (!localStorage_0 && ($clinit_Storage$StorageSupportDetector() , localStorageSupported) && (localStorage_0 = new Storage_0) , localStorage_0);
  if (!stor)
    return;
  $setItem_0(stor.storage, key, val?'true':'false');
}

function $setPowerBarEnable(this$static){
  if (this$static.powerCheckItem.on) {
    $setStyleName_0(this$static.powerLabel, 'disabled', false);
    $enable(this$static.powerBar);
  }
   else {
    $setStyleName_0(this$static.powerLabel, 'disabled', true);
    $disable(this$static.powerBar);
  }
}

function $setSimRunning(this$static, s){
  var sm;
  if (s) {
    this$static.simRunning = true;
    $setHTML(this$static.runStopButton, ($clinit_SafeHtmlUtils() , (new SafeHtmlString((sm = castToString($getStringValue(localizationMap, '<strong>RUN<\/strong>&nbsp;/&nbsp;Stop')) , sm != null?sm:'<strong>RUN<\/strong>&nbsp;/&nbsp;Stop'))).html));
    $setStylePrimaryName(this$static.runStopButton, 'topButton');
  }
   else {
    this$static.simRunning = false;
    $setHTML(this$static.runStopButton, ($clinit_SafeHtmlUtils() , (new SafeHtmlString((sm = castToString($getStringValue(localizationMap, 'Run&nbsp;/&nbsp;<strong>STOP<\/strong>')) , sm != null?sm:'Run&nbsp;/&nbsp;<strong>STOP<\/strong>'))).html));
    $setStylePrimaryName(this$static.runStopButton, 'topButton-red');
  }
}

function $setiFrameHeight(this$static){
  var cumheight, i, ih;
  if (!this$static.iFrame)
    return;
  cumheight = 0;
  for (i = 0; i < $getWidgetIndex(this$static.verticalPanel, this$static.iFrame); i++) {
    if ($getWidget(this$static.verticalPanel, i) != this$static.loadFileInput) {
      cumheight = cumheight + $getWidget(this$static.verticalPanel, i).getOffsetHeight();
      ($getWidget(this$static.verticalPanel, i).getStyleElement().className || '').indexOf('topSpace') != -1 && (cumheight += 12);
    }
  }
  ih = $getOffsetHeight(get_0()) - 30 - cumheight;
  ih < 0 && (ih = 0);
  $setHeight(this$static.iFrame, ih + 'px');
}

function $setupScopes(this$static){
  var colct, colh, h, i, iw, j, pos, r, row, s, speed, w;
  pos = -1;
  for (i = 0; i < this$static.scopeCount; i++) {
    if ($needToRemove(this$static.scopes[i])) {
      for (j = i; j != this$static.scopeCount; j++)
        this$static.scopes[j] = this$static.scopes[j + 1];
      --this$static.scopeCount;
      --i;
      continue;
    }
    this$static.scopes[i].position > pos + 1 && (this$static.scopes[i].position = pos + 1);
    pos = this$static.scopes[i].position;
  }
  while (this$static.scopeCount > 0 && !$getElm_0(this$static.scopes[this$static.scopeCount - 1]))
    --this$static.scopeCount;
  h = $getCoordinateSpaceHeight(this$static.cv) - this$static.circuitArea.height_0;
  pos = 0;
  for (i = 0; i != this$static.scopeCount; i++)
    this$static.scopeColCount[i] = 0;
  for (i = 0; i != this$static.scopeCount; i++) {
    pos = $max(this$static.scopes[i].position, pos);
    ++this$static.scopeColCount[this$static.scopes[i].position];
  }
  colct = pos + 1;
  iw = 120;
  colct <= 2 && (iw = 180);
  w = ($getCoordinateSpaceWidth(this$static.cv) - iw) / colct | 0;
  w < 20 && (w = 20);
  pos = -1;
  colh = 0;
  row = 0;
  speed = 0;
  for (i = 0; i != this$static.scopeCount; i++) {
    s = this$static.scopes[i];
    if (s.position > pos) {
      pos = s.position;
      colh = h / this$static.scopeColCount[pos] | 0;
      row = 0;
      speed = s.speed;
    }
    s.stackCount = this$static.scopeColCount[pos];
    if (s.speed != speed) {
      s.speed = speed;
      $resetGraph(s);
    }
    r = new Rectangle_0(pos * w, $getCoordinateSpaceHeight(this$static.cv) - h + colh * row, w - 10, colh);
    ++row;
    $equals_0(r, s.rect) || $setRect(s, r);
  }
}

function $simplifyMatrix(this$static, matrixSize){
  var elt, i, ii, j, newmatx, newrs, nn, q, qp, qv, re, ri, rri, rsadd, sm;
  for (i = 0; i != matrixSize; i++) {
    qp = -1;
    qv = 0;
    re = this$static.circuitRowInfo[i];
    if (re.lsChanges || re.dropRow || re.rsChanges)
      continue;
    rsadd = 0;
    for (j = 0; j != matrixSize; j++) {
      q = this$static.circuitMatrix[i][j];
      if (this$static.circuitRowInfo[j].type_0 == 1) {
        rsadd -= this$static.circuitRowInfo[j].value_0 * q;
        continue;
      }
      if (q == 0)
        continue;
      if (qp == -1) {
        qp = j;
        qv = q;
        continue;
      }
      break;
    }
    if (j == matrixSize) {
      if (qp == -1) {
        $stop(this$static, (sm = castToString($getStringValue(localizationMap, 'Matrix error')) , sm != null?sm:'Matrix error'), null);
        return;
      }
      elt = this$static.circuitRowInfo[qp];
      if (elt.type_0 != 0) {
        $clinit_System();
        continue;
      }
      elt.type_0 = 1;
      elt.value_0 = (this$static.circuitRightSide[i] + rsadd) / qv;
      this$static.circuitRowInfo[i].dropRow = true;
      i = -1;
    }
  }
  nn = 0;
  for (i = 0; i != matrixSize; i++) {
    elt = this$static.circuitRowInfo[i];
    if (elt.type_0 == 0) {
      elt.mapCol = nn++;
      continue;
    }
    elt.type_0 == 1 && (elt.mapCol = -1);
  }
  newmatx = initMultidimensionalArray(D_classLit, [$intern_3, $intern_57], [29, 9], 15, [nn, nn], 2);
  newrs = initUnidimensionalArray(D_classLit, $intern_57, 9, nn, 15, 1);
  ii = 0;
  for (i = 0; i != matrixSize; i++) {
    rri = this$static.circuitRowInfo[i];
    if (rri.dropRow) {
      rri.mapRow = -1;
      continue;
    }
    newrs[ii] = this$static.circuitRightSide[i];
    rri.mapRow = ii;
    for (j = 0; j != matrixSize; j++) {
      ri = this$static.circuitRowInfo[j];
      ri.type_0 == 1?(newrs[ii] -= ri.value_0 * this$static.circuitMatrix[i][j]):(newmatx[ii][ri.mapCol] += this$static.circuitMatrix[i][j]);
    }
    ++ii;
  }
  this$static.circuitMatrix = newmatx;
  this$static.circuitRightSide = newrs;
  matrixSize = this$static.circuitMatrixSize = nn;
  for (i = 0; i != matrixSize; i++)
    this$static.origRightSide[i] = this$static.circuitRightSide[i];
  for (i = 0; i != matrixSize; i++)
    for (j = 0; j != matrixSize; j++)
      this$static.origMatrix[i][j] = this$static.circuitMatrix[i][j];
  this$static.circuitNeedsMap = true;
}

function $snapGrid(this$static, x_0){
  return x_0 + this$static.gridRound & this$static.gridMask;
}

function $stackAll(this$static){
  var i;
  for (i = 0; i != this$static.scopeCount; i++) {
    this$static.scopes[i].position = 0;
    this$static.scopes[i].showMax = this$static.scopes[i].showMin = false;
  }
}

function $stackScope(this$static, s){
  if (s == 0) {
    if (this$static.scopeCount < 2)
      return;
    s = 1;
  }
  if (this$static.scopes[s].position == this$static.scopes[s - 1].position)
    return;
  this$static.scopes[s].position = this$static.scopes[s - 1].position;
  for (++s; s < this$static.scopeCount; s++)
    --this$static.scopes[s].position;
}

function $stampCCCS(this$static, n1, n2, vs, gain){
  var vn;
  vn = this$static.nodeList.arrayList.array.length + vs;
  $stampMatrix(this$static, n1, vn, gain);
  $stampMatrix(this$static, n2, vn, -gain);
}

function $stampConductance(this$static, n1, n2, r0){
  $stampMatrix(this$static, n1, n1, r0);
  $stampMatrix(this$static, n2, n2, r0);
  $stampMatrix(this$static, n1, n2, -r0);
  $stampMatrix(this$static, n2, n1, -r0);
}

function $stampCurrentSource(this$static, n1, n2, i){
  $stampRightSide_0(this$static, n1, -i);
  $stampRightSide_0(this$static, n2, i);
}

function $stampMatrix(this$static, i, j, x_0){
  var ri;
  if (i > 0 && j > 0) {
    if (this$static.circuitNeedsMap) {
      i = this$static.circuitRowInfo[i - 1].mapRow;
      ri = this$static.circuitRowInfo[j - 1];
      if (ri.type_0 == 1) {
        this$static.circuitRightSide[i] -= x_0 * ri.value_0;
        return;
      }
      j = ri.mapCol;
    }
     else {
      --i;
      --j;
    }
    this$static.circuitMatrix[i][j] += x_0;
  }
}

function $stampNonLinear(this$static, i){
  i > 0 && (this$static.circuitRowInfo[i - 1].lsChanges = true);
}

function $stampResistor(this$static, n1, n2, r){
  var a, r0;
  r0 = 1 / r;
  if (isNaN(r0) || !isNaN(r0) && !isFinite(r0)) {
    $clinit_System();
    a = 0;
    a = a / 0 | 0;
  }
  $stampMatrix(this$static, n1, n1, r0);
  $stampMatrix(this$static, n2, n2, r0);
  $stampMatrix(this$static, n1, n2, -r0);
  $stampMatrix(this$static, n2, n1, -r0);
}

function $stampRightSide(this$static, i){
  i > 0 && (this$static.circuitRowInfo[i - 1].rsChanges = true);
}

function $stampRightSide_0(this$static, i, x_0){
  if (i > 0) {
    this$static.circuitNeedsMap?(i = this$static.circuitRowInfo[i - 1].mapRow):--i;
    this$static.circuitRightSide[i] += x_0;
  }
}

function $stampVCCurrentSource(this$static, cn1, cn2, vn1, vn2, g){
  $stampMatrix(this$static, cn1, vn1, g);
  $stampMatrix(this$static, cn2, vn2, g);
  $stampMatrix(this$static, cn1, vn2, -g);
  $stampMatrix(this$static, cn2, vn1, -g);
}

function $stampVCVS(this$static, n2, coef, vs){
  var vn;
  vn = this$static.nodeList.arrayList.array.length + vs;
  $stampMatrix(this$static, vn, 0, coef);
  $stampMatrix(this$static, vn, n2, -coef);
}

function $stampVoltageSource(this$static, n1, n2, vs){
  var vn;
  vn = this$static.nodeList.arrayList.array.length + vs;
  $stampMatrix(this$static, vn, n1, -1);
  $stampMatrix(this$static, vn, n2, 1);
  vn > 0 && (this$static.circuitRowInfo[vn - 1].rsChanges = true);
  $stampMatrix(this$static, n1, vn, 1);
  $stampMatrix(this$static, n2, vn, -1);
}

function $stampVoltageSource_0(this$static, n1, n2, vs, v){
  var vn;
  vn = this$static.nodeList.arrayList.array.length + vs;
  $stampMatrix(this$static, vn, n1, -1);
  $stampMatrix(this$static, vn, n2, 1);
  $stampRightSide_0(this$static, vn, v);
  $stampMatrix(this$static, n1, vn, 1);
  $stampMatrix(this$static, n2, vn, -1);
}

function $stop(this$static, s, ce){
  this$static.stopMessage = s;
  this$static.circuitMatrix = null;
  this$static.stopElm = ce;
  $setSimRunning(this$static, false);
  this$static.analyzeFlag = false;
}

function $unstackAll(this$static){
  var i;
  for (i = 0; i != this$static.scopeCount; i++) {
    this$static.scopes[i].position = i;
    this$static.scopes[i].showMax = true;
  }
}

function $unstackScope(this$static, s){
  if (s == 0) {
    if (this$static.scopeCount < 2)
      return;
    s = 1;
  }
  if (this$static.scopes[s].position != this$static.scopes[s - 1].position)
    return;
  for (; s < this$static.scopeCount; s++)
    ++this$static.scopes[s].position;
}

function $updateCircuit(this$static){
  var badnodes, c, ce, cn, ct, didAnalyze, e, g, i, inc, info, mydrawstarttime, myrunstarttime, mystarttime, oldfont, s, sm, sm0, sm1, sysTime, x_0, y_0, ybase;
  mystarttime = ($clinit_System() , fromDouble_0(Date.now()));
  didAnalyze = this$static.analyzeFlag;
  if (this$static.analyzeFlag) {
    $analyzeCircuit(this$static);
    this$static.analyzeFlag = false;
  }
  !!this$static.stopElm && this$static.stopElm != this$static.mouseElm && this$static.stopElm.setMouseElm(true);
  $setupScopes(this$static);
  g = new Graphics(this$static.backcontext);
  selectColor = ($clinit_Color() , cyan);
  if (this$static.printableCheckItem.on) {
    whiteColor = black;
    lightGrayColor = black;
    $setColor(g, white);
  }
   else {
    whiteColor = white;
    lightGrayColor = lightGray;
    $setColor(g, black);
  }
  $fillRect_0(g, 0, 0, g.context.canvas.width, g.context.canvas.height);
  myrunstarttime = fromDouble_0(Date.now());
  if (this$static.simRunning) {
    try {
      $runCircuit(this$static, didAnalyze);
    }
     catch ($e0) {
      $e0 = toJava($e0);
      if (instanceOf($e0, 14)) {
        e = $e0;
        console.log('exception in runCircuit ' + e);
        $printStackTraceImpl(e, err_0, '');
        return;
      }
       else 
        throw toJs($e0);
    }
    this$static.myruntime = add_2(this$static.myruntime, sub_1(fromDouble_0(Date.now()), myrunstarttime));
  }
  sysTime = fromDouble_0(Date.now());
  if (this$static.simRunning) {
    if (neq(this$static.lastTime, 0)) {
      inc = toInt(sub_1(sysTime, this$static.lastTime));
      c = this$static.currentBar.val_0;
      c = $wnd.Math.exp(c / 3.5 - 14.2);
      currentMult = 1.7 * inc * c;
      this$static.conventionCheckItem.on || (currentMult = -currentMult);
    }
    this$static.lastTime = sysTime;
  }
   else 
    this$static.lastTime = 0;
  if (gte_0(sub_1(sysTime, this$static.secTime), $intern_20)) {
    this$static.frames_0 = 0;
    this$static.steps = 0;
    this$static.secTime = sysTime;
  }
  powerMult = $wnd.Math.exp(this$static.powerBar.val_0 / 4.762 - 7);
  oldfont = unitsFont;
  $setFont_0(g, oldfont);
  mydrawstarttime = fromDouble_0(Date.now());
  $setLineCap(g.context, ($clinit_Context2d$LineCap() , ROUND).value_0);
  $setTransform(this$static.backcontext, this$static.transform_0[0], this$static.transform_0[1], this$static.transform_0[2], this$static.transform_0[3], this$static.transform_0[4], this$static.transform_0[5]);
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
    this$static.powerCheckItem.on && $setColor(g, gray);
    $getElm(this$static, i).draw(g);
  }
  this$static.mydrawtime = add_2(this$static.mydrawtime, sub_1(fromDouble_0(Date.now()), mydrawstarttime));
  if (this$static.mouseMode != 2 && this$static.mouseMode != 3) {
    for (i = 0; i != this$static.postDrawList.arrayList.array.length; i++)
      drawPost(g, castTo($get_3(this$static.postDrawList, i), 20));
  }
  if (this$static.tempMouseMode == 2 || this$static.tempMouseMode == 3 || this$static.tempMouseMode == 5 || this$static.tempMouseMode == 4)
    for (i = 0; i != this$static.elmList.arrayList.array.length; i++) {
      ce = $getElm(this$static, i);
      if (ce != this$static.mouseElm || this$static.tempMouseMode != 5) {
        $setColor(g, gray);
        $fillOval(g, ce.x_0 - 3, ce.y_0 - 3, 7);
        $fillOval(g, ce.x2 - 3, ce.y2 - 3, 7);
      }
       else {
        $drawHandles(ce, g, cyan);
      }
    }
  this$static.tempMouseMode == 6 && !!this$static.mouseElm && $drawHandles(this$static.mouseElm, g, cyan);
  if (!!this$static.dragElm && (this$static.dragElm.x_0 != this$static.dragElm.x2 || this$static.dragElm.y_0 != this$static.dragElm.y2)) {
    this$static.dragElm.draw(g);
    $drawHandles(this$static.dragElm, g, cyan);
  }
  for (i = 0; i != this$static.badConnectionList.arrayList.array.length; i++) {
    cn = castTo($get_3(this$static.badConnectionList, i), 20);
    $setColor(g, red);
    $fillOval(g, cn.x_0 - 3, cn.y_0 - 3, 7);
  }
  if (this$static.selectedArea) {
    $setColor(g, selectColor);
    $drawRect(g, this$static.selectedArea.x_0, this$static.selectedArea.y_0, this$static.selectedArea.width_0, this$static.selectedArea.height_0);
  }
  if (this$static.crossHairCheckItem.on && this$static.mouseCursorX >= 0 && this$static.mouseCursorX <= this$static.circuitArea.width_0 && this$static.mouseCursorY <= this$static.circuitArea.height_0) {
    $setColor(g, gray);
    x_0 = $snapGrid(this$static, $inverseTransformX(this$static, this$static.mouseCursorX));
    y_0 = $snapGrid(this$static, $inverseTransformY(this$static, this$static.mouseCursorY));
    $drawLine(g, x_0, round_int((0 - this$static.transform_0[5]) / this$static.transform_0[3]), x_0, $inverseTransformY(this$static, this$static.circuitArea.height_0));
    $drawLine(g, round_int((0 - this$static.transform_0[4]) / this$static.transform_0[0]), y_0, $inverseTransformX(this$static, this$static.circuitArea.width_0), y_0);
  }
  this$static.backcontext.setTransform(1, 0, 0, 1, 0, 0);
  this$static.printableCheckItem.on?$setColor(g, white):$setColor(g, black);
  $fillRect_0(g, 0, this$static.circuitArea.height_0, this$static.circuitArea.width_0, $getCoordinateSpaceHeight(this$static.cv) - this$static.circuitArea.height_0);
  $setFont_0(g, oldfont);
  ct = this$static.scopeCount;
  this$static.stopMessage != null && (ct = 0);
  for (i = 0; i != ct; i++)
    $draw_3(this$static.scopes[i], g);
  if (this$static.mouseWasOverSplitter) {
    $setColor(g, cyan);
    g.context.lineWidth = 4;
    $drawLine(g, 0, this$static.circuitArea.height_0 - 2, this$static.circuitArea.width_0, this$static.circuitArea.height_0 - 2);
    g.context.lineWidth = 1;
  }
  $setColor(g, whiteColor);
  if (this$static.stopMessage != null) {
    $drawString(g, this$static.stopMessage, 10, this$static.circuitArea.height_0 - 10);
  }
   else {
    info = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 10, 6, 1);
    if (this$static.mouseElm) {
      if (this$static.mousePost == -1) {
        this$static.mouseElm.getInfo(info);
        info[0] = LS(info[0]);
        info[1] != null && (info[1] = LS(info[1]));
      }
       else 
        info[0] = 'V = ' + myGetUnitText($getPostVoltage(this$static.mouseElm, this$static.mousePost), 'V', false);
    }
     else {
      info[0] = 't = ' + myGetUnitText(this$static.t, 's', false);
      info[1] = (sm0 = castToString($getStringValue(localizationMap, 'time step = ')) , (sm0 != null?sm0:'time step = ') + myGetUnitText(this$static.timeStep, 's', false));
    }
    if (this$static.hintType != -1) {
      for (i = 0; info[i] != null; i++)
      ;
      s = $getHint(this$static);
      s == null?(this$static.hintType = -1):(info[i] = s);
    }
    x_0 = 0;
    ct != 0 && (x_0 = $rightEdge(this$static.scopes[ct - 1]) + 20);
    x_0 = $max(x_0, $getCoordinateSpaceWidth(this$static.cv) * 2 / 3 | 0);
    for (i = 0; info[i] != null; i++)
    ;
    badnodes = this$static.badConnectionList.arrayList.array.length;
    badnodes > 0 && (info[i++] = badnodes + (badnodes == 1?(sm1 = castToString($getStringValue(localizationMap, ' bad connection')) , sm1 != null?sm1:' bad connection'):(sm = castToString($getStringValue(localizationMap, ' bad connections')) , sm != null?sm:' bad connections')));
    ybase = this$static.circuitArea.height_0;
    for (i = 0; info[i] != null; i++) {
      $fillText(g.context, info[i], x_0, ybase + 15 * (i + 1));
    }
  }
  !!this$static.stopElm && this$static.stopElm != this$static.mouseElm && this$static.stopElm.setMouseElm(false);
  ++this$static.frames_0;
  $setColor(g, white);
  $drawImage(this$static.cvcontext, this$static.backcontext.canvas, 0, 0);
  this$static.lastFrameTime = this$static.lastTime;
  this$static.mytime = sub_1(add_2(this$static.mytime, fromDouble_0(Date.now())), mystarttime);
  this$static.myframes = add_2(this$static.myframes, 1);
}

function $updateModels(this$static){
  var i;
  for (i = 0; i != this$static.elmList.arrayList.array.length; i++)
    castTo($get_3(this$static.elmList, i), 4).updateModels();
}

function $updateVoltageSource(this$static, vs, v){
  var vn;
  vn = this$static.nodeList.arrayList.array.length + vs;
  $stampRightSide_0(this$static, vn, v);
}

function $weAreInUS(){
  try {
    l = navigator.languages?navigator.languages[0]:navigator.language || navigator.userLanguage;
    if (l.length > 2) {
      l = l.slice(-2).toUpperCase();
      return l == 'US' || l == 'CA';
    }
     else {
      return 0;
    }
  }
   catch (e) {
    return 0;
  }
}

function $writeClipboardToStorage(this$static){
  var stor;
  stor = (!localStorage_0 && ($clinit_Storage$StorageSupportDetector() , localStorageSupported) && (localStorage_0 = new Storage_0) , localStorage_0);
  if (!stor)
    return;
  $setItem(stor, this$static.clipboard);
}

function $zoomCircuit(this$static, dy){
  var newScale, oldScale, val;
  oldScale = this$static.transform_0[0];
  val = dy * $intern_29;
  newScale = $wnd.Math.max(oldScale + val, 0.2);
  newScale = $wnd.Math.min(newScale, 2.5);
  $setCircuitScale(this$static, newScale);
}

function CirSim_0(){
  this.mainMenuItems = new Vector;
  this.mainMenuItemNames = new Vector;
  this.timer = new CirSim$1(this);
  this.postDrawList = new Vector;
  this.badConnectionList = new Vector;
  theSim = this;
}

function LS(s){
  var sm;
  sm = castToString($getStringValue(localizationMap, s));
  return sm != null?sm:s;
}

function console_0(text_0){
  console.log(text_0);
}

function constructElement(n, x1, y1){
  if (n == 'GroundElm')
    return new GroundElm(x1, y1);
  if (n == 'ResistorElm')
    return new ResistorElm(x1, y1);
  if (n == 'RailElm')
    return new RailElm(x1, y1);
  if (n == 'SwitchElm')
    return new SwitchElm(x1, y1);
  if (n == 'Switch2Elm')
    return new Switch2Elm(x1, y1);
  if (n == 'NTransistorElm')
    return new NTransistorElm(x1, y1);
  if (n == 'PTransistorElm')
    return new PTransistorElm(x1, y1);
  if (n == 'WireElm')
    return new WireElm(x1, y1);
  if (n == 'CapacitorElm')
    return new CapacitorElm(x1, y1);
  if (n == 'PolarCapacitorElm')
    return new PolarCapacitorElm(x1, y1);
  if (n == 'InductorElm')
    return new InductorElm(x1, y1);
  if (n == 'DCVoltageElm')
    return new DCVoltageElm(x1, y1);
  if (n == 'VarRailElm')
    return new VarRailElm(x1, y1);
  if (n == 'PotElm')
    return new PotElm(x1, y1);
  if (n == 'OutputElm')
    return new OutputElm(x1, y1);
  if (n == 'CurrentElm')
    return new CurrentElm(x1, y1);
  if (n == 'ProbeElm')
    return new ProbeElm(x1, y1);
  if (n == 'DiodeElm')
    return new DiodeElm(x1, y1);
  if (n == 'ZenerElm')
    return new ZenerElm(x1, y1);
  if (n == 'ACVoltageElm')
    return new ACVoltageElm(x1, y1);
  if (n == 'ACRailElm')
    return new ACRailElm(x1, y1);
  if (n == 'SquareRailElm')
    return new SquareRailElm(x1, y1);
  if (n == 'SweepElm')
    return new SweepElm(x1, y1);
  if (n == 'LEDElm')
    return new LEDElm(x1, y1);
  if (n == 'AntennaElm')
    return new AntennaElm(x1, y1);
  if (n == 'LogicInputElm')
    return new LogicInputElm(x1, y1);
  if (n == 'LogicInputElm2')
    return new LogicInputElm2(x1, y1);
  if (n == 'LogicOutputElm')
    return new LogicOutputElm(x1, y1);
  if (n == 'LogicOutputElm2')
    return new LogicOutputElm2(x1, y1);
  if (n == 'Registrador')
    return new Registrador(x1, y1);
  if (n == 'Complemento1')
    return new Complemento1(x1, y1);
  if (n == 'Jointer')
    return new Jointer(x1, y1);
  if (n == 'Spliter')
    return new Spliter(x1, y1);
  if (n == 'Memoria')
    return new Memoria(x1, y1);
  if (n == 'TransformerElm')
    return new TransformerElm(x1, y1);
  if (n == 'TappedTransformerElm')
    return new TappedTransformerElm(x1, y1);
  if (n == 'TransLineElm')
    return new TransLineElm(x1, y1);
  if (n == 'RelayElm')
    return new RelayElm(x1, y1);
  if (n == 'MemristorElm')
    return new MemristorElm(x1, y1);
  if (n == 'SparkGapElm')
    return new SparkGapElm(x1, y1);
  if (n == 'ClockElm')
    return new ClockElm(x1, y1);
  if (n == 'AMElm')
    return new AMElm(x1, y1);
  if (n == 'FMElm')
    return new FMElm(x1, y1);
  if (n == 'LampElm')
    return new LampElm(x1, y1);
  if (n == 'PushSwitchElm')
    return new PushSwitchElm(x1, y1);
  if (n == 'OpAmpElm')
    return new OpAmpElm(x1, y1);
  if (n == 'OpAmpSwapElm')
    return new OpAmpSwapElm(x1, y1);
  if (n == 'NMosfetElm')
    return new NMosfetElm(x1, y1);
  if (n == 'PMosfetElm')
    return new PMosfetElm(x1, y1);
  if (n == 'NJfetElm')
    return new NJfetElm(x1, y1);
  if (n == 'PJfetElm')
    return new PJfetElm(x1, y1);
  if (n == 'AnalogSwitchElm')
    return new AnalogSwitchElm(x1, y1);
  if (n == 'AnalogSwitch2Elm')
    return new AnalogSwitch2Elm(x1, y1);
  if (n == 'SchmittElm')
    return new SchmittElm(x1, y1);
  if (n == 'InvertingSchmittElm')
    return new InvertingSchmittElm(x1, y1);
  if (n == 'TriStateElm')
    return new TriStateElm(x1, y1);
  if (n == 'SCRElm')
    return new SCRElm(x1, y1);
  if (n == 'DiacElm')
    return new DiacElm(x1, y1);
  if (n == 'TriacElm')
    return new TriacElm(x1, y1);
  if (n == 'TriodeElm')
    return new TriodeElm(x1, y1);
  if (n == 'TunnelDiodeElm')
    return new TunnelDiodeElm(x1, y1);
  if (n == 'CC2Elm')
    return new CC2Elm(x1, y1);
  if (n == 'CC2NegElm')
    return new CC2NegElm(x1, y1);
  if (n == 'InverterElm')
    return new InverterElm(x1, y1);
  if (n == 'NandGateElm')
    return new NandGateElm(x1, y1);
  if (n == 'NorGateElm')
    return new NorGateElm(x1, y1);
  if (n == 'AndGateElm')
    return new AndGateElm(x1, y1);
  if (n == 'OrGateElm')
    return new OrGateElm(x1, y1);
  if (n == 'XorGateElm')
    return new XorGateElm(x1, y1);
  if (n == 'DFlipFlopElm')
    return new DFlipFlopElm(x1, y1);
  if (n == 'JKFlipFlopElm')
    return new JKFlipFlopElm(x1, y1);
  if (n == 'SevenSegElm')
    return new SevenSegElm(x1, y1);
  if (n == 'MultiplexerElm')
    return new MultiplexerElm(x1, y1);
  if (n == 'MultiplexerElm8')
    return new MultiplexerElm8(x1, y1);
  if (n == 'DeMultiplexerElm')
    return new DeMultiplexerElm(x1, y1);
  if (n == 'DeMultiplexerElm8')
    return new DeMultiplexerElm8(x1, y1);
  if (n == 'SipoShiftElm')
    return new SipoShiftElm(x1, y1);
  if (n == 'PisoShiftElm')
    return new PisoShiftElm(x1, y1);
  if (n == 'PhaseCompElm')
    return new PhaseCompElm(x1, y1);
  if (n == 'CounterElm')
    return new CounterElm(x1, y1);
  if (n == 'DecadeElm')
    return new DecadeElm(x1, y1);
  if (n == 'TimerElm')
    return new TimerElm(x1, y1);
  if (n == 'DACElm')
    return new DACElm(x1, y1);
  if (n == 'ADCElm')
    return new ADCElm(x1, y1);
  if (n == 'LatchElm')
    return new LatchElm(x1, y1);
  if (n == 'SeqGenElm')
    return new SeqGenElm(x1, y1);
  if (n == 'VCOElm')
    return new VCOElm(x1, y1);
  if (n == 'BoxElm')
    return new BoxElm(x1, y1);
  if (n == 'TextElm')
    return new TextElm(x1, y1);
  if (n == 'TFlipFlopElm')
    return new TFlipFlopElm(x1, y1);
  if (n == 'SevenSegDecoderElm')
    return new SevenSegDecoderElm(x1, y1);
  if (n == 'FullAdderElm')
    return new FullAdderElm(x1, y1);
  if (n == 'HalfAdderElm')
    return new HalfAdderElm(x1, y1);
  if (n == 'MonostableElm')
    return new MonostableElm(x1, y1);
  if (n == 'LabeledNodeElm')
    return new LabeledNodeElm(x1, y1);
  if (n == 'UserDefinedLogicElm')
    return new CustomLogicElm(x1, y1);
  if (n == 'TestPointElm')
    return new TestPointElm(x1, y1);
  if (n == 'AmmeterElm')
    return new AmmeterElm(x1, y1);
  if (n == 'DataRecorderElm')
    return new DataRecorderElm(x1, y1);
  if (n == 'AudioOutputElm')
    return new AudioOutputElm(x1, y1);
  if (n == 'NDarlingtonElm')
    return new NDarlingtonElm(x1, y1);
  if (n == 'PDarlingtonElm')
    return new PDarlingtonElm(x1, y1);
  if (n == 'ComparatorElm')
    return new ComparatorElm(x1, y1);
  if (n == 'OTAElm')
    return new OTAElm(x1, y1);
  if (n == 'NoiseElm')
    return new NoiseElm(x1, y1);
  if (n == 'VCVSElm')
    return new VCVSElm(x1, y1);
  if (n == 'VCCSElm')
    return new VCCSElm(x1, y1);
  if (n == 'CCVSElm')
    return new CCVSElm(x1, y1);
  if (n == 'CCCSElm')
    return new CCCSElm(x1, y1);
  return null;
}

function createCe(tint, x1, y1, x2, y2, f, st){
  if (tint == 103)
    return new GroundElm_0(x1, y1, x2, y2, f);
  if (tint == 114)
    return new ResistorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 82)
    return new RailElm_1(x1, y1, x2, y2, f, st);
  if (tint == 115)
    return new SwitchElm_0(x1, y1, x2, y2, f, st);
  if (tint == 83)
    return new Switch2Elm_0(x1, y1, x2, y2, f, st);
  if (tint == 116)
    return new TransistorElm(x1, y1, x2, y2, f, st);
  if (tint == 119)
    return new WireElm_0(x1, y1, x2, y2, f);
  if (tint == 99)
    return new CapacitorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 209)
    return new PolarCapacitorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 108)
    return new InductorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 118)
    return new VoltageElm_0(x1, y1, x2, y2, f, st);
  if (tint == 172)
    return new VarRailElm_0(x1, y1, x2, y2, f, st);
  if (tint == 174)
    return new PotElm_0(x1, y1, x2, y2, f, st);
  if (tint == 79)
    return new OutputElm_0(x1, y1, x2, y2, f);
  if (tint == 105)
    return new CurrentElm_0(x1, y1, x2, y2, f, st);
  if (tint == 112)
    return new ProbeElm_0(x1, y1, x2, y2, f, st);
  if (tint == 100)
    return new DiodeElm_0(x1, y1, x2, y2, f, st);
  if (tint == 122)
    return new ZenerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 170)
    return new SweepElm_0(x1, y1, x2, y2, f, st);
  if (tint == 162)
    return new LEDElm_0(x1, y1, x2, y2, f, st);
  if (tint == 65)
    return new AntennaElm_0(x1, y1, x2, y2, f, st);
  if (tint == 76)
    return new LogicInputElm_0(x1, y1, x2, y2, f, st);
  if (tint == 77)
    return new LogicOutputElm_0(x1, y1, x2, y2, f, st);
  if (tint == 84)
    return new TransformerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 169)
    return new TappedTransformerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 171)
    return new TransLineElm_0(x1, y1, x2, y2, f, st);
  if (tint == 178)
    return new RelayElm_0(x1, y1, x2, y2, f, st);
  if (tint == 109)
    return new MemristorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 187)
    return new SparkGapElm_0(x1, y1, x2, y2, f, st);
  if (tint == 200)
    return new AMElm_0(x1, y1, x2, y2, f, st);
  if (tint == 201)
    return new FMElm_0(x1, y1, x2, y2, f, st);
  if (tint == 110)
    return new NoiseElm_0(x1, y1, x2, y2, f, st);
  if (tint == 181)
    return new LampElm_0(x1, y1, x2, y2, f, st);
  if (tint == 97)
    return new OpAmpElm_0(x1, y1, x2, y2, f, st);
  if (tint == 102)
    return new MosfetElm(x1, y1, x2, y2, f, st);
  if (tint == 106)
    return new JfetElm(x1, y1, x2, y2, f, st);
  if (tint == 159)
    return new AnalogSwitchElm_0(x1, y1, x2, y2, f, st);
  if (tint == 160)
    return new AnalogSwitch2Elm_0(x1, y1, x2, y2, f, st);
  if (tint == 180)
    return new TriStateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 182)
    return new SchmittElm_0(x1, y1, x2, y2, f, st);
  if (tint == 183)
    return new InvertingSchmittElm_0(x1, y1, x2, y2, f, st);
  if (tint == 177)
    return new SCRElm_0(x1, y1, x2, y2, f, st);
  if (tint == 203)
    return new DiacElm_0(x1, y1, x2, y2, f, st);
  if (tint == 206)
    return new TriacElm_0(x1, y1, x2, y2, f, st);
  if (tint == 173)
    return new TriodeElm_0(x1, y1, x2, y2, f, st);
  if (tint == 175)
    return new TunnelDiodeElm_0(x1, y1, x2, y2, f);
  if (tint == 179)
    return new CC2Elm_0(x1, y1, x2, y2, f, st);
  if (tint == 73)
    return new InverterElm_0(x1, y1, x2, y2, f, st);
  if (tint == 151)
    return new NandGateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 153)
    return new NorGateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 150)
    return new AndGateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 152)
    return new OrGateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 154)
    return new XorGateElm_0(x1, y1, x2, y2, f, st);
  if (tint == 155)
    return new DFlipFlopElm_0(x1, y1, x2, y2, f, st);
  if (tint == 156)
    return new JKFlipFlopElm_0(x1, y1, x2, y2, f, st);
  if (tint == 157)
    return new SevenSegElm_0(x1, y1, x2, y2, f, st);
  if (tint == 184)
    return new MultiplexerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 185)
    return new DeMultiplexerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 189)
    return new SipoShiftElm_0(x1, y1, x2, y2, f, st);
  if (tint == 186)
    return new PisoShiftElm_0(x1, y1, x2, y2, f, st);
  if (tint == 161)
    return new PhaseCompElm_0(x1, y1, x2, y2, f, st);
  if (tint == 164)
    return new CounterElm_0(x1, y1, x2, y2, f, st);
  if (tint == 163)
    return new DecadeElm_0(x1, y1, x2, y2, f, st);
  if (tint == 165)
    return new TimerElm_0(x1, y1, x2, y2, f, st);
  if (tint == 166)
    return new DACElm_0(x1, y1, x2, y2, f, st);
  if (tint == 167)
    return new ADCElm_0(x1, y1, x2, y2, f, st);
  if (tint == 168)
    return new LatchElm_0(x1, y1, x2, y2, f, st);
  if (tint == 188)
    return new SeqGenElm_0(x1, y1, x2, y2, f, st);
  if (tint == 158)
    return new VCOElm_0(x1, y1, x2, y2, f, st);
  if (tint == 98)
    return new BoxElm_0(x1, y1, x2, y2, f);
  if (tint == 120)
    return new TextElm_0(x1, y1, x2, y2, f, st);
  if (tint == 193)
    return new TFlipFlopElm_0(x1, y1, x2, y2, f, st);
  if (tint == 197)
    return new SevenSegDecoderElm_0(x1, y1, x2, y2, f, st);
  if (tint == 196)
    return new FullAdderElm_0(x1, y1, x2, y2, f, st);
  if (tint == 195)
    return new HalfAdderElm_0(x1, y1, x2, y2, f, st);
  if (tint == 194)
    return new MonostableElm_0(x1, y1, x2, y2, f, st);
  if (tint == 207)
    return new LabeledNodeElm_0(x1, y1, x2, y2, f, st);
  if (tint == 208)
    return new CustomLogicElm_0(x1, y1, x2, y2, f, st);
  if (tint == 210)
    return new DataRecorderElm_0(x1, y1, x2, y2, f, st);
  if (tint == 211)
    return new AudioOutputElm_0(x1, y1, x2, y2, f, st);
  if (tint == 212)
    return new VCVSElm_0(x1, y1, x2, y2, f, st);
  if (tint == 213)
    return new VCCSElm_0(x1, y1, x2, y2, f, st);
  if (tint == 214)
    return new CCVSElm_0(x1, y1, x2, y2, f, st);
  if (tint == 215)
    return new CCCSElm_0(x1, y1, x2, y2, f, st);
  if (tint == 368)
    return new TestPointElm_0(x1, y1, x2, y2, f, st);
  if (tint == 370)
    return new AmmeterElm_0(x1, y1, x2, y2, f, st);
  if (tint == 400)
    return new DarlingtonElm(x1, y1, x2, y2, f, st);
  if (tint == 401)
    return new ComparatorElm_0(x1, y1, x2, y2, f, st);
  if (tint == 402)
    return new OTAElm_0(x1, y1, x2, y2, f, st);
  if (tint == $intern_20)
    return new LogicInputElm2_0(x1, y1, x2, y2, f, st);
  if (tint == 1001)
    return new LogicOutputElm2_0(x1, y1, x2, y2, f, st);
  if (tint == 1002)
    return new Registrador_0(x1, y1, x2, y2, f, st);
  if (tint == 1003)
    return new Memoria_0(x1, y1, x2, y2, f, st);
  if (tint == 1004)
    return new Spliter_0(x1, y1, x2, y2, f, st);
  if (tint == 1005)
    return new Jointer_0(x1, y1, x2, y2, f, st);
  if (tint == 1006)
    return new MultiplexerElm8_0(x1, y1, x2, y2, f, st);
  if (tint == 1007)
    return new DeMultiplexerElm8_0(x1, y1, x2, y2, f, st);
  if (tint == 1008)
    return new Complemento1_0(x1, y1, x2, y2, f, st);
  return null;
}

defineClass(327, 1, {47:1, 668:1, 667:1, 226:1, 321:1, 227:1, 322:1, 152:1, 32:1, 624:1}, CirSim_0);
_.longPress = function longPress(){
  $doPopupMenu(this);
}
;
_.onClick = function onClick_2(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  $eventGetButton(e.nativeEvent) == 4 && $scrollValues(this, (e.nativeEvent.clientX || 0) | 0, (e.nativeEvent.clientY || 0) | 0, 0);
}
;
_.onMouseDown = function onMouseDown_0(e){
  var gx, gy, x0, y0;
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  this.menuX = $getX(e);
  this.menuY = $getY(e);
  this.mouseDownTime = ($clinit_System() , fromDouble_0(Date.now()));
  (this.clipboard == null || this.clipboard.length == 0) && $readClipboardFromStorage(this);
  $setEnabled(this.pasteItem, this.clipboard != null && this.clipboard.length > 0);
  if ($eventGetButton(e.nativeEvent) != 1)
    return;
  $mouseSelect(this, e);
  this.mouseDragging = true;
  if (this.mouseWasOverSplitter) {
    this.tempMouseMode = 7;
    return;
  }
  if ($eventGetButton(e.nativeEvent) == 1) {
    this.tempMouseMode = this.mouseMode;
    !!e.nativeEvent.altKey && !!e.nativeEvent.metaKey?(this.tempMouseMode = 3):!!e.nativeEvent.altKey && !!e.nativeEvent.shiftKey?(this.tempMouseMode = 2):e.nativeEvent.shiftKey?(this.tempMouseMode = 6):e.nativeEvent.altKey?(this.tempMouseMode = 1):(!!e.nativeEvent.ctrlKey || !!e.nativeEvent.metaKey) && (this.tempMouseMode = 5);
  }
  gx = $inverseTransformX(this, $getX(e));
  gy = $inverseTransformY(this, $getY(e));
  if ($doSwitch(this, gx, gy)) {
    return;
  }
  this.tempMouseMode == 6 && !!this.mouseElm && $getHandleGrabbedClose(this.mouseElm, gx, gy, 256) >= 0 && !$anySelectedButMouse(this) && (this.tempMouseMode = 5);
  this.tempMouseMode != 6 && this.tempMouseMode != 4 && $clearSelection(this);
  $pushUndo(this);
  this.initDragGridX = gx;
  this.initDragGridY = gy;
  if (this.tempMouseMode != 0)
    return;
  x0 = gx + this.gridRound & this.gridMask;
  y0 = gy + this.gridRound & this.gridMask;
  if (!$contains(this.circuitArea, $getX(e), $getY(e)))
    return;
  this.dragElm = constructElement(this.mouseModeStr, x0, y0);
}
;
_.onMouseMove = function onMouseMove_0(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  this.mouseCursorX = $getX(e);
  this.mouseCursorY = $getY(e);
  if (this.mouseDragging) {
    $mouseDragged(this, e);
    return;
  }
  $mouseSelect(this, e);
}
;
_.onMouseOut = function onMouseOut_0(e){
  this.mouseCursorX = -1;
}
;
_.onMouseUp = function onMouseUp_0(e){
  var circuitChanged;
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  this.mouseDragging = false;
  this.tempMouseMode == 6 && !this.selectedArea && $clearSelection(this);
  this.tempMouseMode = this.mouseMode;
  this.selectedArea = null;
  circuitChanged = false;
  if (this.heldSwitchElm) {
    $mouseUp(this.heldSwitchElm);
    this.heldSwitchElm = null;
    circuitChanged = true;
  }
  if (this.dragElm) {
    if (this.dragElm.x_0 == this.dragElm.x2 && this.dragElm.y_0 == this.dragElm.y2) {
      this.dragElm.delete_0();
      (this.mouseMode == 6 || this.mouseMode == 4) && $clearSelection(this);
    }
     else {
      $addElement(this.elmList, this.dragElm);
      this.dragElm.draggingDone();
      circuitChanged = true;
    }
    this.dragElm = null;
  }
  circuitChanged && (this.analyzeFlag = true);
  !!this.dragElm && this.dragElm.delete_0();
  this.dragElm = null;
}
;
_.onMouseWheel = function onMouseWheel(e){
  var zoomOnly;
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  zoomOnly = ($clinit_System() , lt(fromDouble_0(Date.now()), add_2(this.zoomTime, $intern_20)));
  zoomOnly || $scrollValues(this, (e.nativeEvent.clientX || 0) | 0, (e.nativeEvent.clientY || 0) | 0, $eventGetMouseWheelVelocityY(e.nativeEvent));
  if (instanceOf(this.mouseElm, 152) && !zoomOnly)
    castTo(this.mouseElm, 152).onMouseWheel(e);
  else if (this.scopeSelected != -1)
    $onMouseWheel(this.scopes[this.scopeSelected], e);
  else if (!$dialogIsShowing(this)) {
    $zoomCircuit(this, $eventGetMouseWheelVelocityY(e.nativeEvent));
    this.zoomTime = fromDouble_0(Date.now());
  }
}
;
_.onPreviewNativeEvent = function onPreviewNativeEvent_3(e){
  var c, cc, code_0, t;
  cc = e.nativeEvent.charCode || 0;
  t = $getTypeInt(e.nativeEvent);
  code_0 = e.nativeEvent.keyCode | 0;
  if ($dialogIsShowing(this)) {
    if (!!scrollValuePopup && scrollValuePopup.showing && (t & 128) != 0) {
      (code_0 == 27 || code_0 == 32) && $close_0(scrollValuePopup, false);
      code_0 == 13 && $close_0(scrollValuePopup, true);
    }
    if (!!editDialog_0 && editDialog_0.showing && (t & 128) != 0) {
      code_0 == 27 && ($hide_0(editDialog_0, false) , editDialog_0 = null);
      if (code_0 == 13) {
        $apply(editDialog_0);
        $hide_0(editDialog_0, false);
        editDialog_0 = null;
      }
    }
    return;
  }
  if ((t & 128) != 0) {
    if (code_0 == 8 || code_0 == 46) {
      this.menuElm = null;
      $doDelete(this);
      e.isCanceled = true;
    }
    if (code_0 == 27) {
      this.mouseMode = 6;
      $setCursorStyle(this, 'cursorPointer');
      this.mouseModeStr = 'Select';
      this.tempMouseMode = this.mouseMode;
      e.isCanceled = true;
    }
    if (!!e.nativeEvent.ctrlKey || !!e.nativeEvent.metaKey) {
      if (code_0 == 67) {
        $menuPerformed(this, 'key', 'copy');
        e.isCanceled = true;
      }
      if (code_0 == 88) {
        $menuPerformed(this, 'key', 'cut');
        e.isCanceled = true;
      }
      if (code_0 == 86) {
        $menuPerformed(this, 'key', 'paste');
        e.isCanceled = true;
      }
      if (code_0 == 90) {
        $menuPerformed(this, 'key', 'undo');
        e.isCanceled = true;
      }
      if (code_0 == 89) {
        $menuPerformed(this, 'key', 'redo');
        e.isCanceled = true;
      }
      if (code_0 == 68) {
        $menuPerformed(this, 'key', 'duplicate');
        e.isCanceled = true;
      }
      if (code_0 == 65) {
        $menuPerformed(this, 'key', 'selectAll');
        e.isCanceled = true;
      }
    }
  }
  if ((t & 256) != 0) {
    if (cc == 45) {
      $menuPerformed(this, 'key', 'zoomout');
      e.isCanceled = true;
    }
    if (cc == 43 || cc == 61) {
      $menuPerformed(this, 'key', 'zoomin');
      e.isCanceled = true;
    }
    if (cc == 48) {
      $menuPerformed(this, 'key', 'zoom100');
      e.isCanceled = true;
    }
    if (cc > 32 && cc < 127) {
      c = this.shortcuts[cc];
      e.isCanceled = true;
      if (c == null)
        return;
      this.mouseMode = 0;
      $setCursorStyle(this, 'cursorCross');
      this.mouseModeStr = c;
      this.tempMouseMode = this.mouseMode;
    }
    if (cc == 32) {
      this.mouseMode = 6;
      $setCursorStyle(this, 'cursorPointer');
      this.mouseModeStr = 'Select';
      this.tempMouseMode = this.mouseMode;
      e.isCanceled = true;
    }
  }
}
;
_.analyzeFlag = false;
_.circuitMatrixFullSize = 0;
_.circuitMatrixSize = 0;
_.circuitNeedsMap = false;
_.circuitNonLinear = false;
_.contextPanel = null;
_.converged = false;
_.dragGridX = 0;
_.dragGridY = 0;
_.dragScreenX = 0;
_.dragScreenY = 0;
_.draggingPost = 0;
_.dumpMatrix = false;
_.frames_0 = 0;
_.gridMask = 0;
_.gridRound = 0;
_.gridSize = 0;
_.hintItem1 = 0;
_.hintItem2 = 0;
_.hintType = -1;
_.initDragGridX = 0;
_.initDragGridY = 0;
_.isMac = false;
_.lastFrameTime = 0;
_.lastIterTime = 0;
_.lastTime = 0;
_.menuPlot = -1;
_.menuScope = -1;
_.menuX = 0;
_.menuY = 0;
_.mouseCursorX = -1;
_.mouseCursorY = -1;
_.mouseDownTime = 0;
_.mouseDragging = false;
_.mouseElm = null;
_.mouseMode = 6;
_.mouseModeStr = 'Select';
_.mousePost = -1;
_.mouseWasOverSplitter = false;
_.mydrawtime = 0;
_.myframes = 1;
_.myruntime = 0;
_.mytime = 0;
_.scopeCount = 0;
_.scopeHeightFraction = 0.2;
_.scopeSelected = -1;
_.secTime = 0;
_.showResistanceInVoltageSources = false;
_.simRunning = false;
_.startCircuit = null;
_.startCircuitLink = null;
_.startCircuitText = null;
_.startLabel = null;
_.steps = 0;
_.subIterations = 0;
_.t = 0;
_.tempMouseMode = 6;
_.timeStep = 0;
_.zoomTime = 0;
var VERTICALPANELWIDTH = 166, aboutBox, customLogicEditDialog, editDialog_0, exportAsLocalFileDialog, exportAsTextDialog, exportAsUrlDialog, importFromDropboxDialog, importFromTextDialog, localizationMap, muString = '\u03BC', ohmString = '\u03A9', scrollValuePopup, theSim;
var Lcom_lushprojects_circuitjs1_client_CirSim_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim', 327);
function CirSim$1(this$0){
  this.this$01 = this$0;
  Timer.call(this);
}

defineClass(351, 178, {}, CirSim$1);
_.run = function run_2(){
  $updateCircuit(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/1', 351);
function CirSim$10(this$0){
  this.this$01 = this$0;
}

defineClass(360, 1, $intern_43, CirSim$10);
_.onClick = function onClick_3(event_0){
  $resetAction(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$10_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/10', 360);
function CirSim$11(this$0){
  this.this$01 = this$0;
}

defineClass(361, 1, $intern_43, CirSim$11);
_.onClick = function onClick_4(event_0){
  $setSimRunning(this.this$01, !this.this$01.simRunning);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$11_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/11', 361);
function CirSim$12(this$0){
  this.this$01 = this$0;
}

defineClass(362, 1, $intern_43, CirSim$12);
_.onClick = function onClick_5(event_0){
  $doMainMenuChecks(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$12_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/12', 362);
function CirSim$13(this$0, val$openDefault){
  this.this$01 = this$0;
  this.val$openDefault2 = val$openDefault;
}

defineClass(363, 1, {}, CirSim$13);
_.onError = function onError(request, exception){
}
;
_.onResponseReceived = function onResponseReceived(request, response){
  var lastArg, statusCode, text_0;
  statusCode = response.xmlHttpRequest.status;
  if ((statusCode == 1223?204:statusCode) == 200) {
    text_0 = response.xmlHttpRequest.responseText;
    $processSetupList(this.this$01, $getBytes((lastArg = text_0 , $clinit_EmulatedCharset() , lastArg)), text_0.length, this.val$openDefault2);
  }
   else 
  ;
}
;
_.val$openDefault2 = false;
var Lcom_lushprojects_circuitjs1_client_CirSim$13_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/13', 363);
function CirSim$14(this$0){
  this.this$01 = this$0;
  this.val$centre2 = true;
}

defineClass(364, 1, {}, CirSim$14);
_.onError = function onError_0(request, exception){
}
;
_.onResponseReceived = function onResponseReceived_0(request, response){
  var lastArg, statusCode, text_0;
  statusCode = response.xmlHttpRequest.status;
  if ((statusCode == 1223?204:statusCode) == 200) {
    text_0 = response.xmlHttpRequest.responseText;
    $readSetup_1(this.this$01, $getBytes((lastArg = text_0 , $clinit_EmulatedCharset() , lastArg)), text_0.length, false, this.val$centre2);
  }
   else 
  ;
}
;
_.val$centre2 = false;
var Lcom_lushprojects_circuitjs1_client_CirSim$14_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/14', 364);
function CirSim$2(this$0){
  this.this$01 = this$0;
}

defineClass(352, 1, {}, CirSim$2);
_.execute_0 = function execute_12(){
  this.this$01.voltsCheckItem.on && $setState_0(this.this$01.powerCheckItem, false);
  $setPowerBarEnable(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/2', 352);
function CirSim$3(this$0){
  this.this$01 = this$0;
}

defineClass(353, 1, {}, CirSim$3);
_.execute_0 = function execute_13(){
  this.this$01.powerCheckItem.on && $setState_0(this.this$01.voltsCheckItem, false);
  $setPowerBarEnable(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$3_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/3', 353);
function CirSim$4(this$0){
  this.this$01 = this$0;
}

defineClass(354, 1, {}, CirSim$4);
_.execute_0 = function execute_14(){
  $setGrid(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$4_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/4', 354);
function CirSim$5(this$0){
  this.this$01 = this$0;
}

defineClass(355, 1, {}, CirSim$5);
_.execute_0 = function execute_15(){
  $setOptionInStorage('crossHair', this.this$01.crossHairCheckItem.on);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$5_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/5', 355);
function CirSim$6(this$0){
  this.this$01 = this$0;
}

defineClass(356, 1, {}, CirSim$6);
_.execute_0 = function execute_16(){
  $setOptionInStorage('euroResistors', this.this$01.euroResistorCheckItem.on);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$6_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/6', 356);
function CirSim$7(this$0){
  this.this$01 = this$0;
}

defineClass(357, 1, {}, CirSim$7);
_.execute_0 = function execute_17(){
  var i;
  for (i = 0; i < this.this$01.scopeCount; i++)
    $setRect(this.this$01.scopes[i], this.this$01.scopes[i].rect);
  $setOptionInStorage('whiteBackground', this.this$01.printableCheckItem.on);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$7_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/7', 357);
function CirSim$8(this$0){
  this.this$01 = this$0;
}

defineClass(358, 1, {}, CirSim$8);
_.execute_0 = function execute_18(){
  $setOptionInStorage('alternativeColor', this.this$01.alternativeColorCheckItem.on);
  setColorScale();
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$8_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/8', 358);
function CirSim$9(this$0){
  this.this$01 = this$0;
}

defineClass(359, 1, {}, CirSim$9);
_.execute_0 = function execute_19(){
  $setOptionInStorage('conventionalCurrent', this.this$01.conventionCheckItem.on);
}
;
var Lcom_lushprojects_circuitjs1_client_CirSim$9_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/9', 359);
function $findPath(this$static, n1, depth){
  var c, ce, i, j, j0, k;
  if (n1 == this$static.dest)
    return true;
  if (depth-- == 0)
    return false;
  if (this$static.used[n1]) {
    return false;
  }
  this$static.used[n1] = true;
  for (i = 0; i != this$static.this$01.elmList.arrayList.array.length; i++) {
    ce = $getElm(this$static.this$01, i);
    if (ce == this$static.firstElm)
      continue;
    if (this$static.type_0 == 1) {
      if (instanceOf(ce, 146))
        continue;
    }
    if (this$static.type_0 == 2) {
      if (!(ce.isWire() || instanceOf(ce, 41)))
        continue;
    }
    if (this$static.type_0 == 3 && !ce.isWire())
      continue;
    if (this$static.type_0 == 4) {
      if (!(ce.isWire() || instanceOf(ce, 53) || instanceOf(ce, 41)))
        continue;
    }
    if (n1 == 0) {
      for (j0 = 0; j0 != ce.getConnectionNodeCount(); j0++)
        if (ce.hasGroundConnection(j0) && $findPath(this$static, ce.getConnectionNode(j0), depth)) {
          this$static.used[0] = false;
          return true;
        }
    }
    for (j = 0; j != ce.getConnectionNodeCount(); j++) {
      if (ce.getConnectionNode(j) == n1)
        break;
    }
    if (j == ce.getConnectionNodeCount())
      continue;
    if (ce.hasGroundConnection(j) && $findPath(this$static, 0, depth)) {
      this$static.used[n1] = false;
      return true;
    }
    if (this$static.type_0 == 1 && instanceOf(ce, 102)) {
      c = ce.getCurrent();
      j == 0 && (c = -c);
      if ($wnd.Math.abs(c - this$static.firstElm.getCurrent()) > 1.0E-10)
        continue;
    }
    for (k = 0; k != ce.getConnectionNodeCount(); k++) {
      if (j == k)
        continue;
      if (ce.getConnection(j, k) && $findPath(this$static, ce.getConnectionNode(k), depth)) {
        this$static.used[n1] = false;
        return true;
      }
    }
  }
  this$static.used[n1] = false;
  return false;
}

function CirSim$FindPathInfo(this$0, t, e, d){
  this.this$01 = this$0;
  this.dest = d;
  this.type_0 = t;
  this.firstElm = e;
  this.used = initUnidimensionalArray(Z_classLit, $intern_72, 9, this$0.nodeList.arrayList.array.length, 16, 1);
}

defineClass(139, 1, {}, CirSim$FindPathInfo);
_.dest = 0;
_.type_0 = 0;
var Lcom_lushprojects_circuitjs1_client_CirSim$FindPathInfo_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/FindPathInfo', 139);
function CirSim$NodeMapEntry(){
  this.node = -1;
}

function CirSim$NodeMapEntry_0(n){
  this.node = n;
}

defineClass(123, 1, {123:1}, CirSim$NodeMapEntry, CirSim$NodeMapEntry_0);
_.node = 0;
var Lcom_lushprojects_circuitjs1_client_CirSim$NodeMapEntry_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/NodeMapEntry', 123);
function CirSim$WireInfo(w){
  this.wire = w;
}

defineClass(157, 1, {157:1}, CirSim$WireInfo);
_.post = 0;
var Lcom_lushprojects_circuitjs1_client_CirSim$WireInfo_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CirSim/WireInfo', 157);
function CircuitNode(){
  this.links_0 = new Vector;
}

defineClass(88, 1, {88:1}, CircuitNode);
_.internal = false;
var Lcom_lushprojects_circuitjs1_client_CircuitNode_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CircuitNode', 88);
function CircuitNodeLink(){
}

defineClass(89, 1, {89:1}, CircuitNodeLink);
_.num = 0;
var Lcom_lushprojects_circuitjs1_client_CircuitNodeLink_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CircuitNodeLink', 89);
function ClockElm(xx, yy){
  RailElm_0.call(this, xx, yy, 2);
  this.maxVoltage = 2.5;
  this.bias = 2.5;
  this.frequency = 100;
  this.flags |= 1;
}

defineClass(488, 38, $intern_70, ClockElm);
_.getShortcut = function getShortcut_6(){
  return 0;
}
;
var Lcom_lushprojects_circuitjs1_client_ClockElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ClockElm', 488);
function $clinit_Color(){
  $clinit_Color = emptyMethod;
  white = new Color(255, 255, 255);
  lightGray = new Color(192, 192, 192);
  gray = new Color(128, 128, 128);
  GRAY = new Color(128, 128, 128);
  new Color(64, 64, 64);
  darkGray = new Color(64, 64, 64);
  black = new Color(0, 0, 0);
  red = new Color(255, 0, 0);
  new Color(255, 175, 175);
  new Color(255, 200, 0);
  yellow = new Color(255, 255, 0);
  green = new Color(0, 255, 0);
  new Color(255, 0, 255);
  cyan = new Color(0, 255, 255);
  new Color(0, 0, 255);
  new Color_0;
}

function $$init_4(this$static){
}

function $getHexValue(this$static){
  var number, number0, number1;
  if (this$static.colorText != null) {
    return this$static.colorText;
  }
  return '#' + $pad((number0 = this$static.r >>> 0 , number0.toString(16))) + $pad((number1 = this$static.g >>> 0 , number1.toString(16))) + $pad((number = this$static.b >>> 0 , number.toString(16)));
}

function $pad(in_0){
  if (in_0.length == 0) {
    return '00';
  }
  if (in_0.length == 1) {
    return '0' + in_0;
  }
  return in_0;
}

function Color(r, g, b){
  $clinit_Color();
  $$init_4(this);
  this.r = r;
  this.g = g;
  this.b = b;
}

function Color_0(){
  $$init_4(this);
  this.colorText = '';
}

defineClass(39, 1, {39:1}, Color, Color_0);
_.toString_0 = function toString_10(){
  if (this.colorText != null) {
    return this.colorText;
  }
  return 'red=' + this.r + ', green=' + this.g + ', blue=' + this.b;
}
;
_.b = 0;
_.colorText = null;
_.g = 0;
_.r = 0;
var GRAY, black, cyan, darkGray, gray, green, lightGray, red, white, yellow;
var Lcom_lushprojects_circuitjs1_client_Color_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Color', 39);
function $$init_5(this$static){
  this$static.compElmList = new Vector;
  this$static.compNodeList = new Vector;
  this$static.numPosts = 0;
  this$static.numNodes = 0;
  this$static.voltageSources = new Vector;
}

function $dump_0(this$static){
  var dumpStr, i, t, tstring;
  dumpStr = (t = this$static.getDumpType_0() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this$static.x_0 + ' ' + this$static.y_0 + ' ' + this$static.x2 + ' ' + this$static.y2 + ' ' + this$static.flags);
  for (i = 0; i < this$static.compElmList.arrayList.array.length; i++) {
    tstring = $replace_0(castTo($get_3(this$static.compElmList, i), 4).dump_0(), 95);
    tstring = $replaceFirst(tstring, '');
    dumpStr += ' ' + tstring;
  }
  return dumpStr;
}

function $getCurrentIntoNode(this$static, n){
  var c, cnLinks, i;
  c = 0;
  cnLinks = castTo($get_3(this$static.compNodeList, n), 88).links_0;
  for (i = 0; i < cnLinks.arrayList.array.length; i++) {
    c += (checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).elm.getCurrentIntoNode((checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).num);
  }
  return c;
}

function $loadComposite(this$static, stIn, model, externalNodes){
  var ceType, cn, cnLink, cnt, compNodeHash, dumpedCe, entry, entry$iterator, flags, i, i0, j, key, line, modelLinet, newce, nodeOfThisPost, stCe, stModel, thisPost, tint, vsRecord;
  compNodeHash = new HashMap;
  modelLinet = new StringTokenizer(model, '\r');
  while ($hasMoreTokens(modelLinet)) {
    line = $nextToken(modelLinet);
    stModel = new StringTokenizer(line, ' +\t\n\r\f');
    ceType = $nextToken(stModel);
    newce = constructElement(ceType, 0, 0);
    if (stIn) {
      tint = newce.getDumpType();
      dumpedCe = $nextToken(stIn);
      stCe = new StringTokenizer(dumpedCe, '_');
      flags = (new Integer_0($nextToken(stCe))).value_0;
      newce = createCe(tint, 0, 0, 0, 0, flags, stCe);
    }
    $add_11(this$static.compElmList, newce);
    thisPost = 0;
    while ($hasMoreTokens(stModel)) {
      nodeOfThisPost = (new Integer_0($nextToken(stModel))).value_0;
      cnLink = new CircuitNodeLink;
      cnLink.num = thisPost;
      cnLink.elm = newce;
      if ($containsKey(compNodeHash, valueOf(nodeOfThisPost))) {
        cn = castTo($get_0(compNodeHash, valueOf(nodeOfThisPost)), 88);
        $add_11(cn.links_0, cnLink);
      }
       else {
        cn = new CircuitNode;
        $add_11(cn.links_0, cnLink);
        $put(compNodeHash, valueOf(nodeOfThisPost), cn);
      }
      ++thisPost;
    }
  }
  this$static.numPosts = externalNodes.length;
  for (i0 = 0; i0 < externalNodes.length; i0++) {
    if ($containsKey(compNodeHash, valueOf(externalNodes[i0]))) {
      $add_11(this$static.compNodeList, castTo($get_0(compNodeHash, valueOf(externalNodes[i0])), 88));
      $remove_6(compNodeHash, valueOf(externalNodes[i0]));
    }
     else 
      throw toJs(new IllegalArgumentException);
  }
  for (entry$iterator = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(compNodeHash)).this$01); entry$iterator.hasNext;) {
    entry = $next_1(entry$iterator);
    key = castTo(entry.getKey(), 24).value_0;
    $add_11(this$static.compNodeList, castTo($get_0(compNodeHash, valueOf(key)), 88));
  }
  this$static.numNodes = this$static.compNodeList.arrayList.array.length;
  this$static.posts = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, this$static.numPosts, 0, 1);
  for (i = 0; i < this$static.compElmList.arrayList.array.length; i++) {
    cnt = castTo($get_3(this$static.compElmList, i), 4).getVoltageSourceCount();
    for (j = 0; j < cnt; j++) {
      vsRecord = new VoltageSourceRecord;
      vsRecord.elm = castTo($get_3(this$static.compElmList, i), 4);
      vsRecord.vsNumForElement = j;
      $add_11(this$static.voltageSources, vsRecord);
    }
  }
}

function $reset_1(this$static){
  var i;
  for (i = 0; i < this$static.compElmList.arrayList.array.length; i++)
    castTo($get_3(this$static.compElmList, i), 4).reset_0();
}

function $setPost(this$static, n, p){
  this$static.posts[n] = p;
}

function CompositeElm(xa, ya, xb, yb, f, st, s, externalNodes){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_5(this);
  $loadComposite(this, st, s, externalNodes);
  $allocNodes(this);
}

function CompositeElm_0(xx, yy, s, externalNodes){
  CircuitElm.call(this, xx, yy);
  $$init_5(this);
  $loadComposite(this, null, s, externalNodes);
  $allocNodes(this);
}

defineClass(150, 4, $intern_66);
_.canViewInScope_0 = function canViewInScope_0(){
  return false;
}
;
_.canViewInScope = function(){
  return this.canViewInScope_0();
}
;
_.delete_1 = function delete_2(){
  var i;
  for (i = 0; i < this.compElmList.arrayList.array.length; i++)
    castTo($get_3(this.compElmList, i), 4).delete_0();
}
;
_.delete_0 = function(){
  this.delete_1();
}
;
_.doStep_0 = function doStep_11(){
  var i;
  for (i = 0; i < this.compElmList.arrayList.array.length; i++)
    castTo($get_3(this.compElmList, i), 4).doStep();
}
;
_.doStep = function(){
  this.doStep_0();
}
;
_.dump_1 = function dump_16(){
  return $dump_0(this);
}
;
_.dump_0 = function(){
  return this.dump_1();
}
;
_.getConnection_0 = function getConnection_7(n1, n2){
  return true;
}
;
_.getConnection = function(n1, n2){
  return this.getConnection_0(n1, n2);
}
;
_.getCurrentIntoNode = function getCurrentIntoNode_1(n){
  return $getCurrentIntoNode(this, n);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_4(xa, ya){
  var i;
  for (i = 0; i < this.posts.length; i++) {
    if (this.posts[i].x_0 == xa && this.posts[i].y_0 == ya)
      return $getCurrentIntoNode(this, i);
  }
  return 0;
}
;
_.getDumpType = function(){
  return this.getDumpType_0();
}
;
_.getInternalNodeCount = function getInternalNodeCount_0(){
  return this.numNodes - this.numPosts;
}
;
_.getPost = function getPost_4(n){
  return this.posts[n];
}
;
_.getPostCount = function getPostCount_12(){
  return this.numPosts;
}
;
_.getPower_0 = function getPower_3(){
  var i, power;
  power = 0;
  for (i = 0; i < this.compElmList.arrayList.array.length; i++)
    power += castTo($get_3(this.compElmList, i), 4).getPower();
  return power;
}
;
_.getPower = function(){
  return this.getPower_0();
}
;
_.getVoltageSourceCount_0 = function getVoltageSourceCount_9(){
  return this.voltageSources.arrayList.array.length;
}
;
_.getVoltageSourceCount = function(){
  return this.getVoltageSourceCount_0();
}
;
_.hasGroundConnection_0 = function hasGroundConnection_5(n1){
  var cnLinks, i;
  cnLinks = castTo($get_3(this.compNodeList, n1), 88).links_0;
  for (i = 0; i < cnLinks.arrayList.array.length; i++) {
    if ((checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).elm.hasGroundConnection((checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).num))
      return true;
  }
  return false;
}
;
_.hasGroundConnection = function(n1){
  return this.hasGroundConnection_0(n1);
}
;
_.nonLinear_0 = function nonLinear_2(){
  return true;
}
;
_.nonLinear = function(){
  return this.nonLinear_0();
}
;
_.reset_1 = function reset_6(){
  $reset_1(this);
}
;
_.reset_0 = function(){
  this.reset_1();
}
;
_.setCurrent_0 = function setCurrent_3(vsn, c){
  var i;
  for (i = 0; i < this.voltageSources.arrayList.array.length; i++)
    castTo($get_3(this.voltageSources, i), 151).vsNode == vsn && castTo($get_3(this.voltageSources, i), 151).elm.setCurrent(castTo($get_3(this.voltageSources, i), 151).vsNumForElement, c);
}
;
_.setCurrent = function(vsn, c){
  this.setCurrent_0(vsn, c);
}
;
_.setNode_0 = function setNode_0(p, n){
  var cnLinks, i;
  this.nodes[p] = n;
  cnLinks = castTo($get_3(this.compNodeList, p), 88).links_0;
  for (i = 0; i < cnLinks.arrayList.array.length; i++) {
    (checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).elm.setNode((checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).num, n);
  }
}
;
_.setNode = function(p, n){
  this.setNode_0(p, n);
}
;
_.setNodeVoltage_0 = function setNodeVoltage_1(n, c){
  var cnLinks, i;
  this.volts[n] = c;
  cnLinks = castTo($get_3(this.compNodeList, n), 88).links_0;
  for (i = 0; i < cnLinks.arrayList.array.length; i++) {
    (checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).elm.setNodeVoltage((checkArrayElementIndex(i, cnLinks.arrayList.array.length) , castTo($get_1(cnLinks.arrayList, i), 89)).num, c);
  }
  this.volts[n] = c;
}
;
_.setNodeVoltage = function(n, c){
  this.setNodeVoltage_0(n, c);
}
;
_.setVoltageSource = function setVoltageSource_1(n, v){
  var vsr;
  vsr = castTo($get_3(this.voltageSources, n), 151);
  vsr.elm.setVoltageSource(vsr.vsNumForElement, v);
  vsr.vsNode = v;
}
;
_.stamp_0 = function stamp_13(){
  var i;
  for (i = 0; i < this.compElmList.arrayList.array.length; i++)
    castTo($get_3(this.compElmList, i), 4).stamp();
}
;
_.stamp = function(){
  this.stamp_0();
}
;
_.stepFinished_0 = function stepFinished_2(){
  var i;
  for (i = 0; i < this.compElmList.arrayList.array.length; i++)
    castTo($get_3(this.compElmList, i), 4).stepFinished();
}
;
_.stepFinished = function(){
  this.stepFinished_0();
}
;
_.numNodes = 0;
_.numPosts = 0;
var Lcom_lushprojects_circuitjs1_client_CompositeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CompositeElm', 150);
function $clinit_ComparatorElm(){
  $clinit_ComparatorElm = emptyMethod;
  modelExternalNodes = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [2, 1, 4]);
}

function $setSize_1(this$static, s){
  this$static.opsize = s;
  this$static.opheight = 8 * s;
  this$static.opwidth = 13 * s;
  this$static.flags = this$static.flags & -3 | (s == 1?2:0);
}

function ComparatorElm(xx, yy){
  $clinit_ComparatorElm();
  CompositeElm_0.call(this, xx, yy, modelString, modelExternalNodes);
  this.noDiagonal = true;
  $setSize_1(this, sim_0.smallGridCheckItem.on?1:2);
}

function ComparatorElm_0(xa, ya, xb, yb, f, st){
  $clinit_ComparatorElm();
  CompositeElm.call(this, xa, ya, xb, yb, f, st, modelString, modelExternalNodes);
  this.noDiagonal = true;
  $setSize_1(this, (f & 2) != 0?1:2);
}

defineClass(312, 150, $intern_66, ComparatorElm, ComparatorElm_0);
_.draw = function draw_13(g){
  $setBbox_0(this, this.point1, this.point2, this.opheight * 2);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.in1p[0], this.in1p[1]);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.in2p[0], this.in2p[1]);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  $setPowerColor_0(this, g);
  drawThickPolygon(g, this.triangle);
  $setFont_0(g, this.plusFont);
  $drawCenteredText(this, g, '-', this.textp[0].x_0, this.textp[0].y_0 - 2, true);
  $drawCenteredText(this, g, '+', this.textp[1].x_0, this.textp[1].y_0, true);
  $drawCenteredText(this, g, '\u2265?', this.textp[2].x_0, this.textp[2].y_0, true);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.lead2, this.point2);
  this.curcount_0 = $updateDotCount(-$getCurrentIntoNode(this, 2), this.curcount_0);
  $drawDots(g, this.point2, this.lead2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.getConnection_0 = function getConnection_8(n1, n2){
  return false;
}
;
_.getDumpType_0 = function getDumpType_16(){
  return 401;
}
;
_.getInfo = function getInfo_12(arr){
  arr[0] = 'Comparator';
  arr[1] = 'V+ = ' + myGetUnitText(this.volts[1], 'V', false);
  arr[2] = 'V- = ' + myGetUnitText(this.volts[0], 'V', false);
}
;
_.setPoints = function setPoints_11(){
  var hs, tris, ww;
  $setPoints(this);
  this.dn > 150 && this == sim_0.dragElm && $setSize_1(this, 2);
  ww = this.opwidth;
  ww > this.dn / 2 && (ww = round_int(this.dn / 2));
  $calcLeads(this, ww * 2);
  hs = this.opheight * this.dsign;
  this.in1p = $newPointArray(2);
  this.in2p = $newPointArray(2);
  this.textp = $newPointArray(3);
  $interpPoint2(this.point1, this.point2, this.in1p[0], this.in2p[0], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.in1p[1], this.in2p[1], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.textp[0], this.textp[1], 0.2, hs);
  $interpPoint_2(this.lead1, this.lead2, this.textp[2], 0.5, 0);
  tris = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, tris[0], tris[1], 0, hs * 2);
  this.triangle = $createPolygon(tris[0], tris[1], this.lead2);
  this.plusFont = new Font('SansSerif', 0, this.opsize == 2?14:10);
  $setPost(this, 0, this.in1p[0]);
  $setPost(this, 1, this.in2p[0]);
  $setPost(this, 2, this.point2);
}
;
_.opheight = 0;
_.opsize = 0;
_.opwidth = 0;
var modelExternalNodes, modelString = 'OpAmpElm 1 2 3\rAnalogSwitchElm 4 5 3\rGroundElm 5';
var Lcom_lushprojects_circuitjs1_client_ComparatorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ComparatorElm', 312);
function $$init_6(this$static){
  this$static.angulo = 0;
}

function $setupPins_1(this$static){
  var i, s;
  (this$static.flags & $intern_31) != 0 && (this$static.angulo = 1);
  this$static.sizeX = this$static.angulo == 0?8:3;
  this$static.sizeY = this$static.angulo == 0?3:8;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 16, 0, 1);
  for (i = 0; i < 8; i++) {
    s = (checkCriticalNotNull('I') , checkCriticalNotNull('' + (7 - i)) , 'I' + ('' + (7 - i)));
    this$static.pins[i] = new ChipElm$Pin(this$static, i, this$static.angulo == 0?1:3, s);
    s = (checkCriticalNotNull('O') , checkCriticalNotNull('' + (7 - i)) , 'O' + ('' + (7 - i)));
    this$static.pins[8 + i] = new ChipElm$Pin(this$static, i, this$static.angulo == 0?0:2, s);
    this$static.pins[8 + i].output = true;
  }
}

function Complemento1(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_6(this);
}

function Complemento1_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_6(this);
}

defineClass(261, 13, $intern_66, Complemento1, Complemento1_0);
_.execute_2 = function execute_20(){
  var i;
  for (i = 0; i < 8; i++)
    this.pins[8 + i].value_0 = !this.pins[i].value_0;
}
;
_.getChipName = function getChipName_5(){
  return 'Complemento de 1 para 8 bits';
}
;
_.getDumpType = function getDumpType_17(){
  return 1008;
}
;
_.getEditInfo = function getEditInfo_11(n){
  var ei;
  if (n < 2)
    return $getEditInfo_0(this, n);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Rotacione', (this.flags & $intern_31) != 0);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_13(){
  return 16;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_10(){
  return 8;
}
;
_.setEditValue = function setEditValue_10(n, ei){
  n < 2 && $setEditValue(this, n, ei);
  if (n == 2) {
    if ($getState(ei.checkbox)) {
      this.flags |= $intern_31;
      this.angulo = 1;
    }
     else {
      this.flags &= -4097;
      this.angulo = 0;
    }
    $setupPins_1(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_4(){
  $setupPins_1(this);
}
;
_.angulo = 0;
var Lcom_lushprojects_circuitjs1_client_Complemento1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Complemento1', 261);
function $getPostCount(this$static){
  if ((this$static.flags & 2) != 0)
    return this$static.bits + 3;
  return this$static.bits + 2;
}

function CounterElm(xx, yy){
  ChipElm.call(this, xx, yy);
  this.invertreset = false;
}

function CounterElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.invertreset = false;
  $hasMoreTokens(st)?(this.invertreset = $booleanValue(($clinit_Boolean() , $equalsIgnoreCase('true', $nextToken(st))))):(this.invertreset = true);
  this.pins[1].bubble = this.invertreset;
}

defineClass(295, 13, $intern_66, CounterElm, CounterElm_0);
_.dump_0 = function dump_17(){
  return $dump(this) + ' ' + this.invertreset;
}
;
_.execute_2 = function execute_21(){
  var en, i, ii;
  en = true;
  (this.flags & 2) != 0 && (en = this.pins[this.bits + 2].value_0);
  if (this.pins[0].value_0 && !this.lastClock && en) {
    for (i = this.bits - 1; i >= 0; i--) {
      ii = i + 2;
      if (!this.pins[ii].value_0) {
        this.pins[ii].value_0 = true;
        break;
      }
      this.pins[ii].value_0 = false;
    }
  }
  if (!this.pins[1].value_0 == this.invertreset) {
    for (i = 0; i != this.bits; i++)
      this.pins[i + 2].value_0 = false;
  }
  this.lastClock = this.pins[0].value_0;
}
;
_.getChipName = function getChipName_6(){
  return 'Counter';
}
;
_.getDumpType = function getDumpType_18(){
  return 164;
}
;
_.getEditInfo = function getEditInfo_12(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Flip X', (this.flags & $intern_21) != 0);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Flip Y', (this.flags & $intern_32) != 0);
    return ei;
  }
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Invert reset pin', this.invertreset);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_14(){
  return $getPostCount(this);
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_11(){
  return this.bits;
}
;
_.needsBits = function needsBits_1(){
  return true;
}
;
_.setEditValue = function setEditValue_11(n, ei){
  if (n == 0) {
    $getState(ei.checkbox)?(this.flags |= $intern_21):(this.flags &= -1025);
    $setPoints_0(this);
  }
  if (n == 1) {
    $getState(ei.checkbox)?(this.flags |= $intern_32):(this.flags &= -2049);
    $setPoints_0(this);
  }
  if (n == 2) {
    if ($getState(ei.checkbox)) {
      this.invertreset = true;
      this.pins[1].bubble = true;
    }
     else {
      this.invertreset = false;
      this.pins[1].bubble = false;
    }
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_5(){
  var i, ii;
  this.bits != 8 && (this.bits = 8);
  this.sizeX = 2;
  this.sizeY = this.bits > 2?this.bits:2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, $getPostCount(this), 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, '');
  this.pins[0].clock = true;
  this.pins[1] = new ChipElm$Pin(this, this.sizeY - 1, 2, 'R');
  this.pins[1].bubble = this.invertreset;
  for (i = 0; i != this.bits; i++) {
    ii = i + 2;
    this.pins[ii] = new ChipElm$Pin(this, i, 3, 'Q' + (this.bits - i - 1));
    this.pins[ii].output = this.pins[ii].state = true;
  }
  (this.flags & 2) != 0 && (this.pins[this.bits + 2] = new ChipElm$Pin(this, this.sizeY - 2, 2, 'En'));
  $allocNodes(this);
}
;
_.invertreset = false;
var Lcom_lushprojects_circuitjs1_client_CounterElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CounterElm', 295);
function $stampCurrentSource_0(this$static, broken){
  if (broken) {
    $stampResistor(sim_0, this$static.nodes[0], this$static.nodes[1], $intern_73);
    this$static.current_0 = 0;
  }
   else {
    $stampCurrentSource(sim_0, this$static.nodes[0], this$static.nodes[1], this$static.currentValue);
    this$static.current_0 = this$static.currentValue;
  }
}

function CurrentElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.currentValue = $intern_29;
}

function CurrentElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  try {
    this.currentValue = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 14)) {
      this.currentValue = $intern_29;
    }
     else 
      throw toJs($e0);
  }
}

defineClass(146, 4, {4:1, 146:1, 8:1}, CurrentElm, CurrentElm_0);
_.draw = function draw_14(g){
  var s;
  $draw2Leads(this, g);
  $setVoltageColor(this, g, (this.volts[0] + this.volts[1]) / 2);
  $setPowerColor_0(this, g);
  drawThickCircle(g, this.center.x_0, this.center.y_0, 12);
  drawThickLine_0(g, this.ashaft1, this.ashaft2);
  $fillPolygon(g, this.arrow);
  $setBbox_0(this, this.point1, this.point2, 12);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this.currentValue, 'A', true);
    (this.dx == 0 || this.dy == 0) && $drawValues(this, g, s, 12);
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_18(){
  return 'i ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.currentValue;
}
;
_.getDumpType = function getDumpType_19(){
  return 105;
}
;
_.getEditInfo = function getEditInfo_13(n){
  if (n == 0)
    return new EditInfo('Current (A)', this.currentValue, 0, 0.1);
  return null;
}
;
_.getInfo = function getInfo_13(arr){
  arr[0] = 'current source';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[1] - this.volts[0]), 'V', false);
}
;
_.getVoltageDiff = function getVoltageDiff_5(){
  return this.volts[1] - this.volts[0];
}
;
_.setEditValue = function setEditValue_12(n, ei){
  this.currentValue = ei.value_0;
}
;
_.setPoints = function setPoints_12(){
  var p2;
  $setPoints(this);
  $calcLeads(this, 26);
  this.ashaft1 = $interpPoint(this.lead1, this.lead2, 0.25);
  this.ashaft2 = $interpPoint(this.lead1, this.lead2, 0.6);
  this.center = $interpPoint(this.lead1, this.lead2, 0.5);
  p2 = $interpPoint(this.lead1, this.lead2, 0.75);
  this.arrow = $calcArrow(this.center, p2, 4, 4);
}
;
_.currentValue = 0;
var Lcom_lushprojects_circuitjs1_client_CurrentElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CurrentElm', 146);
function $dumpModel(this$static){
  if (this$static.model.dumped)
    return '';
  return $dump_1(this$static.model);
}

function $fixPinName(p){
  if ($startsWith(p.text_0, '/')) {
    p.text_0 = p.text_0.substr(1);
    p.lineOver = true;
  }
  if ($compareTo(p.text_0.toLowerCase(), 'clk'.toLowerCase()) == 0) {
    p.text_0 = '';
    p.clock = true;
  }
}

function $setupPins_2(this$static){
  var i;
  if (this$static.modelName == null) {
    this$static.postCount = this$static.bits;
    $allocNodes(this$static);
    return;
  }
  this$static.model = getModelWithName(this$static.modelName);
  this$static.inputCount = this$static.model.inputs.length;
  this$static.outputCount = this$static.model.outputs.length;
  this$static.sizeY = this$static.inputCount > this$static.outputCount?this$static.inputCount:this$static.outputCount;
  this$static.sizeY == 0 && (this$static.sizeY = 1);
  this$static.sizeX = 2;
  this$static.postCount = this$static.inputCount + this$static.outputCount;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this$static.postCount, 0, 1);
  for (i = 0; i != this$static.inputCount; i++) {
    this$static.pins[i] = new ChipElm$Pin(this$static, i, 2, this$static.model.inputs[i]);
    $fixPinName(this$static.pins[i]);
  }
  for (i = 0; i != this$static.outputCount; i++) {
    this$static.pins[i + this$static.inputCount] = new ChipElm$Pin(this$static, i, 3, this$static.model.outputs[i]);
    this$static.pins[i + this$static.inputCount].output = true;
    $fixPinName(this$static.pins[i + this$static.inputCount]);
  }
  this$static.lastValues = initUnidimensionalArray(Z_classLit, $intern_72, 9, this$static.postCount, 16, 1);
  this$static.patternValues = initUnidimensionalArray(Z_classLit, $intern_72, 9, 26, 16, 1);
}

function $updateModels_0(this$static){
  this$static.model = getModelWithNameOrCopy(this$static.modelName, this$static.model);
  $setupPins_2(this$static);
  $allocNodes(this$static);
  $setPoints_0(this$static);
}

function CustomLogicElm(xx, yy){
  ChipElm.call(this, xx, yy);
  this.modelName = lastModelName;
  $setupPins_2(this);
}

function CustomLogicElm_0(xa, ya, xb, yb, f, st){
  var i;
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.modelName = $nextToken(st);
  $updateModels_0(this);
  for (i = 0; i != this.postCount; i++) {
    if (this.pins[i].output) {
      this.volts[i] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
      this.pins[i].value_0 = this.volts[i] > 2.5;
    }
  }
}

defineClass(168, 13, {4:1, 168:1, 8:1}, CustomLogicElm, CustomLogicElm_0);
_.dump_0 = function dump_19(){
  var i, s;
  s = $dump(this);
  s += ' ' + this.modelName;
  for (i = 0; i != this.postCount; i++) {
    this.pins[i].output && (s += ' ' + this.volts[i]);
  }
  return s;
}
;
_.execute_2 = function execute_22(){
  var i, j, rl, rr, x_0;
  for (i = 0; i != this.model.rulesLeft.arrayList.array.length; i++) {
    rl = castToString($get_3(this.model.rulesLeft, i));
    for (j = 0; j != rl.length; j++) {
      x_0 = (checkCriticalStringElementIndex(j, rl.length) , rl.charCodeAt(j));
      if (x_0 == 48 || x_0 == 49) {
        if (this.pins[j].value_0 == (x_0 == 49))
          continue;
        break;
      }
      if (x_0 == 63)
        continue;
      if (x_0 == 43) {
        if (this.pins[j].value_0 && !this.lastValues[j])
          continue;
        break;
      }
      if (x_0 == 45) {
        if (!this.pins[j].value_0 && this.lastValues[j])
          continue;
        break;
      }
      if (x_0 >= 97 && x_0 <= 122) {
        this.patternValues[x_0 - 97] = this.pins[j].value_0;
        continue;
      }
      if (x_0 >= 65 && x_0 <= 122) {
        if (this.patternValues[x_0 - 65] != this.pins[j].value_0)
          break;
        continue;
      }
    }
    if (j != rl.length)
      continue;
    rr = castToString($get_3(this.model.rulesRight, i));
    for (j = 0; j != rr.length; j++) {
      x_0 = (checkCriticalStringElementIndex(j, rr.length) , rr.charCodeAt(j));
      x_0 >= 97 && x_0 <= 122?(this.pins[j + this.inputCount].value_0 = this.patternValues[x_0 - 97]):(this.pins[j + this.inputCount].value_0 = x_0 == 49);
    }
    for (j = 0; j != this.postCount; j++)
      this.lastValues[j] = this.pins[j].value_0;
    break;
  }
}
;
_.getDumpType = function getDumpType_20(){
  return 208;
}
;
_.getEditInfo = function getEditInfo_14(n){
  var ei;
  if (n == 2) {
    ei = new EditInfo('Model Name', 0, -1, -1);
    ei.text_0 = this.modelName;
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.button_0 = new Button_0('Edit Model');
    return ei;
  }
  return $getEditInfo_0(this, n);
}
;
_.getInfo = function getInfo_14(arr){
  $getInfo(this, arr);
  arr[0] = this.model.infoText;
}
;
_.getPostCount = function getPostCount_15(){
  return this.postCount;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_12(){
  return this.outputCount;
}
;
_.setEditValue = function setEditValue_13(n, ei){
  var editDialog;
  if (n == 2) {
    this.modelName = lastModelName = $getText(ei.textf);
    this.model = getModelWithNameOrCopy(this.modelName, this.model);
    $setupPins_2(this);
    $allocNodes(this);
    $setPoints_0(this);
    return;
  }
  if (n == 3) {
    editDialog = new EditDialog(this.model, sim_0);
    customLogicEditDialog = editDialog;
    !editDialog.resizeHandlerRegistration && (editDialog.resizeHandlerRegistration = addResizeHandler(new DialogBox$1(editDialog)));
    $show(editDialog);
    return;
  }
  $setEditValue(this, n, ei);
}
;
_.setupPins = function setupPins_6(){
  $setupPins_2(this);
}
;
_.updateModels_0 = function updateModels_0(){
  $updateModels_0(this);
}
;
_.updateModels = function(){
  this.updateModels_0();
}
;
_.inputCount = 0;
_.outputCount = 0;
_.postCount = 0;
var lastModelName = 'default';
var Lcom_lushprojects_circuitjs1_client_CustomLogicElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CustomLogicElm', 168);
function $arrayToList(arr){
  var i, x_0;
  if (arr == null)
    return '';
  if (arr.length == 0)
    return '';
  x_0 = arr[0];
  for (i = 1; i < arr.length; i++)
    x_0 += ',' + arr[i];
  return x_0;
}

function $dump_1(this$static){
  this$static.dumped = true;
  this$static.rules_0.length > 0 && !$endsWith(this$static.rules_0, '\n') && (this$static.rules_0 += '\n');
  return '! ' + escape_0(this$static.name_0) + ' ' + this$static.flags + ' ' + escape_0($arrayToList(this$static.inputs)) + ' ' + escape_0($arrayToList(this$static.outputs)) + ' ' + escape_0(this$static.infoText) + ' ' + escape_0(this$static.rules_0);
}

function $parseRules(this$static){
  var i, j, lines, newRl, rl, s, s0, used, x_0;
  lines = $split_0(this$static.rules_0, '\n');
  this$static.rulesLeft = new Vector;
  this$static.rulesRight = new Vector;
  for (i = 0; i != lines.length; i++) {
    s = lines[i].toLowerCase();
    if (s.length == 0 || $equals_1(s.substr(0, 1), '#'))
      continue;
    s0 = $split_0($replaceAll(s, ' ', ''), '=');
    if (s0.length != 2) {
      $wnd.alert('Error on line ' + (i + 1) + ' of model description');
      return;
    }
    if (s0[0].length < this$static.inputs.length) {
      alert_0('Model must have >= ' + this$static.inputs.length + ' digits on left side');
      return;
    }
    if (s0[0].length > this$static.inputs.length + this$static.outputs.length) {
      alert_0('Model must have <= ' + (this$static.inputs.length + this$static.outputs.length) + ' digits on left side');
      return;
    }
    if (s0[1].length != this$static.outputs.length) {
      alert_0('Model must have ' + this$static.outputs.length + ' digits on right side');
      return;
    }
    rl = s0[0];
    used = initUnidimensionalArray(Z_classLit, $intern_72, 9, 26, 16, 1);
    newRl = '';
    for (j = 0; j != rl.length; j++) {
      x_0 = (checkCriticalStringElementIndex(j, rl.length) , rl.charCodeAt(j));
      if (x_0 == 63 || x_0 == 43 || x_0 == 45 || x_0 == 48 || x_0 == 49) {
        newRl += String.fromCharCode(x_0);
        continue;
      }
      if (x_0 < 97 || x_0 > 122) {
        $wnd.alert('Error on line ' + (i + 1) + ' of model description');
        return;
      }
      if (used[x_0 - 97]) {
        newRl += String.fromCharCode(x_0 + 65 - 97 & $intern_9);
        continue;
      }
      used[x_0 - 97] = true;
      newRl += String.fromCharCode(x_0);
    }
    $add_11(this$static.rulesLeft, newRl);
    $add_11(this$static.rulesRight, s0[1]);
  }
}

function CustomLogicModel(){
  this.inputs = $split_0('A,B', ',');
  this.outputs = $split_0('C,D', ',');
  this.rulesLeft = new Vector;
  this.rulesRight = new Vector;
  this.rules_0 = '';
}

function CustomLogicModel_0(copy){
  this.flags = copy.flags;
  this.inputs = copy.inputs;
  this.outputs = copy.outputs;
  this.infoText = copy.infoText;
  this.rules_0 = copy.rules_0;
  this.rulesLeft = copy.rulesLeft;
  this.rulesRight = copy.rulesRight;
}

function CustomLogicModel_1(st){
  this.name_0 = unescape_0($nextToken(st));
  this.flags = (new Integer_0($nextToken(st))).value_0;
  this.inputs = $split_0(unescape_0($nextToken(st)), ',');
  this.outputs = $split_0(unescape_0($nextToken(st)), ',');
  this.infoText = unescape_0($nextToken(st));
  this.rules_0 = unescape_0($nextToken(st));
  $parseRules(this);
  $putStringValue(modelMap, this.name_0, this);
}

function clearDumpedFlags(){
  var it, pair;
  if (!modelMap)
    return;
  it = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(modelMap)).this$01);
  while (it.hasNext) {
    pair = $next_1(it);
    castTo(pair.getValue(), 134).dumped = false;
  }
}

function escape_0(s){
  if (s.length == 0)
    return '\\0';
  return $replace_1($replace_1($replace_1($replace_1($replace_1($replace_1($replace_1(s, '\\', '\\\\'), '\n', '\\n'), ' ', '\\s'), '+', '\\p'), '=', '\\q'), '#', '\\h'), '&', '\\a');
}

function getModelWithName(name_0){
  var lm;
  !modelMap && (modelMap = new HashMap);
  lm = castTo($getStringValue(modelMap, name_0), 134);
  if (lm)
    return lm;
  lm = new CustomLogicModel;
  lm.name_0 = name_0;
  lm.infoText = $equals_1(name_0, 'default')?'custom logic':name_0;
  $putStringValue(modelMap, name_0, lm);
  return lm;
}

function getModelWithNameOrCopy(name_0, oldmodel){
  var lm;
  !modelMap && (modelMap = new HashMap);
  lm = castTo($getStringValue(modelMap, name_0), 134);
  if (lm)
    return lm;
  lm = new CustomLogicModel_0(oldmodel);
  lm.name_0 = name_0;
  lm.infoText = name_0;
  $putStringValue(modelMap, name_0, lm);
  return lm;
}

function unescape_0(s){
  var c, i;
  if ($equals_1(s, '\\0'))
    return '';
  for (i = 0; i < s.length; i++) {
    checkCriticalStringElementIndex(i, s.length);
    if (s.charCodeAt(i) == 92) {
      c = (checkCriticalStringElementIndex(i + 1, s.length) , s.charCodeAt(i + 1));
      c == 110?(s = s.substr(0, i) + '\n' + s.substr(i + 2)):c == 115?(s = s.substr(0, i) + ' ' + s.substr(i + 2)):c == 112?(s = s.substr(0, i) + '+' + s.substr(i + 2)):c == 113?(s = s.substr(0, i) + '=' + s.substr(i + 2)):c == 104?(s = s.substr(0, i) + '#' + s.substr(i + 2)):c == 97?(s = s.substr(0, i) + '&' + s.substr(i + 2)):(s = s.substr(0, i) + ('' + s.substr(i + 1)));
    }
  }
  return s;
}

defineClass(134, 1, {134:1, 8:1}, CustomLogicModel, CustomLogicModel_0, CustomLogicModel_1);
_.getEditInfo = function getEditInfo_15(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('Inputs', 0, -1, -1);
    ei.text_0 = $arrayToList(this.inputs);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('Outputs', 0, -1, -1);
    ei.text_0 = $arrayToList(this.outputs);
    return ei;
  }
  if (n == 2) {
    ei = new EditInfo('Info Text', 0, -1, -1);
    ei.text_0 = this.infoText;
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('<a href="customlogic.html" target="_blank">Definition<\/a>', 0, -1, -1);
    ei.textArea = new TextArea_0;
    $setVisibleLines(ei.textArea);
    $setText_2(ei.textArea, this.rules_0);
    return ei;
  }
  return null;
}
;
_.setEditValue = function setEditValue_14(n, ei){
  n == 0 && (this.inputs = $split_0($getText(ei.textf), ','));
  n == 1 && (this.outputs = $split_0($getText(ei.textf), ','));
  n == 2 && (this.infoText = $getText(ei.textf));
  if (n == 3) {
    this.rules_0 = $getText(ei.textArea);
    $parseRules(this);
  }
  n == 4 && ($getState(ei.checkbox)?(this.flags |= FLAG_SCHMITT):(this.flags &= ~FLAG_SCHMITT));
  $updateModels(theSim);
}
;
_.dumped = false;
_.flags = 0;
var FLAG_SCHMITT = 1, modelMap;
var Lcom_lushprojects_circuitjs1_client_CustomLogicModel_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'CustomLogicModel', 134);
function DACElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function DACElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(297, 13, $intern_66, DACElm, DACElm_0);
_.doStep = function doStep_12(){
  var i, ival, ivalmax, v;
  ival = 0;
  for (i = 0; i != this.bits; i++)
    this.volts[i] > 2.5 && (ival |= 1 << i);
  ivalmax = (1 << this.bits) - 1;
  v = ival * this.volts[this.bits + 1] / ivalmax;
  $updateVoltageSource(sim_0, this.pins[this.bits].voltSource, v);
}
;
_.getChipName = function getChipName_7(){
  return 'DAC';
}
;
_.getDumpType = function getDumpType_21(){
  return 166;
}
;
_.getPostCount = function getPostCount_16(){
  return this.bits + 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_13(){
  return 1;
}
;
_.needsBits = function needsBits_2(){
  return true;
}
;
_.setupPins = function setupPins_7(){
  var i;
  this.sizeX = 2;
  this.sizeY = this.bits > 2?this.bits:2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.bits + 2, 0, 1);
  for (i = 0; i != this.bits; i++)
    this.pins[i] = new ChipElm$Pin(this, this.bits - 1 - i, 2, 'D' + i);
  this.pins[this.bits] = new ChipElm$Pin(this, 0, 3, 'O');
  this.pins[this.bits].output = true;
  this.pins[this.bits + 1] = new ChipElm$Pin(this, this.sizeY - 1, 3, 'V+');
  $allocNodes(this);
}
;
var Lcom_lushprojects_circuitjs1_client_DACElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DACElm', 297);
function DCVoltageElm(xx, yy){
  VoltageElm.call(this, xx, yy, 0);
}

defineClass(484, 41, $intern_69, DCVoltageElm);
_.getShortcut = function getShortcut_7(){
  return 118;
}
;
var Lcom_lushprojects_circuitjs1_client_DCVoltageElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DCVoltageElm', 484);
function $setupPins_3(this$static){
  this$static.sizeX = 2;
  this$static.sizeY = 3;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 4 + ((this$static.flags & 2) != 0 || (this$static.flags & 4) != 0?1:0) + ((this$static.flags & 4) != 0?1:0), 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'D');
  this$static.pins[1] = new ChipElm$Pin(this$static, 0, 3, 'Q');
  this$static.pins[1].output = this$static.pins[1].state = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, (this$static.flags & 4) != 0?1:2, 3, 'Q');
  this$static.pins[2].output = true;
  this$static.pins[2].lineOver = true;
  this$static.pins[3] = new ChipElm$Pin(this$static, 1, 2, '');
  this$static.pins[3].clock = true;
  if ((this$static.flags & 4) != 0) {
    this$static.pins[5] = new ChipElm$Pin(this$static, 2, 2, 'S');
    this$static.pins[4] = new ChipElm$Pin(this$static, 2, 3, 'R');
  }
   else {
    ((this$static.flags & 2) != 0 || (this$static.flags & 4) != 0) && (this$static.pins[4] = new ChipElm$Pin(this$static, 2, 2, 'R'));
  }
}

function DFlipFlopElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function DFlipFlopElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.pins[2].value_0 = !this.pins[1].value_0;
}

defineClass(285, 13, $intern_66, DFlipFlopElm, DFlipFlopElm_0);
_.execute_2 = function execute_23(){
  if (this.pins[3].value_0 && !this.lastClock) {
    this.pins[1].value_0 = this.pins[0].value_0;
    this.pins[2].value_0 = !this.pins[0].value_0;
  }
  if ((this.flags & 4) != 0 && this.pins[5].value_0) {
    this.pins[1].value_0 = true;
    this.pins[2].value_0 = false;
  }
  if (((this.flags & 2) != 0 || (this.flags & 4) != 0) && this.pins[4].value_0) {
    this.pins[1].value_0 = false;
    this.pins[2].value_0 = true;
  }
  this.lastClock = this.pins[3].value_0;
}
;
_.getChipName = function getChipName_8(){
  return 'D flip-flop';
}
;
_.getDumpType = function getDumpType_22(){
  return 155;
}
;
_.getEditInfo = function getEditInfo_16(n){
  var ei;
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Reset Pin', (this.flags & 2) != 0 || (this.flags & 4) != 0);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Set Pin', (this.flags & 4) != 0);
    return ei;
  }
  return $getEditInfo_0(this, n);
}
;
_.getPostCount = function getPostCount_17(){
  return 4 + ((this.flags & 2) != 0 || (this.flags & 4) != 0?1:0) + ((this.flags & 4) != 0?1:0);
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_14(){
  return 2;
}
;
_.reset_0 = function reset_7(){
  $reset_0(this);
  this.volts[2] = 5;
  this.pins[2].value_0 = true;
}
;
_.setEditValue = function setEditValue_15(n, ei){
  if (n == 2) {
    $getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3);
    $setupPins_3(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
  if (n == 3) {
    $getState(ei.checkbox)?(this.flags |= 4):(this.flags &= -5);
    $setupPins_3(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
  $setEditValue(this, n, ei);
}
;
_.setupPins = function setupPins_8(){
  $setupPins_3(this);
}
;
var Lcom_lushprojects_circuitjs1_client_DFlipFlopElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DFlipFlopElm', 285);
function $clinit_DarlingtonElm(){
  $clinit_DarlingtonElm = emptyMethod;
  modelExternalNodes_0 = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [0, 1, 2]);
}

function DarlingtonElm(xa, ya, xb, yb, f, st){
  $clinit_DarlingtonElm();
  CompositeElm.call(this, xa, ya, xb, yb, f, st, modelString_0, modelExternalNodes_0);
  this.pnp = (new Integer_0($nextToken(st))).value_0;
  this.noDiagonal = true;
}

function DarlingtonElm_0(xx, yy, pnpflag){
  CompositeElm_0.call(this, xx, yy, modelString_0, modelExternalNodes_0);
  this.pnp = pnpflag?-1:1;
  castTo($get_3(this.compElmList, 0), 109).pnp = this.pnp;
  castTo($get_3(this.compElmList, 1), 109).pnp = this.pnp;
  this.noDiagonal = true;
}

defineClass(218, 150, $intern_66, DarlingtonElm);
_.draw = function draw_15(g){
  var ds;
  $setBbox_0(this, this.point1, this.point2, 16);
  $setPowerColor_0(this, g);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.coll[0], this.coll[1]);
  drawThickLine_0(g, this.coll2[0], this.coll2[1]);
  drawThickLine_0(g, this.coll[0], this.coll2[0]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.emit[0], this.emit[1]);
  $setColor(g, lightGrayColor);
  $fillPolygon(g, this.arrowPoly);
  $setVoltageColor(this, g, this.volts[0]);
  sim_0.powerCheckItem.on && $setColor(g, ($clinit_Color() , gray));
  drawThickLine_0(g, this.point1, this.base);
  this.curcount_b = $updateDotCount($getCurrentIntoNode(this, 0), this.curcount_b);
  $drawDots(g, this.base, this.point1, this.curcount_b);
  this.curcount_c = $updateDotCount($getCurrentIntoNode(this, 1), this.curcount_c);
  $drawDots(g, this.coll[1], this.coll[0], this.curcount_c);
  this.curcount_e = $updateDotCount($getCurrentIntoNode(this, 2), this.curcount_e);
  $drawDots(g, this.emit[1], this.emit[0], this.curcount_e);
  $setVoltageColor(this, g, this.volts[0]);
  $setPowerColor_0(this, g);
  $fillPolygon(g, this.rectPoly);
  if ((this.iAmMouseElm || this.selected || sim_0.plotYElm == this || sim_0.dragElm == this) && this.dy == 0) {
    $setColor(g, ($clinit_Color() , white));
    ds = sign(this.dx);
    $drawString(g, 'B', this.base.x_0 - 10 * ds, this.base.y_0 - 5);
    $drawString(g, 'C', this.coll[0].x_0 - 3 + 9 * ds, this.coll[0].y_0 + 4);
    $drawString(g, 'E', this.emit[0].x_0 - 3 + 9 * ds, this.emit[0].y_0 + 4);
  }
  $drawPosts(this, g);
}
;
_.dump_1 = function dump_20(){
  return $dump_0(this) + ' ' + this.pnp;
}
;
_.getDumpType_0 = function getDumpType_23(){
  return 400;
}
;
_.getInfo = function getInfo_15(arr){
  var sm, vbc, vbe, vce;
  arr[0] = (sm = castToString($getStringValue(localizationMap, 'darlington pair')) , (sm != null?sm:'darlington pair') + ' (' + (this.pnp == -1?'PNP)':'NPN)'));
  vbc = this.volts[0] - this.volts[1];
  vbe = this.volts[0] - this.volts[2];
  vce = this.volts[1] - this.volts[2];
  arr[1] = 'Ic = ' + myGetUnitText(-$getCurrentIntoNode(this, 1), 'A', false);
  arr[2] = 'Ib = ' + myGetUnitText(-$getCurrentIntoNode(this, 0), 'A', false);
  arr[3] = 'Vbe = ' + myGetUnitText(vbe, 'V', false);
  arr[4] = 'Vbc = ' + myGetUnitText(vbc, 'V', false);
  arr[5] = 'Vce = ' + myGetUnitText(vce, 'V', false);
}
;
_.reset_1 = function reset_8(){
  $reset_1(this);
  this.curcount_c = this.curcount_e = this.curcount_b = 0;
}
;
_.setPoints = function setPoints_13(){
  var hs2, pt;
  $setPoints(this);
  hs2 = 16 * this.dsign * this.pnp;
  this.coll = $newPointArray(2);
  this.coll2 = $newPointArray(2);
  this.emit = $newPointArray(2);
  $interpPoint2(this.point1, this.point2, this.coll[0], this.emit[0], 1, hs2);
  this.coll2[0] = $interpPoint_0(this.point1, this.point2, 1, hs2 - 5 * this.dsign * this.pnp);
  this.rect = $newPointArray(4);
  $interpPoint2(this.point1, this.point2, this.rect[0], this.rect[1], 1 - 16 / this.dn, 16);
  $interpPoint2(this.point1, this.point2, this.rect[2], this.rect[3], 1 - 13 / this.dn, 16);
  $interpPoint2(this.point1, this.point2, this.coll[1], this.emit[1], 1 - 13 / this.dn, 6 * this.dsign * this.pnp);
  this.coll2[1] = $interpPoint_0(this.point1, this.point2, 1 - 13 / this.dn, this.dsign * this.pnp);
  this.base = new Point;
  $interpPoint_1(this.point1, this.point2, this.base, 1 - 16 / this.dn);
  this.rectPoly = $createPolygon_0(this.rect[0], this.rect[2], this.rect[3], this.rect[1]);
  if (this.pnp == 1)
    this.arrowPoly = $calcArrow(this.emit[1], this.emit[0], 8, 4);
  else {
    pt = $interpPoint_0(this.point1, this.point2, 1 - 11 / this.dn, -5 * this.dsign * this.pnp);
    this.arrowPoly = $calcArrow(this.emit[0], pt, 8, 4);
  }
  $setPost(this, 0, this.point1);
  $setPost(this, 1, this.coll[0]);
  $setPost(this, 2, this.emit[0]);
}
;
_.curcount_b = 0;
_.curcount_c = 0;
_.curcount_e = 0;
_.pnp = 0;
var modelExternalNodes_0, modelString_0 = 'NTransistorElm 0 1 3\rNTransistorElm 3 1 2';
var Lcom_lushprojects_circuitjs1_client_DarlingtonElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DarlingtonElm', 218);
function $setDataCount_0(this$static, ct){
  this$static.dataCount = ct;
  this$static.data_0 = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.dataCount, 15, 1);
  this$static.dataPtr = 0;
  this$static.dataFull = false;
}

function DataRecorderElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $setDataCount_0(this, 10240);
}

function DataRecorderElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $setDataCount_0(this, __parseAndValidateInt($nextToken(st)));
}

defineClass(311, 4, $intern_66, DataRecorderElm, DataRecorderElm_0);
_.draw = function draw_16(g){
  var f, selected;
  selected = this.iAmMouseElm || this.selected || sim_0.plotYElm == this;
  f = new Font('SansSerif', selected?1:0, 14);
  $setFont_0(g, f);
  $setColor(g, selected?selectColor:whiteColor);
  $interpPoint_1(this.point1, this.point2, this.lead1, 1 - ((round_int(g.context.measureText('export').width) / 2 | 0) + 8) / this.dn);
  $setBbox_0(this, this.point1, this.lead1, 0);
  $drawCenteredText(this, g, 'export', this.x2, this.y2, true);
  $setVoltageColor(this, g, this.volts[0]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.point1, this.lead1);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_21(){
  return '210 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.dataCount;
}
;
_.getDumpType = function getDumpType_24(){
  return 210;
}
;
_.getEditInfo = function getEditInfo_17(n){
  var a, dataStr, date, dtf, ei, fname, i, url_0, datain, oldblob, blob, url_1;
  if (n == 0) {
    ei = $setDimensionless(new EditInfo('# of Data Points', this.dataCount, -1, -1));
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    dataStr = '# time step = ' + sim_0.timeStep + ' sec\n';
    if (this.dataFull) {
      for (i = 0; i != this.dataCount; i++)
        dataStr += this.data_0[(i + this.dataPtr) % this.dataCount] + '\n';
    }
     else {
      for (i = 0; i != this.dataPtr; i++)
        dataStr += this.data_0[i] + '\n';
    }
    url_0 = (datain = [''] , datain[0] = dataStr , oldblob = $doc.recorderBlob , oldblob && URL.revokeObjectURL(oldblob) , blob = new Blob(datain, {type:'text/plain'}) , url_1 = URL.createObjectURL(blob) , $doc.recorderBlob = url_1 , url_1);
    date = new Date_0;
    dtf = ($clinit_DateTimeFormat_0() , getFormat($getDateTimeFormatInfo(($clinit_LocaleInfo() , $clinit_LocaleInfo() , instance_0))));
    fname = 'data-' + $format(dtf, date, null) + '.circuitjs.txt';
    a = new Anchor_0(fname, url_0);
    $setAttribute(($clinit_DOM() , a.element), 'Download', fname);
    ei.anchor = a;
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_16(arr){
  arr[0] = 'data export';
  arr[1] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[2] = (this.dataFull?this.dataCount:this.dataPtr) + '/' + this.dataCount;
}
;
_.getPostCount = function getPostCount_18(){
  return 1;
}
;
_.getVoltageDiff = function getVoltageDiff_6(){
  return this.volts[0];
}
;
_.reset_0 = function reset_9(){
  this.dataPtr = 0;
  this.dataFull = false;
}
;
_.setEditValue = function setEditValue_16(n, ei){
  n == 0 && ei.value_0 > 0 && $setDataCount_0(this, round_int(ei.value_0));
  if (n == 1)
    return;
}
;
_.setPoints = function setPoints_14(){
  $setPoints(this);
  this.lead1 = new Point;
}
;
_.stepFinished = function stepFinished_3(){
  this.data_0[this.dataPtr++] = this.volts[0];
  if (this.dataPtr >= this.dataCount) {
    this.dataPtr = 0;
    this.dataFull = true;
  }
}
;
_.dataCount = 0;
_.dataFull = false;
_.dataPtr = 0;
var Lcom_lushprojects_circuitjs1_client_DataRecorderElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DataRecorderElm', 311);
function DeMultiplexerElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function DeMultiplexerElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(290, 13, $intern_66, DeMultiplexerElm, DeMultiplexerElm_0);
_.execute_2 = function execute_24(){
  var i, selectedvalue;
  selectedvalue = 0;
  this.pins[4].value_0 && ++selectedvalue;
  this.pins[5].value_0 && (selectedvalue += 2);
  for (i = 0; i < 4; i++)
    this.pins[i].value_0 = false;
  this.pins[selectedvalue].value_0 = this.pins[6].value_0;
}
;
_.getChipName = function getChipName_9(){
  return 'Multiplexer';
}
;
_.getDumpType = function getDumpType_25(){
  return 185;
}
;
_.getPostCount = function getPostCount_19(){
  return 7;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_15(){
  return 4;
}
;
_.setupPins = function setupPins_9(){
  this.sizeX = 3;
  this.sizeY = 5;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 7, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 3, 'Q0');
  this.pins[0].output = true;
  this.pins[1] = new ChipElm$Pin(this, 1, 3, 'Q1');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 2, 3, 'Q2');
  this.pins[2].output = true;
  this.pins[3] = new ChipElm$Pin(this, 3, 3, 'Q3');
  this.pins[3].output = true;
  this.pins[4] = new ChipElm$Pin(this, 0, 1, 'S0');
  this.pins[5] = new ChipElm$Pin(this, 1, 1, 'S1');
  this.pins[6] = new ChipElm$Pin(this, 0, 2, 'Q');
}
;
var Lcom_lushprojects_circuitjs1_client_DeMultiplexerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DeMultiplexerElm', 290);
function $$init_7(this$static){
  this$static.selectedvalue = 0;
}

function $execute_0(this$static){
  var i;
  this$static.selectedvalue = 0;
  this$static.pins[8].value_0 && ++this$static.selectedvalue;
  this$static.pins[9].value_0 && (this$static.selectedvalue += 2);
  this$static.pins[10].value_0 && (this$static.selectedvalue += 4);
  for (i = 0; i < 8; i++)
    this$static.pins[i].value_0 = false;
  this$static.pins[this$static.selectedvalue].value_0 = true;
}

function DeMultiplexerElm8(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_7(this);
}

function DeMultiplexerElm8_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_7(this);
}

defineClass(291, 13, $intern_66, DeMultiplexerElm8, DeMultiplexerElm8_0);
_.doStep = function doStep_13(){
  var i, p;
  for (i = 0; i != 12; i++) {
    p = this.pins[i];
    p.output || (p.value_0 = this.volts[i] > 2.5);
  }
  $execute_0(this);
  for (i = 0; i != 12; i++) {
    p = this.pins[i];
    p.output && $updateVoltageSource(sim_0, p.voltSource, p.value_0?this.volts[11]:0);
  }
}
;
_.execute_2 = function execute_25(){
  $execute_0(this);
}
;
_.getChipName = function getChipName_10(){
  return 'DeMultiplexador de 8 sa\xEDdas de 8 bits';
}
;
_.getDumpType = function getDumpType_26(){
  return 1007;
}
;
_.getPostCount = function getPostCount_20(){
  return 12;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_16(){
  return 8;
}
;
_.setupPins = function setupPins_10(){
  this.sizeX = 4;
  this.sizeY = 9;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 12, 0, 1);
  this.pins[7] = new ChipElm$Pin(this, 0, 3, 'O7');
  this.pins[7].output = true;
  this.pins[6] = new ChipElm$Pin(this, 1, 3, 'O6');
  this.pins[6].output = true;
  this.pins[5] = new ChipElm$Pin(this, 2, 3, 'O5');
  this.pins[5].output = true;
  this.pins[4] = new ChipElm$Pin(this, 3, 3, 'O4');
  this.pins[4].output = true;
  this.pins[3] = new ChipElm$Pin(this, 4, 3, 'O3');
  this.pins[3].output = true;
  this.pins[2] = new ChipElm$Pin(this, 5, 3, 'O2');
  this.pins[2].output = true;
  this.pins[1] = new ChipElm$Pin(this, 6, 3, 'O1');
  this.pins[1].output = true;
  this.pins[0] = new ChipElm$Pin(this, 7, 3, 'O0');
  this.pins[0].output = true;
  this.pins[8] = new ChipElm$Pin(this, 0, 1, 'E0');
  this.pins[9] = new ChipElm$Pin(this, 1, 1, 'E1');
  this.pins[10] = new ChipElm$Pin(this, 2, 1, 'E2');
  this.pins[11] = new ChipElm$Pin(this, 0, 2, 'I');
}
;
_.selectedvalue = 0;
var Lcom_lushprojects_circuitjs1_client_DeMultiplexerElm8_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DeMultiplexerElm8', 291);
function DecadeElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function DecadeElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(194, 13, {4:1, 194:1, 8:1}, DecadeElm, DecadeElm_0);
_.execute_2 = function execute_26(){
  var i;
  if (this.pins[0].value_0 && !this.lastClock) {
    for (i = 0; i != this.bits; i++)
      if (this.pins[i + 2].value_0)
        break;
    i < this.bits && (this.pins[i++ + 2].value_0 = false);
    i %= this.bits;
    this.pins[i + 2].value_0 = true;
  }
  if (!this.pins[1].value_0) {
    for (i = 1; i != this.bits; i++)
      this.pins[i + 2].value_0 = false;
    this.pins[2].value_0 = true;
  }
  this.lastClock = this.pins[0].value_0;
}
;
_.getChipName = function getChipName_11(){
  return 'decade counter';
}
;
_.getDumpType = function getDumpType_27(){
  return 163;
}
;
_.getPostCount = function getPostCount_21(){
  return this.bits + 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_17(){
  return this.bits;
}
;
_.needsBits = function needsBits_3(){
  return true;
}
;
_.setupPins = function setupPins_11(){
  var i, ii;
  this.sizeX = this.bits > 2?this.bits:2;
  this.sizeY = 2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.bits + 2, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 1, 2, '');
  this.pins[0].clock = true;
  this.pins[1] = new ChipElm$Pin(this, this.sizeX - 1, 1, 'R');
  this.pins[1].bubble = true;
  for (i = 0; i != this.bits; i++) {
    ii = i + 2;
    this.pins[ii] = new ChipElm$Pin(this, i, 0, 'Q' + i);
    this.pins[ii].output = this.pins[ii].state = true;
  }
  $allocNodes(this);
}
;
var Lcom_lushprojects_circuitjs1_client_DecadeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DecadeElm', 194);
function DiacElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.offresistance = $intern_63;
  this.onresistance = $intern_20;
  this.breakdown = $intern_20;
  this.holdcurrent = $intern_64;
  this.state = false;
}

function DiacElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.onresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.offresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.breakdown = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.holdcurrent = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(278, 4, $intern_66, DiacElm, DiacElm_0);
_.calculateCurrent = function calculateCurrent_3(){
  var vd;
  vd = this.volts[0] - this.volts[1];
  this.state?(this.current_0 = vd / this.onresistance):(this.current_0 = vd / this.offresistance);
}
;
_.doStep = function doStep_14(){
  this.state?$stampResistor(sim_0, this.nodes[0], this.nodes[1], this.onresistance):$stampResistor(sim_0, this.nodes[0], this.nodes[1], this.offresistance);
}
;
_.draw = function draw_17(g){
  $setBbox_0(this, this.point1, this.point2, 6);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_22(){
  return '203 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.onresistance + ' ' + this.offresistance + ' ' + this.breakdown + ' ' + this.holdcurrent;
}
;
_.getDumpType = function getDumpType_28(){
  return 203;
}
;
_.getEditInfo = function getEditInfo_18(n){
  if (n == 0)
    return new EditInfo('On resistance (ohms)', this.onresistance, 0, 0);
  if (n == 1)
    return new EditInfo('Off resistance (ohms)', this.offresistance, 0, 0);
  if (n == 2)
    return new EditInfo('Breakdown voltage (volts)', this.breakdown, 0, 0);
  if (n == 3)
    return new EditInfo('Hold current (amps)', this.holdcurrent, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_17(arr){
  arr[0] = 'spark gap';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = this.state?'on':'off';
  arr[4] = 'Ron = ' + myGetUnitText(this.onresistance, ohmString, false);
  arr[5] = 'Roff = ' + myGetUnitText(this.offresistance, ohmString, false);
  arr[6] = 'Vbrkdn = ' + myGetUnitText(this.breakdown, 'V', false);
  arr[7] = 'Ihold = ' + myGetUnitText(this.holdcurrent, 'A', false);
}
;
_.nonLinear = function nonLinear_3(){
  return true;
}
;
_.setEditValue = function setEditValue_17(n, ei){
  ei.value_0 > 0 && n == 0 && (this.onresistance = ei.value_0);
  ei.value_0 > 0 && n == 1 && (this.offresistance = ei.value_0);
  ei.value_0 > 0 && n == 2 && (this.breakdown = ei.value_0);
  ei.value_0 > 0 && n == 3 && (this.holdcurrent = ei.value_0);
}
;
_.setPoints = function setPoints_15(){
  $setPoints(this);
  $calcLeads(this, 32);
  new Point;
  new Point;
}
;
_.stamp = function stamp_14(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.startIteration = function startIteration_1(){
  var vd;
  vd = this.volts[0] - this.volts[1];
  $wnd.Math.abs(this.current_0) < this.holdcurrent && (this.state = false);
  $wnd.Math.abs(vd) > this.breakdown && (this.state = true);
}
;
_.breakdown = 0;
_.holdcurrent = 0;
_.offresistance = 0;
_.onresistance = 0;
_.state = false;
var Lcom_lushprojects_circuitjs1_client_DiacElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DiacElm', 278);
function $calculateCurrent(this$static, voltdiff){
  if (voltdiff >= 0 || this$static.zvoltage == 0)
    return this$static.leakage * ($wnd.Math.exp(voltdiff * $intern_80) - 1);
  return this$static.leakage * ($wnd.Math.exp(voltdiff * $intern_80) - $wnd.Math.exp((-voltdiff - this$static.zoffset) * $intern_81) - 1);
}

function $doStep(this$static, voltdiff){
  var eval_0, geq, gmin, nc;
  $wnd.Math.abs(voltdiff - this$static.lastvoltdiff) > $intern_29 && (this$static.sim.converged = false);
  voltdiff = $limitStep(this$static, voltdiff, this$static.lastvoltdiff);
  this$static.lastvoltdiff = voltdiff;
  gmin = this$static.leakage * $intern_29;
  if (this$static.sim.subIterations > 100) {
    gmin = $wnd.Math.exp(-9 * $wnd.Math.log(10) * (1 - this$static.sim.subIterations / 3000));
    gmin > 0.1 && (gmin = 0.1);
  }
  if (voltdiff >= 0 || this$static.zvoltage == 0) {
    eval_0 = $wnd.Math.exp(voltdiff * $intern_80);
    geq = $intern_80 * this$static.leakage * eval_0 + gmin;
    nc = (eval_0 - 1) * this$static.leakage - geq * voltdiff;
    $stampConductance(this$static.sim, this$static.nodes[0], this$static.nodes[1], geq);
    $stampCurrentSource(this$static.sim, this$static.nodes[0], this$static.nodes[1], nc);
  }
   else {
    geq = this$static.leakage * ($intern_80 * $wnd.Math.exp(voltdiff * $intern_80) + $intern_81 * $wnd.Math.exp((-voltdiff - this$static.zoffset) * $intern_81)) + gmin;
    nc = this$static.leakage * ($wnd.Math.exp(voltdiff * $intern_80) - $wnd.Math.exp((-voltdiff - this$static.zoffset) * $intern_81) - 1) + geq * -voltdiff;
    $stampConductance(this$static.sim, this$static.nodes[0], this$static.nodes[1], geq);
    $stampCurrentSource(this$static.sim, this$static.nodes[0], this$static.nodes[1], nc);
  }
}

function $limitStep(this$static, vnew, vold){
  var arg;
  if (vnew > this$static.vcrit && $wnd.Math.abs(vnew - vold) > 0.10346) {
    if (vold > 0) {
      arg = 1 + (vnew - vold) / $intern_82;
      arg > 0?(vnew = vold + $intern_82 * $wnd.Math.log(arg)):(vnew = this$static.vcrit);
    }
     else {
      vnew = $intern_82 * $wnd.Math.log(vnew / $intern_82);
    }
    this$static.sim.converged = false;
  }
   else if (vnew < 0 && this$static.zoffset != 0) {
    vnew = -vnew - this$static.zoffset;
    vold = -vold - this$static.zoffset;
    if (vnew > this$static.vzcrit && $wnd.Math.abs(vnew - vold) > $intern_82) {
      if (vold > 0) {
        arg = 1 + (vnew - vold) / $intern_83;
        arg > 0?(vnew = vold + $intern_83 * $wnd.Math.log(arg)):(vnew = this$static.vzcrit);
      }
       else {
        vnew = $intern_83 * $wnd.Math.log(vnew / $intern_83);
      }
      this$static.sim.converged = false;
    }
    vnew = -(vnew + this$static.zoffset);
  }
  return vnew;
}

function $setup(this$static, fw, zv){
  this$static.fwdrop = fw;
  this$static.zvoltage = zv;
  this$static.leakage = 1 / ($wnd.Math.exp(this$static.fwdrop * $intern_80) - 1);
  this$static.vcrit = $intern_82 * $wnd.Math.log($intern_82 / ($wnd.Math.sqrt(2) * this$static.leakage));
  this$static.vzcrit = $intern_83 * $wnd.Math.log($intern_83 / ($wnd.Math.sqrt(2) * this$static.leakage));
  this$static.zvoltage == 0?(this$static.zoffset = 0):(this$static.zoffset = this$static.zvoltage - $wnd.Math.log(-(1 + -0.005 / this$static.leakage)) / $intern_81);
}

function $stamp(this$static, n0, n1){
  this$static.nodes[0] = n0;
  this$static.nodes[1] = n1;
  $stampNonLinear(this$static.sim, this$static.nodes[0]);
  $stampNonLinear(this$static.sim, this$static.nodes[1]);
}

function Diode(s){
  this.sim = s;
  this.nodes = initUnidimensionalArray(I_classLit, $intern_22, 9, 2, 15, 1);
}

defineClass(128, 1, {}, Diode);
_.fwdrop = 0;
_.lastvoltdiff = 0;
_.leakage = 0;
_.vcrit = 0;
_.vzcrit = 0;
_.zoffset = 0;
_.zvoltage = 0;
var Lcom_lushprojects_circuitjs1_client_Diode_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Diode', 128);
function $draw_0(this$static, g){
  var v1, v2;
  $setBbox_0(this$static, this$static.point1, this$static.point2, 8);
  v1 = this$static.volts[0];
  v2 = this$static.volts[1];
  $draw2Leads(this$static, g);
  $setPowerColor_0(this$static, g);
  $setColor(g, $getVoltageColor(this$static, g, v1));
  $fillPolygon(g, this$static.poly_0);
  $setColor(g, $getVoltageColor(this$static, g, v2));
  drawThickLine_0(g, this$static.cathode_0[0], this$static.cathode_0[1]);
  this$static.curcount_0 = $updateDotCount(this$static.current_0, this$static.curcount_0);
  sim_0.dragElm != this$static && $drawDots(g, this$static.point1, this$static.point2, this$static.curcount_0);
  $drawPosts(this$static, g);
}

function $getEditInfo_2(this$static, n){
  if (n == 0)
    return new EditInfo('Fwd Voltage @ 1A', this$static.fwdrop, 10, $intern_20);
  return null;
}

function $getInfo_1(this$static, arr){
  arr[0] = 'diode';
  arr[1] = 'I = ' + myGetUnitText(this$static.current_0, 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText(this$static.volts[0] - this$static.volts[1], 'V', false);
  arr[3] = 'P = ' + myGetUnitText((this$static.volts[0] - this$static.volts[1]) * this$static.current_0, 'W', false);
  arr[4] = 'Vf = ' + myGetUnitText(this$static.fwdrop, 'V', false);
}

function $setPoints_4(this$static){
  var pa;
  $setPoints(this$static);
  $calcLeads(this$static, 16);
  this$static.cathode_0 = $newPointArray(2);
  pa = $newPointArray(2);
  $interpPoint2(this$static.lead1, this$static.lead2, pa[0], pa[1], 0, 8);
  $interpPoint2(this$static.lead1, this$static.lead2, this$static.cathode_0[0], this$static.cathode_0[1], 1, 8);
  this$static.poly_0 = $createPolygon(pa[0], pa[1], this$static.lead2);
}

function DiodeElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.diode = new Diode(sim_0);
  this.fwdrop = 0.805904783;
  this.zvoltage = 0;
  $setup(this.diode, this.fwdrop, this.zvoltage);
}

function DiodeElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.diode = new Diode(sim_0);
  this.fwdrop = 0.805904783;
  this.zvoltage = 0;
  if ((f & 1) > 0) {
    try {
      this.fwdrop = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    }
     catch ($e0) {
      $e0 = toJava($e0);
      if (!instanceOf($e0, 14))
        throw toJs($e0);
    }
  }
  $setup(this.diode, this.fwdrop, this.zvoltage);
}

defineClass(147, 4, $intern_66, DiodeElm, DiodeElm_0);
_.calculateCurrent = function calculateCurrent_4(){
  this.current_0 = $calculateCurrent(this.diode, this.volts[0] - this.volts[1]);
}
;
_.doStep = function doStep_15(){
  $doStep(this.diode, this.volts[0] - this.volts[1]);
}
;
_.draw = function draw_18(g){
  $draw_0(this, g);
}
;
_.dump_0 = function dump_23(){
  var t;
  return this.flags |= 1 , t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.fwdrop;
}
;
_.getDumpType = function getDumpType_29(){
  return 100;
}
;
_.getEditInfo = function getEditInfo_19(n){
  return $getEditInfo_2(this, n);
}
;
_.getInfo = function getInfo_18(arr){
  $getInfo_1(this, arr);
}
;
_.getShortcut = function getShortcut_8(){
  return 100;
}
;
_.nonLinear = function nonLinear_4(){
  return true;
}
;
_.reset_0 = function reset_10(){
  this.diode.lastvoltdiff = 0;
  this.volts[0] = this.volts[1] = this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_18(n, ei){
  this.fwdrop = ei.value_0;
  $setup(this.diode, this.fwdrop, this.zvoltage);
}
;
_.setPoints = function setPoints_16(){
  $setPoints_4(this);
}
;
_.stamp = function stamp_15(){
  $stamp(this.diode, this.nodes[0], this.nodes[1]);
}
;
_.stepFinished = function stepFinished_4(){
  $wnd.Math.abs(this.current_0) > $intern_61 && $stop(sim_0, 'max current exceeded', this);
}
;
_.fwdrop = 0;
_.zvoltage = 0;
var Lcom_lushprojects_circuitjs1_client_DiodeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'DiodeElm', 147);
function $apply(this$static){
  var d, ei, i;
  for (i = 0; i != this$static.einfocount; i++) {
    ei = this$static.einfos[i];
    if (!!ei.textf && ei.text_0 == null) {
      try {
        d = $parseUnits(this$static, ei);
        ei.value_0 = d;
      }
       catch ($e0) {
        $e0 = toJava($e0);
        if (!instanceOf($e0, 14))
          throw toJs($e0);
      }
    }
    if (ei.button_0)
      continue;
    this$static.elm.setEditValue(i, ei);
  }
  this$static.cframe.analyzeFlag = true;
}

function $buildDialog(this$static){
  var ei, i, idx, l_0, name_0;
  for (i = 0;; i++) {
    this$static.einfos[i] = this$static.elm.getEditInfo(i);
    if (!this$static.einfos[i])
      break;
    ei = this$static.einfos[i];
    idx = $getWidgetIndex(this$static.vp, this$static.hp);
    name_0 = LS(ei.name_0);
    $startsWith(ei.name_0, '<')?$insert_2(this$static.vp, l_0 = new HTML_0(name_0), idx):$insert_2(this$static.vp, l_0 = new Label_0(name_0), idx);
    i != 0 && !!l_0 && (($clinit_DOM() , l_0.element).className = 'topSpace' , undefined);
    idx = $getWidgetIndex(this$static.vp, this$static.hp);
    if (ei.choice) {
      $insert_2(this$static.vp, ei.choice, idx);
      $addDomHandler(ei.choice, new EditDialog$4(this$static), ($clinit_ChangeEvent() , $clinit_ChangeEvent() , TYPE_0));
    }
     else if (ei.checkbox) {
      $insert_2(this$static.vp, ei.checkbox, idx);
      $addValueChangeHandler_0(ei.checkbox, new EditDialog$5(this$static));
    }
     else if (ei.button_0) {
      $insert_2(this$static.vp, ei.button_0, idx);
      $addDomHandler(ei.button_0, new EditDialog$6(this$static), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
    }
     else if (ei.textArea) {
      $insert_2(this$static.vp, ei.textArea, idx);
    }
     else if (ei.anchor) {
      $insert_2(this$static.vp, ei.anchor, idx);
    }
     else {
      $insert_2(this$static.vp, ei.textf = new TextBox, idx);
      ei.text_0 != null && $setText_2(ei.textf, ei.text_0);
      ei.text_0 == null && $setText_2(ei.textf, $unitString(this$static, ei));
    }
  }
  this$static.einfocount = i;
}

function $clearDialog(this$static){
  while ($getWidget(this$static.vp, 0) != this$static.hp)
    $remove(this$static.vp, 0);
}

function $diffFromInteger(x_0){
  return $wnd.Math.abs(x_0 - toDouble_0(fromDouble_0($wnd.Math.round(x_0))));
}

function $itemStateChanged(this$static, e){
  var changed, ei, i, src_0;
  src_0 = e.source;
  changed = false;
  for (i = 0; i != this$static.einfocount; i++) {
    ei = this$static.einfos[i];
    if (maskUndefined(ei.choice) === maskUndefined(src_0) || maskUndefined(ei.checkbox) === maskUndefined(src_0) || maskUndefined(ei.button_0) === maskUndefined(src_0)) {
      maskUndefined(ei.button_0) === maskUndefined(src_0) && $apply(this$static);
      this$static.elm.setEditValue(i, ei);
      ei.newDialog && (changed = true);
      this$static.cframe.analyzeFlag = true;
    }
  }
  if (changed) {
    $clearDialog(this$static);
    $buildDialog(this$static);
  }
}

function $parseUnits(this$static, ei){
  var len, mult, rmsMult, s, suffixlength, uc;
  s = $getText(ei.textf);
  s = $trim(s);
  rmsMult = 1;
  suffixlength = 'rms'.length;
  if ($equals_1(s.substr(s.length - suffixlength, suffixlength), 'rms')) {
    s = $trim($substring_0(s, 0, s.length - 3));
    rmsMult = $intern_84;
  }
  s = $replaceAll(s, '([0-9]+)([pPnNuUmMkKgG])([0-9]+)', '$1.$3$2');
  len = s.length;
  uc = (checkCriticalStringElementIndex(len - 1, s.length) , s.charCodeAt(len - 1));
  mult = 1;
  switch (uc) {
    case 112:
    case 80:
      mult = 1.0E-12;
      break;
    case 110:
    case 78:
      mult = $intern_60;
      break;
    case 117:
    case 85:
      mult = $intern_62;
      break;
    case 109:
      mult = ei.forceLargeM?$intern_65:$intern_64;
      break;
    case 107:
    case 75:
      mult = $intern_20;
      break;
    case 77:
      mult = $intern_65;
      break;
    case 71:
    case 103:
      mult = $intern_63;
  }
  mult != 1 && (s = $trim(s.substr(0, len - 1)));
  return $parse_0(this$static.noCommaFormat, s) * mult * rmsMult;
}

function $unitString(this$static, ei){
  if (!!this$static.elm && instanceOf(this$static.elm, 41) && $wnd.Math.abs(ei.value_0) > $intern_85 && $diffFromInteger(ei.value_0 * $intern_86) > $diffFromInteger(ei.value_0 * $intern_86 / $intern_84))
    return $unitString_0(this$static, ei, ei.value_0 / $intern_84) + 'rms';
  return $unitString_0(this$static, ei, ei.value_0);
}

function $unitString_0(this$static, ei, v){
  var va;
  va = $wnd.Math.abs(v);
  if (ei.dimensionless)
    return $format_0(this$static.noCommaFormat, v);
  if (v == 0)
    return '0';
  if (va < $intern_60)
    return $format_0(this$static.noCommaFormat, v * $intern_61) + 'p';
  if (va < $intern_62)
    return $format_0(this$static.noCommaFormat, v * $intern_63) + 'n';
  if (va < $intern_64)
    return $format_0(this$static.noCommaFormat, v * $intern_65) + 'u';
  if (va < 1 && !ei.forceLargeM)
    return $format_0(this$static.noCommaFormat, v * $intern_20) + 'm';
  if (va < $intern_20)
    return $format_0(this$static.noCommaFormat, v);
  if (va < $intern_65)
    return $format_0(this$static.noCommaFormat, v * $intern_64) + 'k';
  if (va < $intern_63)
    return $format_0(this$static.noCommaFormat, v * $intern_62) + 'M';
  return $format_0(this$static.noCommaFormat, v * $intern_60) + 'G';
}

function EditDialog(ce, f){
  var sm, sm0, sm1, sm2;
  DialogBox.call(this);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Edit Component')) , sm0 != null?sm0:'Edit Component'));
  this.cframe = f;
  this.elm = ce;
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  this.einfos = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_EditInfo_2_classLit, $intern_3, 7, 10, 0, 1);
  this.noCommaFormat = ($clinit_NumberFormat() , new NumberFormat_0('####.##########', $getDefaultNative()));
  this.hp = new HorizontalPanel;
  $setWidth(this.hp, '100%');
  $setHorizontalAlignment_0(this.hp, ($clinit_HasHorizontalAlignment() , ALIGN_LEFT));
  $setStyleName(this.hp, 'topSpace');
  $add_4(this.vp, this.hp);
  $add_2(this.hp, this.applyButton = new Button_0((sm1 = castToString($getStringValue(localizationMap, 'Apply')) , sm1 != null?sm1:'Apply')));
  $addDomHandler(this.applyButton, new EditDialog$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $add_2(this.hp, this.okButton = new Button_0((sm2 = castToString($getStringValue(localizationMap, 'OK')) , sm2 != null?sm2:'OK')));
  $addDomHandler(this.okButton, new EditDialog$2(this), (null , TYPE_1));
  $setHorizontalAlignment_0(this.hp, ALIGN_RIGHT);
  $add_2(this.hp, this.cancelButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'Cancel')) , sm != null?sm:'Cancel')));
  $addDomHandler(this.cancelButton, new EditDialog$3(this), (null , TYPE_1));
  $buildDialog(this);
  $center(this);
}

defineClass(241, 117, $intern_45, EditDialog);
_.einfocount = 0;
var Lcom_lushprojects_circuitjs1_client_EditDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog', 241);
function EditDialog$1(this$0){
  this.this$01 = this$0;
}

defineClass(389, 1, $intern_43, EditDialog$1);
_.onClick = function onClick_6(event_0){
  $apply(this.this$01);
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/1', 389);
function EditDialog$2(this$0){
  this.this$01 = this$0;
}

defineClass(390, 1, $intern_43, EditDialog$2);
_.onClick = function onClick_7(event_0){
  $apply(this.this$01);
  $hide_0(this.this$01, false);
  editDialog_0 = null;
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/2', 390);
function EditDialog$3(this$0){
  this.this$01 = this$0;
}

defineClass(391, 1, $intern_43, EditDialog$3);
_.onClick = function onClick_8(event_0){
  $hide_0(this.this$01, false);
  editDialog_0 = null;
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$3_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/3', 391);
function EditDialog$4(this$0){
  this.this$01 = this$0;
}

defineClass(392, 1, {628:1, 32:1}, EditDialog$4);
_.onChange = function onChange(e){
  $itemStateChanged(this.this$01, e);
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$4_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/4', 392);
function EditDialog$5(this$0){
  this.this$01 = this$0;
}

defineClass(393, 1, $intern_53, EditDialog$5);
_.onValueChange = function onValueChange_0(e){
  $itemStateChanged(this.this$01, e);
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$5_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/5', 393);
function EditDialog$6(this$0){
  this.this$01 = this$0;
}

defineClass(394, 1, $intern_43, EditDialog$6);
_.onClick = function onClick_9(event_0){
  $itemStateChanged(this.this$01, event_0);
}
;
var Lcom_lushprojects_circuitjs1_client_EditDialog$6_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditDialog/6', 394);
function $setDimensionless(this$static){
  this$static.dimensionless = true;
  return this$static;
}

function EditInfo(n, val, mn, mx){
  this.name_0 = n;
  this.value_0 = val;
  if (mn == 0 && mx == 0 && val > 0) {
    this.minval = $intern_71;
    while (this.minval > val / 100)
      this.minval /= 10;
  }
   else {
    this.minval = mn;
  }
  this.forceLargeM = this.name_0.indexOf('(ohms)') > 0 || this.name_0.indexOf('(Hz)') > 0;
  this.dimensionless = false;
}

defineClass(7, 1, {7:1}, EditInfo);
_.dimensionless = false;
_.forceLargeM = false;
_.minval = 0;
_.newDialog = false;
_.value_0 = 0;
var Lcom_lushprojects_circuitjs1_client_EditInfo_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditInfo', 7);
function EditOptions(s){
  this.sim = s;
}

defineClass(588, 1, {8:1}, EditOptions);
_.getEditInfo = function getEditInfo_20(n){
  if (n == 0)
    return new EditInfo('Time step size (s)', this.sim.timeStep, 0, 0);
  if (n == 1)
    return new EditInfo('Range for voltage color (V)', voltageRange, 0, 0);
  return null;
}
;
_.setEditValue = function setEditValue_19(n, ei){
  if (n == 0 && ei.value_0 > 0) {
    this.sim.timeStep = ei.value_0;
    okToChangeTimeStep = false;
  }
  n == 1 && ei.value_0 > 0 && (voltageRange = ei.value_0);
}
;
var Lcom_lushprojects_circuitjs1_client_EditOptions_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'EditOptions', 588);
function ExportAsLocalFileDialog(data_0){
  var a, date, dtf, fname, okButton, sm, sm0, sm1, url_0, datain, oldblob, blob, url_1;
  DialogBox.call(this);
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Export as Local File')) , sm0 != null?sm0:'Export as Local File'));
  $add_4(this.vp, new Label_0((sm1 = castToString($getStringValue(localizationMap, 'Click on the link below to save your circuit')) , sm1 != null?sm1:'Click on the link below to save your circuit')));
  url_0 = (datain = [''] , datain[0] = data_0 , oldblob = $doc.exportBlob , oldblob && URL.revokeObjectURL(oldblob) , blob = new Blob(datain, {type:'text/plain'}) , url_1 = URL.createObjectURL(blob) , $doc.exportBlob = url_1 , url_1);
  date = new Date_0;
  dtf = ($clinit_DateTimeFormat_0() , getFormat($getDateTimeFormatInfo(($clinit_LocaleInfo() , $clinit_LocaleInfo() , instance_0))));
  fname = 'circuit-' + $format(dtf, date, null) + '.circuitjs.txt';
  a = new Anchor_0(fname, url_0);
  $setAttribute(($clinit_DOM() , a.element), 'Download', fname);
  $add_4(this.vp, a);
  $add_4(this.vp, okButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'OK')) , sm != null?sm:'OK')));
  $addDomHandler(okButton, new ExportAsLocalFileDialog$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $center(this);
}

defineClass(451, 117, $intern_45, ExportAsLocalFileDialog);
var Lcom_lushprojects_circuitjs1_client_ExportAsLocalFileDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsLocalFileDialog', 451);
function ExportAsLocalFileDialog$1(this$0){
  this.this$01 = this$0;
}

defineClass(452, 1, $intern_43, ExportAsLocalFileDialog$1);
_.onClick = function onClick_10(event_0){
  $hide_0(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsLocalFileDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsLocalFileDialog/1', 452);
function ExportAsTextDialog(asim, s){
  var hp, importButton, la2, okButton, sm, sm0, sm1, sm2, sm3, ta;
  DialogBox.call(this);
  this.sim = asim;
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Export as Text')) , sm0 != null?sm0:'Export as Text'));
  $add_4(this.vp, new Label_0((sm1 = castToString($getStringValue(localizationMap, 'Text file for this circuit is...')) , sm1 != null?sm1:'Text file for this circuit is...')));
  $add_4(this.vp, ta = new TextArea_0);
  ($clinit_DOM() , ta.element).style['width'] = '300px';
  ta.element.style['height'] = '200px';
  ta.element['value'] = s;
  this.textArea = ta;
  $add_4(this.vp, la2 = new Label_1((sm2 = castToString($getStringValue(localizationMap, 'To save this file select it all (eg click in text and type control-A) and copy to your clipboard (eg control-C) before pasting to an empty text file (eg on Windows Notepad) and saving as a new file.')) , sm2 != null?sm2:'To save this file select it all (eg click in text and type control-A) and copy to your clipboard (eg control-C) before pasting to an empty text file (eg on Windows Notepad) and saving as a new file.')));
  la2.element.style['width'] = '300px';
  hp = new HorizontalPanel;
  hp.element.style['width'] = '100%';
  $setHorizontalAlignment_0(hp, ($clinit_HasHorizontalAlignment() , ALIGN_LEFT));
  hp.element.className = 'topSpace';
  $add_4(this.vp, hp);
  $add_2(hp, okButton = new Button_0((sm3 = castToString($getStringValue(localizationMap, 'OK')) , sm3 != null?sm3:'OK')));
  $setHorizontalAlignment_0(hp, ALIGN_RIGHT);
  $add_2(hp, importButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'Re-Import')) , sm != null?sm:'Re-Import')));
  $addDomHandler(okButton, new ExportAsTextDialog$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $addDomHandler(importButton, new ExportAsTextDialog$2(this), (null , TYPE_1));
  $center(this);
}

defineClass(578, 117, $intern_45, ExportAsTextDialog);
var Lcom_lushprojects_circuitjs1_client_ExportAsTextDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsTextDialog', 578);
function ExportAsTextDialog$1(this$0){
  this.this$01 = this$0;
}

defineClass(579, 1, $intern_43, ExportAsTextDialog$1);
_.onClick = function onClick_11(event_0){
  $hide_0(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsTextDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsTextDialog/1', 579);
function ExportAsTextDialog$2(this$0){
  this.this$01 = this$0;
}

defineClass(580, 1, $intern_43, ExportAsTextDialog$2);
_.onClick = function onClick_12(event_0){
  var s;
  $pushUndo(this.this$01.sim);
  $hide_0(this.this$01, false);
  s = $getText(this.this$01.textArea);
  s != null && $readSetup(this.this$01.sim, s);
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsTextDialog$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsTextDialog/2', 580);
function ExportAsUrlDialog(dump_0){
  var hp, la1, la2, okButton, query, sm, sm0, sm1, sm2, sm3, sm4, start_0, regexp;
  DialogBox.call(this);
  start_0 = $split_0($wnd.location.href, '\\?');
  dump_0 = $replace_0(dump_0, 43);
  query = (throwIfNull('decodedURL', dump_0) , '?cct=' + encodeURI(dump_0));
  dump_0 = start_0[0] + query;
  this.requrl = (throwIfNull('decodedURLComponent', query) , regexp = /%20/g , encodeURIComponent(query).replace(regexp, '+'));
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Export as URL')) , sm0 != null?sm0:'Export as URL'));
  $add_4(this.vp, new Label_0((sm1 = castToString($getStringValue(localizationMap, 'URL for this circuit is...')) , sm1 != null?sm1:'URL for this circuit is...')));
  if (dump_0.length > 2000) {
    $add_4(this.vp, la1 = new Label_1((sm2 = castToString($getStringValue(localizationMap, 'Warning: this URL is longer than 2000 characters and may not work in some browsers.')) , sm2 != null?sm2:'Warning: this URL is longer than 2000 characters and may not work in some browsers.')));
    ($clinit_DOM() , la1.element).style['width'] = '300px';
  }
  $add_4(this.vp, tb = new RichTextArea);
  $setText_1(tb, dump_0);
  $add_4(this.vp, la2 = new Label_1((sm3 = castToString($getStringValue(localizationMap, 'To save this URL select it all (eg click in text and type control-A) and copy to your clipboard (eg control-C) before pasting to a suitable place.')) , sm3 != null?sm3:'To save this URL select it all (eg click in text and type control-A) and copy to your clipboard (eg control-C) before pasting to a suitable place.')));
  ($clinit_DOM() , la2.element).style['width'] = '300px';
  hp = new HorizontalPanel;
  hp.element.style['width'] = '100%';
  hp.element.className = 'topSpace';
  $setHorizontalAlignment_0(hp, ($clinit_HasHorizontalAlignment() , ALIGN_LEFT));
  $add_2(hp, okButton = new Button_0((sm4 = castToString($getStringValue(localizationMap, 'OK')) , sm4 != null?sm4:'OK')));
  $add_4(this.vp, hp);
  $setHorizontalAlignment_0(hp, ALIGN_RIGHT);
  $add_2(hp, this.shortButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'Create short URL')) , sm != null?sm:'Create short URL')));
  $addDomHandler(this.shortButton, new ExportAsUrlDialog$2(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $addDomHandler(okButton, new ExportAsUrlDialog$3(this), (null , TYPE_1));
  $center(this);
}

function createShort(urlin){
  var requestBuilder, url_0;
  url_0 = 'shortrelay.php?v=' + urlin;
  $setText_1(tb, 'Waiting for short URL for web service...');
  requestBuilder = new RequestBuilder(($clinit_RequestBuilder() , GET), url_0);
  try {
    $sendRequest(requestBuilder, new ExportAsUrlDialog$1);
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 97))
      throw toJs($e0);
  }
}

defineClass(574, 117, $intern_45, ExportAsUrlDialog);
var tb;
var Lcom_lushprojects_circuitjs1_client_ExportAsUrlDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsUrlDialog', 574);
function ExportAsUrlDialog$1(){
}

defineClass(575, 1, {}, ExportAsUrlDialog$1);
_.onError = function onError_1(request, exception){
}
;
_.onResponseReceived = function onResponseReceived_1(request, response){
  var statusCode, text_0;
  statusCode = response.xmlHttpRequest.status;
  if ((statusCode == 1223?204:statusCode) == 200) {
    text_0 = response.xmlHttpRequest.responseText;
    $setText_1(tb, text_0);
  }
   else {
    text_0 = 'Shortner error:' + response.xmlHttpRequest.statusText;
    $setText_1(tb, text_0);
  }
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsUrlDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsUrlDialog/1', 575);
function ExportAsUrlDialog$2(this$0){
  this.this$01 = this$0;
}

defineClass(576, 1, $intern_43, ExportAsUrlDialog$2);
_.onClick = function onClick_13(event_0){
  $setVisible(this.this$01.shortButton);
  createShort(this.this$01.requrl);
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsUrlDialog$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsUrlDialog/2', 576);
function ExportAsUrlDialog$3(this$0){
  this.this$01 = this$0;
}

defineClass(577, 1, $intern_43, ExportAsUrlDialog$3);
_.onClick = function onClick_14(event_0){
  $hide_0(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_ExportAsUrlDialog$3_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportAsUrlDialog/3', 577);
function $doDropboxExport(url_0, name_0){
  var options = {files:[{'url':url_0, 'filename':name_0}], success:function(){
    alert(CirSim.LS('Success! Files saved to your Dropbox.'));
  }
  , progress:function(progress){
  }
  , cancel:function(){
  }
  , error:function(errorMessage){
    alert('Dropbox error ' + errorMessage);
  }
  };
  $wnd.Dropbox.save(options);
}

function ExportToDropbox(data_0){
  var date, dtf, fname, url_0;
  url_0 = (throwIfNull('decodedURL', data_0) , 'data:text/plain,' + encodeURI(data_0));
  date = new Date_0;
  dtf = ($clinit_DateTimeFormat_0() , getFormat($getDateTimeFormatInfo(($clinit_LocaleInfo() , $clinit_LocaleInfo() , instance_0))));
  fname = 'circuit-' + $format(dtf, date, null) + '.circuitjs.txt';
  $doDropboxExport(url_0, fname);
}

function isSupported(){
  try {
    if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))
      return false;
    return !!$wnd.Dropbox.isBrowserSupported();
  }
   catch (err) {
    return false;
  }
}

defineClass(453, 1, {}, ExportToDropbox);
var Lcom_lushprojects_circuitjs1_client_ExportToDropbox_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExportToDropbox', 453);
function $eval(this$static, es){
  var i, left, right, x_0;
  left = null;
  right = null;
  if (!!this$static.children && this$static.children.arrayList.array.length > 0) {
    left = castTo($firstElement(this$static.children), 37);
    this$static.children.arrayList.array.length == 2 && (right = castTo($lastElement(this$static.children), 37));
  }
  switch (this$static.type_0) {
    case 1:
      return $eval(left, es) + $eval(right, es);
    case 2:
      return $eval(left, es) - $eval(right, es);
    case 7:
      return $eval(left, es) * $eval(right, es);
    case 8:
      return $eval(left, es) / $eval(right, es);
    case 9:
      return $wnd.Math.pow($eval(left, es), $eval(right, es));
    case 10:
      return -$eval(left, es);
    case 6:
      return this$static.value_0;
    case 3:
      return es.t;
    case 11:
      return $wnd.Math.sin($eval(left, es));
    case 12:
      return $wnd.Math.cos($eval(left, es));
    case 13:
      return $wnd.Math.abs($eval(left, es));
    case 14:
      return $wnd.Math.exp($eval(left, es));
    case 15:
      return $wnd.Math.log($eval(left, es));
    case 16:
      return $wnd.Math.sqrt($eval(left, es));
    case 17:
      return $wnd.Math.tan($eval(left, es));
    case 20:
      {
        x_0 = $eval(left, es);
        for (i = 1; i < this$static.children.arrayList.array.length; i++)
          x_0 = $wnd.Math.min(x_0, $eval(castTo($get_3(this$static.children, i), 37), es));
        return x_0;
      }

    case 19:
      {
        x_0 = $eval(left, es);
        for (i = 1; i < this$static.children.arrayList.array.length; i++)
          x_0 = $wnd.Math.max(x_0, $eval(castTo($get_3(this$static.children, i), 37), es));
        return x_0;
      }

    case 21:
      return $wnd.Math.min($wnd.Math.max($eval(left, es), $eval(castTo($get_3(this$static.children, 1), 37), es)), $eval(castTo($get_3(this$static.children, 2), 37), es));
    case 26:
      {
        x_0 = $eval(left, es);
        if (!right)
          return x_0 < 0?0:1;
        return x_0 > $eval(right, es)?0:x_0 < 0?0:1;
      }

    case 27:
      {
        x_0 = $eval(left, es);
        return $eval(castTo($get_3(this$static.children, x_0 > 0?2:1), 37), es);
      }

    case 23:
      {
        x_0 = $posmod($eval(left, es)) / $intern_1;
        return x_0 < 1?-1 + x_0 * 2:3 - x_0 * 2;
      }

    case 24:
      {
        x_0 = $posmod($eval(left, es)) / $intern_1;
        return x_0 - 1;
      }

    case 25:
      return $eval(left, es) % $eval(right, es);
    case 22:
      return $pwl(es, this$static.children);
    default:if (this$static.type_0 >= 28)
        return es.values[this$static.type_0 - 28];
      console.log('unknown\n');
  }
  return 0;
}

function $posmod(x_0){
  x_0 %= $intern_2;
  return x_0 >= 0?x_0:x_0 + $intern_2;
}

function $pwl(es, args){
  var i, x_0, x0, x1, y0, y1;
  x_0 = $eval((checkArrayElementIndex(0, args.arrayList.array.length) , castTo($get_1(args.arrayList, 0), 37)), es);
  x0 = $eval((checkArrayElementIndex(1, args.arrayList.array.length) , castTo($get_1(args.arrayList, 1), 37)), es);
  y0 = $eval((checkArrayElementIndex(2, args.arrayList.array.length) , castTo($get_1(args.arrayList, 2), 37)), es);
  if (x_0 < x0)
    return y0;
  x1 = $eval((checkArrayElementIndex(3, args.arrayList.array.length) , castTo($get_1(args.arrayList, 3), 37)), es);
  y1 = $eval((checkArrayElementIndex(4, args.arrayList.array.length) , castTo($get_1(args.arrayList, 4), 37)), es);
  i = 5;
  while (true) {
    if (x_0 < x1)
      return y0 + (x_0 - x0) * (y1 - y0) / (x1 - x0);
    if (i + 1 >= args.arrayList.array.length)
      break;
    x0 = x1;
    y0 = y1;
    x1 = $eval((checkArrayElementIndex(i, args.arrayList.array.length) , castTo($get_1(args.arrayList, i), 37)), es);
    y1 = $eval((checkArrayElementIndex(i + 1, args.arrayList.array.length) , castTo($get_1(args.arrayList, i + 1), 37)), es);
    i += 2;
  }
  return y1;
}

function Expr(v){
  this.type_0 = v;
}

function Expr_0(vv){
  this.type_0 = 6;
  this.value_0 = vv;
}

function Expr_1(e1, e2, v){
  this.children = new Vector;
  $add_11(this.children, e1);
  !!e2 && $add_11(this.children, e2);
  this.type_0 = v;
}

defineClass(37, 1, {37:1}, Expr, Expr_0, Expr_1);
_.type_0 = 0;
_.value_0 = 0;
var Lcom_lushprojects_circuitjs1_client_Expr_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Expr', 37);
function $getToken(this$static){
  var c, i;
  while (this$static.pos < this$static.tlen && $charAt_0(this$static.text_0, this$static.pos) == 32)
    ++this$static.pos;
  if (this$static.pos == this$static.tlen) {
    this$static.token = '';
    return;
  }
  i = this$static.pos;
  c = $charAt_0(this$static.text_0, i);
  if (c >= 48 && c <= 57 || c == 46) {
    for (i = this$static.pos; i != this$static.tlen; i++) {
      if (!($charAt_0(this$static.text_0, i) >= 48 && $charAt_0(this$static.text_0, i) <= 57 || $charAt_0(this$static.text_0, i) == 46))
        break;
    }
  }
   else if (c >= 97 && c <= 122) {
    for (i = this$static.pos; i != this$static.tlen; i++) {
      if (!($charAt_0(this$static.text_0, i) >= 97 && $charAt_0(this$static.text_0, i) <= 122))
        break;
    }
  }
   else {
    ++i;
  }
  this$static.token = $substring_0(this$static.text_0, this$static.pos, i);
  this$static.pos = i;
}

function $parse_2(this$static){
  var e;
  e = $parseMult(this$static);
  while (true) {
    if ($skip(this$static, '+'))
      e = new Expr_1(e, $parseMult(this$static), 1);
    else if ($skip(this$static, '-'))
      e = new Expr_1(e, $parseMult(this$static), 2);
    else 
      break;
  }
  return e;
}

function $parseExpression(this$static){
  var e;
  if (this$static.token.length == 0)
    return new Expr_0(0);
  e = $parse_2(this$static);
  return e;
}

function $parseFunc(this$static, t){
  var e;
  !$skip(this$static, '(');
  e = $parse_2(this$static);
  !$skip(this$static, ')');
  return new Expr_1(e, null, t);
}

function $parseFuncMulti(this$static, t){
  var args, e, e1, enext;
  args = 1;
  !$skip(this$static, '(');
  e1 = $parse_2(this$static);
  e = new Expr_1(e1, null, t);
  while ($skip(this$static, ',')) {
    enext = $parse_2(this$static);
    $add_11(e.children, enext);
    ++args;
  }
  !$skip(this$static, ')');
  return e;
}

function $parseMult(this$static){
  var e;
  e = $parseUminus(this$static);
  while (true) {
    if ($skip(this$static, '*'))
      e = new Expr_1(e, $parseUminus(this$static), 7);
    else if ($skip(this$static, '/'))
      e = new Expr_1(e, $parseUminus(this$static), 8);
    else 
      break;
  }
  return e;
}

function $parsePow(this$static){
  var e;
  e = $parseTerm(this$static);
  while (true) {
    if ($skip(this$static, '^'))
      e = new Expr_1(e, $parseTerm(this$static), 9);
    else 
      break;
  }
  return e;
}

function $parseTerm(this$static){
  var c, e;
  if ($skip(this$static, '(')) {
    e = $parse_2(this$static);
    !$skip(this$static, ')');
    return e;
  }
  if ($skip(this$static, 't'))
    return new Expr(3);
  if (this$static.token.length == 1) {
    c = $charAt_0(this$static.token, 0);
    if (c >= 97 && c <= 105) {
      $getToken(this$static);
      return new Expr(28 + (c - 97));
    }
  }
  if ($skip(this$static, 'pi'))
    return new Expr_0($intern_1);
  if ($skip(this$static, 'sin'))
    return $parseFunc(this$static, 11);
  if ($skip(this$static, 'cos'))
    return $parseFunc(this$static, 12);
  if ($skip(this$static, 'abs'))
    return $parseFunc(this$static, 13);
  if ($skip(this$static, 'exp'))
    return $parseFunc(this$static, 14);
  if ($skip(this$static, 'log'))
    return $parseFunc(this$static, 15);
  if ($skip(this$static, 'sqrt'))
    return $parseFunc(this$static, 16);
  if ($skip(this$static, 'tan'))
    return $parseFunc(this$static, 17);
  if ($skip(this$static, 'tri'))
    return $parseFunc(this$static, 23);
  if ($skip(this$static, 'saw'))
    return $parseFunc(this$static, 24);
  if ($skip(this$static, 'min'))
    return $parseFuncMulti(this$static, 20);
  if ($skip(this$static, 'max'))
    return $parseFuncMulti(this$static, 19);
  if ($skip(this$static, 'pwl'))
    return $parseFuncMulti(this$static, 22);
  if ($skip(this$static, 'mod'))
    return $parseFuncMulti(this$static, 25);
  if ($skip(this$static, 'step'))
    return $parseFuncMulti(this$static, 26);
  if ($skip(this$static, 'select'))
    return $parseFuncMulti(this$static, 27);
  if ($skip(this$static, 'clamp'))
    return $parseFuncMulti(this$static, 21);
  try {
    e = new Expr_0($doubleValue(__parseAndValidateDouble(this$static.token)));
    $getToken(this$static);
    return e;
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 14)) {
      console_0('unrecognized token: ' + this$static.token + '\n');
      return new Expr_0(0);
    }
     else 
      throw toJs($e0);
  }
}

function $parseUminus(this$static){
  $skip(this$static, '+');
  if ($skip(this$static, '-'))
    return new Expr_1($parsePow(this$static), null, 10);
  return $parsePow(this$static);
}

function $skip(this$static, s){
  if ($compareTo(this$static.token, s) != 0)
    return false;
  $getToken(this$static);
  return true;
}

function ExprParser(s){
  this.text_0 = s.toLowerCase();
  this.tlen = this.text_0.length;
  this.pos = 0;
  $getToken(this);
}

defineClass(169, 1, {}, ExprParser);
_.pos = 0;
_.tlen = 0;
var Lcom_lushprojects_circuitjs1_client_ExprParser_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExprParser', 169);
function ExprState(){
  this.values = initUnidimensionalArray(D_classLit, $intern_57, 9, 9, 15, 1);
  this.values[4] = 2.718281828459045;
}

defineClass(197, 1, {}, ExprState);
_.t = 0;
var Lcom_lushprojects_circuitjs1_client_ExprState_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ExprState', 197);
function $fft(this$static, real, imag){
  var a, c, i, i0, j, k, n1, n2, s, t, t1, t2;
  j = 0;
  n2 = real.length / 2 | 0;
  for (i0 = 1; i0 < real.length - 1; i0++) {
    n1 = n2;
    while (j >= n1) {
      j -= n1;
      n1 = n1 / 2 | 0;
    }
    j += n1;
    if (i0 < j) {
      t1 = real[i0];
      real[i0] = real[j];
      real[j] = t1;
      t1 = imag[i0];
      imag[i0] = imag[j];
      imag[j] = t1;
    }
  }
  n2 = 1;
  for (i = 0; i < this$static.bits; i++) {
    n1 = n2;
    n2 <<= 1;
    a = 0;
    for (j = 0; j < n1; j++) {
      c = this$static.cosTable[a];
      s = this$static.sinTable[a];
      a += 1 << this$static.bits - i - 1;
      for (k = j; k < real.length; k += n2) {
        t = k + n1;
        t1 = c * real[t] - s * imag[t];
        t2 = s * real[t] + c * imag[t];
        real[k + n1] = real[k] - t1;
        imag[k + n1] = imag[k] - t2;
        real[k] += t1;
        imag[k] += t2;
      }
    }
  }
}

function $magnitude(this$static, real, imag){
  return $wnd.Math.sqrt(real * real + imag * imag) / this$static.size_0;
}

function FFT(n){
  var dtheta, i;
  this.size_0 = n;
  this.bits = round_int($wnd.Math.log(this.size_0) / $wnd.Math.log(2));
  this.cosTable = initUnidimensionalArray(D_classLit, $intern_57, 9, this.size_0 / 2 | 0, 15, 1);
  this.sinTable = initUnidimensionalArray(D_classLit, $intern_57, 9, this.size_0 / 2 | 0, 15, 1);
  dtheta = -6.283185307179586 / this.size_0;
  for (i = 0; i < this.cosTable.length; i++) {
    this.cosTable[i] = $wnd.Math.cos(dtheta * i);
    this.sinTable[i] = $wnd.Math.sin(dtheta * i);
  }
}

defineClass(508, 1, {}, FFT);
_.bits = 0;
_.size_0 = 0;
var Lcom_lushprojects_circuitjs1_client_FFT_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'FFT', 508);
function $$init_8(this$static){
  this$static.lasttime = 0;
  this$static.funcx = 0;
}

function $drawWaveform_1(this$static, g, center){
  var xc, yc;
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:($clinit_Color() , gray));
  $setPowerColor_0(this$static, g);
  xc = center.x_0;
  yc = center.y_0;
  drawThickCircle(g, xc, yc, 17);
  $adjustBbox(this$static, xc - 17, yc - 17, xc + 17, yc + 17);
}

function $getVoltage(this$static){
  var deltaT, signalamplitude, w;
  deltaT = sim_0.t - this$static.lasttime;
  this$static.lasttime = sim_0.t;
  signalamplitude = $wnd.Math.sin($intern_2 * (sim_0.t - this$static.freqTimeZero) * this$static.signalfreq);
  this$static.funcx += deltaT * (this$static.carrierfreq + signalamplitude * this$static.deviation);
  w = $intern_2 * this$static.funcx;
  return $wnd.Math.sin(w) * this$static.maxVoltage;
}

function FMElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $$init_8(this);
  this.deviation = 200;
  this.maxVoltage = 5;
  this.carrierfreq = 800;
  this.signalfreq = 40;
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

function FMElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_8(this);
  this.carrierfreq = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.signalfreq = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.maxVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.deviation = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  (this.flags & 2) != 0 && (this.flags &= -3);
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}

defineClass(272, 4, $intern_66, FMElm, FMElm_0);
_.doStep = function doStep_16(){
  $updateVoltageSource(sim_0, this.voltSource, $getVoltage(this));
}
;
_.draw = function draw_19(g){
  var f;
  $setBbox_0(this, this.point1, this.point2, 17);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  f = new Font('SansSerif', 0, 12);
  $setFont_0(g, f);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:whiteColor);
  $setPowerColor_0(this, g);
  $getVoltage(this);
  $drawCenteredText(this, g, 'FM', this.x2, this.y2, true);
  $drawWaveform_1(this, g, this.point2);
  $drawPosts(this, g);
  this.curcount_0 = $updateDotCount(-this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.lead1, this.curcount_0);
}
;
_.dump_0 = function dump_24(){
  return '201 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.carrierfreq + ' ' + this.signalfreq + ' ' + this.maxVoltage + ' ' + this.deviation;
}
;
_.getDumpType = function getDumpType_30(){
  return 201;
}
;
_.getEditInfo = function getEditInfo_21(n){
  if (n == 0)
    return new EditInfo('Max Voltage', this.maxVoltage, -20, 20);
  if (n == 1)
    return new EditInfo('Carrier Frequency (Hz)', this.carrierfreq, 4, 500);
  if (n == 2)
    return new EditInfo('Signal Frequency (Hz)', this.signalfreq, 4, 500);
  if (n == 3)
    return new EditInfo('Deviation (Hz)', this.deviation, 4, 500);
  return null;
}
;
_.getInfo = function getInfo_19(arr){
  arr[0] = 'FM Source';
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[3] = 'cf = ' + myGetUnitText(this.carrierfreq, 'Hz', false);
  arr[4] = 'sf = ' + myGetUnitText(this.signalfreq, 'Hz', false);
  arr[5] = 'dev =' + myGetUnitText(this.deviation, 'Hz', false);
  arr[6] = 'Vmax = ' + myGetUnitText(this.maxVoltage, 'V', false);
}
;
_.getPostCount = function getPostCount_22(){
  return 1;
}
;
_.getPower = function getPower_4(){
  return -this.volts[0] * this.current_0;
}
;
_.getVoltageDiff = function getVoltageDiff_7(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_18(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_6(n1){
  return true;
}
;
_.reset_0 = function reset_11(){
  this.freqTimeZero = 0;
  this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_20(n, ei){
  n == 0 && (this.maxVoltage = ei.value_0);
  n == 1 && (this.carrierfreq = ei.value_0);
  n == 2 && (this.signalfreq = ei.value_0);
  n == 3 && (this.deviation = ei.value_0);
}
;
_.setPoints = function setPoints_17(){
  $setPoints(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 17 / this.dn);
}
;
_.stamp = function stamp_16(){
  $stampVoltageSource(sim_0, 0, this.nodes[0], this.voltSource);
}
;
_.carrierfreq = 0;
_.deviation = 0;
_.freqTimeZero = 0;
_.funcx = 0;
_.lasttime = 0;
_.maxVoltage = 0;
_.signalfreq = 0;
var Lcom_lushprojects_circuitjs1_client_FMElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'FMElm', 272);
function Font(name_0, style, size_0){
  var styleStr;
  styleStr = 'normal ';
  name_0 == 'SansSerif' && (name_0 = 'sans-serif');
  (style & 1) != 0 && (styleStr = 'bold ');
  this.fontname = styleStr + size_0 + 'px ' + name_0;
  this.size_0 = size_0;
}

defineClass(86, 1, {}, Font);
_.size_0 = 0;
var Lcom_lushprojects_circuitjs1_client_Font_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Font', 86);
function FullAdderElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function FullAdderElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(306, 13, $intern_66, FullAdderElm, FullAdderElm_0);
_.execute_2 = function execute_27(){
  this.pins[0].value_0 = this.pins[2].value_0 ^ this.pins[3].value_0 ^ this.pins[4].value_0;
  this.pins[1].value_0 = this.pins[2].value_0 && this.pins[3].value_0 || this.pins[2].value_0 && this.pins[4].value_0 || this.pins[3].value_0 && this.pins[4].value_0;
}
;
_.getChipName = function getChipName_12(){
  return 'Full Adder';
}
;
_.getDumpType = function getDumpType_31(){
  return 196;
}
;
_.getPostCount = function getPostCount_23(){
  return 5;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_19(){
  return 2;
}
;
_.setupPins = function setupPins_12(){
  this.sizeX = 2;
  this.sizeY = 3;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 5, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 2, 3, 'S');
  this.pins[0].output = true;
  this.pins[1] = new ChipElm$Pin(this, 0, 3, 'C');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 0, 2, 'A');
  this.pins[3] = new ChipElm$Pin(this, 1, 2, 'B');
  this.pins[4] = new ChipElm$Pin(this, 2, 2, 'Cin');
}
;
var Lcom_lushprojects_circuitjs1_client_FullAdderElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'FullAdderElm', 306);
function $drawLine(this$static, x1, y1, x2, y2){
  this$static.context.beginPath();
  $moveTo(this$static.context, x1, y1);
  $lineTo(this$static.context, x2, y2);
  this$static.context.stroke();
}

function $drawPolyline(this$static, xpoints, ypoints, n){
  var i;
  this$static.context.beginPath();
  for (i = 0; i < n; i++) {
    i == 0?$moveTo(this$static.context, xpoints[0], ypoints[0]):$lineTo(this$static.context, xpoints[i], ypoints[i]);
  }
  this$static.context.closePath();
  this$static.context.stroke();
}

function $drawRect(this$static, x_0, y_0, width_0, height){
  $strokeRect(this$static.context, x_0, y_0, width_0, height);
}

function $drawString(this$static, s, x_0, y_0){
  $fillText(this$static.context, s, x_0, y_0);
}

function $fillOval(this$static, x_0, y_0, width_0){
  this$static.context.beginPath();
  $arc(this$static.context, x_0 + (width_0 / 2 | 0), y_0 + (width_0 / 2 | 0), width_0 / 2 | 0, 0, 6.28318);
  this$static.context.closePath();
  this$static.context.fill();
}

function $fillPolygon(this$static, p){
  var i;
  this$static.context.beginPath();
  for (i = 0; i < p.npoints; i++) {
    i == 0?$moveTo(this$static.context, p.xpoints[0], p.ypoints[0]):$lineTo(this$static.context, p.xpoints[i], p.ypoints[i]);
  }
  this$static.context.closePath();
  this$static.context.fill();
}

function $fillRect_0(this$static, x_0, y_0, width_0, height){
  $fillRect(this$static.context, x_0, y_0, width_0, height);
}

function $setColor(this$static, color_0){
  var colorString;
  if (color_0) {
    colorString = $getHexValue(color_0);
    $setStrokeStyleWeb(this$static.context, colorString);
    $setFillStyleWeb(this$static.context, colorString);
  }
   else {
    $clinit_System();
  }
  this$static.lastColor = color_0;
}

function $setColor_0(this$static, color_0){
  $setStrokeStyleWeb(this$static.context, color_0);
  $setFillStyleWeb(this$static.context, color_0);
  this$static.lastColor = null;
}

function $setFont_0(this$static, f){
  if (f) {
    $setFont(this$static.context, f.fontname);
    this$static.currentFontSize = f.size_0;
    this$static.currentFont = f;
  }
}

function Graphics(context){
  this.context = context;
}

function distanceSq(x1, y1, x2, y2){
  x2 -= x1;
  y2 -= y1;
  return x2 * x2 + y2 * y2;
}

defineClass(473, 1, {}, Graphics);
_.currentFont = null;
_.currentFontSize = 0;
var Lcom_lushprojects_circuitjs1_client_Graphics_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Graphics', 473);
function GroundElm(xx, yy){
  CircuitElm.call(this, xx, yy);
}

function GroundElm_0(xa, ya, xb, yb, f){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
}

defineClass(188, 4, {4:1, 8:1, 188:1}, GroundElm, GroundElm_0);
_.draw = function draw_20(g){
  var a, b, i;
  $setColor(g, $getVoltageColor(this, g, 0));
  drawThickLine_0(g, this.point1, this.point2);
  for (i = 0; i != 3; i++) {
    a = 10 - i * 4;
    b = i * 5;
    $interpPoint2(this.point1, this.point2, ps1, ps2, 1 + b / this.dn, a);
    drawThickLine_0(g, ps1, ps2);
  }
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $interpPoint_1(this.point1, this.point2, ps2, 1 + 11 / this.dn);
  $setBbox_0(this, this.point1, ps2, 11);
  $drawPosts(this, g);
}
;
_.getCurrentIntoNode = function getCurrentIntoNode_2(n){
  return -this.current_0;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_5(xa, ya){
  return -this.current_0;
}
;
_.getDumpType = function getDumpType_32(){
  return 103;
}
;
_.getInfo = function getInfo_20(arr){
  arr[0] = 'ground';
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
}
;
_.getPostCount = function getPostCount_24(){
  return 1;
}
;
_.getShortcut = function getShortcut_9(){
  return 103;
}
;
_.getVoltageDiff = function getVoltageDiff_8(){
  return 0;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_20(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_7(n1){
  return true;
}
;
_.setCurrent = function setCurrent_4(x_0, c){
  this.current_0 = -c;
}
;
_.stamp = function stamp_17(){
  $stampVoltageSource_0(sim_0, 0, this.nodes[0], this.voltSource, 0);
}
;
var Lcom_lushprojects_circuitjs1_client_GroundElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'GroundElm', 188);
function HalfAdderElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function HalfAdderElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(307, 13, $intern_66, HalfAdderElm, HalfAdderElm_0);
_.execute_2 = function execute_28(){
  this.pins[0].value_0 = this.pins[2].value_0 ^ this.pins[3].value_0;
  this.pins[1].value_0 = this.pins[2].value_0 && this.pins[3].value_0;
}
;
_.getChipName = function getChipName_13(){
  return 'Half Adder';
}
;
_.getDumpType = function getDumpType_33(){
  return 195;
}
;
_.getPostCount = function getPostCount_25(){
  return 4;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_21(){
  return 2;
}
;
_.setupPins = function setupPins_13(){
  this.sizeX = 2;
  this.sizeY = 2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 4, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 3, 'S');
  this.pins[0].output = true;
  this.pins[1] = new ChipElm$Pin(this, 1, 3, 'C');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 0, 2, 'A');
  this.pins[3] = new ChipElm$Pin(this, 1, 2, 'B');
}
;
var Lcom_lushprojects_circuitjs1_client_HalfAdderElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'HalfAdderElm', 307);
function $doDropboxImport(){
  var options = {success:function(files){
    function reqListener(){
      var text_0 = xhr.responseText;
      $pushUndo(sim_1);
      $readSetup(sim_1, text_0);
    }

    try {
      if (files[0].bytes < $intern_87) {
        var xhr = new XMLHttpRequest;
        xhr.addEventListener('load', reqListener);
      }
      xhr.open('GET', files[0].link, false);
      xhr.send();
    }
     catch (err) {
    }
  }
  , linkType:'direct', multiselect:false};
  $wnd.Dropbox.choose(options);
}

function ImportFromDropbox(asim){
  sim_1 = asim;
  $doDropboxImport();
}

function isSupported_0(){
  try {
    if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))
      return false;
    return !!$wnd.Dropbox.isBrowserSupported();
  }
   catch (err) {
    return false;
  }
}

defineClass(600, 1, {}, ImportFromDropbox);
var sim_1;
var Lcom_lushprojects_circuitjs1_client_ImportFromDropbox_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromDropbox', 600);
function ImportFromDropboxDialog(csim){
  var sm, sm0, sm1, sm2, sm3, sm4;
  DialogBox.call(this);
  sim_2 = csim;
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Import from Dropbox')) , sm0 != null?sm0:'Import from Dropbox'));
  if (isSupported_0()) {
    $add_4(this.vp, new Label_0((sm1 = castToString($getStringValue(localizationMap, 'To open a file in your dropbox account using the chooser click below.')) , sm1 != null?sm1:'To open a file in your dropbox account using the chooser click below.')));
    this.chooserButton = new Button_0((sm2 = castToString($getStringValue(localizationMap, 'Open Dropbox Chooser')) , sm2 != null?sm2:'Open Dropbox Chooser'));
    $add_4(this.vp, this.chooserButton);
    $addDomHandler(this.chooserButton, new ImportFromDropboxDialog$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
    this.la = new Label_0((sm3 = castToString($getStringValue(localizationMap, 'To open a shared Dropbox file from a Dropbox link paste the link below...')) , sm3 != null?sm3:'To open a shared Dropbox file from a Dropbox link paste the link below...'));
  }
   else {
    $add_4(this.vp, new Label_0("This site, or your browser doesn't support the Dropbox chooser so you can't pick a file from your dropbox account."));
    this.la = new Label_0('You can open a shared Dropbox file if you have a link. Paste the Dropbox link below...');
    $setStyleName(this.la, 'topSpace');
  }
  $add_4(this.vp, this.la);
  this.ta = new TextArea_0;
  $setWidth(this.ta, '300px');
  $setHeight(this.ta, '200px');
  $add_4(this.vp, this.ta);
  this.hp = new HorizontalPanel;
  $setWidth(this.hp, '100%');
  $add_4(this.vp, this.hp);
  $setHorizontalAlignment_0(this.hp, ($clinit_HasHorizontalAlignment() , ALIGN_LEFT));
  this.importButton = new Button_0((sm4 = castToString($getStringValue(localizationMap, 'Import From Dropbox Link')) , sm4 != null?sm4:'Import From Dropbox Link'));
  $addDomHandler(this.importButton, new ImportFromDropboxDialog$2(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $add_2(this.hp, this.importButton);
  $setHorizontalAlignment_0(this.hp, ALIGN_RIGHT);
  this.cancelButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'Cancel')) , sm != null?sm:'Cancel'));
  $add_2(this.hp, this.cancelButton);
  $addDomHandler(this.cancelButton, new ImportFromDropboxDialog$3(this), (null , TYPE_1));
  $center(this);
}

function doDropboxImport(link_0){
  function reqListener(){
    var text_0 = xhr.responseText;
    $pushUndo(sim_2);
    $readSetup(sim_2, text_0);
  }

  try {
    var xhr = new XMLHttpRequest;
    xhr.addEventListener('load', reqListener);
    xhr.open('GET', link_0, false);
    xhr.send();
  }
   catch (err) {
  }
}

function doImportDropboxLink(link_0, validateIsDropbox){
  if ((checkCriticalNotNull(validateIsDropbox) , validateIsDropbox) && link_0.indexOf('https://www.dropbox.com/') != 0) {
    $wnd.alert('Dropbox links must start https://www.dropbox.com/');
    return;
  }
  link_0 = $replace_1(link_0, 'www.dropbox.com', 'dl.dropboxusercontent.com');
  doDropboxImport(link_0);
}

defineClass(464, 117, $intern_45, ImportFromDropboxDialog);
var sim_2;
var Lcom_lushprojects_circuitjs1_client_ImportFromDropboxDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromDropboxDialog', 464);
function ImportFromDropboxDialog$1(this$0){
  this.this$01 = this$0;
}

defineClass(465, 1, $intern_43, ImportFromDropboxDialog$1);
_.onClick = function onClick_15(event_0){
  $hide_0(this.this$01, false);
  new ImportFromDropbox(sim_2);
}
;
var Lcom_lushprojects_circuitjs1_client_ImportFromDropboxDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromDropboxDialog/1', 465);
function ImportFromDropboxDialog$2(this$0){
  this.this$01 = this$0;
}

defineClass(466, 1, $intern_43, ImportFromDropboxDialog$2);
_.onClick = function onClick_16(event_0){
  $hide_0(this.this$01, false);
  doImportDropboxLink($getText(this.this$01.ta), ($clinit_Boolean() , true));
}
;
var Lcom_lushprojects_circuitjs1_client_ImportFromDropboxDialog$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromDropboxDialog/2', 466);
function ImportFromDropboxDialog$3(this$0){
  this.this$01 = this$0;
}

defineClass(467, 1, $intern_43, ImportFromDropboxDialog$3);
_.onClick = function onClick_17(event_0){
  $hide_0(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_ImportFromDropboxDialog$3_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromDropboxDialog/3', 467);
function ImportFromTextDialog(asim){
  var cancelButton, okButton, sm, sm0, sm1, sm2;
  DialogBox.call(this);
  this.sim = asim;
  this.vp = new VerticalPanel;
  $setWidget_1(this, this.vp);
  $setText(this, (sm0 = castToString($getStringValue(localizationMap, 'Import from Text')) , sm0 != null?sm0:'Import from Text'));
  $add_4(this.vp, new Label_0((sm1 = castToString($getStringValue(localizationMap, 'Paste the text file for your circuit here...')) , sm1 != null?sm1:'Paste the text file for your circuit here...')));
  $add_4(this.vp, this.textArea = new TextArea_0);
  $setWidth(this.textArea, '300px');
  $setHeight(this.textArea, '200px');
  this.hp = new HorizontalPanel;
  $add_4(this.vp, this.hp);
  $add_2(this.hp, okButton = new Button_0((sm2 = castToString($getStringValue(localizationMap, 'OK')) , sm2 != null?sm2:'OK')));
  $addDomHandler(okButton, new ImportFromTextDialog$1(this), ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $add_2(this.hp, cancelButton = new Button_0((sm = castToString($getStringValue(localizationMap, 'Cancel')) , sm != null?sm:'Cancel')));
  $addDomHandler(cancelButton, new ImportFromTextDialog$2(this), (null , TYPE_1));
  $center(this);
  !this.resizeHandlerRegistration && (this.resizeHandlerRegistration = addResizeHandler(new DialogBox$1(this)));
  $show(this);
}

defineClass(585, 117, $intern_45, ImportFromTextDialog);
var Lcom_lushprojects_circuitjs1_client_ImportFromTextDialog_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromTextDialog', 585);
function ImportFromTextDialog$1(this$0){
  this.this$01 = this$0;
}

defineClass(586, 1, $intern_43, ImportFromTextDialog$1);
_.onClick = function onClick_18(event_0){
  var s;
  $pushUndo(this.this$01.sim);
  $hide_0(this.this$01, false);
  s = $getText(this.this$01.textArea);
  s != null && $readSetup(this.this$01.sim, s);
}
;
var Lcom_lushprojects_circuitjs1_client_ImportFromTextDialog$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromTextDialog/1', 586);
function ImportFromTextDialog$2(this$0){
  this.this$01 = this$0;
}

defineClass(587, 1, $intern_43, ImportFromTextDialog$2);
_.onClick = function onClick_19(event_0){
  $hide_0(this.this$01, false);
}
;
var Lcom_lushprojects_circuitjs1_client_ImportFromTextDialog$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ImportFromTextDialog/2', 587);
function $calculateCurrent_0(this$static, voltdiff){
  this$static.compResistance > 0 && (this$static.current = voltdiff / this$static.compResistance + this$static.curSourceValue);
  return this$static.current;
}

function $doStep_0(this$static){
  $stampCurrentSource(this$static.sim, this$static.nodes[0], this$static.nodes[1], this$static.curSourceValue);
}

function $reset_2(this$static){
  this$static.current = this$static.curSourceValue = 0;
}

function $setup_0(this$static, ic, cr, f){
  this$static.inductance = ic;
  this$static.current = cr;
  this$static.flags = f;
}

function $stamp_0(this$static, n0, n1){
  this$static.nodes[0] = n0;
  this$static.nodes[1] = n1;
  (this$static.flags & 2) == 0?(this$static.compResistance = 2 * this$static.inductance / this$static.sim.timeStep):(this$static.compResistance = this$static.inductance / this$static.sim.timeStep);
  $stampResistor(this$static.sim, this$static.nodes[0], this$static.nodes[1], this$static.compResistance);
  $stampRightSide(this$static.sim, this$static.nodes[0]);
  $stampRightSide(this$static.sim, this$static.nodes[1]);
}

function $startIteration(this$static, voltdiff){
  (this$static.flags & 2) == 0?(this$static.curSourceValue = voltdiff / this$static.compResistance + this$static.current):(this$static.curSourceValue = this$static.current);
}

function Inductor(s){
  this.sim = s;
  this.nodes = initUnidimensionalArray(I_classLit, $intern_22, 9, 2, 15, 1);
}

defineClass(195, 1, {}, Inductor);
_.compResistance = 0;
_.curSourceValue = 0;
_.current = 0;
_.flags = 0;
_.inductance = 0;
var Lcom_lushprojects_circuitjs1_client_Inductor_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Inductor', 195);
function InductorElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.ind = new Inductor(sim_0);
  this.inductance = 1;
  $setup_0(this.ind, this.inductance, this.current_0, this.flags);
}

function InductorElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.ind = new Inductor(sim_0);
  this.inductance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.current_0 = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  $setup_0(this.ind, this.inductance, this.current_0, this.flags);
}

defineClass(102, 4, {4:1, 8:1, 102:1}, InductorElm, InductorElm_0);
_.calculateCurrent = function calculateCurrent_5(){
  var voltdiff;
  voltdiff = this.volts[0] - this.volts[1];
  this.current_0 = $calculateCurrent_0(this.ind, voltdiff);
}
;
_.doStep = function doStep_17(){
  $doStep_0(this.ind);
}
;
_.draw = function draw_21(g){
  var s, v1, v2;
  v1 = this.volts[0];
  v2 = this.volts[1];
  $setBbox_0(this, this.point1, this.point2, 8);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $drawCoil(this, g, 8, this.lead1, this.lead2, v1, v2);
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this.inductance, 'H', true);
    $drawValues(this, g, s, 8);
  }
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_25(){
  return 'l ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.inductance + ' ' + this.current_0;
}
;
_.getDumpType = function getDumpType_34(){
  return 108;
}
;
_.getEditInfo = function getEditInfo_22(n){
  var ei;
  if (n == 0)
    return new EditInfo('Inductance (H)', this.inductance, 0, 0);
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Trapezoidal Approximation', (this.ind.flags & 2) == 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_21(arr){
  arr[0] = 'inductor';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'L = ' + myGetUnitText(this.inductance, 'H', false);
  arr[4] = 'P = ' + myGetUnitText((this.volts[0] - this.volts[1]) * this.current_0, 'W', false);
}
;
_.getShortcut = function getShortcut_10(){
  return 76;
}
;
_.nonLinear = function nonLinear_5(){
  return false;
}
;
_.reset_0 = function reset_12(){
  this.current_0 = this.volts[0] = this.volts[1] = this.curcount_0 = 0;
  $reset_2(this.ind);
}
;
_.setEditValue = function setEditValue_21(n, ei){
  n == 0 && (this.inductance = ei.value_0);
  n == 1 && ($getState(ei.checkbox)?(this.flags &= -3):(this.flags |= 2));
  $setup_0(this.ind, this.inductance, this.current_0, this.flags);
}
;
_.setPoints = function setPoints_18(){
  $setPoints(this);
  $calcLeads(this, 32);
}
;
_.stamp = function stamp_18(){
  $stamp_0(this.ind, this.nodes[0], this.nodes[1]);
}
;
_.startIteration = function startIteration_2(){
  $startIteration(this.ind, this.volts[0] - this.volts[1]);
}
;
_.inductance = 0;
var Lcom_lushprojects_circuitjs1_client_InductorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'InductorElm', 102);
function InverterElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.noDiagonal = true;
  this.slewRate = 0.5;
  this.highVoltage = lastHighVoltage;
}

function InverterElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.noDiagonal = true;
  this.slewRate = 0.5;
  this.highVoltage = 5;
  try {
    this.slewRate = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.highVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
}

defineClass(282, 4, $intern_66, InverterElm, InverterElm_0);
_.doStep = function doStep_18(){
  var maxStep, out, v0;
  v0 = this.volts[1];
  out = this.volts[0] > this.highVoltage * 0.5?0:this.highVoltage;
  maxStep = this.slewRate * sim_0.timeStep * $intern_63;
  out = $wnd.Math.max($wnd.Math.min(v0 + maxStep, out), v0 - maxStep);
  $updateVoltageSource(sim_0, this.voltSource, out);
}
;
_.draw = function draw_22(g){
  $drawPosts(this, g);
  $draw2Leads(this, g);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  drawThickPolygon(g, this.gatePoly);
  drawThickCircle(g, this.pcircle.x_0, this.pcircle.y_0, 3);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.lead2, this.point2, this.curcount_0);
}
;
_.dump_0 = function dump_26(){
  return 'I ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.slewRate + ' ' + this.highVoltage;
}
;
_.getConnection = function getConnection_9(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_6(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_35(){
  return 73;
}
;
_.getEditInfo = function getEditInfo_23(n){
  if (n == 0)
    return new EditInfo('Slew Rate (V/ns)', this.slewRate, 0, 0);
  if (n == 1)
    return new EditInfo('High Voltage (V)', this.highVoltage, 1, 10);
  return null;
}
;
_.getInfo = function getInfo_22(arr){
  arr[0] = 'inverter';
  arr[1] = 'Vi = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[2] = 'Vo = ' + myGetUnitText(this.volts[1], 'V', false);
}
;
_.getShortcut = function getShortcut_11(){
  return 49;
}
;
_.getVoltageDiff = function getVoltageDiff_9(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_22(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_8(n1){
  return n1 == 1;
}
;
_.setEditValue = function setEditValue_22(n, ei){
  n == 0 && (this.slewRate = ei.value_0);
  n == 1 && (this.highVoltage = lastHighVoltage = ei.value_0);
}
;
_.setPoints = function setPoints_19(){
  var triPoints, ww;
  $setPoints(this);
  ww = 16;
  16 > this.dn / 2 && (ww = round_int(this.dn / 2));
  this.lead1 = $interpPoint(this.point1, this.point2, 0.5 - ww / this.dn);
  this.lead2 = $interpPoint(this.point1, this.point2, 0.5 + (ww + 2) / this.dn);
  this.pcircle = $interpPoint(this.point1, this.point2, 0.5 + (ww - 2) / this.dn);
  triPoints = $newPointArray(3);
  $interpPoint2(this.lead1, this.lead2, triPoints[0], triPoints[1], 0, 16);
  triPoints[2] = $interpPoint(this.point1, this.point2, 0.5 + (ww - 5) / this.dn);
  this.gatePoly = $createPolygon_1(triPoints);
  $setBbox_0(this, this.point1, this.point2, 16);
}
;
_.stamp = function stamp_19(){
  $stampVoltageSource(sim_0, 0, this.nodes[1], this.voltSource);
}
;
_.highVoltage = 0;
_.slewRate = 0;
var Lcom_lushprojects_circuitjs1_client_InverterElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'InverterElm', 282);
function $setPoints_5(this$static){
  var triPoints, ww;
  $setPoints(this$static);
  ww = 16;
  16 > this$static.dn / 2 && (ww = round_int(this$static.dn / 2));
  this$static.lead1 = $interpPoint(this$static.point1, this$static.point2, 0.5 - ww / this$static.dn);
  this$static.lead2 = $interpPoint(this$static.point1, this$static.point2, 0.5 + (ww + 2) / this$static.dn);
  this$static.pcircle = $interpPoint(this$static.point1, this$static.point2, 0.5 + (ww - 2) / this$static.dn);
  triPoints = $newPointArray(3);
  $interpPoint2(this$static.lead1, this$static.lead2, triPoints[0], triPoints[1], 0, 16);
  triPoints[2] = $interpPoint(this$static.point1, this$static.point2, 0.5 + (ww - 5) / this$static.dn);
  this$static.gatePoly = $createPolygon_1(triPoints);
  this$static.symbolPoly = $getSchmittPolygon(this$static, 1, 0.30000001192092896);
  $setBbox_0(this$static, this$static.point1, this$static.point2, 16);
}

function InvertingSchmittElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.noDiagonal = true;
  this.slewRate = 0.5;
  this.state = false;
  this.lowerTrigger = 1.66;
  this.upperTrigger = 3.33;
}

function InvertingSchmittElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.noDiagonal = true;
  try {
    this.slewRate = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.lowerTrigger = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.upperTrigger = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 14)) {
      this.slewRate = 0.5;
      this.lowerTrigger = 1.66;
      this.upperTrigger = 3.33;
    }
     else 
      throw toJs($e0);
  }
}

defineClass(191, 4, $intern_66, InvertingSchmittElm, InvertingSchmittElm_0);
_.doStep = function doStep_19(){
  var maxStep, out, v0;
  v0 = this.volts[1];
  if (this.state) {
    if (this.volts[0] > this.upperTrigger) {
      this.state = false;
      out = 0;
    }
     else {
      out = 5;
    }
  }
   else {
    if (this.volts[0] < this.lowerTrigger) {
      this.state = true;
      out = 5;
    }
     else {
      out = 0;
    }
  }
  maxStep = this.slewRate * sim_0.timeStep * $intern_63;
  out = $wnd.Math.max($wnd.Math.min(v0 + maxStep, out), v0 - maxStep);
  $updateVoltageSource(sim_0, this.voltSource, out);
}
;
_.draw = function draw_23(g){
  $drawPosts(this, g);
  $draw2Leads(this, g);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  drawThickPolygon(g, this.gatePoly);
  g.context.lineWidth = 2;
  drawPolygon(g, this.symbolPoly);
  g.context.lineWidth = 1;
  drawThickCircle(g, this.pcircle.x_0, this.pcircle.y_0, 3);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.lead2, this.point2, this.curcount_0);
}
;
_.dump_0 = function dump_27(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.slewRate + ' ' + this.lowerTrigger + ' ' + this.upperTrigger;
}
;
_.getConnection = function getConnection_10(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_7(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_36(){
  return 183;
}
;
_.getEditInfo = function getEditInfo_24(n){
  if (n == 0) {
    this.dlt = this.lowerTrigger;
    return new EditInfo('Lower threshold (V)', this.lowerTrigger, $intern_29, 5);
  }
  if (n == 1) {
    this.dut = this.upperTrigger;
    return new EditInfo('Upper threshold (V)', this.upperTrigger, $intern_29, 5);
  }
  if (n == 2)
    return new EditInfo('Slew Rate (V/ns)', this.slewRate, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_23(arr){
  arr[0] = 'InvertingSchmitt';
  arr[1] = 'Vi = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[2] = 'Vo = ' + myGetUnitText(this.volts[1], 'V', false);
}
;
_.getVoltageDiff = function getVoltageDiff_10(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_23(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_9(n1){
  return n1 == 1;
}
;
_.setEditValue = function setEditValue_23(n, ei){
  n == 0 && (this.dlt = ei.value_0);
  n == 1 && (this.dut = ei.value_0);
  n == 2 && (this.slewRate = ei.value_0);
  if (this.dlt > this.dut) {
    this.upperTrigger = this.dlt;
    this.lowerTrigger = this.dut;
  }
   else {
    this.upperTrigger = this.dut;
    this.lowerTrigger = this.dlt;
  }
}
;
_.setPoints = function setPoints_20(){
  $setPoints_5(this);
}
;
_.stamp = function stamp_20(){
  $stampVoltageSource(sim_0, 0, this.nodes[1], this.voltSource);
}
;
_.dlt = 0;
_.dut = 0;
_.lowerTrigger = 0;
_.slewRate = 0;
_.state = false;
_.upperTrigger = 0;
var Lcom_lushprojects_circuitjs1_client_InvertingSchmittElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'InvertingSchmittElm', 191);
function $setupPins_4(this$static){
  this$static.sizeX = 2;
  this$static.sizeY = 3;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 5 + ((this$static.flags & 2) != 0?1:0), 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'J');
  this$static.pins[1] = new ChipElm$Pin(this$static, 1, 2, '');
  this$static.pins[1].clock = true;
  this$static.pins[1].bubble = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, 2, 2, 'K');
  this$static.pins[3] = new ChipElm$Pin(this$static, 0, 3, 'Q');
  this$static.pins[3].output = this$static.pins[3].state = true;
  this$static.pins[4] = new ChipElm$Pin(this$static, 2, 3, 'Q');
  this$static.pins[4].output = true;
  this$static.pins[4].lineOver = true;
  (this$static.flags & 2) != 0 && (this$static.pins[5] = new ChipElm$Pin(this$static, 1, 3, 'R'));
}

function JKFlipFlopElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function JKFlipFlopElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.pins[4].value_0 = !this.pins[3].value_0;
}

defineClass(286, 13, $intern_66, JKFlipFlopElm, JKFlipFlopElm_0);
_.execute_2 = function execute_29(){
  var q;
  if (!this.pins[1].value_0 && this.lastClock) {
    q = this.pins[3].value_0;
    this.pins[0].value_0?this.pins[2].value_0?(q = !q):(q = true):this.pins[2].value_0 && (q = false);
    this.pins[3].value_0 = q;
    this.pins[4].value_0 = !q;
  }
  this.lastClock = this.pins[1].value_0;
  if ((this.flags & 2) != 0) {
    if (this.pins[5].value_0) {
      this.pins[3].value_0 = false;
      this.pins[4].value_0 = true;
    }
  }
}
;
_.getChipName = function getChipName_14(){
  return 'JK flip-flop';
}
;
_.getDumpType = function getDumpType_37(){
  return 156;
}
;
_.getEditInfo = function getEditInfo_25(n){
  var ei;
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Reset Pin', (this.flags & 2) != 0);
    return ei;
  }
  return $getEditInfo_0(this, n);
}
;
_.getPostCount = function getPostCount_26(){
  return 5 + ((this.flags & 2) != 0?1:0);
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_24(){
  return 2;
}
;
_.setEditValue = function setEditValue_24(n, ei){
  if (n == 2) {
    $getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3);
    $setupPins_4(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
  $setEditValue(this, n, ei);
}
;
_.setupPins = function setupPins_14(){
  $setupPins_4(this);
}
;
var Lcom_lushprojects_circuitjs1_client_JKFlipFlopElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'JKFlipFlopElm', 286);
function $$init_9(this$static){
  this$static.FLAG_PNP = 1;
  this$static.FLAG_SHOWVT = 2;
  this$static.FLAG_DIGITAL = 4;
  this$static.FLAG_FLIP = 8;
  this$static.FLAG_HIDE_BULK = 16;
  this$static.FLAGS_GLOBAL = this$static.FLAG_HIDE_BULK | this$static.FLAG_DIGITAL;
  this$static.mode = 0;
  this$static.gm = 0;
}

function $doStep_1(this$static){
  var Gds, drain, realvds, realvgs, rs, source, vds, vgs, vs;
  vs = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  vs[0] = this$static.volts[0];
  vs[1] = this$static.volts[1];
  vs[2] = this$static.volts[2];
  vs[1] > this$static.lastv1 + 0.5 && (vs[1] = this$static.lastv1 + 0.5);
  vs[1] < this$static.lastv1 - 0.5 && (vs[1] = this$static.lastv1 - 0.5);
  vs[2] > this$static.lastv2 + 0.5 && (vs[2] = this$static.lastv2 + 0.5);
  vs[2] < this$static.lastv2 - 0.5 && (vs[2] = this$static.lastv2 - 0.5);
  source = 1;
  drain = 2;
  if (this$static.pnp * vs[1] > this$static.pnp * vs[2]) {
    source = 2;
    drain = 1;
  }
  vgs = vs[0] - vs[source];
  vds = vs[drain] - vs[source];
  ($nonConvergence(this$static.lastv1, vs[1]) || $nonConvergence(this$static.lastv2, vs[2])) && (sim_0.converged = false);
  this$static.lastv1 = vs[1];
  this$static.lastv2 = vs[2];
  realvgs = vgs;
  realvds = vds;
  vgs *= this$static.pnp;
  vds *= this$static.pnp;
  this$static.ids = 0;
  this$static.gm = 0;
  if (vgs < this$static.vt) {
    Gds = $intern_88;
    this$static.ids = vds * $intern_88;
    this$static.mode = 0;
  }
   else if (vds < vgs - this$static.vt) {
    this$static.ids = this$static.beta_0 * ((vgs - this$static.vt) * vds - vds * vds * 0.5);
    this$static.gm = this$static.beta_0 * vds;
    Gds = this$static.beta_0 * (vgs - vds - this$static.vt);
    this$static.mode = 1;
  }
   else {
    this$static.gm = this$static.beta_0 * (vgs - this$static.vt);
    Gds = $intern_88;
    this$static.ids = 0.5 * this$static.beta_0 * (vgs - this$static.vt) * (vgs - this$static.vt) + (vds - (vgs - this$static.vt)) * $intern_88;
    this$static.mode = 2;
  }
  rs = -this$static.pnp * this$static.ids + Gds * realvds + this$static.gm * realvgs;
  $stampMatrix(sim_0, this$static.nodes[drain], this$static.nodes[drain], Gds);
  $stampMatrix(sim_0, this$static.nodes[drain], this$static.nodes[source], -Gds - this$static.gm);
  $stampMatrix(sim_0, this$static.nodes[drain], this$static.nodes[0], this$static.gm);
  $stampMatrix(sim_0, this$static.nodes[source], this$static.nodes[drain], -Gds);
  $stampMatrix(sim_0, this$static.nodes[source], this$static.nodes[source], Gds + this$static.gm);
  $stampMatrix(sim_0, this$static.nodes[source], this$static.nodes[0], -this$static.gm);
  $stampRightSide_0(sim_0, this$static.nodes[drain], rs);
  $stampRightSide_0(sim_0, this$static.nodes[source], -rs);
  (source == 2 && this$static.pnp == 1 || source == 1 && this$static.pnp == -1) && (this$static.ids = -this$static.ids);
}

function $getEditInfo_3(this$static, n){
  var ei;
  if (n == 0)
    return new EditInfo('Threshold Voltage', this$static.pnp * this$static.vt, $intern_29, 5);
  if (n == 1)
    return new EditInfo('Beta', this$static.beta_0, $intern_29, 5);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Digital Symbol', (this$static.flags & this$static.FLAG_DIGITAL) != 0);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Show Bulk', (this$static.flags & (this$static.FLAG_DIGITAL | this$static.FLAG_HIDE_BULK)) == 0);
    return ei;
  }
  if (n == 4) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Swap D/S', (this$static.flags & this$static.FLAG_FLIP) != 0);
    return ei;
  }
  return null;
}

function $getFetInfo(this$static, arr, n){
  arr[0] = LS((this$static.pnp == -1?'p-':'n-') + n);
  arr[0] += ' (Vt = ' + myGetUnitText(this$static.pnp * this$static.vt, 'V', false) + ')';
  arr[1] = (this$static.pnp == 1?'Ids = ':'Isd = ') + myGetUnitText(this$static.ids, 'A', false);
  arr[2] = 'Vgs = ' + myGetUnitText(this$static.volts[0] - this$static.volts[this$static.pnp == -1?2:1], 'V', false);
  arr[3] = (this$static.pnp == 1?'Vds = ':'Vsd = ') + myGetUnitText(this$static.volts[2] - this$static.volts[1], 'V', false);
  arr[4] = LS(this$static.mode == 0?'off':this$static.mode == 1?'linear':'saturation');
  arr[5] = 'gm = ' + myGetUnitText(this$static.gm, 'A/V', false);
}

function $nonConvergence(last, now_0){
  var diff;
  diff = $wnd.Math.abs(last - now_0);
  if (diff < $intern_29)
    return false;
  if (sim_0.subIterations > 10 && diff < $wnd.Math.abs(now_0) * $intern_64)
    return false;
  if (sim_0.subIterations > 100 && diff < $intern_29 + (sim_0.subIterations - 100) * $intern_85)
    return false;
  return true;
}

function $setPoints_6(this$static){
  var dist, hs2;
  $setPoints(this$static);
  this$static.flags &= ~this$static.FLAGS_GLOBAL;
  this$static.flags |= globalFlags;
  hs2 = 16 * this$static.dsign;
  (this$static.flags & this$static.FLAG_FLIP) != 0 && (hs2 = -hs2);
  this$static.src_0 = $newPointArray(3);
  this$static.drn = $newPointArray(3);
  $interpPoint2(this$static.point1, this$static.point2, this$static.src_0[0], this$static.drn[0], 1, -hs2);
  $interpPoint2(this$static.point1, this$static.point2, this$static.src_0[1], this$static.drn[1], 1 - 22 / this$static.dn, -hs2);
  $interpPoint2(this$static.point1, this$static.point2, this$static.src_0[2], this$static.drn[2], 1 - 22 / this$static.dn, -hs2 * 4 / 3 | 0);
  this$static.gate = $newPointArray(3);
  $interpPoint2(this$static.point1, this$static.point2, this$static.gate[0], this$static.gate[2], 1 - 28 / this$static.dn, hs2 / 2 | 0);
  $interpPoint_1(this$static.gate[0], this$static.gate[2], this$static.gate[1], 0.5);
  if ((this$static.flags & (this$static.FLAG_DIGITAL | this$static.FLAG_HIDE_BULK)) == 0) {
    this$static.body_0 = $newPointArray(2);
    $interpPoint_1(this$static.src_0[0], this$static.drn[0], this$static.body_0[0], 0.5);
    $interpPoint_1(this$static.src_0[1], this$static.drn[1], this$static.body_0[1], 0.5);
  }
  if ((this$static.flags & this$static.FLAG_DIGITAL) != 0) {
    if (this$static.pnp == -1) {
      $interpPoint_1(this$static.point1, this$static.point2, this$static.gate[1], 1 - 36 / this$static.dn);
      dist = this$static.dsign < 0?32:31;
      this$static.pcircle = $interpPoint(this$static.point1, this$static.point2, 1 - dist / this$static.dn);
      this$static.pcircler = 3;
    }
  }
   else {
    this$static.pnp == 1?(this$static.flags & (this$static.FLAG_DIGITAL | this$static.FLAG_HIDE_BULK)) == 0?(this$static.arrowPoly_0 = $calcArrow(this$static.body_0[0], this$static.body_0[1], 12, 5)):(this$static.arrowPoly_0 = $calcArrow(this$static.src_0[1], this$static.src_0[0], 10, 4)):(this$static.flags & (this$static.FLAG_DIGITAL | this$static.FLAG_HIDE_BULK)) == 0?(this$static.arrowPoly_0 = $calcArrow(this$static.body_0[1], this$static.body_0[0], 12, 5)):(this$static.arrowPoly_0 = $calcArrow(this$static.drn[0], this$static.drn[1], 12, 5));
  }
}

function MosfetElm(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_9(this);
  this.pnp = (f & this.FLAG_PNP) != 0?-1:1;
  this.noDiagonal = true;
  this.vt = this.getDefaultThreshold();
  this.beta_0 = this.getDefaultBeta();
  try {
    this.vt = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.beta_0 = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  globalFlags = this.flags & this.FLAGS_GLOBAL;
}

function MosfetElm_0(xx, yy, pnpflag){
  CircuitElm.call(this, xx, yy);
  $$init_9(this);
  this.pnp = pnpflag?-1:1;
  this.flags = pnpflag?this.FLAG_PNP:0;
  this.noDiagonal = true;
  this.beta_0 = this.getDefaultBeta();
  this.vt = this.getDefaultThreshold();
}

defineClass(166, 4, $intern_66, MosfetElm);
_.canViewInScope = function canViewInScope_1(){
  return true;
}
;
_.doStep = function doStep_20(){
  $doStep_1(this);
}
;
_.draw = function draw_24(g){
  var ds, enhancement, i, s, v;
  (this.flags & this.FLAGS_GLOBAL) != globalFlags && this.setPoints();
  $setBbox_0(this, this.point1, this.point2, 16);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.src_0[0], this.src_0[1]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.drn[0], this.drn[1]);
  $setPowerColor_0(this, g);
  enhancement = this.vt > 0 && (this.flags & (this.FLAG_DIGITAL | this.FLAG_HIDE_BULK)) == 0;
  for (i = 0; i != 6; i++) {
    if ((i == 1 || i == 4) && enhancement)
      continue;
    v = this.volts[1] + (this.volts[2] - this.volts[1]) * i / 6;
    $setColor(g, $getVoltageColor(this, g, v));
    $interpPoint_1(this.src_0[1], this.drn[1], ps1, i * $intern_89);
    $interpPoint_1(this.src_0[1], this.drn[1], ps2, (i + 1) * $intern_89);
    drawThickLine_0(g, ps1, ps2);
  }
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.src_0[1], this.src_0[2]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.drn[1], this.drn[2]);
  if ((this.flags & (this.FLAG_DIGITAL | this.FLAG_HIDE_BULK)) == 0) {
    $setVoltageColor(this, g, this.pnp == -1?this.volts[2]:this.volts[1]);
    drawThickLine_0(g, this.pnp == -1?this.drn[0]:this.src_0[0], this.body_0[0]);
    drawThickLine_0(g, this.body_0[0], this.body_0[1]);
  }
  if ((this.flags & this.FLAG_DIGITAL) == 0) {
    $setVoltageColor(this, g, this.pnp == -1?this.volts[2]:this.volts[1]);
    $fillPolygon(g, this.arrowPoly_0);
  }
  sim_0.powerCheckItem.on && $setColor(g, ($clinit_Color() , gray));
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.gate[1]);
  drawThickLine_0(g, this.gate[0], this.gate[2]);
  (this.flags & this.FLAG_DIGITAL) != 0 && this.pnp == -1 && drawThickCircle(g, this.pcircle.x_0, this.pcircle.y_0, this.pcircler);
  if ((this.flags & this.FLAG_SHOWVT) != 0) {
    s = '' + this.vt * this.pnp;
    $setColor(g, whiteColor);
    $setFont_0(g, unitsFont);
    $drawCenteredText(this, g, s, this.x2 + 2, this.y2, false);
  }
  if ((this.iAmMouseElm || this.selected || sim_0.plotYElm == this || sim_0.dragElm == this) && this.dy == 0) {
    $setColor(g, ($clinit_Color() , white));
    $setFont_0(g, unitsFont);
    ds = sign(this.dx);
    $drawString(g, 'G', this.gate[1].x_0 - 10 * ds, this.gate[1].y_0 - 5);
    $drawString(g, this.pnp == -1?'D':'S', this.src_0[0].x_0 - 3 + 9 * ds, this.src_0[0].y_0 + 4);
    $drawString(g, this.pnp == -1?'S':'D', this.drn[0].x_0 - 3 + 9 * ds, this.drn[0].y_0 + 4);
  }
  this.curcount_0 = $updateDotCount(-this.ids, this.curcount_0);
  $drawDots(g, this.src_0[0], this.src_0[1], this.curcount_0);
  $drawDots(g, this.src_0[1], this.drn[1], this.curcount_0);
  $drawDots(g, this.drn[1], this.drn[0], this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_28(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.vt + ' ' + this.beta_0;
}
;
_.getConnection = function getConnection_11(n1, n2){
  return !(n1 == 0 || n2 == 0);
}
;
_.getCurrent = function getCurrent_0(){
  return this.ids;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_8(xa, ya){
  if (xa == this.x_0 && ya == this.y_0)
    return 0;
  if (xa == this.src_0[0].x_0 && ya == this.src_0[0].y_0)
    return this.ids;
  return -this.ids;
}
;
_.getDefaultBeta = function getDefaultBeta(){
  return 0.02;
}
;
_.getDefaultThreshold = function getDefaultThreshold(){
  return 1.5;
}
;
_.getDumpType = function getDumpType_38(){
  return 102;
}
;
_.getEditInfo = function getEditInfo_26(n){
  return $getEditInfo_3(this, n);
}
;
_.getInfo = function getInfo_24(arr){
  $getFetInfo(this, arr, 'MOSFET');
}
;
_.getPost = function getPost_5(n){
  return n == 0?this.point1:n == 1?this.src_0[0]:this.drn[0];
}
;
_.getPostCount = function getPostCount_27(){
  return 3;
}
;
_.getPower = function getPower_5(){
  return this.ids * (this.volts[2] - this.volts[1]);
}
;
_.getScopeText = function getScopeText_1(v){
  return LS((this.pnp == -1?'p-':'n-') + 'MOSFET');
}
;
_.getVoltageDiff = function getVoltageDiff_11(){
  return this.volts[2] - this.volts[1];
}
;
_.nonLinear = function nonLinear_6(){
  return true;
}
;
_.reset_0 = function reset_13(){
  this.lastv1 = this.lastv2 = this.volts[0] = this.volts[1] = this.volts[2] = this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_25(n, ei){
  n == 0 && (this.vt = this.pnp * ei.value_0);
  n == 1 && (this.beta_0 = ei.value_0);
  if (n == 2) {
    globalFlags = $getState(ei.checkbox)?globalFlags | this.FLAG_DIGITAL:globalFlags & ~this.FLAG_DIGITAL;
    this.setPoints();
  }
  if (n == 3) {
    globalFlags = $getState(ei.checkbox)?globalFlags & ~this.FLAG_HIDE_BULK:globalFlags | this.FLAG_HIDE_BULK;
    this.setPoints();
  }
  if (n == 4) {
    this.flags = $getState(ei.checkbox)?this.flags | this.FLAG_FLIP:this.flags & ~this.FLAG_FLIP;
    this.setPoints();
  }
}
;
_.setPoints = function setPoints_21(){
  $setPoints_6(this);
}
;
_.stamp = function stamp_21(){
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
}
;
_.FLAGS_GLOBAL = 0;
_.FLAG_DIGITAL = 0;
_.FLAG_FLIP = 0;
_.FLAG_HIDE_BULK = 0;
_.FLAG_PNP = 0;
_.FLAG_SHOWVT = 0;
_.beta_0 = 0;
_.gm = 0;
_.ids = 0;
_.lastv1 = 0;
_.lastv2 = 0;
_.mode = 0;
_.pcircler = 0;
_.pnp = 0;
_.vt = 0;
var globalFlags = 0;
var Lcom_lushprojects_circuitjs1_client_MosfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MosfetElm', 166);
function JfetElm(xa, ya, xb, yb, f, st){
  MosfetElm.call(this, xa, ya, xb, yb, f, st);
  this.noDiagonal = true;
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

function JfetElm_0(xx, yy, pnpflag){
  MosfetElm_0.call(this, xx, yy, pnpflag);
  this.noDiagonal = true;
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

defineClass(216, 166, $intern_66, JfetElm);
_.calculateCurrent = function calculateCurrent_6(){
  this.gateCurrent = this.pnp * $calculateCurrent(this.diode, this.pnp * (this.volts[0] - this.volts[1]));
}
;
_.doStep = function doStep_21(){
  $doStep_1(this);
  $doStep(this.diode, this.pnp * (this.volts[0] - this.volts[1]));
}
;
_.draw = function draw_25(g){
  $setBbox_0(this, this.point1, this.point2, 16);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.src_0[0], this.src_0[1]);
  drawThickLine_0(g, this.src_0[1], this.src_0[2]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.drn[0], this.drn[1]);
  drawThickLine_0(g, this.drn[1], this.drn[2]);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.gatePt);
  $fillPolygon(g, this.arrowPoly);
  $setPowerColor_0(this, g);
  $fillPolygon(g, this.gatePoly);
  this.curcountd = $updateDotCount(-this.ids, this.curcountd);
  this.curcountg = $updateDotCount(this.gateCurrent, this.curcountg);
  this.curcounts = $updateDotCount(-this.gateCurrent - this.ids, this.curcounts);
  if (this.curcountd != 0 || this.curcounts != 0) {
    $drawDots(g, this.src_0[0], this.src_0[1], this.curcounts);
    $drawDots(g, this.src_0[1], this.src_0[2], this.curcounts + 8);
    $drawDots(g, this.drn[0], this.drn[1], -this.curcountd);
    $drawDots(g, this.drn[1], this.drn[2], -(this.curcountd + 8));
    $drawDots(g, this.point1, this.gatePt, this.curcountg);
  }
  $drawPosts(this, g);
}
;
_.getConnection = function getConnection_12(n1, n2){
  return true;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_9(xa, ya){
  if (xa == this.x_0 && ya == this.y_0)
    return -this.gateCurrent;
  if (xa == this.src_0[0].x_0 && ya == this.src_0[0].y_0)
    return this.gateCurrent + this.ids;
  return -this.ids;
}
;
_.getDefaultBeta = function getDefaultBeta_0(){
  return 0.00125;
}
;
_.getDefaultThreshold = function getDefaultThreshold_0(){
  return -4;
}
;
_.getDumpType = function getDumpType_39(){
  return 106;
}
;
_.getEditInfo = function getEditInfo_27(n){
  if (n < 2)
    return $getEditInfo_3(this, n);
  return null;
}
;
_.getInfo = function getInfo_25(arr){
  $getFetInfo(this, arr, 'JFET');
}
;
_.getScopeText = function getScopeText_2(v){
  return LS((this.pnp == -1?'p-':'n-') + 'JFET');
}
;
_.reset_0 = function reset_14(){
  this.lastv1 = this.lastv2 = this.volts[0] = this.volts[1] = this.volts[2] = this.curcount_0 = 0;
  this.diode.lastvoltdiff = 0;
}
;
_.setPoints = function setPoints_22(){
  var hs2, ra, x_0;
  $setPoints_6(this);
  hs2 = 16 * this.dsign;
  this.src_0 = $newPointArray(3);
  this.drn = $newPointArray(3);
  $interpPoint2(this.point1, this.point2, this.src_0[0], this.drn[0], 1, -hs2);
  $interpPoint2(this.point1, this.point2, this.src_0[1], this.drn[1], 1, -hs2 / 2 | 0);
  $interpPoint2(this.point1, this.point2, this.src_0[2], this.drn[2], 1 - 10 / this.dn, -hs2 / 2 | 0);
  this.gatePt = $interpPoint(this.point1, this.point2, 1 - 14 / this.dn);
  ra = $newPointArray(4);
  $interpPoint2(this.point1, this.point2, ra[0], ra[1], 1 - 13 / this.dn, 16);
  $interpPoint2(this.point1, this.point2, ra[2], ra[3], 1 - 10 / this.dn, 16);
  this.gatePoly = $createPolygon_0(ra[0], ra[1], ra[3], ra[2]);
  if (this.pnp == -1) {
    x_0 = $interpPoint(this.gatePt, this.point1, 18 / this.dn);
    this.arrowPoly = $calcArrow(this.gatePt, x_0, 8, 3);
  }
   else 
    this.arrowPoly = $calcArrow(this.point1, this.gatePt, 8, 3);
}
;
_.stamp = function stamp_22(){
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
  this.pnp < 0?$stamp(this.diode, this.nodes[1], this.nodes[0]):$stamp(this.diode, this.nodes[0], this.nodes[1]);
}
;
_.curcountd = 0;
_.curcountg = 0;
_.curcounts = 0;
_.gateCurrent = 0;
var Lcom_lushprojects_circuitjs1_client_JfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'JfetElm', 216);
function $$init_10(this$static){
  this$static.voltagem = 0;
  this$static.angulo = 0;
}

function $execute_1(this$static){
  var i;
  this$static.voltagem = 0;
  for (i = 0; i < 8; i++)
    this$static.voltagem = this$static.voltagem + (this$static.pins[7 - i + 1].value_0?round_int($wnd.Math.pow(2, i)):0);
  log_0('' + this$static.voltagem);
}

function $setupPins_5(this$static){
  var i, iside, s;
  (this$static.flags & $intern_31) != 0 && (this$static.angulo = 1);
  this$static.totalPinos == 0 && (this$static.totalPinos = 8);
  this$static.sizeX = this$static.angulo == 0?2:9;
  this$static.sizeY = this$static.angulo == 0?9:2;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 1 + this$static.totalPinos, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 4, this$static.angulo == 0?2:0, 'O');
  this$static.pins[0].output = true;
  for (i = START_MEN_PIN; i < START_MEN_PIN + this$static.totalPinos; i++) {
    iside = i - START_MEN_PIN;
    if (iside > 3) {
      iside += 1;
      s = $concat('I', '' + (this$static.totalPinos - iside));
    }
     else 
      s = $concat('I', '' + (this$static.totalPinos - iside - 1));
    this$static.pins[i] = new ChipElm$Pin(this$static, iside, this$static.angulo == 0?3:1, s);
  }
}

function Jointer(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_10(this);
  this.totalPinos = 8;
}

function Jointer_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_10(this);
}

defineClass(262, 13, $intern_66, Jointer, Jointer_0);
_.doStep = function doStep_22(){
  var i, p;
  for (i = 0; i != 1 + this.totalPinos; i++) {
    p = this.pins[i];
    p.output || (p.value_0 = this.volts[i] > 2.5);
  }
  $execute_1(this);
  for (i = 0; i != 1 + this.totalPinos; i++) {
    p = this.pins[i];
    p.output && $updateVoltageSource(sim_0, p.voltSource, this.voltagem);
  }
}
;
_.execute_2 = function execute_30(){
  $execute_1(this);
}
;
_.getChipName = function getChipName_15(){
  return 'Jointer (junta 8 fios em 1)';
}
;
_.getDumpType = function getDumpType_40(){
  return 1005;
}
;
_.getEditInfo = function getEditInfo_28(n){
  var ei;
  if (n < 2)
    return $getEditInfo_0(this, n);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Rotacione', (this.flags & $intern_31) != 0);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_28(){
  return 1 + this.totalPinos;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_25(){
  return 1;
}
;
_.setEditValue = function setEditValue_26(n, ei){
  n < 2 && $setEditValue(this, n, ei);
  if (n == 2) {
    if ($getState(ei.checkbox)) {
      this.flags |= $intern_31;
      this.angulo = 1;
    }
     else {
      this.flags &= -4097;
      this.angulo = 0;
    }
    $setupPins_5(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_15(){
  $setupPins_5(this);
}
;
_.angulo = 0;
_.totalPinos = 0;
_.voltagem = 0;
var START_MEN_PIN = 1;
var Lcom_lushprojects_circuitjs1_client_Jointer_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Jointer', 262);
function LEDElm(xx, yy){
  DiodeElm.call(this, xx, yy);
  this.fwdrop = 2.1024259;
  $setup(this.diode, this.fwdrop, this.zvoltage);
  this.maxBrightnessCurrent = $intern_29;
  this.colorR = 1;
  this.colorG = this.colorB = 0;
}

function LEDElm_0(xa, ya, xb, yb, f, st){
  DiodeElm_0.call(this, xa, ya, xb, yb, f, st);
  (f & 1) == 0 && (this.fwdrop = 2.1024259);
  $setup(this.diode, this.fwdrop, this.zvoltage);
  this.colorR = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.colorG = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.colorB = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.maxBrightnessCurrent = $intern_29;
  try {
    this.maxBrightnessCurrent = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
}

defineClass(256, 147, $intern_66, LEDElm, LEDElm_0);
_.draw = function draw_26(g){
  var cc, cr, w;
  if (this.iAmMouseElm || this.selected || sim_0.plotYElm == this || this == sim_0.dragElm) {
    $draw_0(this, g);
    return;
  }
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.ledLead1);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.ledLead2, this.point2);
  $setColor(g, ($clinit_Color() , gray));
  cr = 12;
  drawThickCircle(g, this.ledCenter.x_0, this.ledCenter.y_0, 12);
  cr -= 4;
  w = this.current_0 / this.maxBrightnessCurrent;
  w > 0 && (w = 255 * (1 + 0.2 * $wnd.Math.log(w)));
  w > 255 && (w = 255);
  w < 0 && (w = 0);
  cc = new Color(round_int(this.colorR * w), round_int(this.colorG * w), round_int(this.colorB * w));
  $setColor(g, cc);
  $fillOval(g, this.ledCenter.x_0 - cr, this.ledCenter.y_0 - cr, cr * 2);
  $setBbox_0(this, this.point1, this.point2, cr);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.point1, this.ledLead1, this.curcount_0);
  $drawDots(g, this.point2, this.ledLead2, -this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_29(){
  return this.flags |= 1 , '162 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.fwdrop + ' ' + this.colorR + ' ' + this.colorG + ' ' + this.colorB + ' ' + this.maxBrightnessCurrent;
}
;
_.getDumpType = function getDumpType_41(){
  return 162;
}
;
_.getEditInfo = function getEditInfo_29(n){
  if (n == 0)
    return $getEditInfo_2(this, 0);
  if (n == 1)
    return $setDimensionless(new EditInfo('Red Value (0-1)', this.colorR, 0, 1));
  if (n == 2)
    return $setDimensionless(new EditInfo('Green Value (0-1)', this.colorG, 0, 1));
  if (n == 3)
    return $setDimensionless(new EditInfo('Blue Value (0-1)', this.colorB, 0, 1));
  if (n == 4)
    return new EditInfo('Max Brightness Current (A)', this.maxBrightnessCurrent, 0, 0.1);
  return null;
}
;
_.getInfo = function getInfo_26(arr){
  $getInfo_1(this, arr);
  arr[0] = 'LED';
}
;
_.getShortcut = function getShortcut_12(){
  return 108;
}
;
_.setEditValue = function setEditValue_27(n, ei){
  n == 0 && (this.fwdrop = ei.value_0 , $setup(this.diode, this.fwdrop, this.zvoltage));
  n == 1 && (this.colorR = ei.value_0);
  n == 2 && (this.colorG = ei.value_0);
  n == 3 && (this.colorB = ei.value_0);
  n == 4 && (this.maxBrightnessCurrent = ei.value_0);
}
;
_.setPoints = function setPoints_23(){
  $setPoints_4(this);
  this.ledLead1 = $interpPoint(this.point1, this.point2, 0.5 - 12 / this.dn);
  this.ledLead2 = $interpPoint(this.point1, this.point2, 0.5 + 12 / this.dn);
  this.ledCenter = $interpPoint(this.point1, this.point2, 0.5);
}
;
_.colorB = 0;
_.colorG = 0;
_.colorR = 0;
_.maxBrightnessCurrent = 0;
var Lcom_lushprojects_circuitjs1_client_LEDElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LEDElm', 256);
function LabeledNodeElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.text_0 = 'label';
}

function LabeledNodeElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.text_0 = $nextToken(st);
  while ($hasMoreTokens(st))
    this.text_0 += ' ' + $nextToken(st);
}

defineClass(251, 4, $intern_66, LabeledNodeElm, LabeledNodeElm_0);
_.draw = function draw_27(g){
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:whiteColor);
  $setPowerColor_0(this, g);
  $drawCenteredText(this, g, this.text_0, this.x2, this.y2, true);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.point1, this.lead1, this.curcount_0);
  $interpPoint_1(this.point1, this.point2, ps2, 1 + 11 / this.dn);
  $setBbox_0(this, this.point1, ps2, 17);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_30(){
  return '207 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.text_0;
}
;
_.getConnectionNode = function getConnectionNode_0(n){
  if (n == 0)
    return this.nodes[0];
  return this.nodeNumber;
}
;
_.getConnectionNodeCount = function getConnectionNodeCount_0(){
  return 2;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_10(xa, ya){
  return -this.current_0;
}
;
_.getDumpType = function getDumpType_42(){
  return 207;
}
;
_.getEditInfo = function getEditInfo_30(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('Text', 0, -1, -1);
    ei.text_0 = this.text_0;
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_27(arr){
  arr[0] = this.text_0;
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_1(){
  var nn;
  if (!nodeList)
    return 0;
  nn = castTo($getStringValue(nodeList, this.text_0), 24);
  if (nn) {
    this.nodeNumber = nn.value_0;
    return 0;
  }
  return 1;
}
;
_.getPostCount = function getPostCount_29(){
  return 1;
}
;
_.getVoltageDiff = function getVoltageDiff_12(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_26(){
  return 1;
}
;
_.isWire = function isWire_1(){
  return true;
}
;
_.setCurrent = function setCurrent_5(x_0, c){
  this.current_0 = -c;
}
;
_.setEditValue = function setEditValue_28(n, ei){
  n == 0 && (this.text_0 = $getText(ei.textf));
}
;
_.setNode = function setNode_1(p, n){
  this.nodes[p] = n;
  if (p == 1) {
    $putStringValue(nodeList, this.text_0, new Integer(n));
    this.nodeNumber = n;
  }
}
;
_.setPoints = function setPoints_24(){
  $setPoints(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 17 / this.dn);
}
;
_.stamp = function stamp_23(){
  $stampVoltageSource_0(sim_0, this.nodeNumber, this.nodes[0], this.voltSource, 0);
}
;
_.nodeNumber = 0;
var nodeList;
var Lcom_lushprojects_circuitjs1_client_LabeledNodeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LabeledNodeElm', 251);
function $getTempColor(this$static){
  var x_0;
  if (this$static.temp < 1200) {
    x_0 = round_int(255 * (this$static.temp - 800) / 400);
    x_0 < 0 && (x_0 = 0);
    return new Color(x_0, 0, 0);
  }
  if (this$static.temp < 1700) {
    x_0 = round_int(255 * (this$static.temp - 1200) / 500);
    x_0 < 0 && (x_0 = 0);
    return new Color(255, x_0, 0);
  }
  if (this$static.temp < 2400) {
    x_0 = round_int(255 * (this$static.temp - 1700) / 700);
    x_0 < 0 && (x_0 = 0);
    return new Color(255, 255, x_0);
  }
  return $clinit_Color() , white;
}

function LampElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.temp = 300;
  this.nom_pow = 100;
  this.nom_v = 120;
  this.warmTime = 0.4;
  this.coolTime = 0.4;
}

function LampElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.temp = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  isNaN(this.temp) && (this.temp = 300);
  this.nom_pow = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.nom_v = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.warmTime = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.coolTime = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(273, 4, $intern_66, LampElm, LampElm_0);
_.calculateCurrent = function calculateCurrent_7(){
  this.current_0 = (this.volts[0] - this.volts[1]) / this.resistance;
  this.resistance == 0 && (this.current_0 = 0);
}
;
_.canShowValueInScope = function canShowValueInScope_0(x_0){
  return x_0 == 2;
}
;
_.doStep = function doStep_23(){
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.resistance);
}
;
_.draw = function draw_28(g){
  var cc, v1, v2;
  v1 = this.volts[0];
  v2 = this.volts[1];
  $setBbox_0(this, this.point1, this.point2, 4);
  $adjustBbox(this, this.bulb.x_0 - this.bulbR, this.bulb.y_0 - this.bulbR, this.bulb.x_0 + this.bulbR, this.bulb.y_0 + this.bulbR);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setColor(g, $getTempColor(this));
  $fillOval(g, this.bulb.x_0 - this.bulbR, this.bulb.y_0 - this.bulbR, this.bulbR * 2);
  $setColor(g, ($clinit_Color() , white));
  drawThickCircle(g, this.bulb.x_0, this.bulb.y_0, this.bulbR);
  $setColor(g, $getVoltageColor(this, g, v1));
  drawThickLine_0(g, this.lead1, this.filament[0]);
  $setColor(g, $getVoltageColor(this, g, v2));
  drawThickLine_0(g, this.lead2, this.filament[1]);
  $setColor(g, $getVoltageColor(this, g, (v1 + v2) * 0.5));
  drawThickLine_0(g, this.filament[0], this.filament[1]);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.point1, this.lead1, this.curcount_0);
    cc = this.curcount_0 + (this.dn - 16) / 2;
    $drawDots(g, this.lead1, this.filament[0], cc);
    cc += 24;
    $drawDots(g, this.filament[0], this.filament[1], cc);
    cc += 16;
    $drawDots(g, this.filament[1], this.lead2, cc);
    cc += 24;
    $drawDots(g, this.lead2, this.point2, this.curcount_0);
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_31(){
  return '181 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.temp + ' ' + this.nom_pow + ' ' + this.nom_v + ' ' + this.warmTime + ' ' + this.coolTime;
}
;
_.getDumpType = function getDumpType_43(){
  return 181;
}
;
_.getEditInfo = function getEditInfo_31(n){
  if (n == 0)
    return new EditInfo('Nominal Power', this.nom_pow, 0, 0);
  if (n == 1)
    return new EditInfo('Nominal Voltage', this.nom_v, 0, 0);
  if (n == 2)
    return new EditInfo('Warmup Time (s)', this.warmTime, 0, 0);
  if (n == 3)
    return new EditInfo('Cooldown Time (s)', this.coolTime, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_28(arr){
  arr[0] = 'lamp';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'R = ' + myGetUnitText(this.resistance, ohmString, false);
  arr[4] = 'P = ' + myGetUnitText((this.volts[0] - this.volts[1]) * this.current_0, 'W', false);
  arr[5] = 'T = ' + round_int(this.temp) + ' K';
}
;
_.getScopeUnits = function getScopeUnits_0(x_0){
  return x_0 == 2?3:x_0 == 3?1:x_0 == 1?2:0;
}
;
_.getScopeValue = function getScopeValue_0(x_0){
  return x_0 == 2?this.resistance:x_0 == 3?this.current_0:x_0 == 1?(this.volts[0] - this.volts[1]) * this.current_0:this.volts[0] - this.volts[1];
}
;
_.nonLinear = function nonLinear_7(){
  return true;
}
;
_.reset_0 = function reset_15(){
  $reset(this);
  this.temp = 300;
  this.resistance = 100;
}
;
_.setEditValue = function setEditValue_29(n, ei){
  n == 0 && ei.value_0 > 0 && (this.nom_pow = ei.value_0);
  n == 1 && ei.value_0 > 0 && (this.nom_v = ei.value_0);
  n == 2 && ei.value_0 > 0 && (this.warmTime = ei.value_0);
  n == 3 && ei.value_0 > 0 && (this.coolTime = ei.value_0);
}
;
_.setPoints = function setPoints_25(){
  var br;
  $setPoints(this);
  $calcLeads(this, 16);
  this.bulbLead = $newPointArray(2);
  this.filament = $newPointArray(2);
  this.bulbR = 20;
  this.filament[0] = $interpPoint_0(this.lead1, this.lead2, 0, 24);
  this.filament[1] = $interpPoint_0(this.lead1, this.lead2, 1, 24);
  br = 24 - $wnd.Math.sqrt(this.bulbR * this.bulbR - 256);
  this.bulbLead[0] = $interpPoint_0(this.lead1, this.lead2, 0, br);
  this.bulbLead[1] = $interpPoint_0(this.lead1, this.lead2, 1, br);
  this.bulb = $interpPoint(this.filament[0], this.filament[1], 0.5);
}
;
_.stamp = function stamp_24(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.startIteration = function startIteration_3(){
  var cap, capc, capw, cr, nom_r, tp;
  nom_r = this.nom_v * this.nom_v / this.nom_pow;
  tp = this.temp > 5390?5390:this.temp;
  this.resistance = nom_r * (1.26104 - 4.90662 * $wnd.Math.sqrt(17.1839 / tp - 0.00318794) - 7.8569 / (tp - 187.56));
  cap = 1.57E-4 * this.nom_pow;
  capw = cap * this.warmTime / 0.4;
  capc = cap * this.coolTime / 0.4;
  this.temp += (this.volts[0] - this.volts[1]) * this.current_0 * sim_0.timeStep / capw;
  cr = 2600 / this.nom_pow;
  this.temp -= sim_0.timeStep * (this.temp - 300) / (capc * cr);
}
;
_.bulbR = 0;
_.coolTime = 0;
_.nom_pow = 0;
_.nom_v = 0;
_.resistance = 0;
_.temp = 0;
_.warmTime = 0;
var Lcom_lushprojects_circuitjs1_client_LampElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LampElm', 273);
function $$init_11(this$static){
  this$static.lastLoad = false;
}

function LatchElm(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_11(this);
}

function LatchElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_11(this);
}

defineClass(299, 13, $intern_66, LatchElm, LatchElm_0);
_.execute_2 = function execute_31(){
  var i;
  if (this.pins[this.loadPin].value_0 && !this.lastLoad)
    for (i = 0; i != this.bits; i++)
      this.pins[i + this.bits].value_0 = this.pins[i].value_0;
  this.lastLoad = this.pins[this.loadPin].value_0;
}
;
_.getChipName = function getChipName_16(){
  return 'Latch';
}
;
_.getDumpType = function getDumpType_44(){
  return 168;
}
;
_.getPostCount = function getPostCount_30(){
  return this.bits * 2 + 1;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_27(){
  return this.bits;
}
;
_.needsBits = function needsBits_4(){
  return true;
}
;
_.setupPins = function setupPins_16(){
  var i;
  this.sizeX = 2;
  this.sizeY = this.bits + 1;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.bits * 2 + 1, 0, 1);
  for (i = 0; i != this.bits; i++)
    this.pins[i] = new ChipElm$Pin(this, this.bits - 1 - i, 2, 'I' + i);
  for (i = 0; i != this.bits; i++) {
    this.pins[i + this.bits] = new ChipElm$Pin(this, this.bits - 1 - i, 3, 'O');
    this.pins[i + this.bits].output = true;
  }
  this.pins[this.loadPin = this.bits * 2] = new ChipElm$Pin(this, this.bits, 2, 'Ld');
  $allocNodes(this);
}
;
_.lastLoad = false;
_.loadPin = 0;
var Lcom_lushprojects_circuitjs1_client_LatchElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LatchElm', 299);
function LoadFile(s){
  FileUpload.call(this, $createInputElement($doc, 'file'));
  ($clinit_DOM() , this.element).className = 'gwt-FileUpload';
  sim_3 = s;
  this.element.name = 'Import';
  this.element.id = 'LoadFileElement';
  $addDomHandler(this, this, ($clinit_ChangeEvent() , $clinit_ChangeEvent() , TYPE_0));
  setStyleName(this.element, 'offScreen', true);
}

function doLoad(){
  var oFiles = $doc.getElementById('LoadFileElement').files, nFiles = oFiles.length;
  if (nFiles >= 1 && oFiles[0].size < 32000) {
    var reader = new FileReader;
    reader.onload = function(e){
      var text_0 = reader.result;
      $pushUndo(sim_3);
      $readSetup(sim_3, text_0);
      $createNewLoadFile(sim_3);
    }
    ;
    reader.readAsText(oFiles[0]);
  }
}

function isSupported_1(){
  return !!($wnd.File && $wnd.FileReader);
}

defineClass(246, 245, {628:1, 62:1, 70:1, 74:1, 81:1, 58:1, 59:1, 63:1, 64:1, 66:1, 65:1, 67:1, 68:1, 69:1, 72:1, 73:1, 71:1, 75:1, 79:1, 77:1, 78:1, 76:1, 80:1, 85:1, 84:1, 83:1, 82:1, 27:1, 32:1, 23:1, 25:1, 21:1, 28:1, 60:1, 61:1, 18:1, 19:1}, LoadFile);
_.onChange = function onChange_0(e){
  doLoad();
}
;
var sim_3;
var Lcom_lushprojects_circuitjs1_client_LoadFile_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LoadFile', 246);
function $getEditInfo_4(this$static, n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Momentary Switch', this$static.momentary);
    return ei;
  }
  return null;
}

function $mouseUp(this$static){
  this$static.momentary && this$static.toggle();
}

function $setPoints_7(this$static){
  $setPoints(this$static);
  $calcLeads(this$static, 32);
  this$static.ps = new Point;
  this$static.ps2 = new Point;
}

function SwitchElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.momentary = false;
  this.position = 0;
  this.posCount = 2;
}

function SwitchElm_0(xa, ya, xb, yb, f, st){
  var str;
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  str = $nextToken(st);
  $compareTo(str, 'true') == 0?(this.position = instanceOf(this, 127)?0:1):$compareTo(str, 'false') == 0?(this.position = instanceOf(this, 127)?1:0):(this.position = (new Integer_0(str)).value_0);
  this.momentary = $booleanValue(($clinit_Boolean() , $equalsIgnoreCase('true', $nextToken(st))));
  this.posCount = 2;
}

function SwitchElm_1(xx, yy, mm){
  CircuitElm.call(this, xx, yy);
  this.position = mm?1:0;
  this.momentary = mm;
  this.posCount = 2;
}

defineClass(90, 4, $intern_90, SwitchElm, SwitchElm_0);
_.calculateCurrent = function calculateCurrent_8(){
  this.position == 1 && (this.current_0 = 0);
}
;
_.draw = function draw_29(g){
  var hs1, hs2;
  hs1 = this.position == 1?0:2;
  hs2 = this.position == 1?16:2;
  $setBbox_0(this, this.point1, this.point2, 16);
  $draw2Leads(this, g);
  this.position == 0 && (this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0) , sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0));
  this.iAmMouseElm || this.selected || sim_0.plotYElm == this || $setColor(g, whiteColor);
  $interpPoint_2(this.lead1, this.lead2, this.ps, 0, hs1);
  $interpPoint_2(this.lead1, this.lead2, this.ps2, 1, hs2);
  drawThickLine_0(g, this.ps, this.ps2);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_32(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.position + ' ' + this.momentary;
}
;
_.getConnection = function getConnection_13(n1, n2){
  return this.position == 0;
}
;
_.getDumpType = function getDumpType_45(){
  return 115;
}
;
_.getEditInfo = function getEditInfo_32(n){
  return $getEditInfo_4(this, n);
}
;
_.getInfo = function getInfo_29(arr){
  arr[0] = this.momentary?'push switch (SPST)':'switch (SPST)';
  if (this.position == 1) {
    arr[1] = 'open';
    arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.getVoltageDiff()), 'V', false);
  }
   else {
    arr[1] = 'closed';
    arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
    arr[3] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  }
}
;
_.getShortcut = function getShortcut_13(){
  return 115;
}
;
_.getSwitchRect = function getSwitchRect(){
  $interpPoint_2(this.lead1, this.lead2, this.ps, 0, 16);
  return $union($union(new Rectangle_1(this.lead1), new Rectangle_1(this.lead2)), new Rectangle_1(this.ps));
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_28(){
  return this.position == 1?0:1;
}
;
_.isWire = function isWire_2(){
  return true;
}
;
_.setEditValue = function setEditValue_30(n, ei){
  n == 0 && (this.momentary = $getState(ei.checkbox));
}
;
_.setPoints = function setPoints_26(){
  $setPoints_7(this);
}
;
_.stamp = function stamp_25(){
  this.position == 0 && $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[1], this.voltSource, 0);
}
;
_.toggle = function toggle(){
  ++this.position;
  this.position >= this.posCount && (this.position = 0);
}
;
_.momentary = false;
_.posCount = 0;
_.position = 0;
var Lcom_lushprojects_circuitjs1_client_SwitchElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SwitchElm', 90);
function $draw_1(this$static, g){
  var f, oldf, s;
  oldf = g.currentFont;
  f = new Font('SansSerif', 1, 20);
  $setFont_0(g, f);
  $setColor(g, this$static.iAmMouseElm || this$static.selected || sim_0.plotYElm == this$static?selectColor:whiteColor);
  s = this$static.position == 0?'Low':'H';
  (this$static.flags & 3) != 0 && (s = '' + this$static.position);
  $setBbox_0(this$static, this$static.point1, this$static.lead1, 0);
  $drawCenteredText(this$static, g, s, this$static.x2, this$static.y2, true);
  $setVoltageColor(this$static, g, this$static.volts[0]);
  drawThickLine_0(g, this$static.point1, this$static.lead1);
  this$static.curcount_0 = $updateDotCount(this$static.current_0, this$static.curcount_0);
  $drawDots(g, this$static.point1, this$static.lead1, this$static.curcount_0);
  $drawPosts(this$static, g);
  $setFont_0(g, oldf);
}

function $getEditInfo_5(this$static, n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, 0, 0);
    ei.checkbox = new Checkbox('Momentary Switch', this$static.momentary);
    return ei;
  }
  if (n == 1)
    return new EditInfo('High Voltage', this$static.hiV, 10, -10);
  if (n == 2)
    return new EditInfo('Low Voltage', this$static.loV, 10, -10);
  if (n == 3) {
    ei = new EditInfo('', 0, 0, 0);
    ei.checkbox = new Checkbox('Numeric', (this$static.flags & 3) != 0);
    return ei;
  }
  return null;
}

function $setEditValue_0(this$static, n, ei){
  n == 0 && (this$static.momentary = $getState(ei.checkbox));
  n == 1 && (this$static.hiV = ei.value_0);
  n == 2 && (this$static.loV = ei.value_0);
  n == 3 && ($getState(ei.checkbox)?(this$static.flags |= 2):(this$static.flags &= -3));
}

function LogicInputElm(xx, yy){
  SwitchElm_1.call(this, xx, yy, false);
  this.numHandles = 1;
  this.hiV = 5;
  this.loV = 0;
  this.flags |= 2;
}

function LogicInputElm_0(xa, ya, xb, yb, f, st){
  SwitchElm_0.call(this, xa, ya, xb, yb, f, st);
  this.numHandles = 1;
  try {
    this.hiV = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.loV = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 14)) {
      this.hiV = 5;
      this.loV = 0;
    }
     else 
      throw toJs($e0);
  }
  (this.flags & 1) != 0 && (this.posCount = 3);
  this.flags |= 2;
}

defineClass(127, 90, $intern_91, LogicInputElm, LogicInputElm_0);
_.draw = function draw_30(g){
  $draw_1(this, g);
}
;
_.dump_0 = function dump_33(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.position + ' ' + this.momentary + ' ' + this.hiV + ' ' + this.loV;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_11(xa, ya){
  return -this.current_0;
}
;
_.getDumpType = function getDumpType_46(){
  return 76;
}
;
_.getEditInfo = function getEditInfo_33(n){
  return $getEditInfo_5(this, n);
}
;
_.getInfo = function getInfo_30(arr){
  arr[0] = 'logic input';
  arr[1] = this.position == 0?'low':'high';
  (this.flags & 3) != 0 && (arr[1] = '' + this.position);
  arr[1] += ' (' + myGetUnitText(this.volts[0], 'V', false) + ')';
  arr[2] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
}
;
_.getPostCount = function getPostCount_31(){
  return 1;
}
;
_.getShortcut = function getShortcut_14(){
  return 73;
}
;
_.getSwitchRect = function getSwitchRect_0(){
  return new Rectangle_0(this.x2 - 10, this.y2 - 10, 20, 20);
}
;
_.getVoltageDiff = function getVoltageDiff_13(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_29(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_10(n1){
  return true;
}
;
_.setCurrent = function setCurrent_6(vs, c){
  this.current_0 = -c;
}
;
_.setEditValue = function setEditValue_31(n, ei){
  $setEditValue_0(this, n, ei);
}
;
_.setPoints = function setPoints_27(){
  $setPoints_7(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 12 / this.dn);
}
;
_.stamp = function stamp_26(){
  var v;
  v = this.position == 0?this.loV:this.hiV;
  (this.flags & 1) != 0 && (v = this.position * 2.5);
  $stampVoltageSource_0(sim_0, 0, this.nodes[0], this.voltSource, v);
}
;
_.hiV = 0;
_.loV = 0;
var Lcom_lushprojects_circuitjs1_client_LogicInputElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LogicInputElm', 127);
function LogicInputElm2(xx, yy){
  LogicInputElm.call(this, xx, yy);
  this.text_0 = 'in';
}

function LogicInputElm2_0(xa, ya, xb, yb, f, st){
  LogicInputElm_0.call(this, xa, ya, xb, yb, f, st);
  this.text_0 = unescape_0($nextToken(st));
}

defineClass(258, 127, $intern_91, LogicInputElm2, LogicInputElm2_0);
_.draw = function draw_31(g){
  var s;
  $draw_1(this, g);
  s = this.text_0;
  $drawValues(this, g, s, 4);
}
;
_.dump_0 = function dump_34(){
  return '1000 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.position + ' ' + this.momentary + ' ' + this.hiV + ' ' + this.loV + ' ' + escape_0(this.text_0);
}
;
_.getDumpType = function getDumpType_47(){
  return $intern_20;
}
;
_.getEditInfo = function getEditInfo_34(n){
  var ei;
  if (n >= 0 && n <= 3) {
    return $getEditInfo_5(this, n);
  }
  if (n == 4) {
    ei = new EditInfo('Text', 0, -1, -1);
    ei.text_0 = this.text_0;
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_32(){
  return 1;
}
;
_.getShortcut = function getShortcut_15(){
  return 105;
}
;
_.setEditValue = function setEditValue_32(n, ei){
  $setEditValue_0(this, n, ei);
  n == 4 && (this.text_0 = $getText(ei.textf));
}
;
var Lcom_lushprojects_circuitjs1_client_LogicInputElm2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LogicInputElm2', 258);
function $draw_2(this$static, g){
  var f, oldf, s;
  oldf = g.currentFont;
  f = new Font('SansSerif', 1, 20);
  $setFont_0(g, f);
  $setColor(g, lightGrayColor);
  s = this$static.volts[0] < this$static.threshold?'L':'H';
  (this$static.flags & 1) != 0?this$static.volts[0] > 3.75?(s = '2'):this$static.volts[0] > 1.25?(s = '1'):(s = '0'):(this$static.flags & 3) != 0 && (s = this$static.volts[0] < this$static.threshold?'0':'1');
  this$static.value_0 = s;
  $setBbox_0(this$static, this$static.point1, this$static.lead1, 0);
  $drawCenteredText(this$static, g, s, this$static.x2, this$static.y2, true);
  $setVoltageColor(this$static, g, this$static.volts[0]);
  drawThickLine_0(g, this$static.point1, this$static.lead1);
  $drawPosts(this$static, g);
  $setFont_0(g, oldf);
}

function $getEditInfo_6(this$static, n){
  var ei;
  if (n == 0)
    return new EditInfo('Threshold', this$static.threshold, 10, -10);
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Current Required', (this$static.flags & 4) != 0);
    return ei;
  }
  if (n == 2) {
    ei = new EditInfo('', 0, 0, 0);
    ei.checkbox = new Checkbox('Numeric', (this$static.flags & 3) != 0);
    return ei;
  }
  return null;
}

function $setEditValue_1(this$static, n, ei){
  n == 0 && (this$static.threshold = ei.value_0);
  n == 1 && ($getState(ei.checkbox)?(this$static.flags = 4):(this$static.flags &= -5));
  n == 2 && ($getState(ei.checkbox)?(this$static.flags |= 2):(this$static.flags &= -3));
}

function LogicOutputElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.threshold = 2.5;
  this.flags |= 2;
}

function LogicOutputElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  try {
    this.threshold = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (instanceOf($e0, 14)) {
      this.threshold = 2.5;
    }
     else 
      throw toJs($e0);
  }
  this.flags |= 2;
}

defineClass(135, 4, $intern_92, LogicOutputElm, LogicOutputElm_0);
_.draw = function draw_32(g){
  $draw_2(this, g);
}
;
_.dump_0 = function dump_35(){
  var t;
  return t = this.getDumpType() , (t < 127?String.fromCharCode(t & $intern_9) + ' ':t + ' ') + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.threshold;
}
;
_.getDumpType = function getDumpType_48(){
  return 77;
}
;
_.getEditInfo = function getEditInfo_35(n){
  return $getEditInfo_6(this, n);
}
;
_.getInfo = function getInfo_31(arr){
  arr[0] = 'logic output';
  arr[1] = this.volts[0] < this.threshold?'low':'high';
  (this.flags & 3) != 0 && (arr[1] = this.value_0);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
}
;
_.getPostCount = function getPostCount_33(){
  return 1;
}
;
_.getShortcut = function getShortcut_16(){
  return 79;
}
;
_.getVoltageDiff = function getVoltageDiff_14(){
  return this.volts[0];
}
;
_.setEditValue = function setEditValue_33(n, ei){
  $setEditValue_1(this, n, ei);
}
;
_.setPoints = function setPoints_28(){
  $setPoints(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 12 / this.dn);
}
;
_.stamp = function stamp_27(){
  (this.flags & 4) != 0 && $stampResistor(sim_0, this.nodes[0], 0, $intern_65);
}
;
_.threshold = 0;
var Lcom_lushprojects_circuitjs1_client_LogicOutputElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LogicOutputElm', 135);
function LogicOutputElm2(xx, yy){
  LogicOutputElm.call(this, xx, yy);
  this.text_0 = 'out';
}

function LogicOutputElm2_0(xa, ya, xb, yb, f, st){
  LogicOutputElm_0.call(this, xa, ya, xb, yb, f, st);
  this.text_0 = unescape_0($nextToken(st));
}

defineClass(259, 135, $intern_92, LogicOutputElm2, LogicOutputElm2_0);
_.draw = function draw_33(g){
  var s;
  $draw_2(this, g);
  s = this.text_0;
  $drawValues(this, g, s, 4);
}
;
_.dump_0 = function dump_36(){
  return '1001 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.threshold + ' ' + escape_0(this.text_0);
}
;
_.getDumpType = function getDumpType_49(){
  return 1001;
}
;
_.getEditInfo = function getEditInfo_36(n){
  var ei;
  if (n >= 0 && n <= 2) {
    return $getEditInfo_6(this, n);
  }
  if (n == 3) {
    ei = new EditInfo('Text', 0, -1, -1);
    ei.text_0 = this.text_0;
    return ei;
  }
  return null;
}
;
_.getShortcut = function getShortcut_17(){
  return 111;
}
;
_.setEditValue = function setEditValue_34(n, ei){
  n >= 0 && n <= 2 && $setEditValue_1(this, n, ei);
  n == 3 && (this.text_0 = $getText(ei.textf));
}
;
var Lcom_lushprojects_circuitjs1_client_LogicOutputElm2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'LogicOutputElm2', 259);
function $clinit_Memoria(){
  $clinit_Memoria = emptyMethod;
  buffer_0 = initUnidimensionalArray(B_classLit, $intern_19, 9, 256, 15, 1);
  POS = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 2), $intern_3, 46, 0, [stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [0, 3, 1, 2]), stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [2, 0, 3, 1]), stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [1, 2, 0, 3]), stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [3, 1, 2, 0])]);
}

function $$init_12(this$static){
  this$static.endereco = 0;
  this$static.angulo = 0;
}

function $setupPins_6(this$static){
  var i, ie, im, iside, s;
  totalPinos == 0 && (totalPinos = 8);
  this$static.sizeX = totalPinos + 2;
  this$static.sizeY = totalPinos + 2;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 27, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, POS[this$static.angulo][2], 'W');
  this$static.pins[1] = new ChipElm$Pin(this$static, 4, POS[this$static.angulo][2], '');
  this$static.pins[1].clock = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, 9, POS[this$static.angulo][2], 'R');
  for (i = START_MEN_PIN_0; i < START_MEN_PIN_0 + totalPinos; i++) {
    iside = i - START_MEN_PIN_0 + 1;
    im = i + totalPinos;
    ie = im + totalPinos;
    s = $concat('Q', '' + (totalPinos - iside));
    this$static.pins[i] = new ChipElm$Pin(this$static, iside, POS[this$static.angulo][1], s);
    this$static.pins[i].output = true;
    s = $concat('M', '' + (totalPinos - iside));
    this$static.pins[im] = new ChipElm$Pin(this$static, iside, POS[this$static.angulo][3], s);
    s = $concat('E', '' + (totalPinos - iside));
    this$static.pins[ie] = new ChipElm$Pin(this$static, iside, POS[this$static.angulo][0], s);
  }
}

function Memoria(xx, yy){
  $clinit_Memoria();
  ChipElm.call(this, xx, yy);
  $$init_12(this);
  totalPinos = 8;
}

function Memoria_0(xa, ya, xb, yb, f, st){
  $clinit_Memoria();
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_12(this);
}

defineClass(264, 13, $intern_66, Memoria, Memoria_0);
_.draw = function draw_34(g){
  var f;
  $drawChip(this, g);
  f = new Font('SansSerif', 0, 14 * this.csize);
  $setFont_0(g, f);
  $drawString(g, 'Mem\xF3ria', this.rectPointsX[0] + round_int((this.sizeX * this.cspc2 / 10 | 0) * 3.3), this.rectPointsY[0] + (this.sizeY * this.cspc2 / 2 | 0));
}
;
_.execute_2 = function execute_32(){
  var data_0, i, i0, i1, i2, setBit;
  this.endereco = 0;
  for (i0 = 0; i0 < 8; i0++)
    this.endereco = this.endereco + (this.pins[START_MEN_PIN_0 + 16 + 7 - i0].value_0?round_int($wnd.Math.pow(2, i0)):0);
  data_0 = buffer_0[this.endereco];
  if (this.pins[1].value_0 && !this.lastClock) {
    if (this.pins[0].value_0) {
      for (i1 = 0; i1 < totalPinos; i1++) {
        setBit = this.pins[START_MEN_PIN_0 + totalPinos + i1].value_0;
        data_0 = setBit?(data_0 | 1 << i1) << 24 >> 24:(data_0 & ~(1 << i1)) << 24 >> 24;
      }
      buffer_0[this.endereco] = data_0;
    }
  }
  if (this.pins[2].value_0)
    for (i2 = 0; i2 < totalPinos; i2++)
      this.pins[START_MEN_PIN_0 + i2].value_0 = (data_0 & round_byte($wnd.Math.pow(2, i2))) != 0;
  else 
    for (i = 0; i < totalPinos; i++)
      this.pins[START_MEN_PIN_0 + i].value_0 = false;
  this.lastClock = this.pins[1].value_0;
}
;
_.getChipName = function getChipName_17(){
  return 'Mem\xF3ria de 256 endere\xE7os';
}
;
_.getDumpType = function getDumpType_50(){
  return 1003;
}
;
_.getEditInfo = function getEditInfo_37(n){
  var ei;
  if (n < 2)
    return $getEditInfo_0(this, n);
  if (n == 2) {
    ei = new EditInfo('Rota\xE7\xE3o', this.angulo, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, '0 ');
    $add_6(ei.choice, '90');
    $add_6(ei.choice, '180');
    $add_6(ei.choice, '240');
    $select(ei.choice, 0);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_34(){
  return 27;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_30(){
  return 8;
}
;
_.setEditValue = function setEditValue_35(n, ei){
  n < 2 && $setEditValue(this, n, ei);
  if (n == 2) {
    this.angulo = $getElement(ei.choice).selectedIndex;
    $setupPins_6(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_17(){
  $setupPins_6(this);
}
;
_.angulo = 0;
_.endereco = 0;
var POS, START_MEN_PIN_0 = 3, buffer_0, totalPinos = 8;
var Lcom_lushprojects_circuitjs1_client_Memoria_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Memoria', 264);
function MemristorElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.r_on = 100;
  this.r_off = 160 * this.r_on;
  this.dopeWidth = 0;
  this.totalWidth = $intern_88;
  this.mobility = 1.0E-10;
  this.resistance = 100;
}

function MemristorElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.r_on = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.r_off = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.dopeWidth = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.totalWidth = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.mobility = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  try {
    this.current_0 = __parseAndValidateDouble($nextToken(st));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.resistance = 100;
}

defineClass(269, 4, $intern_66, MemristorElm, MemristorElm_0);
_.calculateCurrent = function calculateCurrent_9(){
  this.current_0 = (this.volts[0] - this.volts[1]) / this.resistance;
}
;
_.canShowValueInScope = function canShowValueInScope_1(x_0){
  return x_0 == 2;
}
;
_.doStep = function doStep_24(){
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.resistance);
}
;
_.draw = function draw_35(g){
  var hs, i, nx, ox, v, v1, v2;
  ox = 0;
  v1 = this.volts[0];
  v2 = this.volts[1];
  hs = 2 + round_int(8 * (1 - this.dopeWidth / this.totalWidth));
  $setBbox_0(this, this.point1, this.point2, hs);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  for (i = 0; i <= 6; i++) {
    nx = (i & 1) == 0?1:-1;
    i == 6 && (nx = 0);
    v = v1 + (v2 - v1) * i / 6;
    $setColor(g, $getVoltageColor(this, g, v));
    $interpPoint_2(this.lead1, this.lead2, ps1, i * $intern_89, hs * ox);
    $interpPoint_2(this.lead1, this.lead2, ps2, i * $intern_89, hs * nx);
    drawThickLine_0(g, ps1, ps2);
    if (i == 6)
      break;
    $interpPoint_2(this.lead1, this.lead2, ps1, (i + 1) * $intern_89, hs * nx);
    drawThickLine_0(g, ps1, ps2);
    ox = nx;
  }
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_37(){
  return 'm ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.r_on + ' ' + this.r_off + ' ' + this.dopeWidth + ' ' + this.totalWidth + ' ' + this.mobility + ' ' + this.current_0;
}
;
_.getDumpType = function getDumpType_51(){
  return 109;
}
;
_.getEditInfo = function getEditInfo_38(n){
  if (n == 0)
    return new EditInfo('Max Resistance (ohms)', this.r_on, 0, 0);
  if (n == 1)
    return new EditInfo('Min Resistance (ohms)', this.r_off, 0, 0);
  if (n == 2)
    return new EditInfo('Width of Doped Region (nm)', this.dopeWidth * $intern_63, 0, 0);
  if (n == 3)
    return new EditInfo('Total Width (nm)', this.totalWidth * $intern_63, 0, 0);
  if (n == 4)
    return new EditInfo('Mobility (um^2/(s*V))', this.mobility * $intern_61, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_32(arr){
  arr[0] = 'memristor';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'R = ' + myGetUnitText(this.resistance, ohmString, false);
  arr[4] = 'P = ' + myGetUnitText((this.volts[0] - this.volts[1]) * this.current_0, 'W', false);
}
;
_.getScopeUnits = function getScopeUnits_1(x_0){
  return x_0 == 2?3:x_0 == 3?1:x_0 == 1?2:0;
}
;
_.getScopeValue = function getScopeValue_1(x_0){
  return x_0 == 2?this.resistance:x_0 == 3?this.current_0:x_0 == 1?(this.volts[0] - this.volts[1]) * this.current_0:this.volts[0] - this.volts[1];
}
;
_.nonLinear = function nonLinear_8(){
  return true;
}
;
_.reset_0 = function reset_16(){
  this.dopeWidth = 0;
}
;
_.setEditValue = function setEditValue_36(n, ei){
  n == 0 && (this.r_on = ei.value_0);
  n == 1 && (this.r_off = ei.value_0);
  n == 2 && (this.dopeWidth = ei.value_0 * $intern_60);
  n == 3 && (this.totalWidth = ei.value_0 * $intern_60);
  n == 4 && (this.mobility = ei.value_0 * 1.0E-12);
}
;
_.setPoints = function setPoints_29(){
  $setPoints(this);
  $calcLeads(this, 32);
  new Point;
  new Point;
}
;
_.stamp = function stamp_28(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.startIteration = function startIteration_4(){
  var wd;
  wd = this.dopeWidth / this.totalWidth;
  this.dopeWidth += sim_0.timeStep * this.mobility * this.r_on * this.current_0 / this.totalWidth;
  this.dopeWidth < 0 && (this.dopeWidth = 0);
  this.dopeWidth > this.totalWidth && (this.dopeWidth = this.totalWidth);
  this.resistance = this.r_on * wd + this.r_off * (1 - wd);
}
;
_.dopeWidth = 0;
_.mobility = 0;
_.r_off = 0;
_.r_on = 0;
_.resistance = 0;
_.totalWidth = 0;
var Lcom_lushprojects_circuitjs1_client_MemristorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MemristorElm', 269);
function $$init_13(this$static){
  this$static.prevInputValue = false;
  this$static.retriggerable = false;
  this$static.triggered = false;
  this$static.lastRisingEdge = 0;
  this$static.delay = $intern_29;
}

function MonostableElm(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_13(this);
}

function MonostableElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_13(this);
  this.retriggerable = $booleanValue(($clinit_Boolean() , $equalsIgnoreCase('true', $nextToken(st))));
  this.delay = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(308, 13, $intern_66, MonostableElm, MonostableElm_0);
_.dump_0 = function dump_38(){
  return $dump(this) + ' ' + this.retriggerable + ' ' + this.delay;
}
;
_.execute_2 = function execute_33(){
  if (this.pins[0].value_0 && this.prevInputValue != this.pins[0].value_0 && (this.retriggerable || !this.triggered)) {
    this.lastRisingEdge = sim_0.t;
    this.pins[1].value_0 = true;
    this.pins[2].value_0 = false;
    this.triggered = true;
  }
  if (this.triggered && sim_0.t > this.lastRisingEdge + this.delay) {
    this.pins[1].value_0 = false;
    this.pins[2].value_0 = true;
    this.triggered = false;
  }
  this.prevInputValue = this.pins[0].value_0;
}
;
_.getChipName = function getChipName_18(){
  return 'Monostable';
}
;
_.getDumpType = function getDumpType_52(){
  return 194;
}
;
_.getEditInfo = function getEditInfo_39(n){
  var ei;
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Retriggerable', this.retriggerable);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('Period (s)', this.delay, $intern_64, 0.1);
    return ei;
  }
  return $getEditInfo_0(this, n);
}
;
_.getPostCount = function getPostCount_35(){
  return 3;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_31(){
  return 2;
}
;
_.setEditValue = function setEditValue_37(n, ei){
  n == 2 && (this.retriggerable = $getState(ei.checkbox));
  n == 3 && (this.delay = ei.value_0);
  $setEditValue(this, n, ei);
}
;
_.setupPins = function setupPins_18(){
  this.sizeX = 2;
  this.sizeY = 2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, '');
  this.pins[0].clock = true;
  this.pins[1] = new ChipElm$Pin(this, 0, 3, 'Q');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 1, 3, 'Q');
  this.pins[2].output = true;
  this.pins[2].lineOver = true;
}
;
_.delay = 0;
_.lastRisingEdge = 0;
_.prevInputValue = false;
_.retriggerable = false;
_.triggered = false;
var Lcom_lushprojects_circuitjs1_client_MonostableElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MonostableElm', 308);
function MultiplexerElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function MultiplexerElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(288, 13, $intern_66, MultiplexerElm, MultiplexerElm_0);
_.execute_2 = function execute_34(){
  var selectedvalue;
  selectedvalue = 0;
  this.pins[4].value_0 && ++selectedvalue;
  this.pins[5].value_0 && (selectedvalue += 2);
  this.pins[6].value_0 = this.pins[selectedvalue].value_0;
}
;
_.getChipName = function getChipName_19(){
  return 'Multiplexer';
}
;
_.getDumpType = function getDumpType_53(){
  return 184;
}
;
_.getPostCount = function getPostCount_36(){
  return 7;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_32(){
  return 1;
}
;
_.setupPins = function setupPins_19(){
  this.sizeX = 3;
  this.sizeY = 5;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 7, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, 'I0');
  this.pins[1] = new ChipElm$Pin(this, 1, 2, 'I1');
  this.pins[2] = new ChipElm$Pin(this, 2, 2, 'I2');
  this.pins[3] = new ChipElm$Pin(this, 3, 2, 'I3');
  this.pins[4] = new ChipElm$Pin(this, 1, 1, 'S0');
  this.pins[5] = new ChipElm$Pin(this, 2, 1, 'S1');
  this.pins[6] = new ChipElm$Pin(this, 0, 3, 'Q');
  this.pins[6].output = true;
}
;
var Lcom_lushprojects_circuitjs1_client_MultiplexerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MultiplexerElm', 288);
function $$init_14(this$static){
  this$static.selectedvalue = 0;
}

function $execute_2(this$static){
  this$static.selectedvalue = 0;
  this$static.pins[8].value_0 && ++this$static.selectedvalue;
  this$static.pins[9].value_0 && (this$static.selectedvalue += 2);
  this$static.pins[10].value_0 && (this$static.selectedvalue += 4);
  this$static.pins[11].value_0 = this$static.pins[this$static.selectedvalue].value_0;
}

function MultiplexerElm8(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_14(this);
}

function MultiplexerElm8_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_14(this);
}

defineClass(289, 13, $intern_66, MultiplexerElm8, MultiplexerElm8_0);
_.doStep = function doStep_25(){
  var i, p, p0;
  for (i = 0; i != 12; i++) {
    p0 = this.pins[i];
    p0.output || (p0.value_0 = this.volts[i] > 2.5);
  }
  $execute_2(this);
  p = this.pins[11];
  $updateVoltageSource(sim_0, p.voltSource, this.volts[this.selectedvalue]);
}
;
_.execute_2 = function execute_35(){
  $execute_2(this);
}
;
_.getChipName = function getChipName_20(){
  return 'Multiplexador de 8 entradas de 8 Bits';
}
;
_.getDumpType = function getDumpType_54(){
  return 1006;
}
;
_.getPostCount = function getPostCount_37(){
  return 12;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_33(){
  return 1;
}
;
_.setupPins = function setupPins_20(){
  this.sizeX = 4;
  this.sizeY = 9;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 12, 0, 1);
  this.pins[7] = new ChipElm$Pin(this, 0, 2, 'I7');
  this.pins[6] = new ChipElm$Pin(this, 1, 2, 'I6');
  this.pins[5] = new ChipElm$Pin(this, 2, 2, 'I5');
  this.pins[4] = new ChipElm$Pin(this, 3, 2, 'I4');
  this.pins[3] = new ChipElm$Pin(this, 4, 2, 'I3');
  this.pins[2] = new ChipElm$Pin(this, 5, 2, 'I2');
  this.pins[1] = new ChipElm$Pin(this, 6, 2, 'I1');
  this.pins[0] = new ChipElm$Pin(this, 7, 2, 'I0');
  this.pins[8] = new ChipElm$Pin(this, 1, 1, 'E0');
  this.pins[9] = new ChipElm$Pin(this, 2, 1, 'E1');
  this.pins[10] = new ChipElm$Pin(this, 3, 1, 'E2');
  this.pins[11] = new ChipElm$Pin(this, 0, 3, 'O');
  this.pins[11].output = true;
}
;
_.selectedvalue = 0;
var Lcom_lushprojects_circuitjs1_client_MultiplexerElm8_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MultiplexerElm8', 289);
function MyCommand(name_0, item_0){
  this.menuName = name_0;
  this.itemName = item_0;
}

defineClass(16, 1, {}, MyCommand);
_.execute_0 = function execute_36(){
  $menuPerformed(mysim, this.menuName, this.itemName);
}
;
var Lcom_lushprojects_circuitjs1_client_MyCommand_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'MyCommand', 16);
function NDarlingtonElm(xx, yy){
  $clinit_DarlingtonElm();
  DarlingtonElm_0.call(this, xx, yy, false);
}

defineClass(497, 218, $intern_66, NDarlingtonElm);
var Lcom_lushprojects_circuitjs1_client_NDarlingtonElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NDarlingtonElm', 497);
function NJfetElm(xx, yy){
  JfetElm_0.call(this, xx, yy, false);
}

defineClass(493, 216, $intern_66, NJfetElm);
var Lcom_lushprojects_circuitjs1_client_NJfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NJfetElm', 493);
function NMosfetElm(xx, yy){
  MosfetElm_0.call(this, xx, yy, false);
}

defineClass(491, 166, $intern_66, NMosfetElm);
_.getShortcut = function getShortcut_18(){
  return 78;
}
;
var Lcom_lushprojects_circuitjs1_client_NMosfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NMosfetElm', 491);
function $limitStep_0(this$static, vnew, vold){
  var arg;
  if (vnew > this$static.vcrit && $wnd.Math.abs(vnew - vold) > $intern_82) {
    if (vold > 0) {
      arg = 1 + (vnew - vold) / $intern_83;
      arg > 0?(vnew = vold + $intern_83 * $wnd.Math.log(arg)):(vnew = this$static.vcrit);
    }
     else {
      vnew = $intern_83 * $wnd.Math.log(vnew / $intern_83);
    }
    sim_0.converged = false;
  }
  return vnew;
}

function $setPoints_8(this$static){
  var hs2, pt;
  $setPoints(this$static);
  (this$static.flags & 1) != 0 && (this$static.dsign = -this$static.dsign);
  hs2 = 16 * this$static.dsign * this$static.pnp;
  this$static.coll = $newPointArray(2);
  this$static.emit = $newPointArray(2);
  $interpPoint2(this$static.point1, this$static.point2, this$static.coll[0], this$static.emit[0], 1, hs2);
  this$static.rect = $newPointArray(4);
  $interpPoint2(this$static.point1, this$static.point2, this$static.rect[0], this$static.rect[1], 1 - 16 / this$static.dn, 16);
  $interpPoint2(this$static.point1, this$static.point2, this$static.rect[2], this$static.rect[3], 1 - 13 / this$static.dn, 16);
  $interpPoint2(this$static.point1, this$static.point2, this$static.coll[1], this$static.emit[1], 1 - 13 / this$static.dn, 6 * this$static.dsign * this$static.pnp);
  this$static.base = new Point;
  $interpPoint_1(this$static.point1, this$static.point2, this$static.base, 1 - 16 / this$static.dn);
  this$static.rectPoly = $createPolygon_0(this$static.rect[0], this$static.rect[2], this$static.rect[3], this$static.rect[1]);
  if (this$static.pnp == 1)
    this$static.arrowPoly = $calcArrow(this$static.emit[1], this$static.emit[0], 8, 4);
  else {
    pt = $interpPoint_0(this$static.point1, this$static.point2, 1 - 11 / this$static.dn, -5 * this$static.dsign * this$static.pnp);
    this$static.arrowPoly = $calcArrow(this$static.emit[0], pt, 8, 4);
  }
}

function $setup_1(this$static){
  this$static.vcrit = $intern_83 * $wnd.Math.log($intern_83 / ($wnd.Math.sqrt(2) * 1.0E-13));
  this$static.fgain = this$static.beta_0 / (this$static.beta_0 + 1);
  this$static.inv_fgain = 1 / this$static.fgain;
  this$static.noDiagonal = true;
}

function TransistorElm(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.pnp = (new Integer_0($nextToken(st))).value_0;
  this.beta_0 = 100;
  try {
    this.lastvbe = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.lastvbc = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.volts[0] = 0;
    this.volts[1] = -this.lastvbe;
    this.volts[2] = -this.lastvbc;
    this.beta_0 = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  $setup_1(this);
}

function TransistorElm_0(xx, yy, pnpflag){
  CircuitElm.call(this, xx, yy);
  this.pnp = pnpflag?-1:1;
  this.beta_0 = 100;
  $setup_1(this);
}

defineClass(109, 4, $intern_93, TransistorElm);
_.canViewInScope = function canViewInScope_2(){
  return true;
}
;
_.doStep = function doStep_26(){
  var expbc, expbe, gcc, gce, gec, gee, pcoef, vbc, vbe;
  vbc = this.volts[0] - this.volts[1];
  vbe = this.volts[0] - this.volts[2];
  ($wnd.Math.abs(vbc - this.lastvbc) > $intern_29 || $wnd.Math.abs(vbe - this.lastvbe) > $intern_29) && (sim_0.converged = false);
  this.gmin = 1.0E-15;
  if (sim_0.subIterations > 100) {
    this.gmin = $wnd.Math.exp(-9 * $wnd.Math.log(10) * (1 - sim_0.subIterations / 300));
    this.gmin > 0.1 && (this.gmin = 0.1);
  }
  vbc = this.pnp * $limitStep_0(this, this.pnp * vbc, this.pnp * this.lastvbc);
  vbe = this.pnp * $limitStep_0(this, this.pnp * vbe, this.pnp * this.lastvbe);
  this.lastvbc = vbc;
  this.lastvbe = vbe;
  pcoef = $intern_81 * this.pnp;
  expbc = $wnd.Math.exp(vbc * pcoef);
  expbe = $wnd.Math.exp(vbe * pcoef);
  this.ie = this.pnp * 1.0E-13 * (-this.inv_fgain * (expbe - 1) + (expbc - 1));
  this.ic = this.pnp * 1.0E-13 * (expbe - 1 - 2 * (expbc - 1));
  this.ib = -(this.ie + this.ic);
  gee = -3.866228494104001E-12 * expbe * this.inv_fgain;
  gec = 3.866228494104001E-12 * expbc;
  gce = -gee * this.fgain;
  gcc = -gec * 2;
  $stampMatrix(sim_0, this.nodes[0], this.nodes[0], -gee - gec - gce - gcc + this.gmin * 2);
  $stampMatrix(sim_0, this.nodes[0], this.nodes[1], gec + gcc - this.gmin);
  $stampMatrix(sim_0, this.nodes[0], this.nodes[2], gee + gce - this.gmin);
  $stampMatrix(sim_0, this.nodes[1], this.nodes[0], gce + gcc - this.gmin);
  $stampMatrix(sim_0, this.nodes[1], this.nodes[1], -gcc + this.gmin);
  $stampMatrix(sim_0, this.nodes[1], this.nodes[2], -gce);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[0], gee + gec - this.gmin);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[1], -gec);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[2], -gee + this.gmin);
  $stampRightSide_0(sim_0, this.nodes[0], -this.ib - (gec + gcc) * vbc - (gee + gce) * vbe);
  $stampRightSide_0(sim_0, this.nodes[1], -this.ic + gce * vbe + gcc * vbc);
  $stampRightSide_0(sim_0, this.nodes[2], -this.ie + gee * vbe + gec * vbc);
}
;
_.draw = function draw_36(g){
  var ds;
  $setBbox_0(this, this.point1, this.point2, 16);
  $setPowerColor_0(this, g);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.coll[0], this.coll[1]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.emit[0], this.emit[1]);
  $setColor(g, lightGrayColor);
  $fillPolygon(g, this.arrowPoly);
  $setVoltageColor(this, g, this.volts[0]);
  sim_0.powerCheckItem.on && $setColor(g, ($clinit_Color() , gray));
  drawThickLine_0(g, this.point1, this.base);
  this.curcount_b = $updateDotCount(-this.ib, this.curcount_b);
  $drawDots(g, this.base, this.point1, this.curcount_b);
  this.curcount_c = $updateDotCount(-this.ic, this.curcount_c);
  $drawDots(g, this.coll[1], this.coll[0], this.curcount_c);
  this.curcount_e = $updateDotCount(-this.ie, this.curcount_e);
  $drawDots(g, this.emit[1], this.emit[0], this.curcount_e);
  $setVoltageColor(this, g, this.volts[0]);
  $setPowerColor_0(this, g);
  $fillPolygon(g, this.rectPoly);
  if ((this.iAmMouseElm || this.selected || sim_0.plotYElm == this || sim_0.dragElm == this) && this.dy == 0) {
    $setColor(g, ($clinit_Color() , white));
    ds = sign(this.dx);
    $drawString(g, 'B', this.base.x_0 - 10 * ds, this.base.y_0 - 5);
    $drawString(g, 'C', this.coll[0].x_0 - 3 + 9 * ds, this.coll[0].y_0 + 4);
    $drawString(g, 'E', this.emit[0].x_0 - 3 + 9 * ds, this.emit[0].y_0 + 4);
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_39(){
  return 't ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.pnp + ' ' + (this.volts[0] - this.volts[1]) + ' ' + (this.volts[0] - this.volts[2]) + ' ' + this.beta_0;
}
;
_.getCurrentIntoNode = function getCurrentIntoNode_3(n){
  if (n == 0)
    return -this.ib;
  if (n == 1)
    return -this.ic;
  return -this.ie;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_12(xa, ya){
  if (xa == this.x_0 && ya == this.y_0)
    return -this.ib;
  if (xa == this.coll[0].x_0 && ya == this.coll[0].y_0)
    return -this.ic;
  return -this.ie;
}
;
_.getDumpType = function getDumpType_55(){
  return 116;
}
;
_.getEditInfo = function getEditInfo_40(n){
  var ei;
  if (n == 0)
    return $setDimensionless(new EditInfo('Beta/hFE', this.beta_0, 10, $intern_20));
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Swap E/C', (this.flags & 1) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_33(arr){
  var sm, vbc, vbe, vce;
  arr[0] = (sm = castToString($getStringValue(localizationMap, 'transistor')) , (sm != null?sm:'transistor') + ' (' + (this.pnp == -1?'PNP)':'NPN)') + ' beta=' + $format_0(showFormat, this.beta_0));
  vbc = this.volts[0] - this.volts[1];
  vbe = this.volts[0] - this.volts[2];
  vce = this.volts[1] - this.volts[2];
  vbc * this.pnp > 0.2?(arr[1] = vbe * this.pnp > 0.2?'saturation':'reverse active'):(arr[1] = vbe * this.pnp > 0.2?'fwd active':'cutoff');
  arr[1] = LS(arr[1]);
  arr[2] = 'Ic = ' + myGetUnitText(this.ic, 'A', false);
  arr[3] = 'Ib = ' + myGetUnitText(this.ib, 'A', false);
  arr[4] = 'Vbe = ' + myGetUnitText(vbe, 'V', false);
  arr[5] = 'Vbc = ' + myGetUnitText(vbc, 'V', false);
  arr[6] = 'Vce = ' + myGetUnitText(vce, 'V', false);
}
;
_.getPost = function getPost_6(n){
  return n == 0?this.point1:n == 1?this.coll[0]:this.emit[0];
}
;
_.getPostCount = function getPostCount_38(){
  return 3;
}
;
_.getPower = function getPower_6(){
  return (this.volts[0] - this.volts[2]) * this.ib + (this.volts[1] - this.volts[2]) * this.ic;
}
;
_.getScopeText = function getScopeText_3(x_0){
  var sm, t;
  t = '';
  switch (x_0) {
    case 1:
      t = 'Ib';
      break;
    case 2:
      t = 'Ic';
      break;
    case 3:
      t = 'Ie';
      break;
    case 4:
      t = 'Vbe';
      break;
    case 5:
      t = 'Vbc';
      break;
    case 6:
      t = 'Vce';
  }
  return sm = castToString($getStringValue(localizationMap, 'transistor')) , (sm != null?sm:'transistor') + ', ' + t;
}
;
_.getScopeUnits = function getScopeUnits_2(x_0){
  switch (x_0) {
    case 1:
    case 2:
    case 3:
      return 1;
    default:return 0;
  }
}
;
_.getScopeValue = function getScopeValue_2(x_0){
  switch (x_0) {
    case 1:
      return this.ib;
    case 2:
      return this.ic;
    case 3:
      return this.ie;
    case 4:
      return this.volts[0] - this.volts[2];
    case 5:
      return this.volts[0] - this.volts[1];
    case 6:
      return this.volts[1] - this.volts[2];
  }
  return 0;
}
;
_.nonLinear = function nonLinear_9(){
  return true;
}
;
_.reset_0 = function reset_17(){
  this.volts[0] = this.volts[1] = this.volts[2] = 0;
  this.lastvbc = this.lastvbe = this.curcount_c = this.curcount_e = this.curcount_b = 0;
}
;
_.setEditValue = function setEditValue_38(n, ei){
  if (n == 0) {
    this.beta_0 = ei.value_0;
    $setup_1(this);
  }
  if (n == 1) {
    $getState(ei.checkbox)?(this.flags |= 1):(this.flags &= -2);
    $setPoints_8(this);
  }
}
;
_.setPoints = function setPoints_30(){
  $setPoints_8(this);
}
;
_.stamp = function stamp_29(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
}
;
_.stepFinished = function stepFinished_5(){
  ($wnd.Math.abs(this.ic) > $intern_61 || $wnd.Math.abs(this.ib) > $intern_61) && $stop(sim_0, 'max current exceeded', this);
}
;
_.beta_0 = 0;
_.curcount_b = 0;
_.curcount_c = 0;
_.curcount_e = 0;
_.fgain = 0;
_.gmin = 0;
_.ib = 0;
_.ic = 0;
_.ie = 0;
_.inv_fgain = 0;
_.lastvbc = 0;
_.lastvbe = 0;
_.pnp = 0;
_.vcrit = 0;
var Lcom_lushprojects_circuitjs1_client_TransistorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TransistorElm', 109);
function NTransistorElm(xx, yy){
  TransistorElm_0.call(this, xx, yy, false);
}

defineClass(482, 109, $intern_93, NTransistorElm);
_.getShortcut = function getShortcut_19(){
  return 110;
}
;
var Lcom_lushprojects_circuitjs1_client_NTransistorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NTransistorElm', 482);
function NandGateElm(xx, yy){
  AndGateElm.call(this, xx, yy);
}

function NandGateElm_0(xa, ya, xb, yb, f, st){
  AndGateElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(283, 193, $intern_66, NandGateElm, NandGateElm_0);
_.getDumpType = function getDumpType_56(){
  return 151;
}
;
_.getGateName = function getGateName_0(){
  return 'NAND gate';
}
;
_.getShortcut = function getShortcut_20(){
  return 64;
}
;
_.isInverting = function isInverting_0(){
  return true;
}
;
var Lcom_lushprojects_circuitjs1_client_NandGateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NandGateElm', 283);
function NoiseElm(xx, yy){
  RailElm_0.call(this, xx, yy, 1);
}

function NoiseElm_0(xa, ya, xb, yb, f, st){
  RailElm_1.call(this, xa, ya, xb, yb, f, st);
  this.waveform = 1;
}

defineClass(314, 38, $intern_70, NoiseElm, NoiseElm_0);
_.drawRail = function drawRail_1(g){
  var sm;
  $drawRailText(this, g, (sm = castToString($getStringValue(localizationMap, 'Noise')) , sm != null?sm:'Noise'));
}
;
_.getDumpType = function getDumpType_57(){
  return 110;
}
;
_.getEditInfo = function getEditInfo_41(n){
  if (n == 0)
    return $getEditInfo(this, 0);
  return null;
}
;
_.getShortcut = function getShortcut_21(){
  return 0;
}
;
_.getVoltage = function getVoltage_1(){
  return this.val_0;
}
;
_.stepFinished = function stepFinished_6(){
  this.val_0 = ($nextDouble(sim_0.random) * 2 - 1) * this.maxVoltage;
}
;
_.val_0 = 0;
var Lcom_lushprojects_circuitjs1_client_NoiseElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NoiseElm', 314);
function OrGateElm(xx, yy){
  GateElm.call(this, xx, yy);
}

function OrGateElm_0(xa, ya, xb, yb, f, st){
  GateElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(148, 192, $intern_66, OrGateElm, OrGateElm_0);
_.calcFunction = function calcFunction_0(){
  var f, i;
  f = false;
  for (i = 0; i != this.inputCount; i++)
    f = f | $getInput(this, i);
  return f;
}
;
_.getDumpType = function getDumpType_58(){
  return 152;
}
;
_.getGateName = function getGateName_1(){
  return 'OR gate';
}
;
_.getShortcut = function getShortcut_22(){
  return 51;
}
;
_.setPoints = function setPoints_31(){
  var a, b, i, triPoints, ww2;
  $setPoints_2(this);
  triPoints = $newPointArray(38);
  instanceOf(this, 167) && (this.linePoints = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, 5, 0, 1));
  for (i = 0; i != 16; i++) {
    a = i / 16;
    b = 1 - a * a;
    $interpPoint2(this.lead1, this.lead2, triPoints[i], triPoints[32 - i], 0.5 + a / 2, b * this.hs2);
  }
  ww2 = this.ww == 0?this.dn * 2:this.ww * 2;
  for (i = 0; i != 5; i++) {
    a = (i - 2) / 2;
    b = 4 * (1 - a * a) - 2;
    $interpPoint_2(this.lead1, this.lead2, triPoints[33 + i], b / ww2, a * this.hs2);
    instanceOf(this, 167) && (this.linePoints[i] = $interpPoint_0(this.lead1, this.lead2, (b - 5) / ww2, a * this.hs2));
  }
  triPoints[16] = new Point_1(this.lead2);
  if (this.isInverting()) {
    this.pcircle = $interpPoint(this.point1, this.point2, 0.5 + (this.ww + 4) / this.dn);
    this.lead2 = $interpPoint(this.point1, this.point2, 0.5 + (this.ww + 8) / this.dn);
  }
  this.gatePoly = $createPolygon_1(triPoints);
}
;
var Lcom_lushprojects_circuitjs1_client_OrGateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'OrGateElm', 148);
function NorGateElm(xx, yy){
  OrGateElm.call(this, xx, yy);
}

function NorGateElm_0(xa, ya, xb, yb, f, st){
  OrGateElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(284, 148, $intern_66, NorGateElm, NorGateElm_0);
_.getDumpType = function getDumpType_59(){
  return 153;
}
;
_.getGateName = function getGateName_2(){
  return 'NOR gate';
}
;
_.getShortcut = function getShortcut_23(){
  return 35;
}
;
_.isInverting = function isInverting_1(){
  return true;
}
;
var Lcom_lushprojects_circuitjs1_client_NorGateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'NorGateElm', 284);
function $clinit_OTAElm(){
  $clinit_OTAElm = emptyMethod;
  modelExternalNodes_1 = stampJavaTypeInfo(getClassLiteralForArray(I_classLit, 1), $intern_22, 9, 15, [7, 5, 15, 1, 13]);
}

function $$init_15(this$static){
  this$static.curCount0 = 0;
  this$static.curCount1 = 0;
  this$static.curCount2 = 0;
  this$static.curCount3 = 0;
  this$static.posVolt = 9;
  this$static.negVolt = -9;
}

function OTAElm(xx, yy){
  $clinit_OTAElm();
  CompositeElm_0.call(this, xx, yy, modelString_1, modelExternalNodes_1);
  $$init_15(this);
  this.noDiagonal = true;
  castTo($get_3(this.compElmList, 0), 38).maxVoltage = this.negVolt;
  castTo($get_3(this.compElmList, 1), 38).maxVoltage = this.posVolt;
}

function OTAElm_0(xa, ya, xb, yb, f, st){
  $clinit_OTAElm();
  CompositeElm.call(this, xa, ya, xb, yb, f, st, modelString_1, modelExternalNodes_1);
  $$init_15(this);
  this.noDiagonal = true;
  castTo($get_3(this.compElmList, 0), 38).maxVoltage = this.negVolt;
  castTo($get_3(this.compElmList, 1), 38).maxVoltage = this.posVolt;
}

defineClass(313, 150, $intern_66, OTAElm, OTAElm_0);
_.draw = function draw_37(g){
  $setBbox_0(this, this.point1, this.point2, 48);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.in1p[0], this.in1p[1]);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.in2p[0], this.in2p[1]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.in3p[0], this.in3p[1]);
  $setVoltageColor(this, g, this.volts[3]);
  drawThickLine_0(g, this.in4p[0], this.in4p[1]);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  $setPowerColor_0(this, g);
  drawThickPolygon(g, this.triangle);
  $fillPolygon(g, this.arrowPoly1);
  $fillPolygon(g, this.arrowPoly2);
  drawThickLine_0(g, this.bar1[0], this.bar1[1]);
  drawThickLine_0(g, this.bar2[0], this.bar2[1]);
  drawThickCircle(g, this.circCent[0].x_0, this.circCent[0].y_0, 9);
  drawThickCircle(g, this.circCent[1].x_0, this.circCent[1].y_0, 9);
  $setFont_0(g, this.plusFont);
  $drawCenteredText(this, g, '+', this.textp[0].x_0, this.textp[0].y_0 - 2, true);
  $drawCenteredText(this, g, '-', this.textp[1].x_0, this.textp[1].y_0, true);
  this.curCount0 = $updateDotCount(-$getCurrentIntoNode(this, 0), this.curCount0);
  $drawDots(g, this.in1p[0], this.in1p[1], this.curCount0);
  this.curCount1 = $updateDotCount(-$getCurrentIntoNode(this, 1), this.curCount1);
  $drawDots(g, this.in2p[0], this.in2p[1], this.curCount0);
  this.curCount2 = $updateDotCount(-$getCurrentIntoNode(this, 2), this.curCount2);
  $drawDots(g, this.in3p[0], this.in3p[1], this.curCount2);
  this.curCount3 = $updateDotCount(-$getCurrentIntoNode(this, 3), this.curCount3);
  $drawDots(g, this.in4p[0], this.in4p[1], this.curCount3);
  $drawPosts(this, g);
}
;
_.getConnection_0 = function getConnection_14(n1, n2){
  return false;
}
;
_.getDumpType_0 = function getDumpType_60(){
  return 402;
}
;
_.getEditInfo = function getEditInfo_42(n){
  if (n == 0)
    return new EditInfo('Positive Supply Voltage (5-20V)', this.posVolt, 5, 20);
  if (n == 1)
    return new EditInfo('Negative Supply Voltage (V)', this.negVolt, -20, -5);
  return null;
}
;
_.getInfo = function getInfo_34(arr){
  arr[0] = 'OTA (LM13700 style)';
  arr[1] = 'Iabc = ' + myGetUnitText(-$getCurrentIntoNode(this, 3), 'A', false);
  arr[2] = 'V+ - V- = ' + myGetUnitText(this.volts[0] - this.volts[1], 'V', false);
}
;
_.reset_1 = function reset_18(){
  $reset_1(this);
  this.curCount0 = this.curCount1 = this.curCount2 = this.curCount3 = 0;
}
;
_.setEditValue = function setEditValue_39(n, ei){
  n == 0 && (this.posVolt = ei.value_0);
  n == 1 && (this.negVolt = ei.value_0);
  castTo($get_3(this.compElmList, 0), 38).maxVoltage = this.negVolt;
  castTo($get_3(this.compElmList, 1), 38).maxVoltage = this.posVolt;
}
;
_.setPoints = function setPoints_32(){
  var d1, d2, hs, tris;
  $setPoints(this);
  if (this.dn > 94) {
    this.lead1 = $interpPoint_0(this.point1, this.point2, 1 - 94 / this.dn, 0);
    this.lead2 = this.point2;
    this.point2bis = this.point2;
  }
   else {
    this.lead1 = this.point1;
    this.lead2 = $interpPoint_0(this.point1, this.point2, 94 / this.dn, 0);
    this.point2bis = this.lead2;
  }
  hs = 32 * this.dsign;
  this.in1p = $newPointArray(2);
  this.in2p = $newPointArray(2);
  this.in3p = $newPointArray(2);
  this.in4p = $newPointArray(2);
  this.textp = $newPointArray(2);
  this.bar1 = $newPointArray(2);
  this.bar2 = $newPointArray(2);
  this.circCent = $newPointArray(2);
  $interpPoint2(this.point1, this.point2bis, this.in1p[0], this.in2p[0], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.in1p[1], this.in2p[1], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.textp[0], this.textp[1], 0.1, hs);
  this.in3p[0] = this.point1;
  this.in3p[1] = this.lead1;
  this.in4p[0] = $interpPoint_0(this.lead1, this.lead2, $intern_94, 32);
  this.in4p[1] = $interpPoint_0(this.lead1, this.lead2, $intern_94, 8);
  tris = $newPointArray(3);
  $interpPoint2(this.lead1, this.lead2, tris[0], tris[1], 0, 3 * hs / 2 | 0);
  tris[2] = $interpPoint(this.lead1, this.lead2, 0.6808510638297872);
  this.triangle = $createPolygon(tris[0], tris[1], tris[2]);
  this.circCent[0] = $interpPoint_0(this.lead1, this.lead2, 0.898936170212766, 0);
  this.circCent[1] = $interpPoint_0(this.lead1, this.lead2, 0.7819148936170213, 0);
  d1 = $interpPoint(this.in3p[1], this.in1p[1], 0.3333);
  d2 = $interpPoint(this.in3p[1], this.in1p[1], 0.6666);
  this.arrowPoly1 = $calcArrow(d1, d2, 8, 4);
  $interpPoint2(d1, d2, this.bar1[0], this.bar1[1], 1, 4);
  d1 = $interpPoint(this.in3p[1], this.in2p[1], 0.3333);
  d2 = $interpPoint(this.in3p[1], this.in2p[1], 0.6666);
  this.arrowPoly2 = $calcArrow(d1, d2, 8, 4);
  $interpPoint2(d1, d2, this.bar2[0], this.bar2[1], 1, 4);
  this.plusFont = new Font('SansSerif', 0, 14);
  $setPost(this, 0, this.in1p[0]);
  $setPost(this, 1, this.in2p[0]);
  $setPost(this, 2, this.in3p[0]);
  $setPost(this, 3, this.in4p[0]);
  $setPost(this, 4, this.point2bis);
}
;
_.curCount0 = 0;
_.curCount1 = 0;
_.curCount2 = 0;
_.curCount3 = 0;
_.negVolt = 0;
_.posVolt = 0;
var modelExternalNodes_1, modelString_1 = 'RailElm 4\rRailElm 10\rNTransistorElm 1 2 3\rNTransistorElm 3 1 4\rNTransistorElm 3 3 4\rNTransistorElm 5 6 2\rNTransistorElm 7 8 2\rPTransistorElm 9 6 10\rPTransistorElm 9 9 10\rPTransistorElm 6 12 9\rPTransistorElm 11 8 10\rPTransistorElm 11 11 10\rPTransistorElm 8 13 11\rNTransistorElm 14 14 4\rNTransistorElm 14 12 4\rNTransistorElm 12 13 14\rNTransistorElm 15 15 5\rNTransistorElm 15 15 7';
var Lcom_lushprojects_circuitjs1_client_OTAElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'OTAElm', 313);
function $setSize_2(this$static, s){
  this$static.opsize = s;
  this$static.opheight = 8 * s;
  this$static.opwidth = 13 * s;
  this$static.flags = this$static.flags & -3 | (s == 1?2:0);
}

function OpAmpElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.noDiagonal = true;
  this.maxOut = 15;
  this.minOut = -15;
  this.gbw = $intern_65;
  $setSize_2(this, sim_0.smallGridCheckItem.on?1:2);
  this.gain = (this.flags & 4) != 0?$intern_20:$intern_87;
}

function OpAmpElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.maxOut = 15;
  this.minOut = -15;
  this.gbw = $intern_65;
  try {
    this.maxOut = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.minOut = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.gbw = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.volts[0] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.volts[1] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.noDiagonal = true;
  $setSize_2(this, (f & 2) != 0?1:2);
  this.gain = (this.flags & 4) != 0?$intern_20:$intern_87;
}

defineClass(215, 4, $intern_66, OpAmpElm, OpAmpElm_0);
_.doStep = function doStep_27(){
  var dx, vd, vn, x_0;
  vd = this.volts[1] - this.volts[0];
  $wnd.Math.abs(this.lastvd - vd) > 0.1?(sim_0.converged = false):(this.volts[2] > this.maxOut + 0.1 || this.volts[2] < this.minOut - 0.1) && (sim_0.converged = false);
  x_0 = 0;
  vn = sim_0.nodeList.arrayList.array.length + this.voltSource;
  if (vd >= this.maxOut / this.gain && (this.lastvd >= 0 || $getrand(sim_0) == 1)) {
    dx = $intern_85;
    x_0 = this.maxOut - $intern_85 * this.maxOut / this.gain;
  }
   else if (vd <= this.minOut / this.gain && (this.lastvd <= 0 || $getrand(sim_0) == 1)) {
    dx = $intern_85;
    x_0 = this.minOut - $intern_85 * this.minOut / this.gain;
  }
   else 
    dx = this.gain;
  $stampMatrix(sim_0, vn, this.nodes[0], dx);
  $stampMatrix(sim_0, vn, this.nodes[1], -dx);
  $stampMatrix(sim_0, vn, this.nodes[2], 1);
  $stampRightSide_0(sim_0, vn, x_0);
  this.lastvd = vd;
}
;
_.draw = function draw_38(g){
  $setBbox_0(this, this.point1, this.point2, this.opheight * 2);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.in1p[0], this.in1p[1]);
  $setVoltageColor(this, g, this.volts[1]);
  drawThickLine_0(g, this.in2p[0], this.in2p[1]);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.lead2, this.point2);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  $setPowerColor_0(this, g);
  drawThickPolygon(g, this.triangle);
  $setFont_0(g, this.plusFont);
  $drawCenteredText(this, g, '-', this.textp[0].x_0, this.textp[0].y_0 - 2, true);
  $drawCenteredText(this, g, '+', this.textp[1].x_0, this.textp[1].y_0, true);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.point2, this.lead2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_40(){
  return 'a ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.maxOut + ' ' + this.minOut + ' ' + this.gbw + ' ' + this.volts[0] + ' ' + this.volts[1];
}
;
_.getConnection = function getConnection_15(n1, n2){
  return false;
}
;
_.getCurrentIntoNode = function getCurrentIntoNode_4(n){
  if (n == 2)
    return -this.current_0;
  return 0;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_13(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return -this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_61(){
  return 97;
}
;
_.getEditInfo = function getEditInfo_43(n){
  if (n == 0)
    return new EditInfo('Max Output (V)', this.maxOut, 1, 20);
  if (n == 1)
    return new EditInfo('Min Output (V)', this.minOut, -20, 0);
  return null;
}
;
_.getInfo = function getInfo_35(arr){
  var vo;
  arr[0] = 'op-amp';
  arr[1] = 'V+ = ' + myGetUnitText(this.volts[1], 'V', false);
  arr[2] = 'V- = ' + myGetUnitText(this.volts[0], 'V', false);
  vo = $wnd.Math.max($wnd.Math.min(this.volts[2], this.maxOut), this.minOut);
  arr[3] = 'Vout = ' + myGetUnitText(vo, 'V', false);
  arr[4] = 'Iout = ' + myGetUnitText(-this.current_0, 'A', false);
  arr[5] = 'range = ' + myGetUnitText(this.minOut, 'V', false) + ' to ' + myGetUnitText(this.maxOut, 'V', false);
}
;
_.getPost = function getPost_7(n){
  return n == 0?this.in1p[0]:n == 1?this.in2p[0]:this.point2;
}
;
_.getPostCount = function getPostCount_39(){
  return 3;
}
;
_.getPower = function getPower_7(){
  return this.volts[2] * this.current_0;
}
;
_.getShortcut = function getShortcut_24(){
  return 97;
}
;
_.getVoltageDiff = function getVoltageDiff_15(){
  return this.volts[2] - this.volts[1];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_34(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_11(n1){
  return n1 == 2;
}
;
_.nonLinear = function nonLinear_10(){
  return true;
}
;
_.setEditValue = function setEditValue_40(n, ei){
  n == 0 && (this.maxOut = ei.value_0);
  n == 1 && (this.minOut = ei.value_0);
}
;
_.setPoints = function setPoints_33(){
  var hs, tris, ww;
  $setPoints(this);
  this.dn > 150 && this == sim_0.dragElm && $setSize_2(this, 2);
  ww = this.opwidth;
  ww > this.dn / 2 && (ww = round_int(this.dn / 2));
  $calcLeads(this, ww * 2);
  hs = this.opheight * this.dsign;
  (this.flags & 1) != 0 && (hs = -hs);
  this.in1p = $newPointArray(2);
  this.in2p = $newPointArray(2);
  this.textp = $newPointArray(2);
  $interpPoint2(this.point1, this.point2, this.in1p[0], this.in2p[0], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.in1p[1], this.in2p[1], 0, hs);
  $interpPoint2(this.lead1, this.lead2, this.textp[0], this.textp[1], 0.2, hs);
  tris = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, tris[0], tris[1], 0, hs * 2);
  this.triangle = $createPolygon(tris[0], tris[1], this.lead2);
  this.plusFont = new Font('SansSerif', 0, this.opsize == 2?14:10);
}
;
_.stamp = function stamp_30(){
  var vn;
  vn = sim_0.nodeList.arrayList.array.length + this.voltSource;
  $stampNonLinear(sim_0, vn);
  $stampMatrix(sim_0, this.nodes[2], vn, 1);
}
;
_.gain = 0;
_.gbw = 0;
_.lastvd = 0;
_.maxOut = 0;
_.minOut = 0;
_.opheight = 0;
_.opsize = 0;
_.opwidth = 0;
var Lcom_lushprojects_circuitjs1_client_OpAmpElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'OpAmpElm', 215);
function OpAmpSwapElm(xx, yy){
  OpAmpElm.call(this, xx, yy);
  this.flags |= 1;
}

defineClass(490, 215, $intern_66, OpAmpSwapElm);
_.getShortcut = function getShortcut_25(){
  return 65;
}
;
var Lcom_lushprojects_circuitjs1_client_OpAmpSwapElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'OpAmpSwapElm', 490);
function OutputElm(xx, yy){
  CircuitElm.call(this, xx, yy);
}

function OutputElm_0(xa, ya, xb, yb, f){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
}

defineClass(164, 4, {4:1, 8:1, 164:1}, OutputElm, OutputElm_0);
_.draw = function draw_39(g){
  var f, s, selected;
  selected = this.iAmMouseElm || this.selected || sim_0.plotYElm == this;
  f = new Font('SansSerif', selected?1:0, 14);
  $setFont_0(g, f);
  $setColor(g, selected?selectColor:whiteColor);
  s = (this.flags & 1) != 0?myGetUnitText(this.volts[0], 'V', false):'out';
  this == sim_0.plotXElm && (s = 'X');
  this == sim_0.plotYElm && (s = 'Y');
  $interpPoint_1(this.point1, this.point2, this.lead1, 1 - ((round_int($measureText(g.context, s).width) / 2 | 0) + 8) / this.dn);
  $setBbox_0(this, this.point1, this.lead1, 0);
  $drawCenteredText(this, g, s, this.x2, this.y2, true);
  $setVoltageColor(this, g, this.volts[0]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.point1, this.lead1);
  $drawPosts(this, g);
}
;
_.getDumpType = function getDumpType_62(){
  return 79;
}
;
_.getEditInfo = function getEditInfo_44(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Show Voltage', (this.flags & 1) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_36(arr){
  arr[0] = 'output';
  arr[1] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
}
;
_.getPostCount = function getPostCount_40(){
  return 1;
}
;
_.getVoltageDiff = function getVoltageDiff_16(){
  return this.volts[0];
}
;
_.setEditValue = function setEditValue_41(n, ei){
  n == 0 && (this.flags = $getState(ei.checkbox)?this.flags | 1:this.flags & -2);
}
;
_.setPoints = function setPoints_34(){
  $setPoints(this);
  this.lead1 = new Point;
}
;
var Lcom_lushprojects_circuitjs1_client_OutputElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'OutputElm', 164);
function PDarlingtonElm(xx, yy){
  $clinit_DarlingtonElm();
  DarlingtonElm_0.call(this, xx, yy, true);
}

defineClass(498, 218, $intern_66, PDarlingtonElm);
var Lcom_lushprojects_circuitjs1_client_PDarlingtonElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PDarlingtonElm', 498);
function PJfetElm(xx, yy){
  JfetElm_0.call(this, xx, yy, true);
}

defineClass(494, 216, $intern_66, PJfetElm);
var Lcom_lushprojects_circuitjs1_client_PJfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PJfetElm', 494);
function PMosfetElm(xx, yy){
  MosfetElm_0.call(this, xx, yy, true);
}

defineClass(492, 166, $intern_66, PMosfetElm);
_.getShortcut = function getShortcut_26(){
  return 80;
}
;
var Lcom_lushprojects_circuitjs1_client_PMosfetElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PMosfetElm', 492);
function PTransistorElm(xx, yy){
  TransistorElm_0.call(this, xx, yy, true);
}

defineClass(483, 109, $intern_93, PTransistorElm);
_.getShortcut = function getShortcut_27(){
  return 112;
}
;
var Lcom_lushprojects_circuitjs1_client_PTransistorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PTransistorElm', 483);
function PhaseCompElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function PhaseCompElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(294, 13, $intern_66, PhaseCompElm, PhaseCompElm_0);
_.doStep = function doStep_28(){
  var out, v1, v2, vn;
  v1 = this.volts[0] > 2.5;
  v2 = this.volts[1] > 2.5;
  v1 && !this.pins[0].value_0 && (this.ff1 = true);
  v2 && !this.pins[1].value_0 && (this.ff2 = true);
  this.ff1 && this.ff2 && (this.ff1 = this.ff2 = false);
  out = this.ff1?5:this.ff2?0:-1;
  if (out != -1)
    $stampVoltageSource_0(sim_0, 0, this.nodes[2], this.pins[2].voltSource, out);
  else {
    vn = sim_0.nodeList.arrayList.array.length + this.pins[2].voltSource;
    $stampMatrix(sim_0, vn, vn, 1);
  }
  this.pins[0].value_0 = v1;
  this.pins[1].value_0 = v2;
}
;
_.getChipName = function getChipName_21(){
  return 'phase comparator';
}
;
_.getDumpType = function getDumpType_63(){
  return 161;
}
;
_.getPostCount = function getPostCount_41(){
  return 3;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_35(){
  return 1;
}
;
_.nonLinear = function nonLinear_11(){
  return true;
}
;
_.setupPins = function setupPins_21(){
  this.sizeX = 2;
  this.sizeY = 2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, 'I1');
  this.pins[1] = new ChipElm$Pin(this, 1, 2, 'I2');
  this.pins[2] = new ChipElm$Pin(this, 0, 3, 'O');
  this.pins[2].output = true;
}
;
_.stamp = function stamp_31(){
  var vn;
  vn = sim_0.nodeList.arrayList.array.length + this.pins[2].voltSource;
  $stampNonLinear(sim_0, vn);
  $stampNonLinear(sim_0, 0);
  $stampNonLinear(sim_0, this.nodes[2]);
}
;
_.ff1 = false;
_.ff2 = false;
var Lcom_lushprojects_circuitjs1_client_PhaseCompElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PhaseCompElm', 294);
function $$init_16(this$static){
  this$static.data_0 = 0;
  this$static.clockstate = false;
  this$static.modestate = false;
}

function PisoShiftElm(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_16(this);
}

function PisoShiftElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_16(this);
}

defineClass(293, 13, $intern_66, PisoShiftElm, PisoShiftElm_0);
_.execute_2 = function execute_37(){
  if (this.pins[0].value_0 && !this.modestate) {
    this.modestate = true;
    this.data_0 = 0;
    this.pins[2].value_0 && (this.data_0 = this.data_0 + 128 << 16 >> 16);
    this.pins[3].value_0 && (this.data_0 = this.data_0 + 64 << 16 >> 16);
    this.pins[4].value_0 && (this.data_0 = this.data_0 + 32 << 16 >> 16);
    this.pins[5].value_0 && (this.data_0 = this.data_0 + 16 << 16 >> 16);
    this.pins[6].value_0 && (this.data_0 = this.data_0 + 8 << 16 >> 16);
    this.pins[7].value_0 && (this.data_0 = this.data_0 + 4 << 16 >> 16);
    this.pins[8].value_0 && (this.data_0 = this.data_0 + 2 << 16 >> 16);
    this.pins[9].value_0 && (this.data_0 = this.data_0 + 1 << 16 >> 16);
  }
   else if (this.pins[1].value_0 && !this.clockstate) {
    this.clockstate = true;
    (this.data_0 & 1) == 0?(this.pins[10].value_0 = false):(this.pins[10].value_0 = true);
    this.data_0 = this.data_0 >>> 1 << 24 >> 24;
  }
  this.pins[0].value_0 || (this.modestate = false);
  this.pins[1].value_0 || (this.clockstate = false);
}
;
_.getChipName = function getChipName_22(){
  return 'PISO shift register';
}
;
_.getDumpType = function getDumpType_64(){
  return 186;
}
;
_.getPostCount = function getPostCount_42(){
  return 11;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_36(){
  return 1;
}
;
_.setupPins = function setupPins_22(){
  this.sizeX = 10;
  this.sizeY = 3;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 11, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 1, 2, 'L');
  this.pins[1] = new ChipElm$Pin(this, 2, 2, '');
  this.pins[1].clock = true;
  this.pins[2] = new ChipElm$Pin(this, 1, 0, 'I7');
  this.pins[3] = new ChipElm$Pin(this, 2, 0, 'I6');
  this.pins[4] = new ChipElm$Pin(this, 3, 0, 'I5');
  this.pins[5] = new ChipElm$Pin(this, 4, 0, 'I4');
  this.pins[6] = new ChipElm$Pin(this, 5, 0, 'I3');
  this.pins[7] = new ChipElm$Pin(this, 6, 0, 'I2');
  this.pins[8] = new ChipElm$Pin(this, 7, 0, 'I1');
  this.pins[9] = new ChipElm$Pin(this, 8, 0, 'I0');
  this.pins[10] = new ChipElm$Pin(this, 1, 3, 'Q');
  this.pins[10].output = true;
}
;
_.clockstate = false;
_.data_0 = 0;
_.modestate = false;
var Lcom_lushprojects_circuitjs1_client_PisoShiftElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PisoShiftElm', 293);
function $equals(this$static, other){
  var result, that;
  result = false;
  if (instanceOf(other, 20)) {
    that = castTo(other, 20);
    result = this$static.x_0 == that.x_0 && this$static.y_0 == that.y_0;
  }
  return result;
}

function Point(){
  this.x_0 = 0;
  this.y_0 = 0;
}

function Point_0(i, j){
  this.x_0 = i;
  this.y_0 = j;
}

function Point_1(p){
  this.x_0 = p.x_0;
  this.y_0 = p.y_0;
}

defineClass(20, 1, {20:1}, Point, Point_0, Point_1);
_.equals_0 = function equals_5(other){
  return $equals(this, other);
}
;
_.hashCode_0 = function hashCode_7(){
  return 41 * (41 + this.x_0) + this.y_0;
}
;
_.toString_0 = function toString_11(){
  return 'Point(' + this.x_0 + ',' + this.y_0 + ')';
}
;
_.x_0 = 0;
_.y_0 = 0;
var Lcom_lushprojects_circuitjs1_client_Point_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Point', 20);
function PolarCapacitorElm(xx, yy){
  CapacitorElm.call(this, xx, yy);
  this.maxNegativeVoltage = 1;
}

function PolarCapacitorElm_0(xa, ya, xb, yb, f, st){
  CapacitorElm_0.call(this, xa, ya, xb, yb, f, st);
  this.maxNegativeVoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(252, 53, $intern_79, PolarCapacitorElm, PolarCapacitorElm_0);
_.draw = function draw_40(g){
  var w;
  $draw(this, g);
  $setColor(g, ($clinit_Color() , white));
  $setFont_0(g, unitsFont);
  w = round_int(g.context.measureText('+').width);
  $drawString(g, '+', this.plusPoint.x_0 - (w / 2 | 0), this.plusPoint.y_0);
}
;
_.dump_0 = function dump_41(){
  return '209 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.capacitance + ' ' + this.voltdiff + ' ' + this.maxNegativeVoltage;
}
;
_.getDumpType = function getDumpType_65(){
  return 209;
}
;
_.getEditInfo = function getEditInfo_45(n){
  if (n == 2)
    return new EditInfo('Max Reverse Voltage', this.maxNegativeVoltage, 0, 0);
  return $getEditInfo_1(this, n);
}
;
_.getInfo = function getInfo_37(arr){
  $getInfo_0(this, arr);
  arr[0] = 'capacitor (polarized)';
}
;
_.getShortcut = function getShortcut_28(){
  return 67;
}
;
_.setEditValue = function setEditValue_42(n, ei){
  n == 2 && ei.value_0 >= 0 && (this.maxNegativeVoltage = ei.value_0);
  n == 0 && ei.value_0 > 0 && (this.capacitance = ei.value_0);
  n == 1 && ($getState(ei.checkbox)?(this.flags &= -3):(this.flags |= 2));
}
;
_.setPoints = function setPoints_35(){
  var f, i, q;
  $setPoints_3(this);
  f = (this.dn / 2 - 4) / this.dn;
  this.platePoints = $newPointArray(8);
  for (i = 0; i <= 7; i++) {
    q = (i - 3.5) / 3.5;
    this.platePoints[i] = $interpPoint_0(this.plate2[0], this.plate2[1], i / 7, 5 * (1 - $wnd.Math.sqrt(1 - q * q)));
  }
  this.plusPoint = $interpPoint_0(this.point1, this.point2, f - 8 / this.dn, -10 * this.dsign);
  this.y2 > this.y_0 && (this.plusPoint.y_0 += 4);
  this.y_0 > this.y2 && (this.plusPoint.y_0 += 3);
}
;
_.stepFinished = function stepFinished_7(){
  this.volts[0] - this.volts[1] < 0 && this.volts[0] - this.volts[1] < -this.maxNegativeVoltage && $stop(sim_0, 'capacitor exceeded max reverse voltage', this);
}
;
_.maxNegativeVoltage = 0;
var Lcom_lushprojects_circuitjs1_client_PolarCapacitorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PolarCapacitorElm', 252);
function $addPoint(this$static, x_0, y_0){
  var newLength;
  if (this$static.npoints >= this$static.xpoints.length || this$static.npoints >= this$static.ypoints.length) {
    newLength = this$static.npoints * 2;
    newLength < 4?(newLength = 4):(newLength & newLength - 1) != 0 && (newLength = highestOneBit(newLength));
    this$static.xpoints = $expand(this$static.xpoints, newLength);
    this$static.ypoints = $expand(this$static.ypoints, newLength);
  }
  this$static.xpoints[this$static.npoints] = x_0;
  this$static.ypoints[this$static.npoints] = y_0;
  ++this$static.npoints;
}

function $expand(in_0, newlen){
  var i, out;
  out = initUnidimensionalArray(I_classLit, $intern_22, 9, newlen, 15, 1);
  for (i = 0; i < in_0.length; i++)
    out[i] = in_0[i];
  return out;
}

function Polygon(){
  this.xpoints = initUnidimensionalArray(I_classLit, $intern_22, 9, 4, 15, 1);
  this.ypoints = initUnidimensionalArray(I_classLit, $intern_22, 9, 4, 15, 1);
}

defineClass(196, 1, {}, Polygon);
_.npoints = 0;
var Lcom_lushprojects_circuitjs1_client_Polygon_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Polygon', 196);
function $createSlider(this$static){
  var value_0;
  $addWidgetToVerticalPanel(sim_0, this$static.label_0 = new Label_0(this$static.sliderText));
  $addStyleName(this$static.label_0, 'topSpace');
  value_0 = round_int(this$static.position * 100);
  $addWidgetToVerticalPanel(sim_0, this$static.slider = new Scrollbar_0(value_0, this$static, this$static));
}

function $execute_3(this$static){
  sim_0.analyzeFlag = true;
  $setPoints_9(this$static);
}

function $setPoints_9(this$static){
  var clen, myLen, offset, soff;
  $setPoints(this$static);
  offset = 0;
  if (abs_0(this$static.dx) > abs_0(this$static.dy)) {
    myLen = 2 * sim_0.gridSize * signum(this$static.dx) * ((valueOf($wnd.Math.abs(this$static.dx)).value_0 + 2 * sim_0.gridSize - 1) / (2 * sim_0.gridSize) | 0);
    this$static.point2.x_0 = this$static.point1.x_0 + myLen;
    offset = this$static.dx < 0?this$static.dy:-this$static.dy;
    this$static.point2.y_0 = this$static.point1.y_0;
  }
   else {
    myLen = 2 * sim_0.gridSize * signum(this$static.dy) * ((valueOf($wnd.Math.abs(this$static.dy)).value_0 + 2 * sim_0.gridSize - 1) / (2 * sim_0.gridSize) | 0);
    if (this$static.dy != 0) {
      this$static.point2.y_0 = this$static.point1.y_0 + myLen;
      offset = this$static.dy > 0?this$static.dx:-this$static.dx;
      this$static.point2.x_0 = this$static.point1.x_0;
    }
  }
  offset == 0 && (offset = sim_0.gridSize);
  this$static.dn = distance(this$static.point1, this$static.point2);
  $calcLeads(this$static, 32);
  this$static.position = this$static.slider.val_0 * 0.0099 + 0.005;
  soff = round_int((this$static.position - 0.5) * 32);
  this$static.post3 = $interpPoint_0(this$static.point1, this$static.point2, 0.5, offset);
  this$static.corner2 = $interpPoint_0(this$static.point1, this$static.point2, soff / this$static.dn + 0.5, offset);
  this$static.arrowPoint = $interpPoint_0(this$static.point1, this$static.point2, soff / this$static.dn + 0.5, 8 * (offset < 0?-1:offset == 0?0:1));
  this$static.midpoint = $interpPoint(this$static.point1, this$static.point2, soff / this$static.dn + 0.5);
  this$static.arrow1 = new Point;
  this$static.arrow2 = new Point;
  clen = (offset < 0?-offset:offset) - 8;
  $interpPoint2(this$static.corner2, this$static.arrowPoint, this$static.arrow1, this$static.arrow2, (clen - 8) / clen, 8);
  this$static.ps3 = new Point;
  this$static.ps4 = new Point;
}

function PotElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.maxResistance = $intern_20;
  this.position = 0.5;
  this.sliderText = 'Resistance';
  $createSlider(this);
}

function PotElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.maxResistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.position = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.sliderText = $nextToken(st);
  while ($hasMoreTokens(st))
    this.sliderText += ' ' + $nextToken(st);
  $createSlider(this);
}

defineClass(254, 4, {152:1, 32:1, 4:1, 8:1}, PotElm, PotElm_0);
_.calculateCurrent = function calculateCurrent_10(){
  if (this.resistance1 == 0)
    return;
  this.current1 = (this.volts[0] - this.volts[2]) / this.resistance1;
  this.current2 = (this.volts[1] - this.volts[2]) / this.resistance2;
  this.current3 = -this.current1 - this.current2;
}
;
_.delete_0 = function delete_3(){
  $removeWidgetFromVerticalPanel(sim_0, this.label_0);
  $removeWidgetFromVerticalPanel(sim_0, this.slider);
}
;
_.draw = function draw_41(g){
  var divide, hs, i, nx, ox, v, v1, v2, v3;
  ox = 0;
  hs = sim_0.euroResistorCheckItem.on?6:8;
  v1 = this.volts[0];
  v2 = this.volts[1];
  v3 = this.volts[2];
  $setBbox_0(this, this.point1, this.point2, hs);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  divide = round_int(16 * this.position);
  if (sim_0.euroResistorCheckItem.on) {
    $setColor(g, $getVoltageColor(this, g, v1));
    $interpPoint2(this.lead1, this.lead2, ps1, ps2, 0, hs);
    drawThickLine_0(g, ps1, ps2);
    for (i = 0; i != 16; i++) {
      v = v1 + (v3 - v1) * i / divide;
      i >= divide && (v = v3 + (v2 - v3) * (i - divide) / (16 - divide));
      $setColor(g, $getVoltageColor(this, g, v));
      $interpPoint2(this.lead1, this.lead2, ps1, ps2, i * $intern_95, hs);
      $interpPoint2(this.lead1, this.lead2, this.ps3, this.ps4, (i + 1) * $intern_95, hs);
      drawThickLine_0(g, ps1, this.ps3);
      drawThickLine_0(g, ps2, this.ps4);
    }
    $interpPoint2(this.lead1, this.lead2, ps1, ps2, 1, hs);
    drawThickLine_0(g, ps1, ps2);
  }
   else {
    for (i = 0; i != 16; i++) {
      switch (i & 3) {
        case 0:
          nx = 1;
          break;
        case 2:
          nx = -1;
          break;
        default:nx = 0;
      }
      v = v1 + (v3 - v1) * i / divide;
      i >= divide && (v = v3 + (v2 - v3) * (i - divide) / (16 - divide));
      $setColor(g, $getVoltageColor(this, g, v));
      $interpPoint_2(this.lead1, this.lead2, ps1, i * $intern_95, hs * ox);
      $interpPoint_2(this.lead1, this.lead2, ps2, (i + 1) * $intern_95, hs * nx);
      drawThickLine_0(g, ps1, ps2);
      ox = nx;
    }
  }
  $setColor(g, $getVoltageColor(this, g, v3));
  drawThickLine_0(g, this.post3, this.corner2);
  drawThickLine_0(g, this.corner2, this.arrowPoint);
  drawThickLine_0(g, this.arrow1, this.arrowPoint);
  drawThickLine_0(g, this.arrow2, this.arrowPoint);
  this.curcount1 = $updateDotCount(this.current1, this.curcount1);
  this.curcount2 = $updateDotCount(this.current2, this.curcount2);
  this.curcount3 = $updateDotCount(this.current3, this.curcount3);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.point1, this.midpoint, this.curcount1);
    $drawDots(g, this.point2, this.midpoint, this.curcount2);
    $drawDots(g, this.post3, this.corner2, this.curcount3);
    $drawDots(g, this.corner2, this.midpoint, this.curcount3 + distance(this.post3, this.corner2));
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_42(){
  return '174 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.maxResistance + ' ' + this.position + ' ' + this.sliderText;
}
;
_.execute_0 = function execute_38(){
  $execute_3(this);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_14(xa, ya){
  if (xa == this.point1.x_0 && ya == this.point1.y_0)
    return -this.current1;
  if (xa == this.point2.x_0 && ya == this.point2.y_0)
    return -this.current2;
  return -this.current3;
}
;
_.getDumpType = function getDumpType_66(){
  return 174;
}
;
_.getEditInfo = function getEditInfo_46(n){
  var ei;
  if (n == 0)
    return new EditInfo('Resistance (ohms)', this.maxResistance, 0, 0);
  if (n == 1) {
    ei = new EditInfo('Slider Text', 0, -1, -1);
    ei.text_0 = this.sliderText;
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_38(arr){
  arr[0] = 'potentiometer';
  arr[1] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[2] = 'R1 = ' + myGetUnitText(this.resistance1, ohmString, false);
  arr[3] = 'R2 = ' + myGetUnitText(this.resistance2, ohmString, false);
  arr[4] = 'I1 = ' + myGetUnitText($wnd.Math.abs(this.current1), 'A', false);
  arr[5] = 'I2 = ' + myGetUnitText($wnd.Math.abs(this.current2), 'A', false);
}
;
_.getPost = function getPost_8(n){
  return n == 0?this.point1:n == 1?this.point2:this.post3;
}
;
_.getPostCount = function getPostCount_43(){
  return 3;
}
;
_.onMouseWheel = function onMouseWheel_0(e){
  !!this.slider && $onMouseWheel_0(this.slider, e);
}
;
_.reset_0 = function reset_19(){
  this.curcount1 = this.curcount2 = this.curcount3 = 0;
  $reset(this);
}
;
_.setEditValue = function setEditValue_43(n, ei){
  n == 0 && (this.maxResistance = ei.value_0);
  if (n == 1) {
    this.sliderText = $getText(ei.textf);
    $setText_0(this.label_0, this.sliderText);
    $setiFrameHeight(sim_0);
  }
}
;
_.setMouseElm = function setMouseElm_0(v){
  this.iAmMouseElm = v;
  !!this.slider && $draw_4(this.slider);
}
;
_.setPoints = function setPoints_36(){
  $setPoints_9(this);
}
;
_.stamp = function stamp_32(){
  this.resistance1 = this.maxResistance * this.position;
  this.resistance2 = this.maxResistance * (1 - this.position);
  $stampResistor(sim_0, this.nodes[0], this.nodes[2], this.resistance1);
  $stampResistor(sim_0, this.nodes[2], this.nodes[1], this.resistance2);
}
;
_.curcount1 = 0;
_.curcount2 = 0;
_.curcount3 = 0;
_.current1 = 0;
_.current2 = 0;
_.current3 = 0;
_.maxResistance = 0;
_.position = 0;
_.resistance1 = 0;
_.resistance2 = 0;
var Lcom_lushprojects_circuitjs1_client_PotElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PotElm', 254);
function $$init_17(this$static){
  this$static.rmsV = 0;
  this$static.binaryLevel = 0;
  this$static.zerocount = 0;
  this$static.maxV = 0;
  this$static.minV = 0;
  this$static.frequency = 0;
  this$static.pulseWidth = 0;
  this$static.dutyCycle = 0;
  this$static.selectedValue = 0;
  this$static.increasingV = true;
  this$static.decreasingV = true;
}

function ProbeElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $$init_17(this);
  this.meter = 0;
  this.flags = 1;
}

function ProbeElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_17(this);
  this.meter = 0;
  try {
    this.meter = (new Integer_0($nextToken(st))).value_0;
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
}

defineClass(165, 4, {4:1, 8:1, 165:1}, ProbeElm, ProbeElm_0);
_.draw = function draw_42(g){
  var f, len, plusPoint, s, selected, w;
  $setBbox_0(this, this.point1, this.point2, 8);
  selected = this.iAmMouseElm || this.selected || sim_0.plotYElm == this;
  len = selected || sim_0.dragElm == this || (this.flags & 1) != 0?16:this.dn - 32;
  $calcLeads(this, round_int(len));
  $setVoltageColor(this, g, this.volts[0]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.point1, this.lead1);
  $setVoltageColor(this, g, this.volts[1]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.lead2, this.point2);
  f = new Font('SansSerif', 1, 14);
  $setFont_0(g, f);
  this == sim_0.plotXElm && $drawCenteredText(this, g, 'X', this.center.x_0, this.center.y_0, true);
  this == sim_0.plotYElm && $drawCenteredText(this, g, 'Y', this.center.x_0, this.center.y_0, true);
  if ((this.flags & 1) != 0) {
    s = '';
    switch (this.meter) {
      case 0:
        s = myGetUnitText(this.volts[0] - this.volts[1], 'V', false);
        break;
      case 1:
        s = myGetUnitText(this.rmsV, 'V(rms)', false);
        break;
      case 2:
        s = myGetUnitText(this.lastMaxV, 'Vpk', false);
        break;
      case 3:
        s = myGetUnitText(this.lastMinV, 'Vmin', false);
        break;
      case 4:
        s = myGetUnitText(this.lastMaxV - this.lastMinV, 'Vp2p', false);
        break;
      case 5:
        s = this.binaryLevel + '';
        break;
      case 6:
        s = myGetUnitText(this.frequency, 'Hz', false);
        break;
      case 8:
        s = myGetUnitText(this.pulseWidth, 'S', false);
        break;
      case 9:
        s = $format_0(showFormat, this.dutyCycle);
    }
    $drawValues(this, g, s, 4);
  }
  $setColor(g, ($clinit_Color() , white));
  $setFont_0(g, unitsFont);
  plusPoint = $interpPoint_0(this.point1, this.point2, (this.dn / 2 - len / 2 - 4) / this.dn, -10 * this.dsign);
  this.y2 > this.y_0 && (plusPoint.y_0 += 4);
  this.y_0 > this.y2 && (plusPoint.y_0 += 3);
  w = round_int(g.context.measureText('+').width);
  $drawString(g, '+', plusPoint.x_0 - (w / 2 | 0), plusPoint.y_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_43(){
  return 'p ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.meter;
}
;
_.getConnection = function getConnection_16(n1, n2){
  return false;
}
;
_.getDumpType = function getDumpType_67(){
  return 112;
}
;
_.getEditInfo = function getEditInfo_47(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Show Value', (this.flags & 1) != 0);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('Value', this.selectedValue, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, 'Voltage');
    $add_6(ei.choice, 'RMS Voltage');
    $add_6(ei.choice, 'Max Voltage');
    $add_6(ei.choice, 'Min Voltage');
    $add_6(ei.choice, 'P2P Voltage');
    $add_6(ei.choice, 'Binary Value');
    $select(ei.choice, this.meter);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_39(arr){
  arr[0] = 'voltmeter';
  arr[1] = 'Vd = ' + myGetUnitText(this.volts[0] - this.volts[1], 'V', false);
}
;
_.setEditValue = function setEditValue_44(n, ei){
  n == 0 && ($getState(ei.checkbox)?(this.flags = 1):(this.flags &= -2));
  n == 1 && (this.meter = $getElement(ei.choice).selectedIndex);
}
;
_.setPoints = function setPoints_37(){
  $setPoints(this);
  this.center = $interpPoint(this.point1, this.point2, 0.5);
}
;
_.stepFinished = function stepFinished_8(){
  var v;
  ++this.count;
  v = this.volts[0] - this.volts[1];
  this.total += v * v;
  v < 2.5?(this.binaryLevel = 0):(this.binaryLevel = 1);
  if (v > this.maxV && this.increasingV) {
    this.maxV = v;
    this.increasingV = true;
    this.decreasingV = false;
  }
  if (v < this.maxV && this.increasingV) {
    this.lastMaxV = this.maxV;
    this.periodLength = ($clinit_System() , sub_1(fromDouble_0(Date.now()), this.periodStart));
    this.periodStart = fromDouble_0(Date.now());
    this.pulseWidth = toDouble_0(sub_1(fromDouble_0(Date.now()), this.pulseStart));
    this.dutyCycle = this.pulseWidth / toDouble_0(this.periodLength);
    this.minV = v;
    this.increasingV = false;
    this.decreasingV = true;
    this.total = this.total / this.count;
    this.rmsV = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsV) && (this.rmsV = 0);
    this.count = 0;
    this.total = 0;
  }
  if (v < this.minV && this.decreasingV) {
    this.minV = v;
    this.increasingV = false;
    this.decreasingV = true;
  }
  if (v > this.minV && this.decreasingV) {
    this.lastMinV = this.minV;
    this.pulseStart = ($clinit_System() , fromDouble_0(Date.now()));
    this.maxV = v;
    this.increasingV = true;
    this.decreasingV = false;
    this.total = this.total / this.count;
    this.rmsV = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsV) && (this.rmsV = 0);
    this.count = 0;
    this.total = 0;
  }
  if (v == 0) {
    ++this.zerocount;
    if (this.zerocount > 5) {
      this.total = 0;
      this.rmsV = 0;
      this.maxV = 0;
      this.minV = 0;
    }
  }
   else {
    this.zerocount = 0;
  }
}
;
_.binaryLevel = 0;
_.count = 0;
_.decreasingV = false;
_.dutyCycle = 0;
_.frequency = 0;
_.increasingV = false;
_.lastMaxV = 0;
_.lastMinV = 0;
_.maxV = 0;
_.meter = 0;
_.minV = 0;
_.periodLength = 0;
_.periodStart = 0;
_.pulseStart = 0;
_.pulseWidth = 0;
_.rmsV = 0;
_.selectedValue = 0;
_.total = 0;
_.zerocount = 0;
var Lcom_lushprojects_circuitjs1_client_ProbeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ProbeElm', 165);
function PushSwitchElm(xx, yy){
  SwitchElm_1.call(this, xx, yy, true);
}

defineClass(489, 90, $intern_90, PushSwitchElm);
_.getShortcut = function getShortcut_29(){
  return 0;
}
;
var Lcom_lushprojects_circuitjs1_client_PushSwitchElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'PushSwitchElm', 489);
function $getBooleanValue(this$static, key, def){
  var val;
  val = castToString($getStringValue(this$static.map_0, key));
  return val == null?def:val == '1' || $equalsIgnoreCase(val, 'true');
}

function QueryParameters(){
  var i, nameValues, pair, search;
  this.map_0 = new HashMap;
  search = $wnd.location.search;
  if (search != null && search.length > 0) {
    nameValues = $split_0(search.substr(1), '&');
    for (i = 0; i < nameValues.length; i++) {
      pair = $split_0(nameValues[i], '=');
      $putStringValue(this.map_0, pair[0], (throwIfNull('encodedURL', pair[1]) , decodeURI(pair[1])));
    }
  }
}

defineClass(387, 1, {}, QueryParameters);
var Lcom_lushprojects_circuitjs1_client_QueryParameters_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'QueryParameters', 387);
function $contains(this$static, X, Y){
  var h, w, x_0, y_0;
  w = this$static.width_0;
  h = this$static.height_0;
  if ((w | h) < 0) {
    return false;
  }
  x_0 = this$static.x_0;
  y_0 = this$static.y_0;
  if (X < x_0 || Y < y_0) {
    return false;
  }
  w += x_0;
  h += y_0;
  return (w < x_0 || w > X) && (h < y_0 || h > Y);
}

function $equals_0(this$static, obj){
  var r;
  if (instanceOf(obj, 45)) {
    r = castTo(obj, 45);
    return this$static.x_0 == r.x_0 && this$static.y_0 == r.y_0 && this$static.width_0 == r.width_0 && this$static.height_0 == r.height_0;
  }
  return this$static === obj;
}

function $intersects(this$static, r){
  var rh, rw, rx, ry, th, tw, tx, ty;
  tw = this$static.width_0;
  th = this$static.height_0;
  rw = r.width_0;
  rh = r.height_0;
  if (rw <= 0 || rh <= 0 || tw <= 0 || th <= 0) {
    return false;
  }
  tx = this$static.x_0;
  ty = this$static.y_0;
  rx = r.x_0;
  ry = r.y_0;
  rw += rx;
  rh += ry;
  tw += tx;
  th += ty;
  return (rw < rx || rw > tx) && (rh < ry || rh > ty) && (tw < tx || tw > rx) && (th < ty || th > ry);
}

function $setBounds(this$static, x_0, y_0, width_0, height){
  this$static.x_0 = x_0;
  this$static.y_0 = y_0;
  this$static.width_0 = width_0;
  this$static.height_0 = height;
}

function $translate_0(this$static, dx, dy){
  this$static.x_0 += dx;
  this$static.y_0 += dy;
}

function $union(this$static, r){
  var rx1, rx2, ry1, ry2, tx1, tx2, ty1, ty2;
  tx2 = this$static.width_0;
  ty2 = this$static.height_0;
  if (lt(or_0(tx2, ty2), 0)) {
    return new Rectangle_2(r);
  }
  rx2 = r.width_0;
  ry2 = r.height_0;
  if (lt(or_0(rx2, ry2), 0)) {
    return new Rectangle_2(this$static);
  }
  tx1 = this$static.x_0;
  ty1 = this$static.y_0;
  tx2 = add_2(tx2, tx1);
  ty2 = add_2(ty2, ty1);
  rx1 = r.x_0;
  ry1 = r.y_0;
  rx2 = add_2(rx2, rx1);
  ry2 = add_2(ry2, ry1);
  tx1 > rx1 && (tx1 = rx1);
  ty1 > ry1 && (ty1 = ry1);
  compare_0(tx2, rx2) < 0 && (tx2 = rx2);
  compare_0(ty2, ry2) < 0 && (ty2 = ry2);
  tx2 = sub_1(tx2, tx1);
  ty2 = sub_1(ty2, ty1);
  compare_0(tx2, $intern_0) > 0 && (tx2 = $intern_0);
  compare_0(ty2, $intern_0) > 0 && (ty2 = $intern_0);
  return new Rectangle_0(tx1, ty1, toInt(tx2), toInt(ty2));
}

function Rectangle(){
  this.x_0 = 0;
  this.y_0 = 0;
  this.width_0 = 0;
  this.height_0 = 0;
}

function Rectangle_0(x_0, y_0, width_0, height){
  this.x_0 = x_0;
  this.y_0 = y_0;
  this.width_0 = width_0;
  this.height_0 = height;
}

function Rectangle_1(pt){
  this.x_0 = pt.x_0;
  this.y_0 = pt.y_0;
  this.width_0 = 0;
  this.height_0 = 0;
}

function Rectangle_2(r){
  Rectangle_0.call(this, r.x_0, r.y_0, r.width_0, r.height_0);
}

defineClass(45, 1, {45:1}, Rectangle, Rectangle_0, Rectangle_1, Rectangle_2);
_.equals_0 = function equals_6(obj){
  return $equals_0(this, obj);
}
;
_.toString_0 = function toString_12(){
  return 'Rect(' + this.x_0 + ',' + this.y_0 + ',' + this.width_0 + ',' + this.height_0 + ')';
}
;
_.height_0 = 0;
_.width_0 = 0;
_.x_0 = 0;
_.y_0 = 0;
var Lcom_lushprojects_circuitjs1_client_Rectangle_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Rectangle', 45);
function $$init_18(this$static){
  this$static.data_0 = 126;
}

function $setupPins_7(this$static){
  var i, id_0, iside, s;
  this$static.totalPinos == 0 && (this$static.totalPinos = 8);
  this$static.sizeX = this$static.totalPinos + 3;
  this$static.sizeY = 3;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 3 + 2 * this$static.totalPinos, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'WR');
  this$static.pins[1] = new ChipElm$Pin(this$static, 1, 2, '');
  this$static.pins[1].clock = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, 2, 2, 'EN');
  for (i = START_MEN_PIN_1; i < START_MEN_PIN_1 + this$static.totalPinos; i++) {
    iside = i - START_MEN_PIN_1 + 2;
    id_0 = i + this$static.totalPinos;
    s = $concat('Q', '' + (this$static.totalPinos - iside + 1));
    this$static.pins[i] = new ChipElm$Pin(this$static, iside, 1, s);
    this$static.pins[i].output = true;
    s = $concat('D', '' + (this$static.totalPinos - iside + 1));
    this$static.pins[id_0] = new ChipElm$Pin(this$static, iside, 0, s);
  }
}

function Registrador(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_18(this);
  this.totalPinos = 8;
}

function Registrador_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_18(this);
}

defineClass(260, 13, $intern_66, Registrador, Registrador_0);
_.execute_2 = function execute_39(){
  var i, i0, i1, setBit;
  if (this.pins[1].value_0 && !this.lastClock) {
    if (this.pins[0].value_0)
      for (i0 = 0; i0 < this.totalPinos; i0++) {
        setBit = this.pins[START_MEN_PIN_1 + this.totalPinos + i0].value_0;
        this.data_0 = setBit?(this.data_0 | 1 << i0) << 24 >> 24:(this.data_0 & ~(1 << i0)) << 24 >> 24;
      }
  }
  if (this.pins[2].value_0)
    for (i1 = 0; i1 < this.totalPinos; i1++)
      this.pins[START_MEN_PIN_1 + i1].value_0 = (this.data_0 & round_byte($wnd.Math.pow(2, i1))) != 0;
  else 
    for (i = 0; i < this.totalPinos; i++)
      this.pins[START_MEN_PIN_1 + i].value_0 = false;
  this.lastClock = this.pins[1].value_0;
}
;
_.getChipName = function getChipName_23(){
  return 'Registrador de N bits';
}
;
_.getDumpType = function getDumpType_68(){
  return 1002;
}
;
_.getEditInfo = function getEditInfo_48(n){
  var choice, ei;
  if (n < 2)
    return $getEditInfo_0(this, n);
  if (n == 2) {
    choice = $wnd.Math.log(this.totalPinos) / $wnd.Math.log(2);
    ei = new EditInfo('Bits', choice, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, '4 Bits');
    $add_6(ei.choice, '8 Bits');
    $select(ei.choice, round_int(choice - 2));
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_44(){
  return 3 + 2 * this.totalPinos;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_37(){
  return this.totalPinos;
}
;
_.setEditValue = function setEditValue_45(n, ei){
  var choice;
  n < 2 && $setEditValue(this, n, ei);
  if (n == 2) {
    choice = $getElement(ei.choice).selectedIndex;
    this.totalPinos = round_int($wnd.Math.pow(2, choice + 1 + 1));
    $setupPins_7(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_23(){
  $setupPins_7(this);
}
;
_.data_0 = 0;
_.totalPinos = 0;
var START_MEN_PIN_1 = 3;
var Lcom_lushprojects_circuitjs1_client_Registrador_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Registrador', 260);
function $setPoints_10(this$static){
  var i, j, x_0;
  $setPoints(this$static);
  $setupPoles(this$static);
  $allocNodes(this$static);
  this$static.openhs = -this$static.dsign * 16;
  $calcLeads(this$static, 32);
  this$static.swposts = initMultidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, [$intern_3, $intern_59], [113, 20], 0, [this$static.poleCount, 3], 2);
  this$static.swpoles = initMultidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, [$intern_3, $intern_59], [113, 20], 0, [this$static.poleCount, 3], 2);
  for (i = 0; i != this$static.poleCount; i++) {
    for (j = 0; j != 3; j++) {
      setCheck(this$static.swposts[i], j, new Point);
      setCheck(this$static.swpoles[i], j, new Point);
    }
    $interpPoint_2(this$static.lead1, this$static.lead2, this$static.swpoles[i][0], 0, -this$static.openhs * 3 * i);
    $interpPoint_2(this$static.lead1, this$static.lead2, this$static.swpoles[i][1], 1, -this$static.openhs * 3 * i - this$static.openhs);
    $interpPoint_2(this$static.lead1, this$static.lead2, this$static.swpoles[i][2], 1, -this$static.openhs * 3 * i + this$static.openhs);
    $interpPoint_2(this$static.point1, this$static.point2, this$static.swposts[i][0], 0, -this$static.openhs * 3 * i);
    $interpPoint_2(this$static.point1, this$static.point2, this$static.swposts[i][1], 1, -this$static.openhs * 3 * i - this$static.openhs);
    $interpPoint_2(this$static.point1, this$static.point2, this$static.swposts[i][2], 1, -this$static.openhs * 3 * i + this$static.openhs);
  }
  this$static.coilPosts = $newPointArray(2);
  this$static.coilLeads = $newPointArray(2);
  this$static.ptSwitch = $newPointArray(this$static.poleCount);
  x_0 = (this$static.flags & 1) != 0?1:0;
  $interpPoint_2(this$static.point1, this$static.point2, this$static.coilPosts[0], x_0, this$static.openhs * 2);
  $interpPoint_2(this$static.point1, this$static.point2, this$static.coilPosts[1], x_0, this$static.openhs * 3);
  $interpPoint_2(this$static.point1, this$static.point2, this$static.coilLeads[0], 0.5, this$static.openhs * 2);
  $interpPoint_2(this$static.point1, this$static.point2, this$static.coilLeads[1], 0.5, this$static.openhs * 3);
  this$static.lines = $newPointArray(this$static.poleCount * 2);
}

function $setupPoles(this$static){
  this$static.nCoil1 = 3 * this$static.poleCount;
  this$static.nCoil2 = this$static.nCoil1 + 1;
  this$static.nCoil3 = this$static.nCoil1 + 2;
  if (this$static.switchCurrent == null || this$static.switchCurrent.length != this$static.poleCount) {
    this$static.switchCurrent = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.poleCount, 15, 1);
    this$static.switchCurCount = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.poleCount, 15, 1);
  }
}

function RelayElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.ind = new Inductor(sim_0);
  this.inductance = 0.2;
  $setup_0(this.ind, this.inductance, 0, 2);
  this.noDiagonal = true;
  this.onCurrent = 0.02;
  this.r_on = 0.05;
  this.r_off = $intern_65;
  this.coilR = 20;
  this.coilCurrent = this.coilCurCount = 0;
  this.poleCount = 1;
  $setupPoles(this);
}

function RelayElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.poleCount = (new Integer_0($nextToken(st))).value_0;
  this.inductance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.coilCurrent = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.r_on = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.r_off = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.onCurrent = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.coilR = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.noDiagonal = true;
  this.ind = new Inductor(sim_0);
  $setup_0(this.ind, this.inductance, this.coilCurrent, 2);
  $setupPoles(this);
}

defineClass(268, 4, $intern_66, RelayElm, RelayElm_0);
_.calculateCurrent = function calculateCurrent_11(){
  var p, voltdiff;
  voltdiff = this.volts[this.nCoil1] - this.volts[this.nCoil3];
  this.coilCurrent = $calculateCurrent_0(this.ind, voltdiff);
  for (p = 0; p != this.poleCount; p++) {
    this.i_position == 2?(this.switchCurrent[p] = 0):(this.switchCurrent[p] = (this.volts[p * 3] - this.volts[1 + p * 3 + this.i_position]) / this.r_on);
  }
}
;
_.doStep = function doStep_29(){
  var p;
  $doStep_0(this.ind);
  for (p = 0; p != this.poleCount * 3; p += 3) {
    $stampResistor(sim_0, this.nodes[p], this.nodes[1 + p], this.i_position == 0?this.r_on:this.r_off);
    $stampResistor(sim_0, this.nodes[p], this.nodes[2 + p], this.i_position == 1?this.r_on:this.r_off);
  }
}
;
_.draw = function draw_43(g){
  var i, p, po, x_0;
  for (i = 0; i != 2; i++) {
    $setVoltageColor(this, g, this.volts[this.nCoil1 + i]);
    drawThickLine_0(g, this.coilLeads[i], this.coilPosts[i]);
  }
  x_0 = (this.flags & 1) != 0?1:0;
  $setPowerColor(this, g, this.coilCurrent * (this.volts[this.nCoil1] - this.volts[this.nCoil2]));
  $drawCoil(this, g, this.dsign * 6, this.coilLeads[x_0], this.coilLeads[1 - x_0], this.volts[this.nCoil1 + x_0], this.volts[this.nCoil2 - x_0]);
  $setColor(g, ($clinit_Color() , darkGray));
  for (i = 0; i != this.poleCount; i++) {
    i == 0?$interpPoint_2(this.point1, this.point2, this.lines[0], 0.5, this.openhs * 2 + 5 * this.dsign):$interpPoint_2(this.point1, this.point2, this.lines[i * 2], 0.5, round_int(this.openhs * (-i * 3 + 3 - 0.5 + this.d_position)) + 5 * this.dsign);
    $interpPoint_2(this.point1, this.point2, this.lines[i * 2 + 1], 0.5, round_int(this.openhs * (-i * 3 - 0.5 + this.d_position)) - 5 * this.dsign);
    $drawLine(g, this.lines[i * 2].x_0, this.lines[i * 2].y_0, this.lines[i * 2 + 1].x_0, this.lines[i * 2 + 1].y_0);
  }
  for (p = 0; p != this.poleCount; p++) {
    po = p * 3;
    for (i = 0; i != 3; i++) {
      $setVoltageColor(this, g, this.volts[po + i]);
      drawThickLine_0(g, this.swposts[p][i], this.swpoles[p][i]);
    }
    $interpPoint_1(this.swpoles[p][1], this.swpoles[p][2], this.ptSwitch[p], this.d_position);
    $setColor(g, lightGray);
    drawThickLine_0(g, this.swpoles[p][0], this.ptSwitch[p]);
    this.switchCurCount[p] = $updateDotCount(this.switchCurrent[p], this.switchCurCount[p]);
    $drawDots(g, this.swposts[p][0], this.swpoles[p][0], this.switchCurCount[p]);
    this.i_position != 2 && $drawDots(g, this.swpoles[p][this.i_position + 1], this.swposts[p][this.i_position + 1], this.switchCurCount[p]);
  }
  this.coilCurCount = $updateDotCount(this.coilCurrent, this.coilCurCount);
  $drawDots(g, this.coilPosts[0], this.coilLeads[0], this.coilCurCount);
  $drawDots(g, this.coilLeads[0], this.coilLeads[1], this.coilCurCount);
  $drawDots(g, this.coilLeads[1], this.coilPosts[1], this.coilCurCount);
  $drawPosts(this, g);
  $setBbox_0(this, this.coilPosts[0], this.coilLeads[1], 0);
  $adjustBbox_0(this, this.swpoles[this.poleCount - 1][0], this.swposts[this.poleCount - 1][1]);
}
;
_.dump_0 = function dump_44(){
  return '178 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.poleCount + ' ' + this.inductance + ' ' + this.coilCurrent + ' ' + this.r_on + ' ' + this.r_off + ' ' + this.onCurrent + ' ' + this.coilR;
}
;
_.getConnection = function getConnection_17(n1, n2){
  return (n1 / 3 | 0) == (n2 / 3 | 0);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_15(xa, ya){
  var i;
  if (xa == this.coilPosts[0].x_0 && ya == this.coilPosts[0].y_0)
    return -this.coilCurrent;
  if (xa == this.coilPosts[1].x_0 && ya == this.coilPosts[1].y_0)
    return this.coilCurrent;
  for (i = 0; i != this.poleCount; i++) {
    if (xa == this.swposts[i][0].x_0 && ya == this.swposts[i][0].y_0)
      return -this.switchCurrent[i];
    if (this.i_position != 2 && xa == this.swposts[i][this.i_position + 1].x_0 && ya == this.swposts[i][this.i_position + 1].y_0)
      return this.switchCurrent[i];
  }
  return 0;
}
;
_.getDumpType = function getDumpType_69(){
  return 178;
}
;
_.getEditInfo = function getEditInfo_49(n){
  var ei;
  if (n == 0)
    return new EditInfo('Inductance (H)', this.inductance, 0, 0);
  if (n == 1)
    return new EditInfo('On Resistance (ohms)', this.r_on, 0, 0);
  if (n == 2)
    return new EditInfo('Off Resistance (ohms)', this.r_off, 0, 0);
  if (n == 3)
    return new EditInfo('On Current (A)', this.onCurrent, 0, 0);
  if (n == 4)
    return $setDimensionless(new EditInfo('Number of Poles', this.poleCount, 1, 4));
  if (n == 5)
    return new EditInfo('Coil Resistance (ohms)', this.coilR, 0, 0);
  if (n == 6) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Swap Coil Direction', (this.flags & 1) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_40(arr){
  var i, ln;
  arr[0] = this.i_position == 0?'relay (off)':this.i_position == 1?'relay (on)':'relay';
  ln = 1;
  for (i = 0; i != this.poleCount; i++)
    arr[ln++] = 'I' + (i + 1) + ' = ' + myGetUnitText($wnd.Math.abs(this.switchCurrent[i]), 'A', false);
  arr[ln++] = 'coil I = ' + myGetUnitText($wnd.Math.abs(this.coilCurrent), 'A', false);
  arr[ln++] = 'coil Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[this.nCoil1] - this.volts[this.nCoil2]), 'V', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_2(){
  return 1;
}
;
_.getPost = function getPost_9(n){
  if (n < 3 * this.poleCount)
    return this.swposts[n / 3 | 0][n % 3];
  return this.coilPosts[n - 3 * this.poleCount];
}
;
_.getPostCount = function getPostCount_45(){
  return 2 + this.poleCount * 3;
}
;
_.getShortcut = function getShortcut_30(){
  return 82;
}
;
_.nonLinear = function nonLinear_12(){
  return true;
}
;
_.reset_0 = function reset_20(){
  var i;
  $reset(this);
  $reset_2(this.ind);
  this.coilCurrent = this.coilCurCount = 0;
  for (i = 0; i != this.poleCount; i++)
    this.switchCurrent[i] = this.switchCurCount[i] = 0;
}
;
_.setEditValue = function setEditValue_46(n, ei){
  if (n == 0 && ei.value_0 > 0) {
    this.inductance = ei.value_0;
    $setup_0(this.ind, this.inductance, this.coilCurrent, 2);
  }
  n == 1 && ei.value_0 > 0 && (this.r_on = ei.value_0);
  n == 2 && ei.value_0 > 0 && (this.r_off = ei.value_0);
  n == 3 && ei.value_0 > 0 && (this.onCurrent = ei.value_0);
  if (n == 4 && ei.value_0 >= 1) {
    this.poleCount = round_int(ei.value_0);
    $setPoints_10(this);
  }
  n == 5 && ei.value_0 > 0 && (this.coilR = ei.value_0);
  if (n == 6) {
    $getState(ei.checkbox)?(this.flags |= 1):(this.flags &= -2);
    $setPoints_10(this);
  }
}
;
_.setPoints = function setPoints_38(){
  $setPoints_10(this);
}
;
_.stamp = function stamp_33(){
  var i;
  $stamp_0(this.ind, this.nodes[this.nCoil1], this.nodes[this.nCoil3]);
  $stampResistor(sim_0, this.nodes[this.nCoil3], this.nodes[this.nCoil2], this.coilR);
  for (i = 0; i != this.poleCount * 3; i++)
    $stampNonLinear(sim_0, this.nodes[i]);
}
;
_.startIteration = function startIteration_5(){
  var p, pmult;
  $startIteration(this.ind, this.volts[this.nCoil1] - this.volts[this.nCoil3]);
  pmult = $wnd.Math.sqrt(2.3);
  p = this.coilCurrent * pmult / this.onCurrent;
  this.d_position = $wnd.Math.abs(p * p) - 1.3;
  this.d_position < 0 && (this.d_position = 0);
  this.d_position > 1 && (this.d_position = 1);
  this.d_position < 0.1?(this.i_position = 0):this.d_position > 0.9?(this.i_position = 1):(this.i_position = 2);
}
;
_.coilCurCount = 0;
_.coilCurrent = 0;
_.coilR = 0;
_.d_position = 0;
_.i_position = 0;
_.inductance = 0;
_.nCoil1 = 0;
_.nCoil2 = 0;
_.nCoil3 = 0;
_.onCurrent = 0;
_.openhs = 0;
_.poleCount = 0;
_.r_off = 0;
_.r_on = 0;
var Lcom_lushprojects_circuitjs1_client_RelayElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'RelayElm', 268);
function ResistorElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.resistance = $intern_20;
}

function ResistorElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.resistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(92, 4, {4:1, 8:1, 92:1}, ResistorElm, ResistorElm_0);
_.calculateCurrent = function calculateCurrent_12(){
  this.current_0 = (this.volts[0] - this.volts[1]) / this.resistance;
}
;
_.draw = function draw_44(g){
  var grad, i, len, s, v1, v2;
  v1 = this.volts[0];
  v2 = this.volts[1];
  $setBbox_0(this, this.point1, this.point2, 6);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  len = distance(this.lead1, this.lead2);
  g.context.save();
  g.context.lineWidth = 3;
  $transform(g.context, (this.lead2.x_0 - this.lead1.x_0) / len, (this.lead2.y_0 - this.lead1.y_0) / len, -(this.lead2.y_0 - this.lead1.y_0) / len, (this.lead2.x_0 - this.lead1.x_0) / len, this.lead1.x_0, this.lead1.y_0);
  grad = $createLinearGradient(g.context, 0, 0, len, 0);
  $addColorStop(grad, 0, $getHexValue($getVoltageColor(this, g, v1)));
  $addColorStop(grad, 1, $getHexValue($getVoltageColor(this, g, v2)));
  $setStrokeStyleWeb(g.context, grad);
  if (sim_0.euroResistorCheckItem.on) {
    $strokeRect(g.context, 0, -6, len, 12);
  }
   else {
    g.context.beginPath();
    g.context.moveTo(0, 0);
    for (i = 0; i < 4; i++) {
      $lineTo(g.context, (1 + 4 * i) * len / 16, 6);
      $lineTo(g.context, (3 + 4 * i) * len / 16, -6);
    }
    $lineTo(g.context, len, 0);
    g.context.stroke();
  }
  g.context.restore();
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this.resistance, '', true);
    $drawValues(this, g, s, 6);
  }
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_45(){
  return 'r ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.resistance;
}
;
_.getDumpType = function getDumpType_70(){
  return 114;
}
;
_.getEditInfo = function getEditInfo_50(n){
  if (n == 0)
    return new EditInfo('Resistance (ohms)', this.resistance, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_41(arr){
  arr[0] = 'resistor';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'R = ' + myGetUnitText(this.resistance, ohmString, false);
  arr[4] = 'P = ' + myGetUnitText((this.volts[0] - this.volts[1]) * this.current_0, 'W', false);
}
;
_.getScopeText = function getScopeText_4(v){
  var sm;
  return sm = castToString($getStringValue(localizationMap, 'resistor')) , (sm != null?sm:'resistor') + ', ' + myGetUnitText(this.resistance, ohmString, false);
}
;
_.getShortcut = function getShortcut_31(){
  return 114;
}
;
_.setEditValue = function setEditValue_47(n, ei){
  ei.value_0 > 0 && (this.resistance = ei.value_0);
}
;
_.setPoints = function setPoints_39(){
  $setPoints(this);
  $calcLeads(this, 32);
  new Point;
  new Point;
}
;
_.stamp = function stamp_34(){
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.resistance);
}
;
_.resistance = 0;
var Lcom_lushprojects_circuitjs1_client_ResistorElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ResistorElm', 92);
function RowInfo(){
  this.type_0 = 0;
}

defineClass(207, 1, {207:1}, RowInfo);
_.dropRow = false;
_.lsChanges = false;
_.mapCol = 0;
_.mapRow = 0;
_.rsChanges = false;
_.type_0 = 0;
_.value_0 = 0;
var Lcom_lushprojects_circuitjs1_client_RowInfo_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'RowInfo', 207);
function $setDefaults(this$static){
  this$static.cresistance = 50;
  this$static.holdingI = 0.0082;
  this$static.triggerI = $intern_29;
}

function SCRElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $setDefaults(this);
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

function SCRElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $setDefaults(this);
  try {
    this.lastvac = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.lastvag = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.volts[0] = 0;
    this.volts[1] = -this.lastvac;
    this.volts[2] = -this.lastvag;
    this.triggerI = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.holdingI = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.cresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

defineClass(277, 4, $intern_66, SCRElm, SCRElm_0);
_.calculateCurrent = function calculateCurrent_13(){
  this.ic = (this.volts[1] - this.volts[2]) / this.cresistance;
  this.ia = (this.volts[0] - this.volts[3]) / this.aresistance;
  this.ig = -this.ic - this.ia;
}
;
_.doStep = function doStep_30(){
  var iamult, icmult, vac, vag;
  vac = this.volts[0] - this.volts[1];
  vag = this.volts[0] - this.volts[2];
  ($wnd.Math.abs(vac - this.lastvac) > $intern_29 || $wnd.Math.abs(vag - this.lastvag) > $intern_29) && (sim_0.converged = false);
  this.lastvac = vac;
  this.lastvag = vag;
  $doStep(this.diode, this.volts[3] - this.volts[2]);
  icmult = 1 / this.triggerI;
  iamult = 1 / this.holdingI - icmult;
  this.aresistance = -icmult * this.ic + this.ia * iamult > 1?0.0105:$intern_65;
  $stampResistor(sim_0, this.nodes[0], this.nodes[3], this.aresistance);
}
;
_.draw = function draw_45(g){
  var v1, v2;
  $setBbox_0(this, this.point1, this.point2, 8);
  $adjustBbox_0(this, this.gate[0], this.gate[1]);
  v1 = this.volts[0];
  v2 = this.volts[1];
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setColor(g, $getVoltageColor(this, g, v1));
  $fillPolygon(g, this.poly);
  $setColor(g, $getVoltageColor(this, g, v2));
  drawThickLine_0(g, this.cathode[0], this.cathode[1]);
  drawThickLine_0(g, this.lead2, this.gate[0]);
  drawThickLine_0(g, this.gate[0], this.gate[1]);
  this.curcount_a = $updateDotCount(this.ia, this.curcount_a);
  this.curcount_c = $updateDotCount(this.ic, this.curcount_c);
  this.curcount_g = $updateDotCount(this.ig, this.curcount_g);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.point1, this.lead2, this.curcount_a);
    $drawDots(g, this.point2, this.lead2, this.curcount_c);
    $drawDots(g, this.gate[1], this.gate[0], this.curcount_g);
    $drawDots(g, this.gate[0], this.lead2, this.curcount_g + distance(this.gate[1], this.gate[0]));
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_46(){
  return '177 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + (this.volts[0] - this.volts[1]) + ' ' + (this.volts[0] - this.volts[2]) + ' ' + this.triggerI + ' ' + this.holdingI + ' ' + this.cresistance;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_16(xa, ya){
  if (xa == this.point1.x_0 && ya == this.point1.y_0)
    return -this.ia;
  if (xa == this.point2.x_0 && ya == this.point2.y_0)
    return -this.ic;
  return -this.ig;
}
;
_.getDumpType = function getDumpType_71(){
  return 177;
}
;
_.getEditInfo = function getEditInfo_51(n){
  if (n == 0)
    return new EditInfo('Trigger Current (A)', this.triggerI, 0, 0);
  if (n == 1)
    return new EditInfo('Holding Current (A)', this.holdingI, 0, 0);
  if (n == 2)
    return new EditInfo('Gate-Cathode Resistance (ohms)', this.cresistance, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_42(arr){
  var vac, vag, vgc;
  arr[0] = 'SCR';
  vac = this.volts[0] - this.volts[1];
  vag = this.volts[0] - this.volts[2];
  vgc = this.volts[2] - this.volts[1];
  arr[1] = 'Ia = ' + myGetUnitText(this.ia, 'A', false);
  arr[2] = 'Ig = ' + myGetUnitText(this.ig, 'A', false);
  arr[3] = 'Vac = ' + myGetUnitText(vac, 'V', false);
  arr[4] = 'Vag = ' + myGetUnitText(vag, 'V', false);
  arr[5] = 'Vgc = ' + myGetUnitText(vgc, 'V', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_3(){
  return 1;
}
;
_.getPost = function getPost_10(n){
  return n == 0?this.point1:n == 1?this.point2:this.gate[1];
}
;
_.getPostCount = function getPostCount_46(){
  return 3;
}
;
_.getPower = function getPower_8(){
  return (this.volts[0] - this.volts[2]) * this.ia + (this.volts[1] - this.volts[2]) * this.ic;
}
;
_.nonLinear = function nonLinear_13(){
  return true;
}
;
_.reset_0 = function reset_21(){
  this.volts[0] = this.volts[1] = this.volts[2] = 0;
  this.diode.lastvoltdiff = 0;
  this.lastvag = this.lastvac = this.curcount_a = this.curcount_c = this.curcount_g = 0;
}
;
_.setEditValue = function setEditValue_48(n, ei){
  n == 0 && ei.value_0 > 0 && (this.triggerI = ei.value_0);
  n == 1 && ei.value_0 > 0 && (this.holdingI = ei.value_0);
  n == 2 && ei.value_0 > 0 && (this.cresistance = ei.value_0);
}
;
_.setPoints = function setPoints_40(){
  var dir_0, gatelen, leadlen, pa;
  $setPoints(this);
  if (abs_0(this.dx) > abs_0(this.dy)) {
    dir_0 = -sign(this.dx) * sign(this.dy);
    this.point2.y_0 = this.point1.y_0;
  }
   else {
    dir_0 = sign(this.dy) * sign(this.dx);
    this.point2.x_0 = this.point1.x_0;
  }
  dir_0 == 0 && (dir_0 = 1);
  $calcLeads(this, 16);
  this.cathode = $newPointArray(2);
  pa = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, pa[0], pa[1], 0, 8);
  $interpPoint2(this.lead1, this.lead2, this.cathode[0], this.cathode[1], 1, 8);
  this.poly = $createPolygon(pa[0], pa[1], this.lead2);
  this.gate = $newPointArray(2);
  leadlen = (this.dn - 16) / 2;
  gatelen = sim_0.gridSize;
  gatelen = round_int(gatelen + leadlen % sim_0.gridSize);
  if (leadlen < gatelen) {
    this.x2 = this.x_0;
    this.y2 = this.y_0;
    return;
  }
  $interpPoint_2(this.lead2, this.point2, this.gate[0], gatelen / leadlen, gatelen * dir_0);
  $interpPoint_2(this.lead2, this.point2, this.gate[1], gatelen / leadlen, sim_0.gridSize * 2 * dir_0);
  this.gate[1].x_0 = $snapGrid(sim_0, this.gate[1].x_0);
  this.gate[1].y_0 = $snapGrid(sim_0, this.gate[1].y_0);
}
;
_.stamp = function stamp_35(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
  $stampNonLinear(sim_0, this.nodes[3]);
  $stampResistor(sim_0, this.nodes[2], this.nodes[1], this.cresistance);
  $stamp(this.diode, this.nodes[3], this.nodes[2]);
}
;
_.aresistance = 0;
_.cresistance = 0;
_.curcount_a = 0;
_.curcount_c = 0;
_.curcount_g = 0;
_.holdingI = 0;
_.ia = 0;
_.ic = 0;
_.ig = 0;
_.lastvac = 0;
_.lastvag = 0;
_.triggerI = 0;
var Lcom_lushprojects_circuitjs1_client_SCRElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SCRElm', 277);
function SchmittElm(xx, yy){
  InvertingSchmittElm.call(this, xx, yy);
}

function SchmittElm_0(xa, ya, xb, yb, f, st){
  InvertingSchmittElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(275, 191, $intern_66, SchmittElm, SchmittElm_0);
_.doStep = function doStep_31(){
  var maxStep, out, v0;
  v0 = this.volts[1];
  if (this.state) {
    if (this.volts[0] > this.upperTrigger) {
      this.state = false;
      out = 5;
    }
     else {
      out = 0;
    }
  }
   else {
    if (this.volts[0] < this.lowerTrigger) {
      this.state = true;
      out = 0;
    }
     else {
      out = 5;
    }
  }
  maxStep = this.slewRate * sim_0.timeStep * $intern_63;
  out = $wnd.Math.max($wnd.Math.min(v0 + maxStep, out), v0 - maxStep);
  $updateVoltageSource(sim_0, this.voltSource, out);
}
;
_.draw = function draw_46(g){
  $drawPosts(this, g);
  $draw2Leads(this, g);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  drawThickPolygon(g, this.gatePoly);
  g.context.lineWidth = 2;
  drawPolygon(g, this.symbolPoly);
  g.context.lineWidth = 1;
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.lead2, this.point2, this.curcount_0);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_17(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_72(){
  return 182;
}
;
_.getInfo = function getInfo_43(arr){
  arr[0] = 'Schmitt Trigger';
}
;
_.setPoints = function setPoints_41(){
  var triPoints, ww;
  $setPoints_5(this);
  ww = 16;
  16 > this.dn / 2 && (ww = round_int(this.dn / 2));
  this.lead1 = $interpPoint(this.point1, this.point2, 0.5 - ww / this.dn);
  this.lead2 = $interpPoint(this.point1, this.point2, 0.5 + (ww - 3) / this.dn);
  triPoints = $newPointArray(3);
  $interpPoint2(this.lead1, this.lead2, triPoints[0], triPoints[1], 0, 16);
  triPoints[2] = $interpPoint(this.point1, this.point2, 0.5 + (ww - 5) / this.dn);
  this.gatePoly = $createPolygon_1(triPoints);
}
;
var Lcom_lushprojects_circuitjs1_client_SchmittElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SchmittElm', 275);
function $allocImage(this$static){
  if (this$static.imageCanvas) {
    $setWidth(this$static.imageCanvas, this$static.rect.width_0 + 'PX');
    $setHeight(this$static.imageCanvas, this$static.rect.height_0 + 'PX');
    $setCoordinateSpaceWidth(this$static.imageCanvas, this$static.rect.width_0);
    $setCoordinateSpaceHeight(this$static.imageCanvas, this$static.rect.height_0);
    $clear2dView(this$static);
  }
}

function $calcMaxAndMin(this$static, units){
  var i, ip, ipa, maxV, minV, plot, si;
  this$static.maxValue = -100000000;
  this$static.minValue = $intern_73;
  for (si = 0; si != this$static.visiblePlots.arrayList.array.length; si++) {
    plot = castTo($get_3(this$static.visiblePlots, si), 12);
    if (plot.units != units)
      continue;
    ipa = $startIndex(plot, this$static.rect.width_0);
    maxV = plot.maxValues;
    minV = plot.minValues;
    for (i = 0; i != this$static.rect.width_0; i++) {
      ip = i + ipa & this$static.scopePointCount - 1;
      maxV[ip] > this$static.maxValue && (this$static.maxValue = maxV[ip]);
      minV[ip] < this$static.minValue && (this$static.minValue = minV[ip]);
    }
  }
}

function $calcPlotScale(this$static, plot){
  var gridMax, i, ip, ipa, max_0, maxV, minV;
  ipa = $startIndex(plot, this$static.rect.width_0);
  maxV = plot.maxValues;
  minV = plot.minValues;
  max_0 = 0;
  gridMax = this$static.scale_0[plot.units];
  for (i = 0; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    maxV[ip] > max_0 && (max_0 = maxV[ip]);
    minV[ip] < -max_0 && (max_0 = -minV[ip]);
  }
  if (this$static.maxScale)
    gridMax = $wnd.Math.max(max_0, gridMax);
  else 
    while (max_0 > gridMax)
      gridMax *= 2;
  this$static.scale_0[plot.units] = gridMax;
}

function $calcVisiblePlots(this$static){
  var ac, i, oc, plot, vc;
  this$static.visiblePlots = new Vector;
  vc = 0;
  ac = 0;
  oc = 0;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++) {
    plot = castTo($get_3(this$static.plots, i), 12);
    if (plot.units == 0) {
      if (this$static.showV) {
        $add_11(this$static.visiblePlots, plot);
        $assignColor(plot, vc++);
      }
    }
     else if (plot.units == 1) {
      if (this$static.showI) {
        $add_11(this$static.visiblePlots, plot);
        $assignColor(plot, ac++);
      }
    }
     else {
      $add_11(this$static.visiblePlots, plot);
      $assignColor(plot, oc++);
    }
  }
}

function $checkForSelection(this$static){
  var best, bestdist, dist, i, ip, ipa, maxvy, maxy, plot;
  if ($dialogIsShowing(this$static.sim))
    return;
  if (!$contains(this$static.rect, this$static.sim.mouseCursorX, this$static.sim.mouseCursorY)) {
    this$static.selectedPlot = -1;
    return;
  }
  ipa = $startIndex(castTo($get_3(this$static.plots, 0), 12), this$static.rect.width_0);
  ip = this$static.sim.mouseCursorX - this$static.rect.x_0 + ipa & this$static.scopePointCount - 1;
  maxy = (this$static.rect.height_0 - 1) / 2 | 0;
  bestdist = $intern_86;
  best = -1;
  for (i = 0; i != this$static.visiblePlots.arrayList.array.length; i++) {
    plot = castTo($get_3(this$static.visiblePlots, i), 12);
    maxvy = round_int(maxy / this$static.scale_0[plot.units] * plot.maxValues[ip]);
    dist = $wnd.Math.abs(this$static.sim.mouseCursorY - (this$static.rect.y_0 + maxy - maxvy));
    if (dist < bestdist) {
      bestdist = dist;
      best = i;
    }
  }
  this$static.selectedPlot = best;
}

function $clear2dView(this$static){
  if (this$static.imageContext) {
    this$static.sim.printableCheckItem.on?(this$static.imageContext.fillStyle = '#ffffff' , undefined):(this$static.imageContext.fillStyle = '#000000' , undefined);
    $fillRect(this$static.imageContext, 0, 0, this$static.rect.width_0 - 1, this$static.rect.height_0 - 1);
  }
  this$static.draw_ox = this$static.draw_oy = -1;
}

function $combine(this$static, s){
  this$static.plots = this$static.visiblePlots;
  $addAll_0(this$static.plots, s.visiblePlots);
  s.plots.arrayList.array = initUnidimensionalArray(Ljava_lang_Object_2_classLit, $intern_3, 1, 0, 5, 1);
}

function $draw_3(this$static, g){
  var hGridLines, i, plot, si;
  if (this$static.plots.arrayList.array.length == 0)
    return;
  if (this$static.scopeTimeStep != this$static.sim.timeStep) {
    this$static.scopeTimeStep = this$static.sim.timeStep;
    $resetGraph(this$static);
  }
  if (this$static.plot2d) {
    $draw2d(this$static, g);
    return;
  }
  g.context.save();
  $setColor(g, ($clinit_Color() , red));
  $translate(g.context, this$static.rect.x_0, this$static.rect.y_0);
  if (this$static.showFFT) {
    $drawFFTVerticalGridLines(this$static, g);
    $drawFFT(this$static, g);
  }
  for (i = 0; i != 4; i++) {
    this$static.expandRange[i] = false;
    this$static.maxScale && (this$static.scale_0[i] = $intern_85);
  }
  this$static.somethingSelected = false;
  for (si = 0; si != this$static.visiblePlots.arrayList.array.length; si++) {
    plot = castTo($get_3(this$static.visiblePlots, si), 12);
    $calcPlotScale(this$static, plot);
    this$static.sim.scopeSelected == -1 && plot.elm.iAmMouseElm && (this$static.somethingSelected = true);
    this$static.expandRange[plot.units] = true;
  }
  $checkForSelection(this$static);
  this$static.selectedPlot >= 0 && (this$static.somethingSelected = true);
  this$static.drawGridLines = true;
  hGridLines = true;
  for (i = 1; i < this$static.visiblePlots.arrayList.array.length; i++) {
    castTo($get_3(this$static.visiblePlots, i), 12).units != castTo($get_3(this$static.visiblePlots, 0), 12).units && (hGridLines = false);
  }
  (hGridLines || this$static.showMax || this$static.showMin) && this$static.visiblePlots.arrayList.array.length > 0 && $calcMaxAndMin(this$static, castTo($firstElement(this$static.visiblePlots), 12).units);
  for (i = 0; i != this$static.visiblePlots.arrayList.array.length; i++) {
    castTo($get_3(this$static.visiblePlots, i), 12).units > 1 && i != this$static.selectedPlot && $drawPlot(this$static, g, castTo($get_3(this$static.visiblePlots, i), 12), hGridLines, false);
  }
  for (i = 0; i != this$static.visiblePlots.arrayList.array.length; i++) {
    castTo($get_3(this$static.visiblePlots, i), 12).units == 1 && i != this$static.selectedPlot && $drawPlot(this$static, g, castTo($get_3(this$static.visiblePlots, i), 12), hGridLines, false);
  }
  for (i = 0; i != this$static.visiblePlots.arrayList.array.length; i++) {
    castTo($get_3(this$static.visiblePlots, i), 12).units == 0 && i != this$static.selectedPlot && $drawPlot(this$static, g, castTo($get_3(this$static.visiblePlots, i), 12), hGridLines, false);
  }
  this$static.selectedPlot >= 0 && $drawPlot(this$static, g, castTo($get_3(this$static.visiblePlots, this$static.selectedPlot), 12), hGridLines, true);
  this$static.visiblePlots.arrayList.array.length > 0 && $drawInfoTexts(this$static, g);
  g.context.restore();
  $drawCrosshairs(this$static, g);
  if (castTo($get_3(this$static.plots, 0), 12).ptr > 5 && !this$static.lockScale) {
    for (i = 0; i != 4; i++)
      this$static.scale_0[i] > $intern_85 && this$static.expandRange[i] && (this$static.scale_0[i] /= 2);
  }
}

function $draw2d(this$static, g){
  var yt;
  if (!this$static.imageContext)
    return;
  g.context.save();
  $translate(g.context, this$static.rect.x_0, this$static.rect.y_0);
  ++this$static.alphadiv;
  if (this$static.alphadiv > 2) {
    this$static.alphadiv = 0;
    this$static.imageContext.globalAlpha = $intern_29;
    this$static.sim.printableCheckItem.on?(this$static.imageContext.fillStyle = '#ffffff' , undefined):(this$static.imageContext.fillStyle = '#000000' , undefined);
    $fillRect(this$static.imageContext, 0, 0, this$static.rect.width_0, this$static.rect.height_0);
    this$static.imageContext.globalAlpha = 1;
  }
  $drawImage(g.context, this$static.imageContext.canvas, 0, 0);
  $setColor(g, whiteColor);
  $fillOval(g, this$static.draw_ox - 2, this$static.draw_oy - 2, 5);
  yt = 10;
  if (this$static.text_0 != null && this$static.rect.height_0 > 15) {
    $drawString(g, this$static.text_0, 0, 10);
    yt += 15;
  }
  $setColor(g, ($clinit_Color() , green));
  $drawLine(g, 0, this$static.rect.height_0 / 2 | 0, this$static.rect.width_0 - 1, this$static.rect.height_0 / 2 | 0);
  this$static.plotXY || $setColor(g, yellow);
  $drawLine(g, this$static.rect.width_0 / 2 | 0, 0, this$static.rect.width_0 / 2 | 0, this$static.rect.height_0 - 1);
  g.context.restore();
}

function $drawCrosshairs(this$static, g){
  var bx, ct, i, info, ip, ipa, maxFrequency, maxvy, maxy, plot, szh, szw, t, w;
  if ($dialogIsShowing(this$static.sim))
    return;
  if (!$contains(this$static.rect, this$static.sim.mouseCursorX, this$static.sim.mouseCursorY))
    return;
  if (this$static.selectedPlot < 0 && !this$static.showFFT)
    return;
  info = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 4, 6, 1);
  ipa = $startIndex(castTo($get_3(this$static.plots, 0), 12), this$static.rect.width_0);
  ip = this$static.sim.mouseCursorX - this$static.rect.x_0 + ipa & this$static.scopePointCount - 1;
  ct = 0;
  maxy = (this$static.rect.height_0 - 1) / 2 | 0;
  if (this$static.selectedPlot >= 0) {
    plot = castTo($get_3(this$static.visiblePlots, this$static.selectedPlot), 12);
    info[ct++] = $getUnitText(plot, plot.maxValues[ip]);
    maxvy = round_int(this$static.mainGridMult * (plot.maxValues[ip] - this$static.mainGridMid));
    $setColor_0(g, plot.color_0);
    $fillOval(g, this$static.sim.mouseCursorX - 2, this$static.rect.y_0 + maxy - maxvy - 2, 5);
  }
  if (this$static.showFFT) {
    maxFrequency = 1 / (this$static.sim.timeStep * this$static.speed * 2);
    info[ct++] = myGetUnitText(maxFrequency * (this$static.sim.mouseCursorX - this$static.rect.x_0) / this$static.rect.width_0, 'Hz', false);
  }
  if (this$static.visiblePlots.arrayList.array.length > 0) {
    t = this$static.sim.t - this$static.sim.timeStep * this$static.speed * (this$static.rect.x_0 + this$static.rect.width_0 - this$static.sim.mouseCursorX);
    info[ct++] = myGetUnitText(t, 's', false);
  }
  szw = 0;
  szh = 15 * ct;
  for (i = 0; i != ct; i++) {
    w = round_int($measureText(g.context, info[i]).width);
    w > szw && (szw = w);
  }
  $setColor(g, whiteColor);
  $drawLine(g, this$static.sim.mouseCursorX, this$static.rect.y_0, this$static.sim.mouseCursorX, this$static.rect.y_0 + this$static.rect.height_0);
  $setColor(g, this$static.sim.printableCheckItem.on?($clinit_Color() , white):($clinit_Color() , black));
  bx = this$static.sim.mouseCursorX;
  bx < (szw / 2 | 0) && (bx = szw / 2 | 0);
  $fillRect_0(g, bx - (szw / 2 | 0), this$static.rect.y_0 - szh, szw, szh);
  $setColor(g, whiteColor);
  for (i = 0; i != ct; i++) {
    w = round_int($measureText(g.context, info[i]).width);
    $drawString(g, info[i], bx - (w / 2 | 0), this$static.rect.y_0 - 2 - (ct - 1 - i) * 15);
  }
}

function $drawFFT(this$static, g){
  var height, i, i0, i1, ii, imag, m, magnitude, maxM, maxV, minV, plot, prevHeight, prevX, ptr, real, x_0, y_0;
  (!this$static.fft || this$static.fft.size_0 != this$static.scopePointCount) && (this$static.fft = new FFT(this$static.scopePointCount));
  y_0 = (this$static.rect.height_0 - 1) / 2 | 0;
  real = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.scopePointCount, 15, 1);
  imag = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.scopePointCount, 15, 1);
  plot = this$static.visiblePlots.arrayList.array.length == 0?castTo($firstElement(this$static.plots), 12):castTo($firstElement(this$static.visiblePlots), 12);
  maxV = plot.maxValues;
  minV = plot.minValues;
  ptr = plot.ptr;
  for (i0 = 0; i0 < this$static.scopePointCount; i0++) {
    ii = ptr - i0 + this$static.scopePointCount & this$static.scopePointCount - 1;
    real[i0] = 0.5 * (maxV[ii] + minV[ii]);
    imag[i0] = 0;
  }
  $fft(this$static.fft, real, imag);
  maxM = $intern_88;
  for (i1 = 0; i1 < (this$static.scopePointCount / 2 | 0); i1++) {
    m = $magnitude(this$static.fft, real[i1], imag[i1]);
    m > maxM && (maxM = m);
  }
  magnitude = $magnitude(this$static.fft, real[0], imag[0]);
  prevHeight = round_int(magnitude * y_0 / maxM);
  prevX = 0;
  $setColor_0(g, '#FF0000');
  for (i = 1; i < (this$static.scopePointCount / 2 | 0); i++) {
    x_0 = 2 * i * this$static.rect.width_0 / this$static.scopePointCount | 0;
    if (x_0 == prevX)
      continue;
    magnitude = $magnitude(this$static.fft, real[i], imag[i]);
    height = round_int(magnitude * y_0 / maxM);
    $drawLine(g, prevX, y_0 - prevHeight, x_0, y_0 - height);
    prevHeight = height;
    prevX = x_0;
  }
}

function $drawFFTVerticalGridLines(this$static, g){
  var i, maxFrequency, prevEnd, s, sWidth, x_0;
  prevEnd = 0;
  maxFrequency = 1 / (this$static.sim.timeStep * this$static.speed * 20 * 2);
  for (i = 0; i < 20; i++) {
    x_0 = this$static.rect.width_0 * i / 20 | 0;
    if (x_0 < prevEnd)
      continue;
    s = toInt(fromDouble_0($wnd.Math.round(i * maxFrequency))) + 'Hz';
    sWidth = round_int($wnd.Math.ceil($measureText(g.context, s).width));
    prevEnd = x_0 + sWidth + 4;
    if (i > 0) {
      $setColor_0(g, '#880000');
      $drawLine(g, x_0, 0, x_0, this$static.rect.height_0);
    }
    $setColor_0(g, '#FF0000');
    $drawString(g, s, x_0 + 2, this$static.rect.height_0);
  }
}

function $drawFrequency(this$static, g){
  var avg, avperiod, avperiod2, freq, i, ip, ipa, maxV, minV, oi, os, pd, periodct, periodstd, plot, q, state, thresh;
  avg = 0;
  plot = castTo($firstElement(this$static.visiblePlots), 12);
  ipa = plot.ptr + this$static.scopePointCount - this$static.rect.width_0;
  minV = plot.minValues;
  maxV = plot.maxValues;
  for (i = 0; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    avg += minV[ip] + maxV[ip];
  }
  avg /= i * 2;
  state = 0;
  thresh = avg * 0.05;
  oi = 0;
  avperiod = 0;
  periodct = -1;
  avperiod2 = 0;
  for (i = 0; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    q = maxV[ip] - avg;
    os = state;
    q < thresh?(state = 1):q > -thresh && (state = 2);
    if (state == 2 && os == 1) {
      pd = i - oi;
      oi = i;
      if (pd < 12)
        continue;
      if (periodct >= 0) {
        avperiod += pd;
        avperiod2 += pd * pd;
      }
      ++periodct;
    }
  }
  avperiod /= periodct;
  avperiod2 /= periodct;
  periodstd = $wnd.Math.sqrt(avperiod2 - avperiod * avperiod);
  freq = 1 / (avperiod * this$static.sim.timeStep * this$static.speed);
  (periodct < 1 || periodstd > 2) && (freq = 0);
  freq != 0 && $drawInfoText(this$static, g, myGetUnitText(freq, 'Hz', false));
}

function $drawInfoText(this$static, g, text_0){
  if (this$static.rect.y_0 + this$static.rect.height_0 <= this$static.textY + 5)
    return;
  $drawString(g, text_0, 0, this$static.textY);
  this$static.textY += 15;
}

function $drawInfoTexts(this$static, g){
  var plot, sm, t, vScaleText, ym;
  $setColor(g, whiteColor);
  this$static.textY = 10;
  plot = castTo($firstElement(this$static.visiblePlots), 12);
  if (this$static.showScale) {
    vScaleText = '';
    this$static.gridStepY != 0 && !(this$static.showV && this$static.showI) && (vScaleText = ' V=' + $getUnitText(plot, this$static.gridStepY) + '/div');
    $drawInfoText(this$static, g, 'H=' + myGetUnitText(this$static.gridStepX, 's', false) + '/div' + vScaleText);
  }
  this$static.showMax && $drawInfoText(this$static, g, $getUnitText(plot, this$static.maxValue));
  if (this$static.showMin) {
    ym = this$static.rect.height_0 - 5;
    $drawString(g, $getUnitText(plot, this$static.minValue), 0, ym);
  }
  this$static.showRMS && $drawRMS(this$static, g);
  t = this$static.text_0;
  t == null && (t = $getScopeText(this$static));
  t = (sm = castToString($getStringValue(localizationMap, t)) , sm != null?sm:t);
  t != null && $drawInfoText(this$static, g, t);
  this$static.showFreq && $drawFrequency(this$static, g);
}

function $drawPlot(this$static, g, plot, drawHGridLines, selected){
  var col, color_0, gridMax, gridMid, gridMult, gx, i, ip, ipa, ll, majorDiv, maxV, maxvy, maxy, minRangeHi, minRangeLo, minV, minorDiv, minvy, mn, multa, multptr, mx, ox, oy, showGridLines, tl, ts, tstart, tx, yl;
  multa = stampJavaTypeInfo(getClassLiteralForArray(D_classLit, 1), $intern_57, 9, 15, [2, 2.5, 2]);
  multptr = 0;
  maxy = (this$static.rect.height_0 - 1) / 2 | 0;
  color_0 = this$static.somethingSelected?'#A0A0A0':plot.color_0;
  this$static.sim.scopeSelected == -1 && plot.elm.iAmMouseElm?(color_0 = '#00FFFF'):selected && (color_0 = plot.color_0);
  ipa = $startIndex(plot, this$static.rect.width_0);
  maxV = plot.maxValues;
  minV = plot.minValues;
  gridMax = this$static.scale_0[plot.units];
  gridMid = 0;
  if (drawHGridLines) {
    mx = gridMax;
    mn = 0;
    if (this$static.maxScale) {
      mx = this$static.maxValue;
      mn = this$static.minValue;
    }
     else if (this$static.showNegative || this$static.minValue < (gridMax + mn) * 0.5 - (gridMax - mn) * 0.55) {
      mn = -gridMax;
      this$static.showNegative = true;
    }
    gridMid = (mx + mn) * 0.5;
    gridMax = (mx - mn) * 0.55;
  }
  gridMult = maxy / gridMax;
  if (selected) {
    this$static.mainGridMult = gridMult;
    this$static.mainGridMid = gridMid;
  }
  minRangeLo = -10 - round_int(gridMid * gridMult);
  minRangeHi = 10 - round_int(gridMid * gridMult);
  this$static.gridStepY = $intern_88;
  while (this$static.gridStepY < 20 * gridMax / maxy) {
    this$static.gridStepY *= multa[multptr++ % 3];
  }
  minorDiv = '#303030';
  majorDiv = '#A0A0A0';
  if (this$static.sim.printableCheckItem.on) {
    minorDiv = '#D0D0D0';
    majorDiv = '#808080';
  }
  this$static.gridStepX = 1.0E-15;
  ts = this$static.sim.timeStep * this$static.speed;
  multptr = 0;
  while (this$static.gridStepX < ts * 20) {
    this$static.gridStepX *= multa[multptr++ % 3];
  }
  if (this$static.drawGridLines) {
    showGridLines = this$static.gridStepY != 0 && drawHGridLines;
    for (ll = -100; ll <= 100; ll++) {
      if (ll != 0 && !showGridLines)
        continue;
      yl = maxy - round_int((ll * this$static.gridStepY - gridMid) * gridMult);
      if (yl < 0 || yl >= this$static.rect.height_0 - 1)
        continue;
      col = ll == 0?majorDiv:minorDiv;
      $setColor_0(g, col);
      $drawLine(g, 0, yl, this$static.rect.width_0 - 1, yl);
    }
    tstart = this$static.sim.t - this$static.sim.timeStep * this$static.speed * this$static.rect.width_0;
    tx = this$static.sim.t - this$static.sim.t % this$static.gridStepX;
    for (ll = 0;; ll++) {
      tl = tx - this$static.gridStepX * ll;
      gx = round_int((tl - tstart) / ts);
      if (gx < 0)
        break;
      if (gx >= this$static.rect.width_0)
        continue;
      if (tl < 0)
        continue;
      col = minorDiv;
      (tl + this$static.gridStepX / 4) % (this$static.gridStepX * 10) < this$static.gridStepX && (col = majorDiv);
      $setColor_0(g, col);
      $drawLine(g, gx, 0, gx, this$static.rect.height_0 - 1);
    }
  }
  this$static.drawGridLines = false;
  $setColor_0(g, color_0);
  ox = -1;
  oy = -1;
  for (i = 0; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    minvy = round_int(gridMult * (minV[ip] - gridMid));
    maxvy = round_int(gridMult * (maxV[ip] - gridMid));
    if (minvy <= maxy) {
      if (minvy < minRangeLo || maxvy > minRangeHi) {
        this$static.expandRange[plot.units] = false;
        minRangeLo = -1000;
        minRangeHi = $intern_20;
      }
      if (ox != -1) {
        if (minvy == oy && maxvy == oy)
          continue;
        $drawLine(g, ox, maxy - oy, i - 1, maxy - oy);
        ox = oy = -1;
      }
      if (minvy == maxvy) {
        ox = i;
        oy = minvy;
        continue;
      }
      $drawLine(g, i, maxy - minvy, i, maxy - maxvy - 1);
    }
  }
  ox != -1 && $drawLine(g, ox, maxy - oy, i - 1, maxy - oy);
}

function $drawRMS(this$static, g){
  var avg, end, endAvg, firstState, i, ip, ipa, maxV, mid, minV, plot, rms, start_0, state, sw, waveCount;
  plot = castTo($firstElement(this$static.visiblePlots), 12);
  avg = 0;
  ipa = plot.ptr + this$static.scopePointCount - this$static.rect.width_0;
  maxV = plot.maxValues;
  minV = plot.minValues;
  mid = (this$static.maxValue + this$static.minValue) / 2;
  state = -1;
  for (i = 0; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    if (maxV[ip] != 0) {
      maxV[ip] > mid && (state = 1);
      break;
    }
  }
  firstState = -state;
  start_0 = i;
  end = 0;
  waveCount = 0;
  endAvg = 0;
  for (; i != this$static.rect.width_0; i++) {
    ip = i + ipa & this$static.scopePointCount - 1;
    sw = false;
    state == 1?maxV[ip] < mid && (sw = true):minV[ip] > mid && (sw = true);
    if (sw) {
      state = -state;
      if (firstState == state) {
        if (waveCount == 0) {
          start_0 = i;
          firstState = state;
          avg = 0;
        }
        ++waveCount;
        end = i;
        endAvg = avg;
      }
    }
    waveCount > 0 && (avg += maxV[ip] * maxV[ip]);
  }
  if (waveCount > 1) {
    rms = $wnd.Math.sqrt(endAvg / (end - start_0));
    $drawInfoText(this$static, g, $getUnitText(plot, rms) + 'rms');
  }
}

function $drawTo(this$static, x2, y2){
  if (this$static.draw_ox == -1) {
    this$static.draw_ox = x2;
    this$static.draw_oy = y2;
  }
  this$static.sim.printableCheckItem.on?(this$static.imageContext.strokeStyle = '#000000' , undefined):(this$static.imageContext.strokeStyle = '#ffffff' , undefined);
  this$static.imageContext.beginPath();
  $moveTo(this$static.imageContext, this$static.draw_ox, this$static.draw_oy);
  $lineTo(this$static.imageContext, x2, y2);
  this$static.imageContext.stroke();
  this$static.draw_ox = x2;
  this$static.draw_oy = y2;
}

function $dump_2(this$static){
  var elm, eno, flags, i, p, vPlot, x_0;
  vPlot = castTo($get_3(this$static.plots, 0), 12);
  elm = vPlot.elm;
  if (!elm)
    return null;
  flags = (this$static.showI?1:0) | (this$static.showV?2:0) | (this$static.showMax?0:4) | (this$static.showFreq?8:0) | (this$static.lockScale?16:0) | (this$static.plot2d?64:0) | (this$static.plotXY?128:0) | (this$static.showMin?256:0) | (this$static.showScale?512:0) | (this$static.showFFT?$intern_21:0) | (this$static.maxScale?8192:0) | (this$static.showRMS?$intern_33:0);
  flags |= $intern_31;
  eno = $locateElm(this$static.sim, elm);
  if (eno < 0)
    return null;
  x_0 = 'o ' + eno + ' ' + vPlot.speed + ' ' + vPlot.value_0 + ' ' + flags + ' ' + this$static.scale_0[0] + ' ' + this$static.scale_0[1] + ' ' + this$static.position + ' ' + this$static.plots.arrayList.array.length;
  for (i = 0; i < this$static.plots.arrayList.array.length; i++) {
    p = castTo($get_3(this$static.plots, i), 12);
    i > 0 && (x_0 += ' ' + $locateElm(this$static.sim, p.elm) + ' ' + p.value_0);
    p.units > 1 && (x_0 += ' ' + this$static.scale_0[p.units]);
  }
  this$static.text_0 != null && (x_0 += ' ' + this$static.text_0);
  return x_0;
}

function $getElm_0(this$static){
  if (this$static.selectedPlot >= 0 && this$static.visiblePlots.arrayList.array.length > this$static.selectedPlot)
    return castTo($get_3(this$static.visiblePlots, this$static.selectedPlot), 12).elm;
  return this$static.visiblePlots.arrayList.array.length > 0?castTo($get_3(this$static.visiblePlots, 0), 12).elm:castTo($get_3(this$static.plots, 0), 12).elm;
}

function $getMenu(this$static){
  var elm;
  elm = castTo($get_3(this$static.plots, 0), 12).elm;
  if (!elm)
    return null;
  elm = $getSingleElm(this$static);
  if (!!elm && instanceOf(elm, 109)) {
    $setState_0(this$static.sim.scopeIbMenuItem, $showingValue(this$static, 1));
    $setState_0(this$static.sim.scopeIcMenuItem, $showingValue(this$static, 2));
    $setState_0(this$static.sim.scopeIeMenuItem, $showingValue(this$static, 3));
    $setState_0(this$static.sim.scopeVbeMenuItem, $showingValue(this$static, 4));
    $setState_0(this$static.sim.scopeVbcMenuItem, $showingValue(this$static, 5));
    $setState_0(this$static.sim.scopeVceMenuItem, $showingValue(this$static, 6));
    $setState_0(this$static.sim.scopeVceIcMenuItem, this$static.plot2d && this$static.plots.arrayList.array.length == 2 && castTo($get_3(this$static.plots, 0), 12).value_0 == 6 && castTo($get_3(this$static.plots, 1), 12).value_0 == 2);
    $setState_0(this$static.sim.scopeMaxScaleTransMenuItem, this$static.maxScale && !this$static.plot2d);
    return this$static.sim.transScopeMenuBar;
  }
   else {
    $setEnabled(this$static.sim.scopeRemovePlotMenuItem, this$static.visiblePlots.arrayList.array.length > 1 && !this$static.plot2d);
    $setState_0(this$static.sim.scopeVMenuItem, this$static.showV && !$showingValue(this$static, 1));
    $setState_0(this$static.sim.scopeIMenuItem, this$static.showI && !$showingValue(this$static, 1));
    $setState_0(this$static.sim.scopeScaleMenuItem, this$static.showScale);
    $setState_0(this$static.sim.scopeMaxMenuItem, this$static.showMax);
    $setState_0(this$static.sim.scopeMinMenuItem, this$static.showMin);
    $setState_0(this$static.sim.scopeFreqMenuItem, this$static.showFreq);
    $setState_0(this$static.sim.scopePowerMenuItem, $showingValue(this$static, 1));
    $setState_0(this$static.sim.scopeRMSMenuItem, this$static.showRMS);
    $setState_0(this$static.sim.scopeVIMenuItem, this$static.plot2d && !this$static.plotXY);
    $setState_0(this$static.sim.scopeXYMenuItem, this$static.plotXY);
    $setEnabled(this$static.sim.scopeSelectYMenuItem, this$static.plotXY);
    $setState_0(this$static.sim.scopeFFTMenuItem, this$static.showFFT);
    $setState_0(this$static.sim.scopeResistMenuItem, $showingValue(this$static, 2));
    $setEnabled(this$static.sim.scopeResistMenuItem, !!elm && elm.canShowValueInScope(2));
    $setState_0(this$static.sim.scopeMaxScaleMenuItem, this$static.maxScale && !this$static.plot2d);
    return this$static.sim.scopeMenuBar;
  }
}

function $getScopeText(this$static){
  var plot;
  if (this$static.stackCount != 1)
    return null;
  if (this$static.selectedPlot < 0 && !$getSingleElm(this$static))
    return null;
  plot = castTo($firstElement(this$static.visiblePlots), 12);
  this$static.selectedPlot >= 0 && this$static.visiblePlots.arrayList.array.length > this$static.selectedPlot && (plot = castTo($get_3(this$static.visiblePlots, this$static.selectedPlot), 12));
  return plot.elm.getScopeText(plot.value_0);
}

function $getSingleElm(this$static){
  var elm, i;
  elm = castTo($get_3(this$static.plots, 0), 12).elm;
  for (i = 1; i < this$static.plots.arrayList.array.length; i++) {
    if (castTo($get_3(this$static.plots, i), 12).elm != elm)
      return null;
  }
  return elm;
}

function $getYElm(this$static){
  if (this$static.plots.arrayList.array.length == 2)
    return castTo($get_3(this$static.plots, 1), 12).elm;
  return null;
}

function $handleMenu(this$static, mi){
  mi == 'showvoltage' && $showVoltage(this$static, this$static.sim.scopeVMenuItem.on);
  mi == 'showcurrent' && $showCurrent(this$static, this$static.sim.scopeIMenuItem.on);
  mi == 'showscale' && $showScale(this$static, this$static.sim.scopeScaleMenuItem.on);
  mi == 'showpeak' && $showMax(this$static, this$static.sim.scopeMaxMenuItem.on);
  mi == 'shownegpeak' && $showMin(this$static, this$static.sim.scopeMinMenuItem.on);
  mi == 'showfreq' && $showFreq(this$static, this$static.sim.scopeFreqMenuItem.on);
  mi == 'showfft' && $showFFT(this$static, this$static.sim.scopeFFTMenuItem.on);
  mi == 'showrms' && (this$static.showRMS = this$static.sim.scopeRMSMenuItem.on);
  mi == 'showpower' && $setValue_1(this$static, 1);
  mi == 'showib' && $setValue_1(this$static, 1);
  mi == 'showic' && $setValue_1(this$static, 2);
  mi == 'showie' && $setValue_1(this$static, 3);
  mi == 'showvbe' && $setValue_1(this$static, 4);
  mi == 'showvbc' && $setValue_1(this$static, 5);
  mi == 'showvce' && $setValue_1(this$static, 6);
  if (mi == 'showvcevsic') {
    this$static.plot2d = true;
    this$static.plotXY = false;
    $setValues(this$static, 6, 2, $getElm_0(this$static), null);
    $resetGraph(this$static);
  }
  if (mi == 'showvvsi') {
    this$static.plot2d = this$static.sim.scopeVIMenuItem.on;
    this$static.plotXY = false;
    $resetGraph(this$static);
  }
  if (mi == 'plotxy') {
    this$static.plotXY = this$static.plot2d = this$static.sim.scopeXYMenuItem.on;
    this$static.plot2d && (this$static.plots = this$static.visiblePlots);
    this$static.plot2d && this$static.plots.arrayList.array.length == 1 && $selectY(this$static);
    $resetGraph(this$static);
  }
  mi == 'showresistance' && $setValue_1(this$static, 2);
}

function $maxScale(this$static){
  if (this$static.plot2d) {
    this$static.scale_0[0] *= $intern_88;
    this$static.scale_0[1] *= $intern_88;
    this$static.scale_0[3] *= $intern_88;
    this$static.scale_0[2] *= $intern_88;
    this$static.scaleX *= $intern_88;
    this$static.scaleY *= $intern_88;
    return;
  }
  this$static.maxScale = !this$static.maxScale;
  this$static.showNegative = false;
}

function $needToRemove(this$static){
  var i, plot, removed, ret;
  ret = true;
  removed = false;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++) {
    plot = castTo($get_3(this$static.plots, i), 12);
    if ($locateElm(this$static.sim, plot.elm) < 0) {
      $remove_14(this$static.plots, i--);
      removed = true;
    }
     else 
      ret = false;
  }
  removed && $calcVisiblePlots(this$static);
  return ret;
}

function $onMouseWheel(this$static, e){
  this$static.wheelDeltaY += $eventGetMouseWheelVelocityY(e.nativeEvent);
  if (this$static.wheelDeltaY > 5) {
    this$static.speed < $intern_21 && (this$static.speed *= 2);
    $resetGraph(this$static);
    this$static.wheelDeltaY = 0;
  }
  this$static.wheelDeltaY < -5 && $speedUp(this$static);
  this$static.wheelDeltaY = 0;
}

function $removePlot(this$static, plot){
  var p;
  if (plot < this$static.visiblePlots.arrayList.array.length) {
    p = castTo($get_3(this$static.visiblePlots, plot), 12);
    $advanceToFind(this$static.plots, p, true);
    $calcVisiblePlots(this$static);
  }
}

function $reset_3(this$static){
  var i, plot;
  $resetGraph(this$static);
  this$static.scale_0[2] = this$static.scale_0[3] = this$static.scale_0[0] = 5;
  this$static.scale_0[1] = 0.1;
  this$static.scaleX = 5;
  this$static.scaleY = 0.1;
  this$static.speed = 64;
  this$static.showMax = true;
  this$static.showV = this$static.showI = false;
  this$static.showScale = this$static.showFreq = this$static.lockScale = this$static.showMin = false;
  this$static.showFFT = false;
  this$static.plot2d = false;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++) {
    plot = castTo($get_3(this$static.plots, i), 12);
    plot.units == 0 && (this$static.showV = true);
    plot.units == 1 && (this$static.showI = true);
  }
}

function $resetGraph(this$static){
  var i;
  this$static.scopePointCount = 1;
  while (this$static.scopePointCount <= this$static.rect.width_0)
    this$static.scopePointCount *= 2;
  !this$static.plots && (this$static.plots = new Vector);
  this$static.showNegative = false;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++)
    $reset_4(castTo($get_3(this$static.plots, i), 12), this$static.scopePointCount, this$static.speed);
  $calcVisiblePlots(this$static);
  this$static.scopeTimeStep = this$static.sim.timeStep;
  $allocImage(this$static);
}

function $rightEdge(this$static){
  return this$static.rect.x_0 + this$static.rect.width_0;
}

function $selectY(this$static){
  var ce, e, firstE, yElm;
  yElm = this$static.plots.arrayList.array.length == 2?castTo($get_3(this$static.plots, 1), 12).elm:null;
  e = !yElm?-1:$locateElm(this$static.sim, yElm);
  firstE = e;
  while (true) {
    for (++e; e < this$static.sim.elmList.arrayList.array.length; e++) {
      ce = $getElm(this$static.sim, e);
      if ((instanceOf(ce, 164) || instanceOf(ce, 165)) && ce != castTo($get_3(this$static.plots, 0), 12).elm) {
        if (this$static.plots.arrayList.array.length == 1)
          $add_11(this$static.plots, new ScopePlot(ce));
        else {
          castTo($get_3(this$static.plots, 1), 12).elm = ce;
          castTo($get_3(this$static.plots, 1), 12).units = 0;
        }
        return;
      }
    }
    if (firstE == -1)
      return;
    e = firstE = -1;
  }
}

function $setElm(this$static, ce){
  this$static.plots = new Vector;
  instanceOf(ce, 109)?$setValue_2(this$static, 6, ce):$setValue_2(this$static, 0, ce);
  $reset_3(this$static);
}

function $setRect(this$static, r){
  var w;
  w = this$static.rect.width_0;
  this$static.rect = r;
  this$static.rect.width_0 != w && $resetGraph(this$static);
}

function $setValue_1(this$static, val){
  var ce;
  if (this$static.plots.arrayList.array.length > 2 || this$static.plots.arrayList.array.length == 0)
    return;
  ce = castTo($firstElement(this$static.plots), 12).elm;
  if (this$static.plots.arrayList.array.length == 2 && castTo($get_3(this$static.plots, 1), 12).elm != ce)
    return;
  this$static.plot2d = this$static.plotXY = false;
  $setValue_2(this$static, val, ce);
}

function $setValue_2(this$static, val, ce){
  var u;
  this$static.plots = new Vector;
  if (val == 0) {
    $add_11(this$static.plots, new ScopePlot_0(ce, 0, 0));
    !!ce && !(instanceOf(ce, 164) || instanceOf(ce, 135) || instanceOf(ce, 149) || instanceOf(ce, 165)) && $add_11(this$static.plots, new ScopePlot_0(ce, 1, 3));
  }
   else {
    u = ce.getScopeUnits(val);
    $add_11(this$static.plots, new ScopePlot_0(ce, u, val));
    u == 0 && (this$static.showV = true);
    u == 1 && (this$static.showI = true);
  }
  $calcVisiblePlots(this$static);
  $resetGraph(this$static);
}

function $setValues(this$static, val, ival, ce, yelm){
  if (ival > 0) {
    this$static.plots = new Vector;
    $add_11(this$static.plots, new ScopePlot_0(ce, ce.getScopeUnits(val), val));
    $add_11(this$static.plots, new ScopePlot_0(ce, ce.getScopeUnits(ival), ival));
    return;
  }
  if (yelm) {
    this$static.plots = new Vector;
    $add_11(this$static.plots, new ScopePlot_0(ce, ce.getScopeUnits(val), 0));
    $add_11(this$static.plots, new ScopePlot_0(yelm, ce.getScopeUnits(ival), 0));
    return;
  }
  $setValue_1(this$static, val);
}

function $showCurrent(this$static, b){
  this$static.showI = b;
  b && !$showingVoltageAndMaybeCurrent(this$static) && $setValue_1(this$static, 0);
  $calcVisiblePlots(this$static);
}

function $showFFT(this$static, b){
  this$static.showFFT = b;
  this$static.showFFT || (this$static.fft = null);
}

function $showFreq(this$static, b){
  this$static.showFreq = b;
}

function $showMax(this$static, b){
  this$static.showMax = b;
}

function $showMin(this$static, b){
  this$static.showMin = b;
}

function $showScale(this$static, b){
  this$static.showScale = b;
}

function $showVoltage(this$static, b){
  this$static.showV = b;
  b && !$showingVoltageAndMaybeCurrent(this$static) && $setValue_1(this$static, 0);
  $calcVisiblePlots(this$static);
}

function $showingValue(this$static, v){
  var i, sp;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++) {
    sp = castTo($get_3(this$static.plots, i), 12);
    if (sp.value_0 != v)
      return false;
  }
  return true;
}

function $showingVoltageAndMaybeCurrent(this$static){
  var gotv, i, sp;
  gotv = false;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++) {
    sp = castTo($get_3(this$static.plots, i), 12);
    if (sp.value_0 == 0)
      gotv = true;
    else if (sp.value_0 != 3)
      return false;
  }
  return gotv;
}

function $slowDown(this$static){
  this$static.speed < $intern_21 && (this$static.speed *= 2);
  $resetGraph(this$static);
}

function $speedUp(this$static){
  if (this$static.speed > 1) {
    this$static.speed = this$static.speed / 2 | 0;
    $resetGraph(this$static);
  }
}

function $timeStep(this$static){
  var i, newscale, v, x_0, xa, y_0, ya, yval;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++)
    $timeStep_0(castTo($get_3(this$static.plots, i), 12));
  if (this$static.plot2d && !!this$static.imageContext) {
    newscale = false;
    if (this$static.plots.arrayList.array.length < 2)
      return;
    v = castTo($get_3(this$static.plots, 0), 12).lastValue;
    while (v > this$static.scaleX || v < -this$static.scaleX) {
      this$static.scaleX *= 2;
      newscale = true;
    }
    yval = castTo($get_3(this$static.plots, 1), 12).lastValue;
    while (yval > this$static.scaleY || yval < -this$static.scaleY) {
      this$static.scaleY *= 2;
      newscale = true;
    }
    newscale && $clear2dView(this$static);
    xa = v / this$static.scaleX;
    ya = yval / this$static.scaleY;
    x_0 = round_int(this$static.rect.width_0 * (1 + xa) * 0.499);
    y_0 = round_int(this$static.rect.height_0 * (1 - ya) * 0.499);
    $drawTo(this$static, x_0, y_0);
  }
}

function $undump(this$static, st){
  var e, elm, flags, i, ivalue, ne, plot2dFlag, sz, u, val, value_0, yElm, ye;
  $reset_3(this$static);
  e = (new Integer_0($nextToken(st))).value_0;
  if (e == -1)
    return;
  $setElm(this$static, $getElm(this$static.sim, e));
  this$static.speed = (new Integer_0($nextToken(st))).value_0;
  value_0 = (new Integer_0($nextToken(st))).value_0;
  flags = (new Integer_0($nextToken(st))).value_0;
  this$static.scale_0[0] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this$static.scale_0[1] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this$static.scale_0[0] == 0 && (this$static.scale_0[0] = 0.5);
  this$static.scale_0[1] == 0 && (this$static.scale_0[1] = 1);
  this$static.scaleX = this$static.scale_0[0];
  this$static.scaleY = this$static.scale_0[1];
  this$static.scale_0[3] = this$static.scale_0[2] = this$static.scale_0[0];
  this$static.text_0 = null;
  plot2dFlag = (flags & 64) != 0;
  if ((flags & $intern_31) != 0) {
    try {
      this$static.position = __parseAndValidateInt($nextToken(st));
      sz = __parseAndValidateInt($nextToken(st));
      $setValue_1(this$static, value_0);
      while (this$static.plots.arrayList.array.length > 1)
        $removeElementAt(this$static.plots, 1);
      u = castTo($get_3(this$static.plots, 0), 12).units;
      u > 1 && (this$static.scale_0[u] = __parseAndValidateDouble($nextToken(st)));
      for (i = 1; i != sz; i++) {
        ne = __parseAndValidateInt($nextToken(st));
        val = __parseAndValidateInt($nextToken(st));
        elm = $getElm(this$static.sim, ne);
        u = elm.getScopeUnits(val);
        u > 1 && (this$static.scale_0[u] = __parseAndValidateDouble($nextToken(st)));
        $add_11(this$static.plots, new ScopePlot_0(elm, u, val));
      }
      while ($hasMoreTokens(st)) {
        this$static.text_0 == null?(this$static.text_0 = $nextToken(st)):(this$static.text_0 += ' ' + $nextToken(st));
      }
    }
     catch ($e0) {
      $e0 = toJava($e0);
      if (!instanceOf($e0, 14))
        throw toJs($e0);
    }
  }
   else {
    yElm = null;
    ivalue = 0;
    try {
      this$static.position = (new Integer_0($nextToken(st))).value_0;
      if ((flags & 32) != 0) {
        ye = (new Integer_0($nextToken(st))).value_0;
        ye != -1 && (yElm = $getElm(this$static.sim, ye));
        plot2dFlag || (yElm = null);
      }
      (flags & $intern_32) != 0 && (ivalue = (new Integer_0($nextToken(st))).value_0);
      while ($hasMoreTokens(st)) {
        this$static.text_0 == null?(this$static.text_0 = $nextToken(st)):(this$static.text_0 += ' ' + $nextToken(st));
      }
    }
     catch ($e1) {
      $e1 = toJava($e1);
      if (!instanceOf($e1, 14))
        throw toJs($e1);
    }
    $setValues(this$static, value_0, ivalue, $getElm(this$static.sim, e), yElm);
  }
  this$static.showI = (flags & 1) != 0;
  this$static.showV = (flags & 2) != 0;
  this$static.showMax = (flags & 4) == 0;
  this$static.showFreq = (flags & 8) != 0;
  this$static.lockScale = (flags & 16) != 0;
  this$static.plot2d = plot2dFlag;
  this$static.plotXY = (flags & 128) != 0;
  this$static.showMin = (flags & 256) != 0;
  this$static.showScale = (flags & 512) != 0;
  this$static.showFFT = (flags & $intern_21) != 0;
  this$static.showFFT || (this$static.fft = null);
  this$static.maxScale = (flags & 8192) != 0;
  this$static.showRMS = (flags & $intern_33) != 0;
}

function $viewingWire(this$static){
  var i;
  for (i = 0; i != this$static.plots.arrayList.array.length; i++)
    if (instanceOf(castTo($get_3(this$static.plots, i), 12).elm, 120))
      return true;
  return false;
}

function Scope(s){
  this.sim = s;
  this.scale_0 = initUnidimensionalArray(D_classLit, $intern_57, 9, 4, 15, 1);
  this.expandRange = initUnidimensionalArray(Z_classLit, $intern_72, 9, 4, 16, 1);
  this.rect = new Rectangle_0(0, 0, 1, 1);
  this.imageCanvas = createIfSupported();
  this.imageContext = $getContext2d(this.imageCanvas);
  $allocImage(this);
  $reset_3(this);
}

defineClass(179, 1, {179:1}, Scope);
_.alphadiv = 0;
_.drawGridLines = false;
_.draw_ox = 0;
_.draw_oy = 0;
_.gridStepX = 0;
_.gridStepY = 0;
_.lockScale = false;
_.mainGridMid = 0;
_.mainGridMult = 0;
_.maxScale = false;
_.maxValue = 0;
_.minValue = 0;
_.plot2d = false;
_.plotXY = false;
_.position = 0;
_.scaleX = 0;
_.scaleY = 0;
_.scopePointCount = 128;
_.scopeTimeStep = 0;
_.selectedPlot = 0;
_.showFFT = false;
_.showFreq = false;
_.showI = false;
_.showMax = false;
_.showMin = false;
_.showNegative = false;
_.showRMS = false;
_.showScale = false;
_.showV = false;
_.somethingSelected = false;
_.speed = 0;
_.stackCount = 0;
_.textY = 0;
_.wheelDeltaY = 0;
var Lcom_lushprojects_circuitjs1_client_Scope_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Scope', 179);
function $clinit_ScopePlot(){
  $clinit_ScopePlot = emptyMethod;
  colors = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['#FF0000', '#FF8000', '#FF00FF', '#7F00FF', '#0000FF', '#0080FF', '#FFFF00', '#00FFFF']);
}

function $assignColor(this$static, count){
  if (count > 0) {
    this$static.color_0 = colors[(count - 1) % 8];
    return;
  }
  switch (this$static.units) {
    case 0:
      this$static.color_0 = '#00FF00';
      break;
    case 1:
      this$static.color_0 = '#FFFF00';
      break;
    default:this$static.color_0 = theSim.printableCheckItem.on?'#000000':'#FFFFFF';
  }
}

function $getUnitText(this$static, v){
  switch (this$static.units) {
    case 0:
      return myGetUnitText(v, 'V', false);
    case 1:
      return myGetUnitText(v, 'A', false);
    case 3:
      return myGetUnitText(v, ohmString, false);
    case 2:
      return myGetUnitText(v, 'W', false);
  }
  return null;
}

function $reset_4(this$static, spc, sp){
  this$static.scopePointCount = spc;
  this$static.speed = sp;
  this$static.minValues = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.scopePointCount, 15, 1);
  this$static.maxValues = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.scopePointCount, 15, 1);
  this$static.ptr = this$static.ctr = 0;
}

function $startIndex(this$static, w){
  return this$static.ptr + this$static.scopePointCount - w;
}

function $timeStep_0(this$static){
  var v;
  if (!this$static.elm)
    return;
  v = this$static.elm.getScopeValue(this$static.value_0);
  v < this$static.minValues[this$static.ptr] && (this$static.minValues[this$static.ptr] = v);
  v > this$static.maxValues[this$static.ptr] && (this$static.maxValues[this$static.ptr] = v);
  this$static.lastValue = v;
  ++this$static.ctr;
  if (this$static.ctr >= this$static.speed) {
    this$static.ptr = this$static.ptr + 1 & this$static.scopePointCount - 1;
    this$static.minValues[this$static.ptr] = this$static.maxValues[this$static.ptr] = v;
    this$static.ctr = 0;
  }
}

function ScopePlot(e){
  $clinit_ScopePlot();
  this.elm = e;
  this.units = 0;
}

function ScopePlot_0(e, u, v){
  $clinit_ScopePlot();
  this.elm = e;
  this.units = u;
  this.value_0 = v;
}

defineClass(12, 1, {12:1}, ScopePlot, ScopePlot_0);
_.ctr = 0;
_.lastValue = 0;
_.ptr = 0;
_.scopePointCount = 0;
_.speed = 0;
_.units = 0;
_.value_0 = 0;
var colors;
var Lcom_lushprojects_circuitjs1_client_ScopePlot_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ScopePlot', 12);
function $clinit_ScrollValuePopup(){
  $clinit_ScrollValuePopup = emptyMethod;
  e12 = stampJavaTypeInfo(getClassLiteralForArray(D_classLit, 1), $intern_57, 9, 15, [1, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2]);
}

function $close_0(this$static, keepChanges){
  var idx;
  keepChanges?(idx = $getSelIdx(this$static) , $setElmValue(this$static, idx)):$setElmValue(this$static, this$static.currentidx);
  $hide(this$static, false);
}

function $doDeltaY(this$static, dy){
  var idx;
  this$static.deltaY += dy;
  this$static.currentidx + (this$static.deltaY / 3 | 0) < 0 && (this$static.deltaY = -3 * this$static.currentidx);
  this$static.currentidx + (this$static.deltaY / 3 | 0) >= this$static.nvalues && (this$static.deltaY = (this$static.nvalues - this$static.currentidx - 1) * 3);
  idx = $getSelIdx(this$static);
  $setElmValue(this$static, idx);
  $setupLabels(this$static);
}

function $getSelIdx(this$static){
  var r;
  r = this$static.currentidx + (this$static.deltaY / 3 | 0);
  r < 0 && (r = 0);
  r >= this$static.nvalues && (r = this$static.nvalues - 1);
  return r;
}

function $setElmValue(this$static, i){
  if (i != this$static.lastidx) {
    this$static.lastidx = i;
    this$static.inf.value_0 = this$static.values[i];
    this$static.myElm.setEditValue(0, this$static.inf);
    this$static.sim.analyzeFlag = true;
  }
}

function $setupLabels(this$static){
  var i, thissel;
  thissel = $getSelIdx(this$static);
  for (i = 0; i < 5; i++) {
    $removeStyleDependentName(this$static.labels[i]);
    if (thissel + i - 2 < 0 || thissel + i - 2 >= this$static.nvalues)
      $setText_0(this$static.labels[i], '---');
    else {
      $setText_0(this$static.labels[i], myGetUnitText(this$static.values[thissel + i - 2], '', true));
      thissel + i - 2 == this$static.currentidx && $addStyleDependentName(this$static.labels[i], 'current');
    }
  }
}

function $setupValues(this$static){
  var currentvalue, i, i0, j, ptr;
  if (instanceOf(this$static.myElm, 92)) {
    this$static.minpow = 0;
    this$static.maxpow = 6;
  }
  if (instanceOf(this$static.myElm, 53)) {
    this$static.minpow = -11;
    this$static.maxpow = -3;
  }
  if (instanceOf(this$static.myElm, 102)) {
    this$static.minpow = -6;
    this$static.maxpow = 0;
  }
  this$static.values = initUnidimensionalArray(D_classLit, $intern_57, 9, 2 + (this$static.maxpow - this$static.minpow) * 12, 15, 1);
  ptr = 0;
  for (i0 = this$static.minpow; i0 <= this$static.maxpow; i0++) {
    for (j = 0; j < (i0 != this$static.maxpow?12:1); ++j , ptr++) {
      this$static.values[ptr] = $wnd.Math.pow(10, i0) * e12[j];
    }
  }
  this$static.nvalues = ptr;
  this$static.values[this$static.nvalues] = 1.0E99;
  this$static.inf = this$static.myElm.getEditInfo(0);
  currentvalue = this$static.inf.value_0;
  for (i = 0; i < this$static.nvalues + 1; i++) {
    if (myGetUnitText(currentvalue, '', true) == myGetUnitText(this$static.values[i], '', true)) {
      this$static.values[i] = currentvalue;
      this$static.currentidx = i;
      break;
    }
    if (currentvalue < this$static.values[i]) {
      this$static.currentidx = i;
      for (j = this$static.nvalues - 1; j >= i; j--)
        this$static.values[j + 1] = this$static.values[j];
      this$static.values[i] = currentvalue;
      ++this$static.nvalues;
      break;
    }
  }
  this$static.name_0 = this$static.inf.name_0;
  this$static.lastidx = this$static.currentidx;
}

function ScrollValuePopup(x_0, y_0, dy, e, s){
  $clinit_ScrollValuePopup();
  var i;
  PopupPanel.call(this);
  this.minpow = 0;
  this.maxpow = 1;
  this.myElm = e;
  this.deltaY = 0;
  this.sim = s;
  $pushUndo(this.sim);
  this.vp = new VerticalPanel;
  $setWidget_0(this, this.vp);
  $setupValues(this);
  $add_4(this.vp, new Label_0(this.name_0));
  this.labels = initUnidimensionalArray(Lcom_google_gwt_user_client_ui_Label_2_classLit, $intern_3, 36, 5, 0, 1);
  for (i = 0; i < 5; i++) {
    this.labels[i] = new Label_0('---');
    $setHorizontalAlignment(this.labels[i], ($clinit_HasHorizontalAlignment() , ALIGN_CENTER));
    i == 2?$addStyleDependentName(this.labels[2], 'selected'):i == 1 || i == 3?$addStyleDependentName(this.labels[i], '1off'):$addStyleDependentName(this.labels[i], '2off');
    $add_4(this.vp, this.labels[i]);
  }
  $doDeltaY(this, dy);
  $addDomHandler(this, this, ($clinit_MouseOutEvent() , $clinit_MouseOutEvent() , TYPE_6));
  $addDomHandler(this, this, ($clinit_MouseWheelEvent() , $clinit_MouseWheelEvent() , TYPE_9));
  $addDomHandler(this, this, ($clinit_MouseDownEvent() , $clinit_MouseDownEvent() , TYPE_4));
  $setPopupPositionAndShow(this, new ScrollValuePopup$1(this, x_0, y_0));
}

defineClass(581, 44, {226:1, 227:1, 152:1, 27:1, 95:1, 32:1, 23:1, 25:1, 103:1, 21:1, 40:1, 28:1, 44:1, 18:1, 19:1}, ScrollValuePopup);
_.onMouseDown = function onMouseDown_1(e){
  var idx;
  $eventGetButton(e.nativeEvent) == 1 || $eventGetButton(e.nativeEvent) == 4?(idx = $getSelIdx(this) , $setElmValue(this, idx) , $hide(this, false)):($setElmValue(this, this.currentidx) , $hide(this, false));
}
;
_.onMouseOut = function onMouseOut_1(e){
  var idx;
  idx = $getSelIdx(this);
  $setElmValue(this, idx);
  $hide(this, false);
}
;
_.onMouseWheel = function onMouseWheel_1(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  $doDeltaY(this, $eventGetMouseWheelVelocityY(e.nativeEvent));
}
;
_.currentidx = 0;
_.deltaY = 0;
_.lastidx = 0;
_.maxpow = 0;
_.minpow = 0;
_.nvalues = 0;
var e12;
var Lcom_lushprojects_circuitjs1_client_ScrollValuePopup_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ScrollValuePopup', 581);
function ScrollValuePopup$1(this$0, val$x, val$y){
  this.this$01 = this$0;
  this.val$x2 = val$x;
  this.val$y3 = val$y;
}

defineClass(582, 1, {}, ScrollValuePopup$1);
_.setPosition = function setPosition_0(offsetWidth, offsetHeight){
  var left, top_0;
  left = $wnd.Math.max(0, this.val$x2 - (offsetWidth / 4 | 0));
  top_0 = $wnd.Math.max(0, this.val$y3 - (7 * offsetHeight / 12 | 0));
  $setPopupPosition(this.this$01, left, top_0);
}
;
_.val$x2 = 0;
_.val$y3 = 0;
var Lcom_lushprojects_circuitjs1_client_ScrollValuePopup$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ScrollValuePopup/1', 582);
function $calcValueFromPos(this$static, x_0){
  var v;
  v = this$static.min_0 + ((this$static.max_0 - this$static.min_0) * (x_0 - HMARGIN - SCROLLHEIGHT - BARMARGIN) / (VERTICALPANELWIDTH - 2 * (HMARGIN + SCROLLHEIGHT + BARMARGIN)) | 0);
  v < this$static.min_0 && (v = this$static.min_0);
  v > this$static.max_0 && (v = this$static.max_0);
  return v;
}

function $disable(this$static){
  this$static.enabled = false;
  this$static.dragging = false;
  $draw_4(this$static);
}

function $doMouseDown(this$static, x_0, mouse){
  if (this$static.enabled) {
    if (x_0 < HMARGIN + SCROLLHEIGHT) {
      this$static.val_0 > this$static.min_0 && --this$static.val_0;
    }
     else {
      if (x_0 > VERTICALPANELWIDTH - HMARGIN - SCROLLHEIGHT) {
        this$static.val_0 < this$static.max_0 && ++this$static.val_0;
      }
       else {
        this$static.val_0 = $calcValueFromPos(this$static, x_0);
        this$static.dragging = true;
        mouse && setCapture_0($getElement(this$static.can));
      }
    }
    $draw_4(this$static);
    !!this$static.command && $execute_3(this$static.command);
  }
}

function $doMouseMove(this$static, x_0){
  if (this$static.enabled) {
    if (this$static.dragging) {
      this$static.val_0 = $calcValueFromPos(this$static, x_0);
      $draw_4(this$static);
      !!this$static.command && $execute_3(this$static.command);
    }
  }
}

function $draw_4(this$static){
  var p;
  this$static.enabled?(this$static.g.strokeStyle = '#000000' , undefined):(this$static.g.strokeStyle = 'lightgrey' , undefined);
  this$static.g.lineWidth = 1;
  $fillRect(this$static.g, 0, 0, VERTICALPANELWIDTH, SCROLLHEIGHT);
  this$static.g.beginPath();
  $moveTo(this$static.g, HMARGIN + SCROLLHEIGHT - 3, 0);
  $lineTo(this$static.g, HMARGIN, SCROLLHEIGHT / 2 | 0);
  $lineTo(this$static.g, HMARGIN + SCROLLHEIGHT - 3, SCROLLHEIGHT);
  $moveTo(this$static.g, VERTICALPANELWIDTH - HMARGIN - SCROLLHEIGHT + 3, 0);
  $lineTo(this$static.g, VERTICALPANELWIDTH - HMARGIN, SCROLLHEIGHT / 2 | 0);
  $lineTo(this$static.g, VERTICALPANELWIDTH - HMARGIN - SCROLLHEIGHT + 3, SCROLLHEIGHT);
  this$static.g.stroke();
  this$static.enabled && (this$static.g.strokeStyle = 'grey' , undefined);
  this$static.g.beginPath();
  this$static.g.lineWidth = 5;
  $moveTo(this$static.g, HMARGIN + SCROLLHEIGHT + BARMARGIN, SCROLLHEIGHT / 2 | 0);
  $lineTo(this$static.g, VERTICALPANELWIDTH - HMARGIN - SCROLLHEIGHT - BARMARGIN, SCROLLHEIGHT / 2 | 0);
  this$static.g.stroke();
  p = HMARGIN + SCROLLHEIGHT + BARMARGIN + (VERTICALPANELWIDTH - 2 * (HMARGIN + SCROLLHEIGHT + BARMARGIN)) * (this$static.val_0 - this$static.min_0) / (this$static.max_0 - this$static.min_0);
  if (this$static.enabled) {
    !!this$static.attachedElm && $needsHighlight(this$static.attachedElm)?(this$static.g.strokeStyle = 'cyan' , undefined):(this$static.g.strokeStyle = 'red' , undefined);
    this$static.g.beginPath();
    $moveTo(this$static.g, HMARGIN + SCROLLHEIGHT + BARMARGIN, SCROLLHEIGHT / 2 | 0);
    $lineTo(this$static.g, p, SCROLLHEIGHT / 2 | 0);
    this$static.g.stroke();
    this$static.g.strokeStyle = '#000000';
    this$static.g.lineWidth = 2;
    $fillRect(this$static.g, p - 2, 2, 5, SCROLLHEIGHT - 4);
    $strokeRect(this$static.g, p - 2, 2, 5, SCROLLHEIGHT - 4);
  }
}

function $enable(this$static){
  this$static.enabled = true;
  $draw_4(this$static);
}

function $onMouseWheel_0(this$static, e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  this$static.enabled && $setValue_3(this$static, this$static.val_0 + ($eventGetMouseWheelVelocityY(e.nativeEvent) / 3 | 0));
}

function $onTouchEnd(this$static, event_0){
  !!event_0.nativeEvent && (event_0.nativeEvent.preventDefault() , undefined);
  if (this$static.enabled && this$static.dragging) {
    this$static.dragging = false;
    $draw_4(this$static);
    !!this$static.command && $execute_3(this$static.command);
  }
}

function $setValue_3(this$static, i){
  i < this$static.min_0?(i = this$static.min_0):i > this$static.max_0 && (i = this$static.max_0);
  this$static.val_0 = i;
  $draw_4(this$static);
  !!this$static.command && $execute_3(this$static.command);
}

function Scrollbar(value_0, minimum, maximum){
  this.min_0 = minimum;
  this.max_0 = maximum - 1;
  this.val_0 = value_0;
  this.pan = new VerticalPanel;
  this.can = createIfSupported();
  $setWidth(this.can, VERTICALPANELWIDTH + ' px');
  $setHeight(this.can, '40 px');
  $setCoordinateSpaceWidth(this.can, VERTICALPANELWIDTH);
  $setCoordinateSpaceHeight(this.can, SCROLLHEIGHT);
  $add_4(this.pan, this.can);
  this.g = $getContext2d(this.can);
  this.g.fillStyle = '#ffffff';
  $addDomHandler(this.can, this, ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1));
  $addDomHandler(this.can, this, ($clinit_MouseDownEvent() , $clinit_MouseDownEvent() , TYPE_4));
  $addDomHandler(this.can, this, ($clinit_MouseUpEvent() , $clinit_MouseUpEvent() , TYPE_8));
  $addDomHandler(this.can, this, ($clinit_MouseMoveEvent() , $clinit_MouseMoveEvent() , TYPE_5));
  $addDomHandler(this.can, this, ($clinit_MouseOutEvent() , $clinit_MouseOutEvent() , TYPE_6));
  $addDomHandler(this.can, this, ($clinit_MouseOverEvent() , $clinit_MouseOverEvent() , TYPE_7));
  $addDomHandler(this.can, this, ($clinit_MouseWheelEvent() , $clinit_MouseWheelEvent() , TYPE_9));
  $addDomHandler(this.can, this, ($clinit_TouchStartEvent() , $clinit_TouchStartEvent() , TYPE_13));
  $addDomHandler(this.can, this, ($clinit_TouchMoveEvent() , $clinit_TouchMoveEvent() , TYPE_12));
  $addDomHandler(this.can, this, ($clinit_TouchEndEvent() , $clinit_TouchEndEvent() , TYPE_11));
  $addDomHandler(this.can, this, ($clinit_TouchCancelEvent() , $clinit_TouchCancelEvent() , TYPE_10));
  $draw_4(this);
  $initWidget(this, this.pan);
}

function Scrollbar_0(value_0, cmd, e){
  Scrollbar.call(this, value_0, 0, 101);
  this.command = cmd;
  this.attachedElm = e;
}

defineClass(145, 656, {47:1, 226:1, 321:1, 227:1, 627:1, 322:1, 152:1, 671:1, 672:1, 673:1, 670:1, 27:1, 32:1, 23:1, 25:1, 21:1, 28:1, 18:1, 19:1}, Scrollbar, Scrollbar_0);
_.onClick = function onClick_20(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
}
;
_.onMouseDown = function onMouseDown_2(e){
  this.dragging = false;
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  $doMouseDown(this, $getX(e), true);
}
;
_.onMouseMove = function onMouseMove_1(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  $doMouseMove(this, $getX(e));
}
;
_.onMouseOut = function onMouseOut_2(e){
  if (this.dragging)
    return;
  this.enabled && !!this.attachedElm && this.attachedElm.iAmMouseElm && $setMouseElm(sim_0, null);
}
;
_.onMouseOver = function onMouseOver_0(e){
  this.enabled && !!this.attachedElm && $setMouseElm(sim_0, this.attachedElm);
}
;
_.onMouseUp = function onMouseUp_1(e){
  !!e.nativeEvent && (e.nativeEvent.preventDefault() , undefined);
  releaseCapture_0($getElement(this.can));
  if (this.enabled && this.dragging) {
    this.val_0 = $calcValueFromPos(this, $getX(e));
    this.dragging = false;
    $draw_4(this);
    !!this.command && $execute_3(this.command);
  }
}
;
_.onMouseWheel = function onMouseWheel_2(e){
  $onMouseWheel_0(this, e);
}
;
_.attachedElm = null;
_.command = null;
_.dragging = false;
_.enabled = true;
_.max_0 = 0;
_.min_0 = 0;
_.val_0 = 0;
var BARMARGIN = 3, HMARGIN = 2, SCROLLHEIGHT = 14;
var Lcom_lushprojects_circuitjs1_client_Scrollbar_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Scrollbar', 145);
function $$init_19(this$static){
  this$static.data_0 = 0;
  this$static.position = 0;
  this$static.oneshot = false;
  this$static.lastchangetime = 0;
  this$static.clockstate = false;
}

function SeqGenElm(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_19(this);
}

function SeqGenElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_19(this);
  this.data_0 = (new Integer_0($nextToken(st))).value_0 << 16 >> 16;
  if ($hasMoreTokens(st)) {
    this.oneshot = $booleanValue(($clinit_Boolean() , $equalsIgnoreCase('true', $nextToken(st))));
    this.position = 8;
  }
}

defineClass(300, 13, $intern_66, SeqGenElm, SeqGenElm_0);
_.dump_0 = function dump_47(){
  return $dump(this) + ' ' + this.data_0 + ' ' + this.oneshot;
}
;
_.execute_2 = function execute_40(){
  if (this.oneshot) {
    if (sim_0.t - this.lastchangetime > 0.005) {
      this.position <= 8 && ((this.data_0 >>> this.position & 1) != 0?(this.pins[1].value_0 = true):(this.pins[1].value_0 = false) , ++this.position);
      this.lastchangetime = sim_0.t;
    }
  }
  if (this.pins[0].value_0 && !this.clockstate) {
    this.clockstate = true;
    if (this.oneshot) {
      this.position = 0;
    }
     else {
      (this.data_0 >>> this.position & 1) != 0?(this.pins[1].value_0 = true):(this.pins[1].value_0 = false);
      ++this.position;
      this.position >= 8 && (this.position = 0);
    }
  }
  this.pins[0].value_0 || (this.clockstate = false);
}
;
_.getChipName = function getChipName_24(){
  return 'Sequence generator';
}
;
_.getDumpType = function getDumpType_73(){
  return 188;
}
;
_.getEditInfo = function getEditInfo_52(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 0 set', (this.data_0 & 1) != 0);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 1 set', (this.data_0 & 2) != 0);
    return ei;
  }
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 2 set', (this.data_0 & 4) != 0);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 3 set', (this.data_0 & 8) != 0);
    return ei;
  }
  if (n == 4) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 4 set', (this.data_0 & 16) != 0);
    return ei;
  }
  if (n == 5) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 5 set', (this.data_0 & 32) != 0);
    return ei;
  }
  if (n == 6) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 6 set', (this.data_0 & 64) != 0);
    return ei;
  }
  if (n == 7) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bit 7 set', (this.data_0 & 128) != 0);
    return ei;
  }
  if (n == 8) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('One shot', this.oneshot);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_47(){
  return 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_38(){
  return 1;
}
;
_.setEditValue = function setEditValue_49(n, ei){
  if (n == 0) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 1) << 16 >> 16):(this.data_0 = (this.data_0 & -2) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 1) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 2) << 16 >> 16):(this.data_0 = (this.data_0 & -3) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 2) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 4) << 16 >> 16):(this.data_0 = (this.data_0 & -5) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 3) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 8) << 16 >> 16):(this.data_0 = (this.data_0 & -9) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 4) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 16) << 16 >> 16):(this.data_0 = (this.data_0 & -17) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 5) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 32) << 16 >> 16):(this.data_0 = (this.data_0 & -33) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 6) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 64) << 16 >> 16):(this.data_0 = (this.data_0 & -65) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 7) {
    $getState(ei.checkbox)?(this.data_0 = (this.data_0 | 128) << 16 >> 16):(this.data_0 = (this.data_0 & -129) << 16 >> 16);
    $setPoints_0(this);
  }
  if (n == 8) {
    if ($getState(ei.checkbox)) {
      this.oneshot = true;
      this.position = 8;
    }
     else {
      this.position = 0;
      this.oneshot = false;
    }
  }
}
;
_.setupPins = function setupPins_24(){
  this.sizeX = 2;
  this.sizeY = 2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 2, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, '');
  this.pins[0].clock = true;
  this.pins[1] = new ChipElm$Pin(this, 1, 3, 'Q');
  this.pins[1].output = true;
}
;
_.clockstate = false;
_.data_0 = 0;
_.lastchangetime = 0;
_.oneshot = false;
_.position = 0;
var Lcom_lushprojects_circuitjs1_client_SeqGenElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SeqGenElm', 300);
function $clinit_SevenSegDecoderElm(){
  $clinit_SevenSegDecoderElm = emptyMethod;
  symbols = stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 2), $intern_3, 43, 0, [stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, true, true, true, false]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [false, true, true, false, false, false, false]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, false, true, true, false, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, true, false, false, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [false, true, true, false, false, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, false, true, true, false, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, false, true, true, true, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, false, false, false, false]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, true, true, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, false, false, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, true, true, false, true, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [false, false, true, true, true, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, false, false, true, true, true, false]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [false, true, true, true, true, false, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, false, false, true, true, true, true]), stampJavaTypeInfo(getClassLiteralForArray(Z_classLit, 1), $intern_72, 9, 16, [true, false, false, false, true, true, true])]);
}

function SevenSegDecoderElm(xx, yy){
  $clinit_SevenSegDecoderElm();
  ChipElm.call(this, xx, yy);
}

function SevenSegDecoderElm_0(xa, ya, xb, yb, f, st){
  $clinit_SevenSegDecoderElm();
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(305, 13, $intern_66, SevenSegDecoderElm, SevenSegDecoderElm_0);
_.execute_2 = function execute_41(){
  var i, input_0;
  input_0 = 0;
  this.pins[7].value_0 && (input_0 += 8);
  this.pins[8].value_0 && (input_0 += 4);
  this.pins[9].value_0 && (input_0 += 2);
  this.pins[10].value_0 && (input_0 += 1);
  for (i = 0; i < 7; i++) {
    this.pins[i].value_0 = symbols[input_0][i];
  }
}
;
_.getChipName = function getChipName_25(){
  return 'Seven Segment LED Decoder';
}
;
_.getDumpType = function getDumpType_74(){
  return 197;
}
;
_.getPostCount = function getPostCount_48(){
  return 11;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_39(){
  return 7;
}
;
_.setupPins = function setupPins_25(){
  this.sizeX = 3;
  this.sizeY = 7;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 11, 0, 1);
  this.pins[7] = new ChipElm$Pin(this, 0, 2, 'I3');
  this.pins[8] = new ChipElm$Pin(this, 1, 2, 'I2');
  this.pins[9] = new ChipElm$Pin(this, 2, 2, 'I1');
  this.pins[10] = new ChipElm$Pin(this, 3, 2, 'I0');
  this.pins[0] = new ChipElm$Pin(this, 0, 3, 'a');
  this.pins[0].output = true;
  this.pins[1] = new ChipElm$Pin(this, 1, 3, 'b');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 2, 3, 'c');
  this.pins[2].output = true;
  this.pins[3] = new ChipElm$Pin(this, 3, 3, 'd');
  this.pins[3].output = true;
  this.pins[4] = new ChipElm$Pin(this, 4, 3, 'e');
  this.pins[4].output = true;
  this.pins[5] = new ChipElm$Pin(this, 5, 3, 'f');
  this.pins[5].output = true;
  this.pins[6] = new ChipElm$Pin(this, 6, 3, 'g');
  this.pins[6].output = true;
}
;
var symbols;
var Lcom_lushprojects_circuitjs1_client_SevenSegDecoderElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SevenSegDecoderElm', 305);
function SevenSegElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function SevenSegElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(287, 13, $intern_66, SevenSegElm, SevenSegElm_0);
_.draw = function draw_47(g){
  var xl, yl;
  $drawChip(this, g);
  $setColor(g, ($clinit_Color() , red));
  xl = this.x_0 + this.cspc * 5;
  yl = this.y_0 + this.cspc;
  $setColor(g, this.pins[0].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl, yl, xl + this.cspc, yl);
  $setColor(g, this.pins[1].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl + this.cspc, yl, xl + this.cspc, yl + this.cspc);
  $setColor(g, this.pins[2].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl + this.cspc, yl + this.cspc, xl + this.cspc, yl + this.cspc2);
  $setColor(g, this.pins[3].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl, yl + this.cspc2, xl + this.cspc, yl + this.cspc2);
  $setColor(g, this.pins[4].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl, yl + this.cspc, xl, yl + this.cspc2);
  $setColor(g, this.pins[5].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl, yl, xl, yl + this.cspc);
  $setColor(g, this.pins[6].value_0?red:sim_0.printableCheckItem.on?white:this.darkred);
  drawThickLine(g, xl, yl + this.cspc, xl + this.cspc, yl + this.cspc);
}
;
_.getChipName = function getChipName_26(){
  return '7-segment driver/display';
}
;
_.getDumpType = function getDumpType_75(){
  return 157;
}
;
_.getPostCount = function getPostCount_49(){
  return 7;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_40(){
  return 0;
}
;
_.setupPins = function setupPins_26(){
  this.darkred = new Color(30, 0, 0);
  this.sizeX = 4;
  this.sizeY = 4;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 7, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, 'a');
  this.pins[1] = new ChipElm$Pin(this, 1, 2, 'b');
  this.pins[2] = new ChipElm$Pin(this, 2, 2, 'c');
  this.pins[3] = new ChipElm$Pin(this, 3, 2, 'd');
  this.pins[4] = new ChipElm$Pin(this, 1, 1, 'e');
  this.pins[5] = new ChipElm$Pin(this, 2, 1, 'f');
  this.pins[6] = new ChipElm$Pin(this, 3, 1, 'g');
}
;
var Lcom_lushprojects_circuitjs1_client_SevenSegElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SevenSegElm', 287);
function $$init_20(this$static){
  this$static.data_0 = 0;
  this$static.clockstate = false;
}

function SipoShiftElm(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_20(this);
}

function SipoShiftElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_20(this);
}

defineClass(292, 13, $intern_66, SipoShiftElm, SipoShiftElm_0);
_.execute_2 = function execute_42(){
  if (this.pins[1].value_0 && !this.clockstate) {
    this.clockstate = true;
    this.data_0 = this.data_0 >>> 1 << 16 >> 16;
    this.pins[0].value_0 && (this.data_0 = this.data_0 + 128 << 16 >> 16);
    (this.data_0 & 128) > 0?(this.pins[2].value_0 = true):(this.pins[2].value_0 = false);
    (this.data_0 & 64) > 0?(this.pins[3].value_0 = true):(this.pins[3].value_0 = false);
    (this.data_0 & 32) > 0?(this.pins[4].value_0 = true):(this.pins[4].value_0 = false);
    (this.data_0 & 16) > 0?(this.pins[5].value_0 = true):(this.pins[5].value_0 = false);
    (this.data_0 & 8) > 0?(this.pins[6].value_0 = true):(this.pins[6].value_0 = false);
    (this.data_0 & 4) > 0?(this.pins[7].value_0 = true):(this.pins[7].value_0 = false);
    (this.data_0 & 2) > 0?(this.pins[8].value_0 = true):(this.pins[8].value_0 = false);
    (this.data_0 & 1) > 0?(this.pins[9].value_0 = true):(this.pins[9].value_0 = false);
  }
  this.pins[1].value_0 || (this.clockstate = false);
}
;
_.getChipName = function getChipName_27(){
  return 'SIPO shift register';
}
;
_.getDumpType = function getDumpType_76(){
  return 189;
}
;
_.getPostCount = function getPostCount_50(){
  return 10;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_41(){
  return 8;
}
;
_.setupPins = function setupPins_27(){
  this.sizeX = 9;
  this.sizeY = 3;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 10, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 1, 2, 'D');
  this.pins[1] = new ChipElm$Pin(this, 2, 2, '');
  this.pins[1].clock = true;
  this.pins[2] = new ChipElm$Pin(this, 1, 0, 'I7');
  this.pins[2].output = true;
  this.pins[3] = new ChipElm$Pin(this, 2, 0, 'I6');
  this.pins[3].output = true;
  this.pins[4] = new ChipElm$Pin(this, 3, 0, 'I5');
  this.pins[4].output = true;
  this.pins[5] = new ChipElm$Pin(this, 4, 0, 'I4');
  this.pins[5].output = true;
  this.pins[6] = new ChipElm$Pin(this, 5, 0, 'I3');
  this.pins[6].output = true;
  this.pins[7] = new ChipElm$Pin(this, 6, 0, 'I2');
  this.pins[7].output = true;
  this.pins[8] = new ChipElm$Pin(this, 7, 0, 'I1');
  this.pins[8].output = true;
  this.pins[9] = new ChipElm$Pin(this, 8, 0, 'I0');
  this.pins[9].output = true;
}
;
_.clockstate = false;
_.data_0 = 0;
var Lcom_lushprojects_circuitjs1_client_SipoShiftElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SipoShiftElm', 292);
function SparkGapElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.offresistance = $intern_63;
  this.onresistance = $intern_20;
  this.breakdown = $intern_20;
  this.holdcurrent = $intern_64;
  this.state = false;
}

function SparkGapElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.onresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.offresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.breakdown = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.holdcurrent = $doubleValue(__parseAndValidateDouble($nextToken(st)));
}

defineClass(270, 4, $intern_66, SparkGapElm, SparkGapElm_0);
_.calculateCurrent = function calculateCurrent_14(){
  var vd;
  vd = this.volts[0] - this.volts[1];
  this.current_0 = vd / this.resistance;
}
;
_.doStep = function doStep_32(){
  this.resistance = this.state?this.onresistance:this.offresistance;
  $stampResistor(sim_0, this.nodes[0], this.nodes[1], this.resistance);
}
;
_.draw = function draw_48(g){
  $setBbox_0(this, this.point1, this.point2, 8);
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setVoltageColor(this, g, this.volts[0]);
  $fillPolygon(g, this.arrow1);
  $setVoltageColor(this, g, this.volts[1]);
  $fillPolygon(g, this.arrow2);
  this.state && (this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0) , sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0));
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_48(){
  return '187 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.onresistance + ' ' + this.offresistance + ' ' + this.breakdown + ' ' + this.holdcurrent;
}
;
_.getDumpType = function getDumpType_77(){
  return 187;
}
;
_.getEditInfo = function getEditInfo_53(n){
  if (n == 0)
    return new EditInfo('On resistance (ohms)', this.onresistance, 0, 0);
  if (n == 1)
    return new EditInfo('Off resistance (ohms)', this.offresistance, 0, 0);
  if (n == 2)
    return new EditInfo('Breakdown voltage', this.breakdown, 0, 0);
  if (n == 3)
    return new EditInfo('Holding current (A)', this.holdcurrent, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_44(arr){
  arr[0] = 'spark gap';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = this.state?'on':'off';
  arr[4] = 'Ron = ' + myGetUnitText(this.onresistance, ohmString, false);
  arr[5] = 'Roff = ' + myGetUnitText(this.offresistance, ohmString, false);
  arr[6] = 'Vbreakdown = ' + myGetUnitText(this.breakdown, 'V', false);
}
;
_.nonLinear = function nonLinear_14(){
  return true;
}
;
_.reset_0 = function reset_22(){
  $reset(this);
  this.state = false;
}
;
_.setEditValue = function setEditValue_50(n, ei){
  ei.value_0 > 0 && n == 0 && (this.onresistance = ei.value_0);
  ei.value_0 > 0 && n == 1 && (this.offresistance = ei.value_0);
  ei.value_0 > 0 && n == 2 && (this.breakdown = ei.value_0);
  ei.value_0 > 0 && n == 3 && (this.holdcurrent = ei.value_0);
}
;
_.setPoints = function setPoints_42(){
  var p1;
  $setPoints(this);
  $calcLeads(this, 24);
  p1 = $interpPoint(this.point1, this.point2, (this.dn - 8) / (2 * this.dn));
  this.arrow1 = $calcArrow(this.point1, p1, 8, 8);
  p1 = $interpPoint(this.point1, this.point2, (this.dn + 8) / (2 * this.dn));
  this.arrow2 = $calcArrow(this.point2, p1, 8, 8);
}
;
_.stamp = function stamp_36(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.startIteration = function startIteration_6(){
  var vd;
  $wnd.Math.abs(this.current_0) < this.holdcurrent && (this.state = false);
  vd = this.volts[0] - this.volts[1];
  $wnd.Math.abs(vd) > this.breakdown && (this.state = true);
}
;
_.breakdown = 0;
_.holdcurrent = 0;
_.offresistance = 0;
_.onresistance = 0;
_.resistance = 0;
_.state = false;
var Lcom_lushprojects_circuitjs1_client_SparkGapElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SparkGapElm', 270);
function $$init_21(this$static){
  this$static.angulo = 0;
}

function $setupPins_8(this$static){
  var i, iside, s;
  (this$static.flags & $intern_31) != 0 && (this$static.angulo = 1);
  this$static.totalPinos == 0 && (this$static.totalPinos = 8);
  this$static.sizeX = this$static.angulo == 0?2:9;
  this$static.sizeY = this$static.angulo == 0?9:2;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 1 + this$static.totalPinos, 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 4, this$static.angulo == 0?2:0, 'I');
  for (i = START_MEN_PIN_2; i < START_MEN_PIN_2 + this$static.totalPinos; i++) {
    iside = i - START_MEN_PIN_2;
    if (iside > 3) {
      iside += 1;
      s = $concat('I', '' + (this$static.totalPinos - iside));
    }
     else 
      s = $concat('O', '' + (this$static.totalPinos - iside - 1));
    this$static.pins[i] = new ChipElm$Pin(this$static, iside, this$static.angulo == 0?3:1, s);
    this$static.pins[i].output = true;
  }
}

function Spliter(xx, yy){
  ChipElm.call(this, xx, yy);
  $$init_21(this);
  this.totalPinos = 8;
}

function Spliter_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  $$init_21(this);
}

defineClass(263, 13, $intern_66, Spliter, Spliter_0);
_.execute_2 = function execute_43(){
  var comparador, i, resto, v;
  v = this.volts[0];
  resto = round_int(v);
  comparador = 128;
  for (i = 1; i <= this.totalPinos; i++) {
    if (resto >= comparador) {
      this.pins[i].value_0 = true;
      resto = resto - comparador;
    }
     else {
      this.pins[i].value_0 = false;
    }
    comparador = comparador / 2 | 0;
  }
}
;
_.getChipName = function getChipName_28(){
  return 'Spliter (separa um grupo de fios em 8 fios)';
}
;
_.getDumpType = function getDumpType_78(){
  return 1004;
}
;
_.getEditInfo = function getEditInfo_54(n){
  var ei;
  if (n < 2)
    return $getEditInfo_0(this, n);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Rotacione', (this.flags & $intern_31) != 0);
    return ei;
  }
  return null;
}
;
_.getPostCount = function getPostCount_51(){
  return 1 + this.totalPinos;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_42(){
  return this.totalPinos;
}
;
_.setEditValue = function setEditValue_51(n, ei){
  n < 2 && $setEditValue(this, n, ei);
  if (n == 2) {
    if ($getState(ei.checkbox)) {
      this.flags |= $intern_31;
      this.angulo = 1;
    }
     else {
      this.flags &= -4097;
      this.angulo = 0;
    }
    $setupPins_8(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
}
;
_.setupPins = function setupPins_28(){
  $setupPins_8(this);
}
;
_.angulo = 0;
_.totalPinos = 0;
var START_MEN_PIN_2 = 1;
var Lcom_lushprojects_circuitjs1_client_Spliter_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Spliter', 263);
function SquareRailElm(xx, yy){
  RailElm_0.call(this, xx, yy, 2);
}

defineClass(487, 38, $intern_70, SquareRailElm);
_.getShortcut = function getShortcut_32(){
  return 0;
}
;
var Lcom_lushprojects_circuitjs1_client_SquareRailElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SquareRailElm', 487);
function $hasMoreTokens(this$static){
  if (!this$static.retDelims) {
    while (this$static.pos < this$static.len && $indexOf_0(this$static.delim, fromCodePoint($charAt_0(this$static.str, this$static.pos))) >= 0)
      ++this$static.pos;
  }
  return this$static.pos < this$static.len;
}

function $nextToken(this$static){
  var start_0;
  if (this$static.pos < this$static.len && $indexOf_0(this$static.delim, fromCodePoint($charAt_0(this$static.str, this$static.pos))) >= 0) {
    if (this$static.retDelims)
      return $substring_0(this$static.str, this$static.pos, ++this$static.pos);
    while (++this$static.pos < this$static.len && $indexOf_0(this$static.delim, fromCodePoint($charAt_0(this$static.str, this$static.pos))) >= 0)
    ;
  }
  if (this$static.pos < this$static.len) {
    start_0 = this$static.pos;
    while (++this$static.pos < this$static.len && $indexOf_0(this$static.delim, fromCodePoint($charAt_0(this$static.str, this$static.pos))) < 0)
    ;
    return $substring_0(this$static.str, start_0, this$static.pos);
  }
  throw toJs(new NoSuchElementException);
}

function StringTokenizer(str, delim){
  this.len = str.length;
  this.str = str;
  this.delim = delim;
  this.retDelims = false;
  this.pos = 0;
}

defineClass(161, 1, {}, StringTokenizer);
_.len = 0;
_.pos = 0;
_.retDelims = false;
var Lcom_lushprojects_circuitjs1_client_StringTokenizer_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'StringTokenizer', 161);
function $reset_5(this$static){
  this$static.frequency = this$static.minF;
  this$static.freqTime = 0;
  this$static.dir_0 = 1;
  $setParams(this$static);
}

function $setParams(this$static){
  if (this$static.frequency < this$static.minF || this$static.frequency > this$static.maxF) {
    this$static.frequency = this$static.minF;
    this$static.freqTime = 0;
    this$static.dir_0 = 1;
  }
  if ((this$static.flags & 1) == 0) {
    this$static.fadd = this$static.dir_0 * sim_0.timeStep * (this$static.maxF - this$static.minF) / this$static.sweepTime;
    this$static.fmul = 1;
  }
   else {
    this$static.fadd = 0;
    this$static.fmul = $wnd.Math.pow(this$static.maxF / this$static.minF, this$static.dir_0 * sim_0.timeStep / this$static.sweepTime);
  }
  this$static.savedTimeStep = sim_0.timeStep;
}

function SweepElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.dir_0 = 1;
  this.minF = 20;
  this.maxF = 4000;
  this.maxV = 5;
  this.sweepTime = 0.1;
  this.flags = 2;
  $reset_5(this);
}

function SweepElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.dir_0 = 1;
  this.minF = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.maxF = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.maxV = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.sweepTime = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  $reset_5(this);
}

defineClass(189, 4, {4:1, 8:1, 189:1}, SweepElm, SweepElm_0);
_.doStep = function doStep_33(){
  $updateVoltageSource(sim_0, this.voltSource, this.v);
}
;
_.draw = function draw_49(g){
  var i, s, tm, w, xc, yc, yy;
  $setBbox_0(this, this.point1, this.point2, 17);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:($clinit_Color() , gray));
  $setPowerColor_0(this, g);
  xc = this.point2.x_0;
  yc = this.point2.y_0;
  drawThickCircle(g, xc, yc, 17);
  $adjustBbox(this, xc - 17, yc - 17, xc + 17, yc + 17);
  tm = ($clinit_System() , fromDouble_0(Date.now()));
  tm = mod(tm, 2000);
  compare_0(tm, $intern_20) > 0 && (tm = sub_1(2000, tm));
  w = 1 + toDouble_0(tm) * 0.002;
  sim_0.simRunning && (w = 1 + 2 * (this.frequency - this.minF) / (this.maxF - this.minF));
  g.context.beginPath();
  g.context.lineWidth = 3;
  for (i = -10; i <= 10; i++) {
    yy = yc + round_int(0.95 * $wnd.Math.sin(i * $intern_1 * w / 10) * 8);
    i == -10?$moveTo(g.context, xc + -10, yy):$lineTo(g.context, xc + i, yy);
  }
  g.context.stroke();
  g.context.lineWidth = 1;
  if (sim_0.showValuesCheckItem.on) {
    s = myGetUnitText(this.frequency, 'Hz', true);
    (this.dx == 0 || this.dy == 0) && $drawValues(this, g, s, 17);
  }
  $drawPosts(this, g);
  this.curcount_0 = $updateDotCount(-this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.lead1, this.curcount_0);
}
;
_.dump_0 = function dump_49(){
  return '170 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.minF + ' ' + this.maxF + ' ' + this.maxV + ' ' + this.sweepTime;
}
;
_.getDumpType = function getDumpType_79(){
  return 170;
}
;
_.getEditInfo = function getEditInfo_55(n){
  var ei;
  if (n == 0)
    return new EditInfo('Min Frequency (Hz)', this.minF, 0, 0);
  if (n == 1)
    return new EditInfo('Max Frequency (Hz)', this.maxF, 0, 0);
  if (n == 2)
    return new EditInfo('Sweep Time (s)', this.sweepTime, 0, 0);
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Logarithmic', (this.flags & 1) != 0);
    return ei;
  }
  if (n == 4)
    return new EditInfo('Max Voltage', this.maxV, 0, 0);
  if (n == 5) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Bidirectional', (this.flags & 2) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_45(arr){
  arr[0] = 'sweep ' + ((this.flags & 1) == 0?'(linear)':'(log)');
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
  arr[3] = 'f = ' + myGetUnitText(this.frequency, 'Hz', false);
  arr[4] = 'range = ' + myGetUnitText(this.minF, 'Hz', false) + ' .. ' + myGetUnitText(this.maxF, 'Hz', false);
  arr[5] = 'time = ' + myGetUnitText(this.sweepTime, 's', false);
}
;
_.getPostCount = function getPostCount_52(){
  return 1;
}
;
_.getVoltageDiff = function getVoltageDiff_17(){
  return this.volts[0];
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_43(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_12(n1){
  return true;
}
;
_.reset_0 = function reset_23(){
  $reset_5(this);
}
;
_.setEditValue = function setEditValue_52(n, ei){
  var maxfreq;
  maxfreq = 1 / (8 * sim_0.timeStep);
  if (n == 0) {
    this.minF = ei.value_0;
    this.minF > maxfreq && (this.minF = maxfreq);
  }
  if (n == 1) {
    this.maxF = ei.value_0;
    this.maxF > maxfreq && (this.maxF = maxfreq);
  }
  n == 2 && (this.sweepTime = ei.value_0);
  if (n == 3) {
    this.flags &= -2;
    $getState(ei.checkbox) && (this.flags |= 1);
  }
  n == 4 && (this.maxV = ei.value_0);
  if (n == 5) {
    this.flags &= -3;
    $getState(ei.checkbox) && (this.flags |= 2);
  }
  $setParams(this);
}
;
_.setPoints = function setPoints_43(){
  $setPoints(this);
  this.lead1 = $interpPoint(this.point1, this.point2, 1 - 17 / this.dn);
}
;
_.stamp = function stamp_37(){
  $stampVoltageSource(sim_0, 0, this.nodes[0], this.voltSource);
}
;
_.startIteration = function startIteration_7(){
  sim_0.timeStep != this.savedTimeStep && $setParams(this);
  this.v = $wnd.Math.sin(this.freqTime) * this.maxV;
  this.freqTime += this.frequency * 2 * $intern_1 * sim_0.timeStep;
  this.frequency = this.frequency * this.fmul + this.fadd;
  if (this.frequency >= this.maxF && this.dir_0 == 1) {
    if ((this.flags & 2) != 0) {
      this.fadd = -this.fadd;
      this.fmul = 1 / this.fmul;
      this.dir_0 = -1;
    }
     else 
      this.frequency = this.minF;
  }
  if (this.frequency <= this.minF && this.dir_0 == -1) {
    this.fadd = -this.fadd;
    this.fmul = 1 / this.fmul;
    this.dir_0 = 1;
  }
}
;
_.dir_0 = 0;
_.fadd = 0;
_.fmul = 0;
_.freqTime = 0;
_.frequency = 0;
_.maxF = 0;
_.maxV = 0;
_.minF = 0;
_.savedTimeStep = 0;
_.sweepTime = 0;
_.v = 0;
var Lcom_lushprojects_circuitjs1_client_SweepElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'SweepElm', 189);
function $setPoints_11(this$static){
  var hs, i;
  $setPoints_7(this$static);
  $calcLeads(this$static, 32);
  this$static.swposts = $newPointArray(this$static.throwCount);
  this$static.swpoles = $newPointArray(2 + this$static.throwCount);
  for (i = 0; i != this$static.throwCount; i++) {
    hs = -16 * (i - ((this$static.throwCount - 1) / 2 | 0));
    this$static.throwCount == 2 && i == 0 && (hs = 16);
    $interpPoint_2(this$static.lead1, this$static.lead2, this$static.swpoles[i], 1, hs);
    $interpPoint_2(this$static.point1, this$static.point2, this$static.swposts[i], 1, hs);
  }
  this$static.swpoles[i] = this$static.lead2;
  this$static.posCount = (this$static.flags & 1) != 0 && this$static.throwCount == 2?3:this$static.throwCount;
}

function Switch2Elm(xx, yy){
  SwitchElm_1.call(this, xx, yy, false);
  this.noDiagonal = true;
  this.throwCount = 2;
}

function Switch2Elm_0(xa, ya, xb, yb, f, st){
  SwitchElm_0.call(this, xa, ya, xb, yb, f, st);
  this.link_0 = (new Integer_0($nextToken(st))).value_0;
  this.throwCount = 2;
  try {
    this.throwCount = (new Integer_0($nextToken(st))).value_0;
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.noDiagonal = true;
}

defineClass(163, 90, {4:1, 8:1, 163:1, 90:1}, Switch2Elm, Switch2Elm_0);
_.calculateCurrent = function calculateCurrent_15(){
  this.position == 2 && (this.flags & 1) != 0 && this.throwCount == 2 && (this.current_0 = 0);
}
;
_.draw = function draw_50(g){
  var i;
  $setBbox_0(this, this.point1, this.point2, 16);
  $adjustBbox_0(this, this.swposts[0], this.swposts[this.throwCount - 1]);
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.lead1);
  for (i = 0; i != this.throwCount; i++) {
    $setVoltageColor(this, g, this.volts[i + 1]);
    drawThickLine_0(g, this.swpoles[i], this.swposts[i]);
  }
  this.iAmMouseElm || this.selected || sim_0.plotYElm == this || $setColor(g, whiteColor);
  drawThickLine_0(g, this.lead1, this.swpoles[this.position]);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.point1, this.lead1, this.curcount_0);
  this.position != 2 && $drawDots(g, this.swpoles[this.position], this.swposts[this.position], this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_50(){
  return 'S ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.position + ' ' + this.momentary + ' ' + this.link_0 + ' ' + this.throwCount;
}
;
_.getConnection = function getConnection_18(n1, n2){
  if (this.position == 2 && (this.flags & 1) != 0 && this.throwCount == 2)
    return false;
  return $comparePair(n1, n2, 0, 1 + this.position);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_18(xa, ya){
  if (xa == this.x_0 && ya == this.y_0)
    return -this.current_0;
  if (xa == this.swposts[this.position].x_0 && ya == this.swposts[this.position].y_0)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_80(){
  return 83;
}
;
_.getEditInfo = function getEditInfo_56(n){
  if (n == 1)
    return $setDimensionless(new EditInfo('Switch Group', this.link_0, 0, 100));
  if (n == 2)
    return $setDimensionless(new EditInfo('# of Throws', this.throwCount, 2, 10));
  return $getEditInfo_4(this, n);
}
;
_.getInfo = function getInfo_46(arr){
  arr[0] = 'switch (' + (this.link_0 == 0?'S':'D') + 'P' + (this.throwCount > 2?this.throwCount + 'T)':'DT)');
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
}
;
_.getPost = function getPost_11(n){
  return n == 0?this.point1:this.swposts[n - 1];
}
;
_.getPostCount = function getPostCount_53(){
  return 1 + this.throwCount;
}
;
_.getShortcut = function getShortcut_33(){
  return 83;
}
;
_.getSwitchRect = function getSwitchRect_1(){
  return $union($union(new Rectangle_1(this.lead1), new Rectangle_1(this.swpoles[0])), new Rectangle_1(this.swpoles[this.throwCount - 1]));
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_44(){
  return this.position == 2 && (this.flags & 1) != 0 && this.throwCount == 2?0:1;
}
;
_.setEditValue = function setEditValue_53(n, ei){
  if (n == 1) {
    this.link_0 = round_int(ei.value_0);
  }
   else if (n == 2) {
    ei.value_0 >= 2 && (this.throwCount = round_int(ei.value_0));
    this.throwCount > 2 && (this.momentary = false);
    $allocNodes(this);
    $setPoints_11(this);
  }
   else 
    n == 0 && (this.momentary = $getState(ei.checkbox));
}
;
_.setPoints = function setPoints_44(){
  $setPoints_11(this);
}
;
_.stamp = function stamp_38(){
  if (this.position == 2 && (this.flags & 1) != 0 && this.throwCount == 2)
    return;
  $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[this.position + 1], this.voltSource, 0);
}
;
_.toggle = function toggle_0(){
  var i, o, s2;
  ++this.position;
  this.position >= this.posCount && (this.position = 0);
  if (this.link_0 != 0) {
    for (i = 0; i != sim_0.elmList.arrayList.array.length; i++) {
      o = $elementAt(sim_0.elmList, i);
      if (instanceOf(o, 163)) {
        s2 = castTo(o, 163);
        s2.link_0 == this.link_0 && (s2.position = this.position);
      }
    }
  }
}
;
_.link_0 = 0;
_.throwCount = 0;
var Lcom_lushprojects_circuitjs1_client_Switch2Elm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'Switch2Elm', 163);
function $setupPins_9(this$static){
  this$static.sizeX = 2;
  this$static.sizeY = 3;
  this$static.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 4 + ((this$static.flags & 2) != 0 || (this$static.flags & 4) != 0?1:0) + ((this$static.flags & 4) != 0?1:0), 0, 1);
  this$static.pins[0] = new ChipElm$Pin(this$static, 0, 2, 'T');
  this$static.pins[1] = new ChipElm$Pin(this$static, 0, 3, 'Q');
  this$static.pins[1].output = this$static.pins[1].state = true;
  this$static.pins[2] = new ChipElm$Pin(this$static, (this$static.flags & 4) != 0?1:2, 3, 'Q');
  this$static.pins[2].output = true;
  this$static.pins[2].lineOver = true;
  this$static.pins[3] = new ChipElm$Pin(this$static, 1, 2, '');
  this$static.pins[3].clock = true;
  if ((this$static.flags & 4) != 0) {
    this$static.pins[5] = new ChipElm$Pin(this$static, 2, 2, 'S');
    this$static.pins[4] = new ChipElm$Pin(this$static, 2, 3, 'R');
  }
   else {
    ((this$static.flags & 2) != 0 || (this$static.flags & 4) != 0) && (this$static.pins[4] = new ChipElm$Pin(this$static, 2, 2, 'R'));
  }
}

function TFlipFlopElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function TFlipFlopElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
  this.pins[2].value_0 = !this.pins[1].value_0;
}

defineClass(304, 13, $intern_66, TFlipFlopElm, TFlipFlopElm_0);
_.execute_2 = function execute_44(){
  this.pins[3].value_0 && !this.lastClock && this.pins[0].value_0 && (this.pins[1].value_0 = !this.pins[1].value_0);
  (this.flags & 4) != 0 && this.pins[5].value_0 && (this.pins[1].value_0 = true);
  ((this.flags & 2) != 0 || (this.flags & 4) != 0) && this.pins[4].value_0 && (this.pins[1].value_0 = false);
  this.pins[2].value_0 = !this.pins[1].value_0;
  this.lastClock = this.pins[3].value_0;
}
;
_.getChipName = function getChipName_29(){
  return 'T flip-flop';
}
;
_.getDumpType = function getDumpType_81(){
  return 193;
}
;
_.getEditInfo = function getEditInfo_57(n){
  var ei;
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Reset Pin', (this.flags & 2) != 0 || (this.flags & 4) != 0);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Set Pin', (this.flags & 4) != 0);
    return ei;
  }
  return $getEditInfo_0(this, n);
}
;
_.getPostCount = function getPostCount_54(){
  return 4 + ((this.flags & 2) != 0 || (this.flags & 4) != 0?1:0) + ((this.flags & 4) != 0?1:0);
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_45(){
  return 2;
}
;
_.reset_0 = function reset_24(){
  $reset_0(this);
  this.volts[2] = 5;
  this.pins[2].value_0 = true;
}
;
_.setEditValue = function setEditValue_54(n, ei){
  if (n == 2) {
    $getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3);
    $setupPins_9(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
  if (n == 3) {
    $getState(ei.checkbox)?(this.flags |= 4):(this.flags &= -5);
    $setupPins_9(this);
    $allocNodes(this);
    $setPoints_0(this);
  }
  $setEditValue(this, n, ei);
}
;
_.setupPins = function setupPins_29(){
  $setupPins_9(this);
}
;
var Lcom_lushprojects_circuitjs1_client_TFlipFlopElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TFlipFlopElm', 304);
function TappedTransformerElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.inductance = 4;
  this.ratio = 1;
  this.noDiagonal = true;
  this.couplingCoef = 0.99;
  this.current = initUnidimensionalArray(D_classLit, $intern_57, 9, 4, 15, 1);
  this.curcount = initUnidimensionalArray(D_classLit, $intern_57, 9, 4, 15, 1);
  this.voltdiff = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  this.curSourceValue = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  this.a = initUnidimensionalArray(D_classLit, $intern_57, 9, 9, 15, 1);
}

function TappedTransformerElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.inductance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.ratio = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.current = initUnidimensionalArray(D_classLit, $intern_57, 9, 4, 15, 1);
  this.curcount = initUnidimensionalArray(D_classLit, $intern_57, 9, 4, 15, 1);
  this.current[0] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.current[1] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  try {
    this.current[2] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.couplingCoef = 0.99;
  try {
    this.couplingCoef = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e1) {
    $e1 = toJava($e1);
    if (!instanceOf($e1, 14))
      throw toJs($e1);
  }
  this.voltdiff = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  this.curSourceValue = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  this.noDiagonal = true;
  this.a = initUnidimensionalArray(D_classLit, $intern_57, 9, 9, 15, 1);
}

defineClass(266, 4, $intern_66, TappedTransformerElm, TappedTransformerElm_0);
_.calculateCurrent = function calculateCurrent_16(){
  var i, j;
  this.voltdiff[0] = this.volts[0] - this.volts[1];
  this.voltdiff[1] = this.volts[2] - this.volts[3];
  this.voltdiff[2] = this.volts[3] - this.volts[4];
  for (i = 0; i != 3; i++) {
    this.current[i] = this.curSourceValue[i];
    for (j = 0; j != 3; j++)
      this.current[i] += this.a[i * 3 + j] * this.voltdiff[j];
  }
  this.current[3] = this.current[1] - this.current[2];
}
;
_.doStep = function doStep_34(){
  $stampCurrentSource(sim_0, this.nodes[0], this.nodes[1], this.curSourceValue[0]);
  $stampCurrentSource(sim_0, this.nodes[2], this.nodes[3], this.curSourceValue[1]);
  $stampCurrentSource(sim_0, this.nodes[3], this.nodes[4], this.curSourceValue[2]);
}
;
_.draw = function draw_51(g){
  var i;
  for (i = 0; i != 5; i++) {
    $setVoltageColor(this, g, this.volts[i]);
    drawThickLine_0(g, this.ptEnds[i], this.ptCoil[i]);
  }
  for (i = 0; i != 4; i++) {
    if (i == 1)
      continue;
    $setPowerColor(this, g, this.current[i] * (this.volts[i] - this.volts[i + 1]));
    $drawCoil(this, g, i > 1?-6:6, this.ptCoil[i], this.ptCoil[i + 1], this.volts[i], this.volts[i + 1]);
  }
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  for (i = 0; i != 4; i += 2) {
    drawThickLine_0(g, this.ptCore[i], this.ptCore[i + 1]);
  }
  for (i = 0; i != 4; i++)
    this.curcount[i] = $updateDotCount(this.current[i], this.curcount[i]);
  $drawDots(g, this.ptEnds[0], this.ptCoil[0], this.curcount[0]);
  $drawDots(g, this.ptCoil[0], this.ptCoil[1], this.curcount[0]);
  $drawDots(g, this.ptCoil[1], this.ptEnds[1], this.curcount[0]);
  $drawDots(g, this.ptEnds[2], this.ptCoil[2], this.curcount[1]);
  $drawDots(g, this.ptCoil[2], this.ptCoil[3], this.curcount[1]);
  $drawDots(g, this.ptCoil[3], this.ptEnds[3], this.curcount[3]);
  $drawDots(g, this.ptCoil[3], this.ptCoil[4], this.curcount[2]);
  $drawDots(g, this.ptCoil[4], this.ptEnds[4], this.curcount[2]);
  $drawPosts(this, g);
  $setBbox_0(this, this.ptEnds[0], this.ptEnds[4], 0);
}
;
_.dump_0 = function dump_51(){
  return '169 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.inductance + ' ' + this.ratio + ' ' + this.current[0] + ' ' + this.current[1] + ' ' + this.current[2] + ' ' + this.couplingCoef;
}
;
_.getConnection = function getConnection_19(n1, n2){
  if (n1 == 0 && n2 == 1 || n1 == 1 && n2 == 0)
    return true;
  if (n1 == 2 && n2 == 3 || n1 == 3 && n2 == 2)
    return true;
  if (n1 == 3 && n2 == 4 || n1 == 4 && n2 == 3)
    return true;
  if (n1 == 2 && n2 == 4 || n1 == 4 && n2 == 2)
    return true;
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_19(xa, ya){
  if (xa == this.ptEnds[0].x_0 && ya == this.ptEnds[0].y_0)
    return -this.current[0];
  if (xa == this.ptEnds[1].x_0 && ya == this.ptEnds[1].y_0)
    return this.current[0];
  if (xa == this.ptEnds[2].x_0 && ya == this.ptEnds[2].y_0)
    return -this.current[1];
  if (xa == this.ptEnds[3].x_0 && ya == this.ptEnds[3].y_0)
    return this.current[3];
  return this.current[2];
}
;
_.getDumpType = function getDumpType_82(){
  return 169;
}
;
_.getEditInfo = function getEditInfo_58(n){
  var ei;
  if (n == 0)
    return new EditInfo('Primary Inductance (H)', this.inductance, $intern_29, 5);
  if (n == 1)
    return $setDimensionless(new EditInfo('Ratio', this.ratio, 1, 10));
  if (n == 2)
    return $setDimensionless(new EditInfo('Coupling Coefficient', this.couplingCoef, 0, 1));
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Trapezoidal Approximation', (this.flags & 2) == 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_47(arr){
  arr[0] = 'transformer';
  arr[1] = 'L = ' + myGetUnitText(this.inductance, 'H', false);
  arr[2] = 'Ratio = ' + this.ratio;
  arr[3] = 'Vd1 = ' + myGetUnitText(this.volts[0] - this.volts[2], 'V', false);
  arr[4] = 'Vd2 = ' + myGetUnitText(this.volts[1] - this.volts[3], 'V', false);
}
;
_.getPost = function getPost_12(n){
  return this.ptEnds[n];
}
;
_.getPostCount = function getPostCount_55(){
  return 5;
}
;
_.reset_0 = function reset_25(){
  this.current[0] = this.current[1] = this.current[2] = this.current[3] = this.volts[0] = this.volts[1] = this.volts[2] = this.volts[3] = this.volts[4] = this.curcount[0] = this.curcount[1] = this.curcount[2] = 0;
  this.curSourceValue[0] = this.curSourceValue[1] = this.curSourceValue[2] = 0;
}
;
_.setEditValue = function setEditValue_55(n, ei){
  n == 0 && (this.inductance = ei.value_0);
  n == 1 && (this.ratio = ei.value_0);
  n == 2 && ei.value_0 > 0 && ei.value_0 < 1 && (this.couplingCoef = ei.value_0);
  n == 3 && ($getState(ei.checkbox)?(this.flags &= -3):(this.flags |= 2));
}
;
_.setPoints = function setPoints_45(){
  var b, cd, ce, i;
  $setPoints(this);
  this.ptEnds = $newPointArray(5);
  this.ptCoil = $newPointArray(5);
  this.ptCore = $newPointArray(4);
  this.ptEnds[0] = this.point1;
  this.ptEnds[2] = this.point2;
  $interpPoint_2(this.point1, this.point2, this.ptEnds[1], 0, -64);
  $interpPoint_2(this.point1, this.point2, this.ptEnds[3], 1, -32);
  $interpPoint_2(this.point1, this.point2, this.ptEnds[4], 1, -64);
  ce = 0.5 - 12 / this.dn;
  cd = 0.5 - 2 / this.dn;
  $interpPoint_1(this.ptEnds[0], this.ptEnds[2], this.ptCoil[0], ce);
  $interpPoint_2(this.ptEnds[0], this.ptEnds[2], this.ptCoil[1], ce, -64);
  $interpPoint_1(this.ptEnds[0], this.ptEnds[2], this.ptCoil[2], 1 - ce);
  $interpPoint_2(this.ptEnds[0], this.ptEnds[2], this.ptCoil[3], 1 - ce, -32);
  $interpPoint_2(this.ptEnds[0], this.ptEnds[2], this.ptCoil[4], 1 - ce, -64);
  for (i = 0; i != 2; i++) {
    b = -32 * i * 2;
    $interpPoint_2(this.ptEnds[0], this.ptEnds[2], this.ptCore[i], cd, b);
    $interpPoint_2(this.ptEnds[0], this.ptEnds[2], this.ptCore[i + 2], 1 - cd, b);
  }
}
;
_.stamp = function stamp_39(){
  var det, i, l1, l2, m1, m2;
  l1 = this.inductance;
  l2 = this.inductance * this.ratio * this.ratio / 4;
  m1 = this.couplingCoef * $wnd.Math.sqrt(l1 * l2);
  m2 = this.couplingCoef * l2;
  this.a[0] = l2 + m2;
  this.a[1] = this.a[2] = this.a[3] = this.a[6] = -m1;
  this.a[4] = this.a[8] = (l1 * l2 - m1 * m1) / (l2 - m2);
  this.a[5] = this.a[7] = (m1 * m1 - l1 * m2) / (l2 - m2);
  det = l1 * (l2 + m2) - 2 * m1 * m1;
  for (i = 0; i != 9; i++)
    this.a[i] *= ((this.flags & 2) == 0?sim_0.timeStep / 2:sim_0.timeStep) / det;
  $stampConductance(sim_0, this.nodes[0], this.nodes[1], this.a[0]);
  $stampVCCurrentSource(sim_0, this.nodes[0], this.nodes[1], this.nodes[2], this.nodes[3], this.a[1]);
  $stampVCCurrentSource(sim_0, this.nodes[0], this.nodes[1], this.nodes[3], this.nodes[4], this.a[2]);
  $stampVCCurrentSource(sim_0, this.nodes[2], this.nodes[3], this.nodes[0], this.nodes[1], this.a[3]);
  $stampConductance(sim_0, this.nodes[2], this.nodes[3], this.a[4]);
  $stampVCCurrentSource(sim_0, this.nodes[2], this.nodes[3], this.nodes[3], this.nodes[4], this.a[5]);
  $stampVCCurrentSource(sim_0, this.nodes[3], this.nodes[4], this.nodes[0], this.nodes[1], this.a[6]);
  $stampVCCurrentSource(sim_0, this.nodes[3], this.nodes[4], this.nodes[2], this.nodes[3], this.a[7]);
  $stampConductance(sim_0, this.nodes[3], this.nodes[4], this.a[8]);
  for (i = 0; i != 5; i++)
    $stampRightSide(sim_0, this.nodes[i]);
}
;
_.startIteration = function startIteration_8(){
  var i, j;
  this.voltdiff[0] = this.volts[0] - this.volts[1];
  this.voltdiff[1] = this.volts[2] - this.volts[3];
  this.voltdiff[2] = this.volts[3] - this.volts[4];
  for (i = 0; i != 3; i++) {
    this.curSourceValue[i] = this.current[i];
    if ((this.flags & 2) == 0)
      for (j = 0; j != 3; j++)
        this.curSourceValue[i] += this.a[i * 3 + j] * this.voltdiff[j];
  }
}
;
_.couplingCoef = 0;
_.inductance = 0;
_.ratio = 0;
var Lcom_lushprojects_circuitjs1_client_TappedTransformerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TappedTransformerElm', 266);
function $$init_22(this$static){
  this$static.zerocount = 0;
  this$static.rmsV = 0;
  this$static.maxV = 0;
  this$static.minV = 0;
  this$static.frequency = 0;
  this$static.period = 0;
  this$static.binaryLevel = 0;
  this$static.pulseWidth = 0;
  this$static.dutyCycle = 0;
  this$static.selectedValue = 0;
  this$static.increasingV = true;
  this$static.decreasingV = true;
}

function TestPointElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $$init_22(this);
  this.meter = 0;
}

function TestPointElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $$init_22(this);
  this.meter = (new Integer_0($nextToken(st))).value_0;
}

defineClass(309, 4, $intern_66, TestPointElm, TestPointElm_0);
_.draw = function draw_52(g){
  var f, s, selected;
  selected = this.iAmMouseElm || this.selected || sim_0.plotYElm == this;
  f = new Font('SansSerif', selected?1:0, 14);
  $setFont_0(g, f);
  $setColor(g, selected?selectColor:whiteColor);
  s = 'TP';
  $interpPoint_1(this.point1, this.point2, this.lead1, 1 - ((round_int($measureText(g.context, s).width) / 2 | 0) + 8) / this.dn);
  $setBbox_0(this, this.point1, this.lead1, 0);
  $drawCenteredText(this, g, s, this.x2, this.y2, true);
  switch (this.meter) {
    case 0:
      s = myGetUnitText(this.volts[0], 'V', false);
      break;
    case 1:
      s = myGetUnitText(this.rmsV, 'V(rms)', false);
      break;
    case 2:
      s = myGetUnitText(this.lastMaxV, 'Vpk', false);
      break;
    case 3:
      s = myGetUnitText(this.lastMinV, 'Vmin', false);
      break;
    case 4:
      s = myGetUnitText(this.lastMaxV - this.lastMinV, 'Vp2p', false);
      break;
    case 5:
      s = this.binaryLevel + '';
      break;
    case 6:
      s = myGetUnitText(this.frequency, 'Hz', false);
      break;
    case 8:
      s = myGetUnitText(this.pulseWidth, 'S', false);
      break;
    case 9:
      s = $format_0(showFormat, this.dutyCycle);
  }
  $drawCenteredText(this, g, s, this.x2, this.y2 + 12, true);
  $setVoltageColor(this, g, this.volts[0]);
  selected && $setColor(g, selectColor);
  drawThickLine_0(g, this.point1, this.lead1);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_52(){
  return '368 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.meter;
}
;
_.getDumpType = function getDumpType_83(){
  return 368;
}
;
_.getEditInfo = function getEditInfo_59(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('Value', this.selectedValue, -1, -1);
    ei.choice = new Choice;
    $add_6(ei.choice, 'Voltage');
    $add_6(ei.choice, 'RMS Voltage');
    $add_6(ei.choice, 'Max Voltage');
    $add_6(ei.choice, 'Min Voltage');
    $add_6(ei.choice, 'P2P Voltage');
    $add_6(ei.choice, 'Binary Value');
    $select(ei.choice, this.meter);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_48(arr){
  arr[0] = 'Test Point';
  switch (this.meter) {
    case 0:
      arr[1] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
      break;
    case 1:
      arr[1] = 'V(rms) = ' + myGetUnitText(this.rmsV, 'V', false);
      break;
    case 2:
      arr[1] = 'Vmax = ' + myGetUnitText(this.lastMaxV, 'Vpk', false);
      break;
    case 3:
      arr[1] = 'Vmin = ' + myGetUnitText(this.lastMinV, 'Vmin', false);
      break;
    case 4:
      arr[1] = 'Vp2p = ' + myGetUnitText(this.lastMaxV - this.lastMinV, 'Vp2p', false);
      break;
    case 5:
      arr[1] = 'Binary:' + this.binaryLevel + '';
      break;
    case 6:
      arr[1] = 'Freq = ' + myGetUnitText(this.frequency, 'Hz', false);
      break;
    case 7:
      arr[1] = 'Period = ' + myGetUnitText(this.period * sim_0.timeStep / $getIterCount(sim_0), 'S', false);
      break;
    case 8:
      arr[1] = 'Pulse width = ' + myGetUnitText(this.pulseWidth * sim_0.timeStep * $getIterCount(sim_0), 'S', false);
      break;
    case 9:
      arr[1] = 'Duty cycle = ' + $format_0(showFormat, this.dutyCycle);
  }
}
;
_.getPostCount = function getPostCount_56(){
  return 1;
}
;
_.getScopeValue = function getScopeValue_3(x_0){
  return this.selectedValue;
}
;
_.getVoltageDiff = function getVoltageDiff_18(){
  return this.volts[0];
}
;
_.setEditValue = function setEditValue_56(n, ei){
  n == 0 && (this.meter = $getElement(ei.choice).selectedIndex);
}
;
_.setPoints = function setPoints_46(){
  $setPoints(this);
  this.lead1 = new Point;
}
;
_.stepFinished = function stepFinished_9(){
  ++this.count;
  this.total += this.volts[0] * this.volts[0];
  this.volts[0] < 2.5?(this.binaryLevel = 0):(this.binaryLevel = 1);
  if (this.volts[0] > this.maxV && this.increasingV) {
    this.maxV = this.volts[0];
    this.increasingV = true;
    this.decreasingV = false;
  }
  if (this.volts[0] < this.maxV && this.increasingV) {
    this.lastMaxV = this.maxV;
    this.periodLength = ($clinit_System() , sub_1(fromDouble_0(Date.now()), this.periodStart));
    this.periodStart = fromDouble_0(Date.now());
    this.period = toDouble_0(this.periodLength);
    this.pulseWidth = toDouble_0(sub_1(fromDouble_0(Date.now()), this.pulseStart));
    this.dutyCycle = this.pulseWidth / toDouble_0(this.periodLength);
    this.minV = this.volts[0];
    this.increasingV = false;
    this.decreasingV = true;
    this.total = this.total / this.count;
    this.rmsV = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsV) && (this.rmsV = 0);
    this.count = 0;
    this.total = 0;
  }
  if (this.volts[0] < this.minV && this.decreasingV) {
    this.minV = this.volts[0];
    this.increasingV = false;
    this.decreasingV = true;
  }
  if (this.volts[0] > this.minV && this.decreasingV) {
    this.lastMinV = this.minV;
    this.pulseStart = ($clinit_System() , fromDouble_0(Date.now()));
    this.maxV = this.volts[0];
    this.increasingV = true;
    this.decreasingV = false;
    this.total = this.total / this.count;
    this.rmsV = $wnd.Math.sqrt(this.total);
    isNaN(this.rmsV) && (this.rmsV = 0);
    this.count = 0;
    this.total = 0;
  }
  if (this.volts[0] == 0) {
    ++this.zerocount;
    if (this.zerocount > 5) {
      this.total = 0;
      this.rmsV = 0;
      this.maxV = 0;
      this.minV = 0;
    }
  }
   else {
    this.zerocount = 0;
  }
  switch (this.meter) {
    case 0:
      this.selectedValue = this.volts[0];
      break;
    case 1:
      this.selectedValue = this.rmsV;
      break;
    case 2:
      this.selectedValue = this.lastMaxV;
      break;
    case 3:
      this.selectedValue = this.lastMinV;
      break;
    case 4:
      this.selectedValue = this.lastMaxV - this.lastMinV;
      break;
    case 5:
      this.selectedValue = this.binaryLevel;
      break;
    case 6:
      this.selectedValue = this.frequency;
      break;
    case 7:
      this.selectedValue = this.period;
      break;
    case 8:
      this.selectedValue = this.pulseWidth;
      break;
    case 9:
      this.selectedValue = this.dutyCycle;
  }
}
;
_.binaryLevel = 0;
_.count = 0;
_.decreasingV = false;
_.dutyCycle = 0;
_.frequency = 0;
_.increasingV = false;
_.lastMaxV = 0;
_.lastMinV = 0;
_.maxV = 0;
_.meter = 0;
_.minV = 0;
_.period = 0;
_.periodLength = 0;
_.periodStart = 0;
_.pulseStart = 0;
_.pulseWidth = 0;
_.rmsV = 0;
_.selectedValue = 0;
_.total = 0;
_.zerocount = 0;
var Lcom_lushprojects_circuitjs1_client_TestPointElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TestPointElm', 309);
function $split(this$static){
  var c, i, sb;
  this$static.lines = new Vector;
  sb = new StringBuffer(this$static.text_0);
  for (i = 0; i < sb.string.length; i++) {
    c = $charAt_0(sb.string, i);
    if (c == 92) {
      sb.string = $substring_0(sb.string, 0, i) + '' + $substring(sb.string, i + 1);
      c = $charAt_0(sb.string, i);
      if (c == 110) {
        $add_11(this$static.lines, $substring_0(sb.string, 0, i));
        sb.string = sb.string.substr(0, 0) + '' + $substring(sb.string, i + 1);
        i = -1;
        continue;
      }
    }
  }
  $add_11(this$static.lines, sb.string);
}

function TextElm(xx, yy){
  GraphicElm.call(this, xx, yy);
  this.text_0 = 'hello';
  this.lines = new Vector;
  $add_11(this.lines, this.text_0);
  this.size_0 = 24;
}

function TextElm_0(xa, ya, xb, yb, f, st){
  GraphicElm_0.call(this, xa, ya, xb, yb, f);
  this.size_0 = (new Integer_0($nextToken(st))).value_0;
  this.text_0 = $nextToken(st);
  if ((this.flags & 4) == 0) {
    while ($hasMoreTokens(st))
      this.text_0 += ' ' + $nextToken(st);
    this.text_0 = $replaceAll(this.text_0, '%2[bB]', '+');
  }
   else {
    this.text_0 = unescape_0(this.text_0);
  }
  $split(this);
}

defineClass(303, 110, $intern_75, TextElm, TextElm_0);
_.drag = function drag_3(xx, yy){
  this.x_0 = xx;
  this.y_0 = yy;
  this.x2 = xx + 16;
  this.y2 = yy;
}
;
_.draw = function draw_53(g){
  var by, cury, f, i, maxw, oldfont, s, sw, w;
  oldfont = g.currentFont;
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  f = new Font('SansSerif', 0, this.size_0);
  $setFont_0(g, f);
  maxw = -1;
  for (i = 0; i != this.lines.arrayList.array.length; i++) {
    w = round_int($measureText(g.context, castToString($elementAt(this.lines, i))).width);
    w > maxw && (maxw = w);
  }
  cury = this.y_0;
  $setBbox(this, this.x_0, this.y_0, this.x_0, this.y_0);
  for (i = 0; i != this.lines.arrayList.array.length; i++) {
    s = castToString($elementAt(this.lines, i));
    sw = round_int($measureText(g.context, s).width);
    (this.flags & 1) != 0 && (this.x_0 = (g.context.canvas.width - sw) / 2 | 0);
    $drawString(g, s, this.x_0, cury);
    if ((this.flags & 2) != 0) {
      by = cury - g.currentFontSize;
      $drawLine(g, this.x_0, by, this.x_0 + sw - 1, by);
    }
    $adjustBbox(this, this.x_0, cury - g.currentFontSize, this.x_0 + sw, cury + 3);
    cury += g.currentFontSize + 3;
  }
  this.x2 = this.boundingBox.x_0 + this.boundingBox.width_0;
  this.y2 = this.boundingBox.y_0 + this.boundingBox.height_0;
  $setFont_0(g, oldfont);
}
;
_.dump_0 = function dump_53(){
  this.flags |= 4;
  return 'x ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.size_0 + ' ' + escape_0(this.text_0);
}
;
_.getDumpType = function getDumpType_84(){
  return 120;
}
;
_.getEditInfo = function getEditInfo_60(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('Text', 0, -1, -1);
    ei.text_0 = this.text_0;
    return ei;
  }
  if (n == 1)
    return new EditInfo('Size', this.size_0, 5, 100);
  if (n == 2) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Center', (this.flags & 1) != 0);
    return ei;
  }
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Draw Bar On Top', (this.flags & 2) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_49(arr){
  arr[0] = this.text_0;
}
;
_.getShortcut = function getShortcut_34(){
  return 116;
}
;
_.isCenteredText = function isCenteredText_0(){
  return (this.flags & 1) != 0;
}
;
_.setEditValue = function setEditValue_57(n, ei){
  if (n == 0) {
    this.text_0 = $getText(ei.textf);
    $split(this);
  }
  n == 1 && (this.size_0 = round_int(ei.value_0));
  n == 3 && ($getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3));
  n == 2 && ($getState(ei.checkbox)?(this.flags |= 1):(this.flags &= -2));
}
;
_.size_0 = 0;
var Lcom_lushprojects_circuitjs1_client_TextElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TextElm', 303);
function TimerElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function TimerElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(296, 13, $intern_66, TimerElm, TimerElm_0);
_.calculateCurrent = function calculateCurrent_17(){
  this.pins[3].current = (this.volts[4] - this.volts[3]) / 5000;
  this.pins[4].current = -this.volts[4] / $intern_86 - this.pins[3].current;
  this.pins[0].current = this.out?0:-this.volts[0] / 10;
}
;
_.doStep = function doStep_35(){
  this.out || $stampResistor(sim_0, this.nodes[0], 0, 10);
  $updateVoltageSource(sim_0, this.pins[5].voltSource, this.out?this.volts[3]:0);
}
;
_.getChipName = function getChipName_30(){
  return '555 Timer';
}
;
_.getDefaultFlags = function getDefaultFlags_0(){
  return 2;
}
;
_.getDumpType = function getDumpType_85(){
  return 165;
}
;
_.getPostCount = function getPostCount_57(){
  return (this.flags & 2) != 0?7:6;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_46(){
  return 1;
}
;
_.nonLinear = function nonLinear_15(){
  return true;
}
;
_.setupPins = function setupPins_30(){
  this.sizeX = 3;
  this.sizeY = 5;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 7, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 1, 2, 'dis');
  this.pins[1] = new ChipElm$Pin(this, 3, 2, 'tr');
  this.pins[1].lineOver = true;
  this.pins[2] = new ChipElm$Pin(this, 4, 2, 'th');
  this.pins[3] = new ChipElm$Pin(this, 1, 0, 'Vin');
  this.pins[4] = new ChipElm$Pin(this, 1, 1, 'ctl');
  this.pins[5] = new ChipElm$Pin(this, 2, 3, 'out');
  this.pins[5].output = this.pins[5].state = true;
  this.pins[6] = new ChipElm$Pin(this, 1, 3, 'rst');
}
;
_.stamp = function stamp_40(){
  $stampResistor(sim_0, this.nodes[3], this.nodes[4], 5000);
  $stampResistor(sim_0, this.nodes[4], 0, $intern_86);
  $stampVoltageSource(sim_0, 0, this.nodes[5], this.pins[5].voltSource);
  $stampNonLinear(sim_0, this.nodes[0]);
}
;
_.startIteration = function startIteration_9(){
  this.out = this.volts[5] > this.volts[3] / 2;
  this.volts[2] > this.volts[4] && (this.out = false);
  this.volts[4] / 2 > this.volts[1] && (this.out = true);
  (this.flags & 2) != 0 && this.volts[6] < 0.7 && (this.out = false);
}
;
_.out = false;
var Lcom_lushprojects_circuitjs1_client_TimerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TimerElm', 296);
function $reset_6(this$static){
  if (sim_0.timeStep == 0)
    return;
  this$static.lenSteps = round_int(this$static.delay / sim_0.timeStep);
  $clinit_System();
  if (this$static.lenSteps > $intern_87)
    this$static.voltageL = this$static.voltageR = null;
  else {
    this$static.voltageL = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.lenSteps, 15, 1);
    this$static.voltageR = initUnidimensionalArray(D_classLit, $intern_57, 9, this$static.lenSteps, 15, 1);
  }
  this$static.ptr = 0;
  $reset(this$static);
}

function $setPoints_12(this$static){
  var ds, p3, p4, p5, p6, p7, p8, sep;
  $setPoints(this$static);
  ds = this$static.dy == 0?sign(this$static.dx):-sign(this$static.dy);
  p3 = $interpPoint_0(this$static.point1, this$static.point2, 0, -this$static.width_0 * ds);
  p4 = $interpPoint_0(this$static.point1, this$static.point2, 1, -this$static.width_0 * ds);
  sep = sim_0.gridSize / 2 | 0;
  p5 = $interpPoint_0(this$static.point1, this$static.point2, 0, -((this$static.width_0 / 2 | 0) - sep) * ds);
  p6 = $interpPoint_0(this$static.point1, this$static.point2, 1, -((this$static.width_0 / 2 | 0) - sep) * ds);
  p7 = $interpPoint_0(this$static.point1, this$static.point2, 0, -((this$static.width_0 / 2 | 0) + sep) * ds);
  p8 = $interpPoint_0(this$static.point1, this$static.point2, 1, -((this$static.width_0 / 2 | 0) + sep) * ds);
  this$static.posts = stampJavaTypeInfo(getClassLiteralForArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, 1), $intern_59, 20, 0, [p3, p4, this$static.point1, this$static.point2]);
  this$static.inner = stampJavaTypeInfo(getClassLiteralForArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, 1), $intern_59, 20, 0, [p7, p8, p5, p6]);
}

function TransLineElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.delay = $intern_20 * sim_0.timeStep;
  this.imped = 75;
  this.noDiagonal = true;
  $reset_6(this);
}

function TransLineElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.delay = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.imped = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.width_0 = (new Integer_0($nextToken(st))).value_0;
  $nextToken(st);
  this.noDiagonal = true;
  $reset_6(this);
}

defineClass(267, 4, $intern_66, TransLineElm, TransLineElm_0);
_.doStep = function doStep_36(){
  if (this.voltageL == null) {
    $stop(sim_0, 'Transmission line delay too large!', this);
    return;
  }
  $updateVoltageSource(sim_0, this.voltSource1, -this.voltageR[this.ptr]);
  $updateVoltageSource(sim_0, this.voltSource2, -this.voltageL[this.ptr]);
  if ($wnd.Math.abs(this.volts[0]) > 1.0E-5 || $wnd.Math.abs(this.volts[1]) > 1.0E-5) {
    $stop(sim_0, 'Need to ground transmission line!', this);
    return;
  }
}
;
_.drag = function drag_4(xx, yy){
  var w1, w2;
  xx = $snapGrid(sim_0, xx);
  yy = $snapGrid(sim_0, yy);
  w1 = max_1(sim_0.gridSize, abs_0(yy - this.y_0));
  w2 = max_1(sim_0.gridSize, abs_0(xx - this.x_0));
  if (w1 > w2) {
    xx = this.x_0;
    this.width_0 = w2;
  }
   else {
    yy = this.y_0;
    this.width_0 = w1;
  }
  this.x2 = xx;
  this.y2 = yy;
  $setPoints_12(this);
}
;
_.draw = function draw_54(g){
  var i, ix0, ix1, ix2, segf, segments, v;
  $setBbox_0(this, this.posts[0], this.posts[3], 0);
  segments = round_int(this.dn / 2);
  ix0 = this.ptr - 1 + this.lenSteps;
  segf = 1 / segments;
  $setColor(g, ($clinit_Color() , darkGray));
  $fillRect_0(g, this.inner[2].x_0, this.inner[2].y_0, this.inner[1].x_0 - this.inner[2].x_0 + 2, this.inner[1].y_0 - this.inner[2].y_0 + 2);
  for (i = 0; i != 4; i++) {
    $setVoltageColor(this, g, this.volts[i]);
    drawThickLine_0(g, this.posts[i], this.inner[i]);
  }
  if (this.voltageL != null) {
    for (i = 0; i != segments; i++) {
      ix1 = (ix0 - (this.lenSteps * i / segments | 0)) % this.lenSteps;
      ix2 = (ix0 - (this.lenSteps * (segments - 1 - i) / segments | 0)) % this.lenSteps;
      v = (this.voltageL[ix1] + this.voltageR[ix2]) / 2;
      $setColor(g, $getVoltageColor(this, g, v));
      $interpPoint_1(this.inner[0], this.inner[1], ps1, i * segf);
      $interpPoint_1(this.inner[2], this.inner[3], ps2, i * segf);
      $drawLine(g, ps1.x_0, ps1.y_0, ps2.x_0, ps2.y_0);
      $interpPoint_1(this.inner[2], this.inner[3], ps1, (i + 1) * segf);
      drawThickLine_0(g, ps1, ps2);
    }
  }
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.inner[0], this.inner[1]);
  $drawPosts(this, g);
  this.curCount1 = $updateDotCount(-this.current1, this.curCount1);
  this.curCount2 = $updateDotCount(this.current2, this.curCount2);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.posts[0], this.inner[0], this.curCount1);
    $drawDots(g, this.posts[2], this.inner[2], -this.curCount1);
    $drawDots(g, this.posts[1], this.inner[1], -this.curCount2);
    $drawDots(g, this.posts[3], this.inner[3], this.curCount2);
  }
}
;
_.dump_0 = function dump_54(){
  return '171 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.delay + ' ' + this.imped + ' ' + this.width_0 + ' ' + 0;
}
;
_.getConnection = function getConnection_20(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_20(xa, ya){
  if (xa == this.posts[0].x_0 && ya == this.posts[0].y_0)
    return this.current1;
  if (xa == this.posts[2].x_0 && ya == this.posts[2].y_0)
    return -this.current1;
  if (xa == this.posts[3].x_0 && ya == this.posts[3].y_0)
    return -this.current2;
  return this.current2;
}
;
_.getDumpType = function getDumpType_86(){
  return 171;
}
;
_.getEditInfo = function getEditInfo_61(n){
  if (n == 0)
    return new EditInfo('Delay (s)', this.delay, 0, 0);
  if (n == 1)
    return new EditInfo('Impedance (ohms)', this.imped, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_50(arr){
  arr[0] = 'transmission line';
  arr[1] = myGetUnitText(this.imped, ohmString, false);
  arr[2] = 'length = ' + myGetUnitText(299790000 * this.delay, 'm', false);
  arr[3] = 'delay = ' + myGetUnitText(this.delay, 's', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_4(){
  return 2;
}
;
_.getPost = function getPost_13(n){
  return this.posts[n];
}
;
_.getPostCount = function getPostCount_58(){
  return 4;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_47(){
  return 2;
}
;
_.hasGroundConnection = function hasGroundConnection_13(n1){
  return false;
}
;
_.reset_0 = function reset_26(){
  $reset_6(this);
}
;
_.setCurrent = function setCurrent_7(v, c){
  v == this.voltSource1?(this.current1 = c):(this.current2 = c);
}
;
_.setEditValue = function setEditValue_58(n, ei){
  if (n == 0) {
    this.delay = ei.value_0;
    $reset_6(this);
  }
  if (n == 1) {
    this.imped = ei.value_0;
    $reset_6(this);
  }
}
;
_.setPoints = function setPoints_47(){
  $setPoints_12(this);
}
;
_.setVoltageSource = function setVoltageSource_2(n, v){
  n == 0?(this.voltSource1 = v):(this.voltSource2 = v);
}
;
_.stamp = function stamp_41(){
  $stampVoltageSource(sim_0, this.nodes[4], this.nodes[0], this.voltSource1);
  $stampVoltageSource(sim_0, this.nodes[5], this.nodes[1], this.voltSource2);
  $stampResistor(sim_0, this.nodes[2], this.nodes[4], this.imped);
  $stampResistor(sim_0, this.nodes[3], this.nodes[5], this.imped);
}
;
_.startIteration = function startIteration_10(){
  if (this.voltageL == null) {
    $stop(sim_0, 'Transmission line delay too large!', this);
    return;
  }
  this.voltageL[this.ptr] = this.volts[2] - this.volts[0] + this.volts[2] - this.volts[4];
  this.voltageR[this.ptr] = this.volts[3] - this.volts[1] + this.volts[3] - this.volts[5];
  this.ptr = (this.ptr + 1) % this.lenSteps;
}
;
_.curCount1 = 0;
_.curCount2 = 0;
_.current1 = 0;
_.current2 = 0;
_.delay = 0;
_.imped = 0;
_.lenSteps = 0;
_.ptr = 0;
_.voltSource1 = 0;
_.voltSource2 = 0;
_.width_0 = 0;
var Lcom_lushprojects_circuitjs1_client_TransLineElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TransLineElm', 267);
function $setPoints_13(this$static){
  var cd, ce, dotp, i, x_0;
  $setPoints(this$static);
  this$static.point2.y_0 = this$static.point1.y_0;
  this$static.ptEnds = $newPointArray(4);
  this$static.ptCoil = $newPointArray(4);
  this$static.ptCore = $newPointArray(4);
  this$static.ptEnds[0] = this$static.point1;
  this$static.ptEnds[1] = this$static.point2;
  $interpPoint_2(this$static.point1, this$static.point2, this$static.ptEnds[2], 0, -this$static.dsign * this$static.width_0);
  $interpPoint_2(this$static.point1, this$static.point2, this$static.ptEnds[3], 1, -this$static.dsign * this$static.width_0);
  ce = 0.5 - 12 / this$static.dn;
  cd = 0.5 - 2 / this$static.dn;
  for (i = 0; i != 4; i += 2) {
    $interpPoint_1(this$static.ptEnds[i], this$static.ptEnds[i + 1], this$static.ptCoil[i], ce);
    $interpPoint_1(this$static.ptEnds[i], this$static.ptEnds[i + 1], this$static.ptCoil[i + 1], 1 - ce);
    $interpPoint_1(this$static.ptEnds[i], this$static.ptEnds[i + 1], this$static.ptCore[i], cd);
    $interpPoint_1(this$static.ptEnds[i], this$static.ptEnds[i + 1], this$static.ptCore[i + 1], 1 - cd);
  }
  if (this$static.polarity == -1) {
    this$static.dots = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_Point_2_classLit, $intern_59, 20, 2, 0, 1);
    dotp = $wnd.Math.abs(7 / this$static.width_0);
    this$static.dots[0] = $interpPoint_0(this$static.ptCoil[0], this$static.ptCoil[2], dotp, -7 * this$static.dsign);
    this$static.dots[1] = $interpPoint_0(this$static.ptCoil[3], this$static.ptCoil[1], dotp, -7 * this$static.dsign);
    x_0 = this$static.ptEnds[1];
    this$static.ptEnds[1] = this$static.ptEnds[3];
    this$static.ptEnds[3] = x_0;
    x_0 = this$static.ptCoil[1];
    this$static.ptCoil[1] = this$static.ptCoil[3];
    this$static.ptCoil[3] = x_0;
  }
   else 
    this$static.dots = null;
}

function TransformerElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.inductance = 4;
  this.ratio = this.polarity = 1;
  this.width_0 = 32;
  this.noDiagonal = true;
  this.couplingCoef = 0.999;
  this.current = initUnidimensionalArray(D_classLit, $intern_57, 9, 2, 15, 1);
  this.curcount = initUnidimensionalArray(D_classLit, $intern_57, 9, 2, 15, 1);
}

function TransformerElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.width_0 = 32 > (yb - ya < 0?-(yb - ya):yb - ya)?32:yb - ya < 0?-(yb - ya):yb - ya;
  this.inductance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.ratio = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.current = initUnidimensionalArray(D_classLit, $intern_57, 9, 2, 15, 1);
  this.curcount = initUnidimensionalArray(D_classLit, $intern_57, 9, 2, 15, 1);
  this.current[0] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.current[1] = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.couplingCoef = 0.999;
  try {
    this.couplingCoef = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.noDiagonal = true;
  this.polarity = (this.flags & 4) != 0?-1:1;
}

defineClass(265, 4, $intern_66, TransformerElm, TransformerElm_0);
_.calculateCurrent = function calculateCurrent_18(){
  var voltdiff1, voltdiff2;
  voltdiff1 = this.volts[0] - this.volts[2];
  voltdiff2 = this.volts[1] - this.volts[3];
  this.current[0] = voltdiff1 * this.a1 + voltdiff2 * this.a2 + this.curSourceValue1;
  this.current[1] = voltdiff1 * this.a3 + voltdiff2 * this.a4 + this.curSourceValue2;
}
;
_.doStep = function doStep_37(){
  $stampCurrentSource(sim_0, this.nodes[0], this.nodes[2], this.curSourceValue1);
  $stampCurrentSource(sim_0, this.nodes[1], this.nodes[3], this.curSourceValue2);
}
;
_.drag = function drag_5(xx, yy){
  xx = $snapGrid(sim_0, xx);
  yy = $snapGrid(sim_0, yy);
  this.width_0 = max_1(32, abs_0(yy - this.y_0));
  xx == this.x_0 && (yy = this.y_0);
  this.x2 = xx;
  this.y2 = yy;
  $setPoints_13(this);
}
;
_.draw = function draw_55(g){
  var i;
  for (i = 0; i != 4; i++) {
    $setVoltageColor(this, g, this.volts[i]);
    drawThickLine_0(g, this.ptEnds[i], this.ptCoil[i]);
  }
  for (i = 0; i != 2; i++) {
    $setPowerColor(this, g, this.current[i] * (this.volts[i] - this.volts[i + 2]));
    $drawCoil(this, g, this.dsign * (i == 1?-6 * this.polarity:6), this.ptCoil[i], this.ptCoil[i + 2], this.volts[i], this.volts[i + 2]);
  }
  $setColor(g, this.iAmMouseElm || this.selected || sim_0.plotYElm == this?selectColor:lightGrayColor);
  for (i = 0; i != 2; i++) {
    drawThickLine_0(g, this.ptCore[i], this.ptCore[i + 2]);
    this.dots != null && $fillOval(g, this.dots[i].x_0 - 2, this.dots[i].y_0 - 2, 5);
    this.curcount[i] = $updateDotCount(this.current[i], this.curcount[i]);
  }
  for (i = 0; i != 2; i++) {
    $drawDots(g, this.ptEnds[i], this.ptCoil[i], this.curcount[i]);
    $drawDots(g, this.ptCoil[i], this.ptCoil[i + 2], this.curcount[i]);
    $drawDots(g, this.ptEnds[i + 2], this.ptCoil[i + 2], -this.curcount[i]);
  }
  $drawPosts(this, g);
  $setBbox_0(this, this.ptEnds[0], this.ptEnds[this.polarity == 1?3:1], 0);
}
;
_.dump_0 = function dump_55(){
  return 'T ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.inductance + ' ' + this.ratio + ' ' + this.current[0] + ' ' + this.current[1] + ' ' + this.couplingCoef;
}
;
_.getConnection = function getConnection_21(n1, n2){
  if (n1 == 0 && n2 == 2 || n1 == 2 && n2 == 0)
    return true;
  if (n1 == 1 && n2 == 3 || n1 == 3 && n2 == 1)
    return true;
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_21(xa, ya){
  if (xa == this.ptEnds[0].x_0 && ya == this.ptEnds[0].y_0)
    return -this.current[0];
  if (xa == this.ptEnds[2].x_0 && ya == this.ptEnds[2].y_0)
    return this.current[0];
  if (xa == this.ptEnds[1].x_0 && ya == this.ptEnds[1].y_0)
    return -this.current[1];
  return this.current[1];
}
;
_.getDumpType = function getDumpType_87(){
  return 84;
}
;
_.getEditInfo = function getEditInfo_62(n){
  var ei;
  if (n == 0)
    return new EditInfo('Primary Inductance (H)', this.inductance, $intern_29, 5);
  if (n == 1)
    return $setDimensionless(new EditInfo('Ratio', this.ratio, 1, 10));
  if (n == 2)
    return $setDimensionless(new EditInfo('Coupling Coefficient', this.couplingCoef, 0, 1));
  if (n == 3) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Trapezoidal Approximation', (this.flags & 2) == 0);
    return ei;
  }
  if (n == 4) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Swap Secondary Polarity', this.polarity == -1);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_51(arr){
  arr[0] = 'transformer';
  arr[1] = 'L = ' + myGetUnitText(this.inductance, 'H', false);
  arr[2] = 'Ratio = 1:' + this.ratio;
  arr[3] = 'Vd1 = ' + myGetUnitText(this.volts[0] - this.volts[2], 'V', false);
  arr[4] = 'Vd2 = ' + myGetUnitText(this.volts[1] - this.volts[3], 'V', false);
  arr[5] = 'I1 = ' + myGetUnitText(this.current[0], 'A', false);
  arr[6] = 'I2 = ' + myGetUnitText(this.current[1], 'A', false);
}
;
_.getPost = function getPost_14(n){
  return this.ptEnds[n];
}
;
_.getPostCount = function getPostCount_59(){
  return 4;
}
;
_.reset_0 = function reset_27(){
  this.current[0] = this.current[1] = this.volts[0] = this.volts[1] = this.volts[2] = this.volts[3] = this.curcount[0] = this.curcount[1] = this.curSourceValue1 = this.curSourceValue2 = 0;
}
;
_.setEditValue = function setEditValue_59(n, ei){
  n == 0 && (this.inductance = ei.value_0);
  n == 1 && (this.ratio = ei.value_0);
  n == 2 && ei.value_0 > 0 && ei.value_0 < 1 && (this.couplingCoef = ei.value_0);
  n == 3 && ($getState(ei.checkbox)?(this.flags &= -3):(this.flags |= 2));
  if (n == 4) {
    this.polarity = $getState(ei.checkbox)?-1:1;
    $getState(ei.checkbox)?(this.flags |= 4):(this.flags &= -5);
    $setPoints_13(this);
  }
}
;
_.setPoints = function setPoints_48(){
  $setPoints_13(this);
}
;
_.stamp = function stamp_42(){
  var deti, l1, l2, m, ts;
  l1 = this.inductance;
  l2 = this.inductance * this.ratio * this.ratio;
  m = this.couplingCoef * $wnd.Math.sqrt(l1 * l2);
  deti = 1 / (l1 * l2 - m * m);
  ts = (this.flags & 2) == 0?sim_0.timeStep / 2:sim_0.timeStep;
  this.a1 = l2 * deti * ts;
  this.a2 = -m * deti * ts;
  this.a3 = -m * deti * ts;
  this.a4 = l1 * deti * ts;
  $stampConductance(sim_0, this.nodes[0], this.nodes[2], this.a1);
  $stampVCCurrentSource(sim_0, this.nodes[0], this.nodes[2], this.nodes[1], this.nodes[3], this.a2);
  $stampVCCurrentSource(sim_0, this.nodes[1], this.nodes[3], this.nodes[0], this.nodes[2], this.a3);
  $stampConductance(sim_0, this.nodes[1], this.nodes[3], this.a4);
  $stampRightSide(sim_0, this.nodes[0]);
  $stampRightSide(sim_0, this.nodes[1]);
  $stampRightSide(sim_0, this.nodes[2]);
  $stampRightSide(sim_0, this.nodes[3]);
}
;
_.startIteration = function startIteration_11(){
  var voltdiff1, voltdiff2;
  voltdiff1 = this.volts[0] - this.volts[2];
  voltdiff2 = this.volts[1] - this.volts[3];
  if ((this.flags & 2) == 0) {
    this.curSourceValue1 = voltdiff1 * this.a1 + voltdiff2 * this.a2 + this.current[0];
    this.curSourceValue2 = voltdiff1 * this.a3 + voltdiff2 * this.a4 + this.current[1];
  }
   else {
    this.curSourceValue1 = this.current[0];
    this.curSourceValue2 = this.current[1];
  }
}
;
_.a1 = 0;
_.a2 = 0;
_.a3 = 0;
_.a4 = 0;
_.couplingCoef = 0;
_.curSourceValue1 = 0;
_.curSourceValue2 = 0;
_.inductance = 0;
_.polarity = 0;
_.ratio = 0;
_.width_0 = 0;
var Lcom_lushprojects_circuitjs1_client_TransformerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TransformerElm', 265);
function $setPoints_14(this$static){
  var triPoints, ww;
  $setPoints(this$static);
  $calcLeads(this$static, 32);
  new Point;
  ww = 16;
  16 > this$static.dn / 2 && (ww = round_int(this$static.dn / 2));
  triPoints = $newPointArray(3);
  $interpPoint2(this$static.lead1, this$static.lead2, triPoints[0], triPoints[1], 0, 18);
  triPoints[2] = $interpPoint(this$static.point1, this$static.point2, 0.5 + (ww - 2) / this$static.dn);
  this$static.gatePoly = $createPolygon_1(triPoints);
  this$static.point3 = $interpPoint_0(this$static.point1, this$static.point2, 0.5, -16);
  this$static.lead3 = $interpPoint_0(this$static.point1, this$static.point2, 0.5, -8);
}

function TriStateElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.r_on = 0.1;
  this.r_off = $intern_71;
}

function TriStateElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.r_on = 0.1;
  this.r_off = $intern_71;
  try {
    this.r_on = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.r_off = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
}

defineClass(276, 4, $intern_66, TriStateElm, TriStateElm_0);
_.calculateCurrent = function calculateCurrent_19(){
  this.current_0 = (this.volts[0] - this.volts[1]) / this.resistance;
}
;
_.doStep = function doStep_38(){
  this.open_0 = this.volts[2] < 2.5;
  this.resistance = this.open_0?this.r_off:this.r_on;
  $stampResistor(sim_0, this.nodes[3], this.nodes[1], this.resistance);
  $updateVoltageSource(sim_0, this.voltSource, this.volts[0] > 2.5?5:0);
}
;
_.drag = function drag_6(xx, yy){
  var q1, q2;
  xx = $snapGrid(sim_0, xx);
  yy = $snapGrid(sim_0, yy);
  abs_0(this.x_0 - xx) < abs_0(this.y_0 - yy)?(xx = this.x_0):(yy = this.y_0);
  q1 = abs_0(this.x_0 - xx) + abs_0(this.y_0 - yy);
  q2 = (q1 / 2 | 0) % sim_0.gridSize;
  if (q2 != 0)
    return;
  this.x2 = xx;
  this.y2 = yy;
  $setPoints_14(this);
}
;
_.draw = function draw_56(g){
  $setBbox_0(this, this.point1, this.point2, 16);
  $draw2Leads(this, g);
  $setColor(g, lightGrayColor);
  drawThickPolygon(g, this.gatePoly);
  $setVoltageColor(this, g, this.volts[2]);
  drawThickLine_0(g, this.point3, this.lead3);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  $drawDots(g, this.lead2, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_56(){
  return '180 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.r_on + ' ' + this.r_off;
}
;
_.getConnection = function getConnection_22(n1, n2){
  return false;
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_22(xa, ya){
  if (xa == this.x2 && ya == this.y2)
    return this.current_0;
  return 0;
}
;
_.getDumpType = function getDumpType_88(){
  return 180;
}
;
_.getEditInfo = function getEditInfo_63(n){
  if (n == 0)
    return new EditInfo('On Resistance (ohms)', this.r_on, 0, 0);
  if (n == 1)
    return new EditInfo('Off Resistance (ohms)', this.r_off, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_52(arr){
  arr[0] = 'tri-state buffer';
  arr[1] = this.open_0?'open':'closed';
  arr[2] = 'Vd = ' + myGetUnitText($wnd.Math.abs(this.volts[0] - this.volts[1]), 'V', false);
  arr[3] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[4] = 'Vc = ' + myGetUnitText(this.volts[2], 'V', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_5(){
  return 1;
}
;
_.getPost = function getPost_15(n){
  return n == 0?this.point1:n == 1?this.point2:this.point3;
}
;
_.getPostCount = function getPostCount_60(){
  return 3;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_48(){
  return 1;
}
;
_.hasGroundConnection = function hasGroundConnection_14(n1){
  return n1 == 1;
}
;
_.nonLinear = function nonLinear_16(){
  return true;
}
;
_.setEditValue = function setEditValue_60(n, ei){
  n == 0 && ei.value_0 > 0 && (this.r_on = ei.value_0);
  n == 1 && ei.value_0 > 0 && (this.r_off = ei.value_0);
}
;
_.setPoints = function setPoints_49(){
  $setPoints_14(this);
}
;
_.stamp = function stamp_43(){
  $stampVoltageSource(sim_0, 0, this.nodes[3], this.voltSource);
  $stampNonLinear(sim_0, this.nodes[3]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.open_0 = false;
_.r_off = 0;
_.r_on = 0;
_.resistance = 0;
var Lcom_lushprojects_circuitjs1_client_TriStateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TriStateElm', 276);
function $setDefaults_0(this$static){
  this$static.cresistance = 50;
  this$static.holdingI = 0.0082;
  this$static.triggerI = $intern_29;
}

function TriacElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  $setDefaults_0(this);
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

function TriacElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  $setDefaults_0(this);
  try {
    this.lastvac = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.lastvag = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.volts[0] = 0;
    this.volts[1] = -this.lastvac;
    this.volts[2] = -this.lastvag;
    this.triggerI = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.holdingI = $doubleValue(__parseAndValidateDouble($nextToken(st)));
    this.cresistance = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 14))
      throw toJs($e0);
  }
  this.diode = new Diode(sim_0);
  $setup(this.diode, 0.8, 0);
}

defineClass(279, 4, $intern_66, TriacElm, TriacElm_0);
_.calculateCurrent = function calculateCurrent_20(){
  this.ic = (this.volts[1] - this.volts[2]) / this.cresistance;
  this.ia = (this.volts[0] - this.volts[3]) / this.aresistance;
  this.ig = -this.ic - this.ia;
}
;
_.doStep = function doStep_39(){
  var iamult, icmult, vac, vag;
  vac = this.volts[0] - this.volts[1];
  vag = this.volts[0] - this.volts[2];
  ($wnd.Math.abs(vac - this.lastvac) > $intern_29 || $wnd.Math.abs(vag - this.lastvag) > $intern_29) && (sim_0.converged = false);
  this.lastvac = vac;
  this.lastvag = vag;
  $doStep(this.diode, this.volts[3] - this.volts[2]);
  icmult = 1 / this.triggerI;
  iamult = 1 / this.holdingI - icmult;
  this.aresistance = -icmult * this.ic + this.ia * iamult > 1?0.0105:$intern_65;
  $stampResistor(sim_0, this.nodes[0], this.nodes[3], this.aresistance);
}
;
_.draw = function draw_57(g){
  var v1, v2;
  $setBbox_0(this, this.point1, this.point2, 8);
  $adjustBbox_0(this, this.gate[0], this.gate[1]);
  v1 = this.volts[0];
  v2 = this.volts[1];
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setColor(g, $getVoltageColor(this, g, v1));
  $fillPolygon(g, this.poly);
  $setColor(g, $getVoltageColor(this, g, v2));
  drawThickLine_0(g, this.cathode[0], this.cathode[1]);
  drawThickLine_0(g, this.lead2, this.gate[0]);
  drawThickLine_0(g, this.gate[0], this.gate[1]);
  this.curcount_a = $updateDotCount(this.ia, this.curcount_a);
  this.curcount_c = $updateDotCount(this.ic, this.curcount_c);
  this.curcount_g = $updateDotCount(this.ig, this.curcount_g);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.point1, this.lead2, this.curcount_a);
    $drawDots(g, this.point2, this.lead2, this.curcount_c);
    $drawDots(g, this.gate[1], this.gate[0], this.curcount_g);
    $drawDots(g, this.gate[0], this.lead2, this.curcount_g + distance(this.gate[1], this.gate[0]));
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_57(){
  return '206 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + (this.volts[0] - this.volts[1]) + ' ' + (this.volts[0] - this.volts[2]) + ' ' + this.triggerI + ' ' + this.holdingI + ' ' + this.cresistance;
}
;
_.getDumpType = function getDumpType_89(){
  return 206;
}
;
_.getEditInfo = function getEditInfo_64(n){
  if (n == 0)
    return new EditInfo('Trigger Current (A)', this.triggerI, 0, 0);
  if (n == 1)
    return new EditInfo('Holding Current (A)', this.holdingI, 0, 0);
  if (n == 2)
    return new EditInfo('Gate-Cathode Resistance (ohms)', this.cresistance, 0, 0);
  return null;
}
;
_.getInfo = function getInfo_53(arr){
  var vac, vag, vgc;
  arr[0] = 'SCR';
  vac = this.volts[0] - this.volts[1];
  vag = this.volts[0] - this.volts[2];
  vgc = this.volts[2] - this.volts[1];
  arr[1] = 'Ia = ' + myGetUnitText(this.ia, 'A', false);
  arr[2] = 'Ig = ' + myGetUnitText(this.ig, 'A', false);
  arr[3] = 'Vac = ' + myGetUnitText(vac, 'V', false);
  arr[4] = 'Vag = ' + myGetUnitText(vag, 'V', false);
  arr[5] = 'Vgc = ' + myGetUnitText(vgc, 'V', false);
}
;
_.getInternalNodeCount = function getInternalNodeCount_6(){
  return 1;
}
;
_.getPost = function getPost_16(n){
  return n == 0?this.point1:n == 1?this.point2:this.gate[1];
}
;
_.getPostCount = function getPostCount_61(){
  return 3;
}
;
_.getPower = function getPower_9(){
  return (this.volts[0] - this.volts[2]) * this.ia + (this.volts[1] - this.volts[2]) * this.ic;
}
;
_.nonLinear = function nonLinear_17(){
  return true;
}
;
_.reset_0 = function reset_28(){
  this.volts[0] = this.volts[1] = this.volts[2] = 0;
  this.diode.lastvoltdiff = 0;
  this.lastvag = this.lastvac = this.curcount_a = this.curcount_c = this.curcount_g = 0;
}
;
_.setEditValue = function setEditValue_61(n, ei){
  n == 0 && ei.value_0 > 0 && (this.triggerI = ei.value_0);
  n == 1 && ei.value_0 > 0 && (this.holdingI = ei.value_0);
  n == 2 && ei.value_0 > 0 && (this.cresistance = ei.value_0);
}
;
_.setPoints = function setPoints_50(){
  var dir_0, gatelen, leadlen, pa;
  $setPoints(this);
  if (abs_0(this.dx) > abs_0(this.dy)) {
    dir_0 = -sign(this.dx) * sign(this.dy);
    this.point2.y_0 = this.point1.y_0;
  }
   else {
    dir_0 = sign(this.dy) * sign(this.dx);
    this.point2.x_0 = this.point1.x_0;
  }
  dir_0 == 0 && (dir_0 = 1);
  $calcLeads(this, 16);
  this.cathode = $newPointArray(2);
  pa = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, pa[0], pa[1], 0, 8);
  $interpPoint2(this.lead1, this.lead2, this.cathode[0], this.cathode[1], 1, 8);
  this.poly = $createPolygon(pa[0], pa[1], this.lead2);
  this.gate = $newPointArray(2);
  leadlen = (this.dn - 16) / 2;
  gatelen = sim_0.gridSize;
  gatelen = round_int(gatelen + leadlen % sim_0.gridSize);
  if (leadlen < gatelen) {
    this.x2 = this.x_0;
    this.y2 = this.y_0;
    return;
  }
  $interpPoint_2(this.lead2, this.point2, this.gate[0], gatelen / leadlen, gatelen * dir_0);
  $interpPoint_2(this.lead2, this.point2, this.gate[1], gatelen / leadlen, sim_0.gridSize * 2 * dir_0);
}
;
_.stamp = function stamp_44(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
  $stampNonLinear(sim_0, this.nodes[3]);
  $stampResistor(sim_0, this.nodes[2], this.nodes[1], this.cresistance);
  $stamp(this.diode, this.nodes[3], this.nodes[2]);
}
;
_.aresistance = 0;
_.cresistance = 0;
_.curcount_a = 0;
_.curcount_c = 0;
_.curcount_g = 0;
_.holdingI = 0;
_.ia = 0;
_.ic = 0;
_.ig = 0;
_.lastvac = 0;
_.lastvag = 0;
_.triggerI = 0;
var Lcom_lushprojects_circuitjs1_client_TriacElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TriacElm', 279);
function TriodeElm(xx, yy){
  CircuitElm.call(this, xx, yy);
  this.mu = 93;
  this.kg1 = 680;
  this.noDiagonal = true;
}

function TriodeElm_0(xa, ya, xb, yb, f, st){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
  this.mu = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.kg1 = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  this.noDiagonal = true;
}

defineClass(280, 4, $intern_66, TriodeElm, TriodeElm_0);
_.doStep = function doStep_40(){
  var Gds, gm, ids, ival, q, rs, vgk, vpk, vs;
  vs = initUnidimensionalArray(D_classLit, $intern_57, 9, 3, 15, 1);
  vs[0] = this.volts[0];
  vs[1] = this.volts[1];
  vs[2] = this.volts[2];
  vs[1] > this.lastv1 + 0.5 && (vs[1] = this.lastv1 + 0.5);
  vs[1] < this.lastv1 - 0.5 && (vs[1] = this.lastv1 - 0.5);
  vs[2] > this.lastv2 + 0.5 && (vs[2] = this.lastv2 + 0.5);
  vs[2] < this.lastv2 - 0.5 && (vs[2] = this.lastv2 - 0.5);
  vgk = vs[1] - vs[2];
  vpk = vs[0] - vs[2];
  ($wnd.Math.abs(this.lastv0 - vs[0]) > $intern_29 || $wnd.Math.abs(this.lastv1 - vs[1]) > $intern_29 || $wnd.Math.abs(this.lastv2 - vs[2]) > $intern_29) && (sim_0.converged = false);
  this.lastv0 = vs[0];
  this.lastv1 = vs[1];
  this.lastv2 = vs[2];
  gm = 0;
  ival = vgk + vpk / this.mu;
  this.currentg = 0;
  if (vgk > $intern_29) {
    $stampResistor(sim_0, this.nodes[1], this.nodes[2], 6000);
    this.currentg = vgk / 6000;
  }
   else 
    $stampResistor(sim_0, this.nodes[1], this.nodes[2], $intern_73);
  if (ival < 0) {
    Gds = $intern_88;
    ids = vpk * $intern_88;
  }
   else {
    ids = $wnd.Math.pow(ival, 1.5) / this.kg1;
    q = 1.5 * $wnd.Math.sqrt(ival) / this.kg1;
    Gds = q;
    gm = q / this.mu;
  }
  this.currentp = ids;
  this.currentc = ids + this.currentg;
  rs = -ids + Gds * vpk + gm * vgk;
  $stampMatrix(sim_0, this.nodes[0], this.nodes[0], Gds);
  $stampMatrix(sim_0, this.nodes[0], this.nodes[2], -Gds - gm);
  $stampMatrix(sim_0, this.nodes[0], this.nodes[1], gm);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[0], -Gds);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[2], Gds + gm);
  $stampMatrix(sim_0, this.nodes[2], this.nodes[1], -gm);
  $stampRightSide_0(sim_0, this.nodes[0], rs);
  $stampRightSide_0(sim_0, this.nodes[2], -rs);
}
;
_.draw = function draw_58(g){
  var i;
  $setColor(g, ($clinit_Color() , gray));
  drawThickCircle(g, this.point2.x_0, this.point2.y_0, this.circler);
  $setBbox_0(this, this.point1, this.plate[0], 16);
  $adjustBbox(this, this.cath[0].x_0, this.cath[1].y_0, this.point2.x_0 + this.circler, this.point2.y_0 + this.circler);
  $setVoltageColor(this, g, this.volts[0]);
  $setPowerColor(this, g, this.currentp * (this.volts[0] - this.volts[2]));
  drawThickLine_0(g, this.plate[0], this.plate[1]);
  drawThickLine_0(g, this.plate[2], this.plate[3]);
  $setVoltageColor(this, g, this.volts[1]);
  $setPowerColor(this, g, this.currentg * (this.volts[1] - this.volts[2]));
  for (i = 0; i != 8; i += 2)
    drawThickLine_0(g, this.grid[i], this.grid[i + 1]);
  $setVoltageColor(this, g, this.volts[2]);
  $setPowerColor(this, g, 0);
  for (i = 0; i != 3; i++)
    drawThickLine_0(g, this.cath[i], this.cath[i + 1]);
  this.curcountp = $updateDotCount(this.currentp, this.curcountp);
  this.curcountc = $updateDotCount(this.currentc, this.curcountc);
  this.curcountg = $updateDotCount(this.currentg, this.curcountg);
  if (sim_0.dragElm != this) {
    $drawDots(g, this.plate[0], this.midgrid, this.curcountp);
    $drawDots(g, this.midgrid, this.midcath, this.curcountc);
    $drawDots(g, this.midcath, this.cath[1], this.curcountc + 8);
    $drawDots(g, this.cath[1], this.cath[0], this.curcountc + 8);
    $drawDots(g, this.point1, this.midgrid, this.curcountg);
  }
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_58(){
  return '173 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.mu + ' ' + this.kg1;
}
;
_.getConnection = function getConnection_23(n1, n2){
  return !(n1 == 1 || n2 == 1);
}
;
_.getCurrentIntoPoint = function getCurrentIntoPoint_23(xa, ya){
  if (xa == this.cath[0].x_0 && ya == this.cath[0].y_0)
    return this.currentc;
  if (xa == this.plate[0].x_0 && ya == this.plate[0].y_0)
    return -this.currentp;
  return -this.currentg;
}
;
_.getDumpType = function getDumpType_90(){
  return 173;
}
;
_.getEditInfo = function getEditInfo_65(n){
  if (n == 0)
    return $setDimensionless(new EditInfo('mu', this.mu, 0, 0));
  if (n == 1)
    return $setDimensionless(new EditInfo('kg1', this.kg1, 0, 0));
  return null;
}
;
_.getInfo = function getInfo_54(arr){
  var vbc, vbe, vce;
  arr[0] = 'triode';
  vbc = this.volts[0] - this.volts[1];
  vbe = this.volts[0] - this.volts[2];
  vce = this.volts[1] - this.volts[2];
  arr[1] = 'Vbe = ' + myGetUnitText(vbe, 'V', false);
  arr[2] = 'Vbc = ' + myGetUnitText(vbc, 'V', false);
  arr[3] = 'Vce = ' + myGetUnitText(vce, 'V', false);
}
;
_.getPost = function getPost_17(n){
  return n == 0?this.plate[0]:n == 1?this.grid[0]:this.cath[0];
}
;
_.getPostCount = function getPostCount_62(){
  return 3;
}
;
_.getPower = function getPower_10(){
  return (this.volts[0] - this.volts[2]) * this.current_0;
}
;
_.nonLinear = function nonLinear_18(){
  return true;
}
;
_.reset_0 = function reset_29(){
  this.volts[0] = this.volts[1] = this.volts[2] = 0;
  this.curcount_0 = 0;
}
;
_.setEditValue = function setEditValue_62(n, ei){
  n == 0 && ei.value_0 > 0 && (this.mu = ei.value_0);
  n == 1 && ei.value_0 > 0 && (this.kg1 = ei.value_0);
}
;
_.setPoints = function setPoints_51(){
  var i;
  $setPoints(this);
  this.plate = $newPointArray(4);
  this.grid = $newPointArray(8);
  this.cath = $newPointArray(4);
  this.grid[0] = this.point1;
  $interpPoint_2(this.point1, this.point2, this.plate[1], 1, 8);
  $interpPoint_2(this.point1, this.point2, this.plate[0], 1, 32);
  $interpPoint2(this.point2, this.plate[1], this.plate[2], this.plate[3], 1, 18);
  this.circler = 24;
  $interpPoint_2(this.point1, this.point2, this.grid[1], (this.dn - this.circler) / this.dn, 0);
  for (i = 0; i != 3; i++) {
    $interpPoint_2(this.grid[1], this.point2, this.grid[2 + i * 2], (i * 3 + 1) / 4.5, 0);
    $interpPoint_2(this.grid[1], this.point2, this.grid[3 + i * 2], (i * 3 + 2) / 4.5, 0);
  }
  this.midgrid = this.point2;
  this.midcath = $interpPoint_0(this.point1, this.point2, 1, -8);
  $interpPoint2(this.point2, this.plate[1], this.cath[1], this.cath[2], -1, 16);
  $interpPoint_2(this.point2, this.plate[1], this.cath[3], -1.2, -16);
  $interpPoint_2(this.point2, this.plate[1], this.cath[0], -4, 16);
}
;
_.stamp = function stamp_45(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
  $stampNonLinear(sim_0, this.nodes[2]);
}
;
_.circler = 0;
_.curcountc = 0;
_.curcountg = 0;
_.curcountp = 0;
_.currentc = 0;
_.currentg = 0;
_.currentp = 0;
_.kg1 = 0;
_.lastv0 = 0;
_.lastv1 = 0;
_.lastv2 = 0;
_.mu = 0;
var Lcom_lushprojects_circuitjs1_client_TriodeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TriodeElm', 280);
function $limitStep_1(vnew, vold){
  if (vnew > vold + 1)
    return vold + 1;
  if (vnew < vold - 1)
    return vold - 1;
  return vnew;
}

function TunnelDiodeElm(xx, yy){
  CircuitElm.call(this, xx, yy);
}

function TunnelDiodeElm_0(xa, ya, xb, yb, f){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
}

defineClass(281, 4, $intern_66, TunnelDiodeElm, TunnelDiodeElm_0);
_.calculateCurrent = function calculateCurrent_21(){
  var i0, voltdiff;
  voltdiff = this.volts[0] - this.volts[1];
  i0 = $intern_96 * $wnd.Math.exp(-0.37);
  this.current_0 = $intern_97 * $wnd.Math.exp($intern_98) * ($wnd.Math.exp(voltdiff / 0.026) - 1) + $intern_97 * (voltdiff / 0.1) * $wnd.Math.exp(1 - voltdiff / 0.1) + $intern_96 * $wnd.Math.exp(voltdiff - 0.37) - i0;
}
;
_.doStep = function doStep_41(){
  var geq, i, i0, nc, voltdiff;
  voltdiff = this.volts[0] - this.volts[1];
  $wnd.Math.abs(voltdiff - this.lastvoltdiff) > $intern_29 && (sim_0.converged = false);
  voltdiff = $limitStep_1(voltdiff, this.lastvoltdiff);
  this.lastvoltdiff = voltdiff;
  i0 = $intern_96 * $wnd.Math.exp(-0.37);
  i = $intern_97 * $wnd.Math.exp($intern_98) * ($wnd.Math.exp(voltdiff / 0.026) - 1) + $intern_97 * (voltdiff / 0.1) * $wnd.Math.exp(1 - voltdiff / 0.1) + $intern_96 * $wnd.Math.exp(voltdiff - 0.37) - i0;
  geq = $intern_97 * $wnd.Math.exp($intern_98) * $wnd.Math.exp(voltdiff / 0.026) / 0.026 + $intern_97 * $wnd.Math.exp(1 - voltdiff / 0.1) / 0.1 - $wnd.Math.exp(1 - voltdiff / 0.1) * $intern_97 * voltdiff / 0.010000000000000002 + $wnd.Math.exp(voltdiff - 0.37) * $intern_96;
  nc = i - geq * voltdiff;
  $stampConductance(sim_0, this.nodes[0], this.nodes[1], geq);
  $stampCurrentSource(sim_0, this.nodes[0], this.nodes[1], nc);
}
;
_.draw = function draw_59(g){
  var v1, v2;
  $setBbox_0(this, this.point1, this.point2, 8);
  v1 = this.volts[0];
  v2 = this.volts[1];
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setColor(g, $getVoltageColor(this, g, v1));
  $fillPolygon(g, this.poly);
  $setColor(g, $getVoltageColor(this, g, v2));
  drawThickLine_0(g, this.cathode[0], this.cathode[1]);
  drawThickLine_0(g, this.cathode[2], this.cathode[0]);
  drawThickLine_0(g, this.cathode[3], this.cathode[1]);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.getDumpType = function getDumpType_91(){
  return 175;
}
;
_.getInfo = function getInfo_55(arr){
  arr[0] = 'tunnel diode';
  arr[1] = 'I = ' + myGetUnitText(this.current_0, 'A', false);
  arr[2] = 'Vd = ' + myGetUnitText(this.volts[0] - this.volts[1], 'V', false);
  arr[3] = 'P = ' + myGetUnitText((this.volts[0] - this.volts[1]) * this.current_0, 'W', false);
}
;
_.nonLinear = function nonLinear_19(){
  return true;
}
;
_.reset_0 = function reset_30(){
  this.lastvoltdiff = this.volts[0] = this.volts[1] = this.curcount_0 = 0;
}
;
_.setPoints = function setPoints_52(){
  var pa;
  $setPoints(this);
  $calcLeads(this, 16);
  this.cathode = $newPointArray(4);
  pa = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, pa[0], pa[1], 0, 8);
  $interpPoint2(this.lead1, this.lead2, this.cathode[0], this.cathode[1], 1, 8);
  $interpPoint2(this.lead1, this.lead2, this.cathode[2], this.cathode[3], 0.8, 8);
  this.poly = $createPolygon(pa[0], pa[1], this.lead2);
}
;
_.stamp = function stamp_46(){
  $stampNonLinear(sim_0, this.nodes[0]);
  $stampNonLinear(sim_0, this.nodes[1]);
}
;
_.lastvoltdiff = 0;
var Lcom_lushprojects_circuitjs1_client_TunnelDiodeElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'TunnelDiodeElm', 281);
function VCOElm(xx, yy){
  ChipElm.call(this, xx, yy);
}

function VCOElm_0(xa, ya, xb, yb, f, st){
  ChipElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(301, 13, $intern_66, VCOElm, VCOElm_0);
_.doStep = function doStep_42(){
  var cur1, cur2, dir_0, vc, vo;
  vc = this.volts[3] - this.volts[2];
  vo = this.volts[1];
  dir_0 = vo < 2.5?1:-1;
  if (vo < 2.5 && vc > 4.5) {
    vo = 5;
    dir_0 = -1;
  }
  if (vo > 2.5 && vc < 0.5) {
    vo = 0;
    dir_0 = 1;
  }
  $updateVoltageSource(sim_0, this.pins[1].voltSource, vo);
  cur1 = sim_0.nodeList.arrayList.array.length + this.pins[4].voltSource;
  cur2 = sim_0.nodeList.arrayList.array.length + this.pins[5].voltSource;
  $stampMatrix(sim_0, this.nodes[2], cur1, dir_0);
  $stampMatrix(sim_0, this.nodes[2], cur2, dir_0);
  $stampMatrix(sim_0, this.nodes[3], cur1, -dir_0);
  $stampMatrix(sim_0, this.nodes[3], cur2, -dir_0);
  this.cDir = dir_0;
}
;
_.draw = function draw_60(g){
  var c;
  c = this.cDir * (this.pins[4].current + this.pins[5].current) + (this.volts[3] - this.volts[2]) / $intern_65;
  this.pins[2].current = -c;
  this.pins[3].current = c;
  this.pins[0].current = -this.pins[4].current;
  $drawChip(this, g);
}
;
_.getChipName = function getChipName_31(){
  return 'VCO';
}
;
_.getDumpType = function getDumpType_92(){
  return 158;
}
;
_.getPostCount = function getPostCount_63(){
  return 6;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_49(){
  return 3;
}
;
_.nonLinear = function nonLinear_20(){
  return true;
}
;
_.setupPins = function setupPins_31(){
  this.sizeX = 2;
  this.sizeY = 4;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, 6, 0, 1);
  this.pins[0] = new ChipElm$Pin(this, 0, 2, 'Vi');
  this.pins[1] = new ChipElm$Pin(this, 3, 2, 'Vo');
  this.pins[1].output = true;
  this.pins[2] = new ChipElm$Pin(this, 0, 3, 'C');
  this.pins[3] = new ChipElm$Pin(this, 1, 3, 'C');
  this.pins[4] = new ChipElm$Pin(this, 2, 3, 'R1');
  this.pins[4].output = true;
  this.pins[5] = new ChipElm$Pin(this, 3, 3, 'R2');
  this.pins[5].output = true;
}
;
_.stamp = function stamp_47(){
  $stampVoltageSource(sim_0, 0, this.nodes[1], this.pins[1].voltSource);
  $stampVoltageSource_0(sim_0, this.nodes[0], this.nodes[4], this.pins[4].voltSource, 0);
  $stampVoltageSource_0(sim_0, 0, this.nodes[5], this.pins[5].voltSource, 5);
  $stampResistor(sim_0, this.nodes[2], this.nodes[3], $intern_65);
  $stampNonLinear(sim_0, this.nodes[2]);
  $stampNonLinear(sim_0, this.nodes[3]);
}
;
_.cDir = 0;
var Lcom_lushprojects_circuitjs1_client_VCOElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VCOElm', 301);
function VCVSElm(xx, yy){
  VCCSElm.call(this, xx, yy);
  this.exprString = '2*(a-b)';
}

function VCVSElm_0(xa, ya, xb, yb, f, st){
  VCCSElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(315, 91, $intern_76, VCVSElm, VCVSElm_0);
_.doStep = function doStep_43(){
  var convergeLimit, dx, i, limitStep, rs, v, v0, v2, vn;
  limitStep = $getLimitStep();
  convergeLimit = $getConvergeLimit();
  for (i = 0; i != this.inputCount; i++) {
    $wnd.Math.abs(this.volts[i] - this.lastVolts[i]) > convergeLimit && (sim_0.converged = false);
    isNaN(this.volts[i]) && (this.volts[i] = 0);
    $wnd.Math.abs(this.volts[i] - this.lastVolts[i]) > limitStep && (this.volts[i] = this.lastVolts[i] + $sign(this.volts[i] - this.lastVolts[i], limitStep));
  }
  vn = this.pins[this.inputCount].voltSource + sim_0.nodeList.arrayList.array.length;
  if (this.expr) {
    for (i = 0; i != this.inputCount; i++)
      this.exprState.values[i] = this.volts[i];
    this.exprState.t = sim_0.t;
    v0 = $eval(this.expr, this.exprState);
    $wnd.Math.abs(this.volts[this.inputCount] - this.volts[this.inputCount + 1] - v0) > $wnd.Math.abs(v0) * $intern_29 && sim_0.subIterations < 100 && (sim_0.converged = false);
    rs = v0;
    for (i = 0; i != this.inputCount; i++) {
      this.exprState.values[i] = this.volts[i] + $intern_62;
      v = $eval(this.expr, this.exprState);
      this.exprState.values[i] = this.volts[i] - $intern_62;
      v2 = $eval(this.expr, this.exprState);
      dx = (v - v2) / $intern_77;
      $wnd.Math.abs(dx) < $intern_62 && (dx = dx > 0?$intern_62:$intern_78);
      $stampMatrix(sim_0, vn, this.nodes[i], -dx);
      rs -= dx * this.volts[i];
      this.exprState.values[i] = this.volts[i];
    }
    $stampRightSide_0(sim_0, vn, rs);
  }
  for (i = 0; i != this.inputCount; i++)
    this.lastVolts[i] = this.volts[i];
}
;
_.getChipName = function getChipName_32(){
  return 'VCVS';
}
;
_.getDumpType = function getDumpType_93(){
  return 212;
}
;
_.getPostCount = function getPostCount_64(){
  return this.inputCount + 2;
}
;
_.getVoltageSourceCount = function getVoltageSourceCount_50(){
  return 1;
}
;
_.hasCurrentOutput = function hasCurrentOutput_2(){
  return false;
}
;
_.setCurrent = function setCurrent_8(vn, c){
  if (this.pins[this.inputCount].voltSource == vn) {
    this.pins[this.inputCount].current = c;
    this.pins[this.inputCount + 1].current = -c;
  }
}
;
_.setupPins = function setupPins_32(){
  var i;
  this.sizeX = 2;
  this.sizeY = this.inputCount > 2?this.inputCount:2;
  this.pins = initUnidimensionalArray(Lcom_lushprojects_circuitjs1_client_ChipElm$Pin_2_classLit, $intern_3, 5, this.inputCount + 2, 0, 1);
  for (i = 0; i != this.inputCount; i++)
    this.pins[i] = new ChipElm$Pin(this, i, 2, String.fromCharCode(65 + i & $intern_9));
  this.pins[this.inputCount] = new ChipElm$Pin(this, 0, 3, 'V+');
  this.pins[this.inputCount].output = true;
  this.pins[this.inputCount + 1] = new ChipElm$Pin(this, 1, 3, 'V-');
  this.lastVolts = initUnidimensionalArray(D_classLit, $intern_57, 9, this.inputCount, 15, 1);
  this.exprState = new ExprState;
}
;
_.stamp = function stamp_48(){
  var vn;
  vn = this.pins[this.inputCount].voltSource + sim_0.nodeList.arrayList.array.length;
  $stampNonLinear(sim_0, vn);
  $stampVoltageSource(sim_0, this.nodes[this.inputCount + 1], this.nodes[this.inputCount], this.pins[this.inputCount].voltSource);
}
;
var Lcom_lushprojects_circuitjs1_client_VCVSElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VCVSElm', 315);
function $createSlider_0(this$static){
  var value_0;
  this$static.waveform = 6;
  $addWidgetToVerticalPanel(sim_0, this$static.label_0 = new Label_0(LS(this$static.sliderText)));
  $addStyleName(this$static.label_0, 'topSpace');
  value_0 = round_int((this$static.frequency - this$static.bias) * 100 / (this$static.maxVoltage - this$static.bias));
  $addWidgetToVerticalPanel(sim_0, this$static.slider = new Scrollbar_0(value_0, null, this$static));
}

function VarRailElm(xx, yy){
  RailElm_0.call(this, xx, yy, 6);
  this.sliderText = 'Voltage';
  this.frequency = this.maxVoltage;
  $createSlider_0(this);
}

function VarRailElm_0(xa, ya, xb, yb, f, st){
  RailElm_1.call(this, xa, ya, xb, yb, f, st);
  this.sliderText = $nextToken(st);
  while ($hasMoreTokens(st))
    this.sliderText += ' ' + $nextToken(st);
  this.sliderText = $replaceAll(this.sliderText, '%2[bB]', '+');
  $createSlider_0(this);
}

defineClass(253, 38, {152:1, 32:1, 4:1, 8:1, 38:1, 41:1}, VarRailElm, VarRailElm_0);
_.delete_0 = function delete_4(){
  $removeWidgetFromVerticalPanel(sim_0, this.label_0);
  $removeWidgetFromVerticalPanel(sim_0, this.slider);
}
;
_.dump_0 = function dump_59(){
  return this.waveform == 5?(this.flags |= 4):(this.flags &= -5) , '172 ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.waveform + ' ' + this.frequency + ' ' + this.maxVoltage + ' ' + this.bias + ' ' + this.phaseShift + ' ' + this.dutyCycle + ' ' + $replaceAll(this.sliderText, '\\+', '%2B');
}
;
_.getDumpType = function getDumpType_94(){
  return 172;
}
;
_.getEditInfo = function getEditInfo_66(n){
  var ei;
  if (n == 0)
    return new EditInfo('Min Voltage', this.bias, -20, 20);
  if (n == 1)
    return new EditInfo('Max Voltage', this.maxVoltage, -20, 20);
  if (n == 2) {
    ei = new EditInfo('Slider Text', 0, -1, -1);
    ei.text_0 = this.sliderText;
    return ei;
  }
  return null;
}
;
_.getShortcut = function getShortcut_35(){
  return 0;
}
;
_.getVoltage = function getVoltage_2(){
  this.frequency = this.slider.val_0 * (this.maxVoltage - this.bias) / 100 + this.bias;
  return this.frequency;
}
;
_.onMouseWheel = function onMouseWheel_3(e){
  !!this.slider && $onMouseWheel_0(this.slider, e);
}
;
_.setEditValue = function setEditValue_63(n, ei){
  n == 0 && (this.bias = ei.value_0);
  n == 1 && (this.maxVoltage = ei.value_0);
  if (n == 2) {
    this.sliderText = $getText(ei.textf);
    $setText_0(this.label_0, this.sliderText);
    $setiFrameHeight(sim_0);
  }
}
;
_.setMouseElm = function setMouseElm_1(v){
  this.iAmMouseElm = v;
  !!this.slider && $draw_4(this.slider);
}
;
var Lcom_lushprojects_circuitjs1_client_VarRailElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VarRailElm', 253);
function VoltageSourceRecord(){
}

defineClass(151, 1, {151:1}, VoltageSourceRecord);
_.vsNode = 0;
_.vsNumForElement = 0;
var Lcom_lushprojects_circuitjs1_client_VoltageSourceRecord_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'VoltageSourceRecord', 151);
function WireElm(xx, yy){
  CircuitElm.call(this, xx, yy);
}

function WireElm_0(xa, ya, xb, yb, f){
  CircuitElm_0.call(this, xa, ya, xb, yb, f);
}

defineClass(120, 4, {4:1, 8:1, 120:1}, WireElm, WireElm_0);
_.draw = function draw_61(g){
  var s;
  $setVoltageColor(this, g, this.volts[0]);
  drawThickLine_0(g, this.point1, this.point2);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $setBbox_0(this, this.point1, this.point2, 3);
  s = '';
  (this.flags & 1) != 0 && (s = myGetUnitText($wnd.Math.abs(this.current_0), 'A', true));
  (this.flags & 2) != 0 && (s = (s.length > 0?s + ' ':'') + myGetUnitText(this.volts[0], 'V', true));
  $drawValues(this, g, s, 4);
  $drawPosts(this, g);
}
;
_.getDumpType = function getDumpType_95(){
  return 119;
}
;
_.getEditInfo = function getEditInfo_67(n){
  var ei;
  if (n == 0) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Show Current', (this.flags & 1) != 0);
    return ei;
  }
  if (n == 1) {
    ei = new EditInfo('', 0, -1, -1);
    ei.checkbox = new Checkbox('Show Voltage', (this.flags & 2) != 0);
    return ei;
  }
  return null;
}
;
_.getInfo = function getInfo_56(arr){
  arr[0] = 'wire';
  arr[1] = 'I = ' + myGetUnitText($wnd.Math.abs(this.current_0), 'A', false);
  arr[2] = 'V = ' + myGetUnitText(this.volts[0], 'V', false);
}
;
_.getPower = function getPower_11(){
  return 0;
}
;
_.getShortcut = function getShortcut_36(){
  return 119;
}
;
_.getVoltageDiff = function getVoltageDiff_19(){
  return this.volts[0];
}
;
_.isWire = function isWire_3(){
  return true;
}
;
_.setEditValue = function setEditValue_64(n, ei){
  n == 0 && ($getState(ei.checkbox)?(this.flags |= 1):(this.flags &= -2));
  n == 1 && ($getState(ei.checkbox)?(this.flags |= 2):(this.flags &= -3));
}
;
_.stamp = function stamp_49(){
}
;
_.hasWireInfo = false;
var Lcom_lushprojects_circuitjs1_client_WireElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'WireElm', 120);
function XorGateElm(xx, yy){
  OrGateElm.call(this, xx, yy);
}

function XorGateElm_0(xa, ya, xb, yb, f, st){
  OrGateElm_0.call(this, xa, ya, xb, yb, f, st);
}

defineClass(167, 148, {4:1, 8:1, 167:1}, XorGateElm, XorGateElm_0);
_.calcFunction = function calcFunction_1(){
  var f, i;
  f = false;
  for (i = 0; i != this.inputCount; i++)
    f = f ^ $getInput(this, i);
  return f;
}
;
_.getDumpType = function getDumpType_96(){
  return 154;
}
;
_.getGateName = function getGateName_3(){
  return 'XOR gate';
}
;
_.getShortcut = function getShortcut_37(){
  return 52;
}
;
var Lcom_lushprojects_circuitjs1_client_XorGateElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'XorGateElm', 167);
function ZenerElm(xx, yy){
  DiodeElm.call(this, xx, yy);
  this.zvoltage = 5.6;
  $setup(this.diode, this.fwdrop, this.zvoltage);
}

function ZenerElm_0(xa, ya, xb, yb, f, st){
  DiodeElm_0.call(this, xa, ya, xb, yb, f, st);
  this.zvoltage = $doubleValue(__parseAndValidateDouble($nextToken(st)));
  $setup(this.diode, this.fwdrop, this.zvoltage);
}

defineClass(255, 147, $intern_66, ZenerElm, ZenerElm_0);
_.draw = function draw_62(g){
  var v1, v2;
  $setBbox_0(this, this.point1, this.point2, 8);
  v1 = this.volts[0];
  v2 = this.volts[1];
  $draw2Leads(this, g);
  $setPowerColor_0(this, g);
  $setColor(g, $getVoltageColor(this, g, v1));
  $fillPolygon(g, this.poly);
  $setColor(g, $getVoltageColor(this, g, v2));
  drawThickLine_0(g, this.cathode[0], this.cathode[1]);
  drawThickLine_0(g, this.wing[0], this.cathode[0]);
  drawThickLine_0(g, this.wing[1], this.cathode[1]);
  this.curcount_0 = $updateDotCount(this.current_0, this.curcount_0);
  sim_0.dragElm != this && $drawDots(g, this.point1, this.point2, this.curcount_0);
  $drawPosts(this, g);
}
;
_.dump_0 = function dump_60(){
  return this.flags |= 1 , 'z ' + this.x_0 + ' ' + this.y_0 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.flags + ' ' + this.fwdrop + ' ' + this.zvoltage;
}
;
_.getDumpType = function getDumpType_97(){
  return 122;
}
;
_.getEditInfo = function getEditInfo_68(n){
  if (n == 0)
    return new EditInfo('Fwd Voltage @ 1A', this.fwdrop, 10, $intern_20);
  if (n == 1)
    return new EditInfo('Zener Voltage @ 5mA', this.zvoltage, 1, 25);
  return null;
}
;
_.getInfo = function getInfo_57(arr){
  $getInfo_1(this, arr);
  arr[0] = 'Zener diode';
  arr[5] = 'Vz = ' + myGetUnitText(this.zvoltage, 'V', false);
}
;
_.getShortcut = function getShortcut_38(){
  return 122;
}
;
_.setEditValue = function setEditValue_65(n, ei){
  n == 0 && (this.fwdrop = ei.value_0);
  n == 1 && (this.zvoltage = ei.value_0);
  $setup(this.diode, this.fwdrop, this.zvoltage);
}
;
_.setPoints = function setPoints_53(){
  var pa;
  $setPoints_4(this);
  $calcLeads(this, 16);
  this.cathode = $newPointArray(2);
  this.wing = $newPointArray(2);
  pa = $newPointArray(2);
  $interpPoint2(this.lead1, this.lead2, pa[0], pa[1], 0, 8);
  $interpPoint2(this.lead1, this.lead2, this.cathode[0], this.cathode[1], 1, 8);
  $interpPoint_2(this.cathode[0], this.cathode[1], this.wing[0], -0.2, -8);
  $interpPoint_2(this.cathode[1], this.cathode[0], this.wing[1], -0.2, -8);
  this.poly = $createPolygon(pa[0], pa[1], this.lead2);
}
;
var Lcom_lushprojects_circuitjs1_client_ZenerElm_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'ZenerElm', 255);
function $loadLocale(this$static){
  var lang_0, requestBuilder, url_0;
  lang_0 = navigator.languages?navigator.languages[0]:navigator.language || navigator.userLanguage;
  if ($equals_1(lang_0.substr(0, 2), 'en')) {
    $loadSimulator(this$static);
    return;
  }
  $equals_1(lang_0.substr(0, 3), 'de-') && (lang_0 = 'de');
  url_0 = getModuleBaseURL() + 'locale_' + lang_0 + '.txt';
  requestBuilder = new RequestBuilder(($clinit_RequestBuilder() , GET), url_0);
  try {
    $sendRequest(requestBuilder, new circuitjs1$1(this$static));
  }
   catch ($e0) {
    $e0 = toJava($e0);
    if (!instanceOf($e0, 97))
      throw toJs($e0);
  }
}

function $loadSimulator(this$static){
  mysim = new CirSim_0;
  localizationMap = this$static.localizationMap;
  $init_1(mysim);
  addResizeHandler(new circuitjs1$2);
  $updateCircuit(mysim);
}

function $onModuleLoad_0(this$static){
  this$static.localizationMap = new HashMap;
  $loadLocale(this$static);
}

function $processLocale(this$static, data_0){
  var i, line, lines, q2, str1, str2;
  lines = $split_0(data_0, '\r?\n');
  for (i = 0; i != lines.length; i++) {
    line = lines[i];
    if (line.length == 0)
      continue;
    checkCriticalStringElementIndex(0, line.length);
    if (line.charCodeAt(0) != 34) {
      console.log('ignoring line in string catalog: ' + line);
      continue;
    }
    q2 = $indexOf_1(line, fromCodePoint(34), 1);
    if (q2 < 0 || (checkCriticalStringElementIndex(q2 + 1, line.length) , line.charCodeAt(q2 + 1) != 61) || (checkCriticalStringElementIndex(q2 + 2, line.length) , line.charCodeAt(q2 + 2) != 34) || $charAt_0(line, line.length - 1) != 34) {
      console.log('ignoring line in string catalog: ' + line);
      continue;
    }
    str1 = line.substr(1, q2 - 1);
    str2 = $substring_0(line, q2 + 3, line.length - 1);
    $putStringValue(this$static.localizationMap, str1, str2);
  }
  $loadSimulator(this$static);
}

function circuitjs1(){
}

defineClass(324, 1, {}, circuitjs1);
var mysim;
var Lcom_lushprojects_circuitjs1_client_circuitjs1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'circuitjs1', 324);
function circuitjs1$1(this$0){
  this.this$01 = this$0;
}

defineClass(326, 1, {}, circuitjs1$1);
_.onError = function onError_2(request, exception){
}
;
_.onResponseReceived = function onResponseReceived_2(request, response){
  var statusCode, text_0;
  statusCode = response.xmlHttpRequest.status;
  if ((statusCode == 1223?204:statusCode) == 200) {
    text_0 = response.xmlHttpRequest.responseText;
    $processLocale(this.this$01, text_0);
  }
   else {
    $loadSimulator(this.this$01);
  }
}
;
var Lcom_lushprojects_circuitjs1_client_circuitjs1$1_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'circuitjs1/1', 326);
function circuitjs1$2(){
}

defineClass(328, 1, $intern_46, circuitjs1$2);
_.onResize = function onResize_5(event_0){
  $setCanvasSize(mysim);
  $setiFrameHeight(mysim);
}
;
var Lcom_lushprojects_circuitjs1_client_circuitjs1$2_2_classLit = createForClass('com.lushprojects.circuitjs1.client', 'circuitjs1/2', 328);
defineClass(643, 1, {});
var Ljava_io_OutputStream_2_classLit = createForClass('java.io', 'OutputStream', 643);
defineClass(644, 643, {});
var Ljava_io_FilterOutputStream_2_classLit = createForClass('java.io', 'FilterOutputStream', 644);
function PrintStream(){
}

defineClass(336, 644, {}, PrintStream);
var Ljava_io_PrintStream_2_classLit = createForClass('java.io', 'PrintStream', 336);
function $charAt(this$static, index_0){
  return $charAt_0(this$static.string, index_0);
}

function $replace0(this$static, start_0, end, toInsert){
  this$static.string = $substring_0(this$static.string, 0, start_0) + ('' + toInsert) + $substring(this$static.string, end);
}

function $setCharAt(this$static, index_0, x_0){
  $replace0(this$static, index_0, index_0 + 1, String.fromCharCode(x_0));
}

function AbstractStringBuilder(string){
  this.string = string;
}

defineClass(177, 1, {228:1});
_.toString_0 = function toString_13(){
  return this.string;
}
;
var Ljava_lang_AbstractStringBuilder_2_classLit = createForClass('java.lang', 'AbstractStringBuilder', 177);
function ArithmeticException(){
  RuntimeException_0.call(this, 'divide by zero');
}

defineClass(342, 51, $intern_8, ArithmeticException);
var Ljava_lang_ArithmeticException_2_classLit = createForClass('java.lang', 'ArithmeticException', 342);
function IndexOutOfBoundsException(){
  RuntimeException.call(this);
}

function IndexOutOfBoundsException_0(message){
  RuntimeException_0.call(this, message);
}

defineClass(99, 51, $intern_8, IndexOutOfBoundsException, IndexOutOfBoundsException_0);
var Ljava_lang_IndexOutOfBoundsException_2_classLit = createForClass('java.lang', 'IndexOutOfBoundsException', 99);
function ArrayIndexOutOfBoundsException(){
  IndexOutOfBoundsException.call(this);
}

defineClass(507, 99, $intern_8, ArrayIndexOutOfBoundsException);
var Ljava_lang_ArrayIndexOutOfBoundsException_2_classLit = createForClass('java.lang', 'ArrayIndexOutOfBoundsException', 507);
function ArrayStoreException(){
  RuntimeException.call(this);
}

defineClass(341, 51, $intern_8, ArrayStoreException);
var Ljava_lang_ArrayStoreException_2_classLit = createForClass('java.lang', 'ArrayStoreException', 341);
function $clinit_Boolean(){
  $clinit_Boolean = emptyMethod;
  FALSE = false;
}

function $booleanValue(this$static){
  return checkCriticalNotNull(this$static) , this$static;
}

booleanCastMap = {3:1, 204:1, 11:1};
var FALSE;
var Ljava_lang_Boolean_2_classLit = createForClass('java.lang', 'Boolean', 204);
function codePointAt(cs, index_0, limit){
  var hiSurrogate, loSurrogate;
  hiSurrogate = $charAt_0(cs, index_0++);
  if (hiSurrogate >= 55296 && hiSurrogate <= 56319 && index_0 < limit && isLowSurrogate(loSurrogate = (checkCriticalStringElementIndex(index_0, cs.length) , cs.charCodeAt(index_0)))) {
    return $intern_34 + ((hiSurrogate & 1023) << 10) + (loSurrogate & 1023);
  }
  return hiSurrogate;
}

function digit_0(c){
  if (c >= 48 && c < 48 + $wnd.Math.min(10, 10)) {
    return c - 48;
  }
  if (c >= 97 && c < 97) {
    return c - 97 + 10;
  }
  if (c >= 65 && c < 65) {
    return c - 65 + 10;
  }
  return -1;
}

function isLowSurrogate(ch_0){
  return ch_0 >= 56320 && ch_0 <= 57343;
}

function toChars(codePoint, dst, dstIndex){
  checkCriticalArgument(codePoint >= 0 && codePoint <= 1114111);
  if (codePoint >= $intern_34) {
    dst[dstIndex++] = 55296 + (codePoint - $intern_34 >> 10 & 1023) & $intern_9;
    dst[dstIndex] = 56320 + (codePoint - $intern_34 & 1023) & $intern_9;
    return 2;
  }
   else {
    dst[dstIndex] = codePoint & $intern_9;
    return 1;
  }
}

function ClassCastException(){
  RuntimeException_0.call(this, null);
}

defineClass(329, 51, $intern_8, ClassCastException);
var Ljava_lang_ClassCastException_2_classLit = createForClass('java.lang', 'ClassCastException', 329);
function __parseAndValidateDouble(s){
  floatRegex == null && (floatRegex = new RegExp('^\\s*[+-]?(NaN|Infinity|((\\d+\\.?\\d*)|(\\.\\d+))([eE][+-]?\\d+)?[dDfF]?)\\s*$'));
  if (!floatRegex.test(s)) {
    throw toJs(new NumberFormatException('For input string: "' + s + '"'));
  }
  return parseFloat(s);
}

function __parseAndValidateInt(s){
  var i, isTooLow, length_0, startIndex, toReturn;
  if (s == null) {
    throw toJs(new NumberFormatException('null'));
  }
  length_0 = s.length;
  startIndex = length_0 > 0 && (checkCriticalStringElementIndex(0, s.length) , s.charCodeAt(0) == 45 || (checkCriticalStringElementIndex(0, s.length) , s.charCodeAt(0) == 43))?1:0;
  for (i = startIndex; i < length_0; i++) {
    if (digit_0((checkCriticalStringElementIndex(i, s.length) , s.charCodeAt(i))) == -1) {
      throw toJs(new NumberFormatException('For input string: "' + s + '"'));
    }
  }
  toReturn = parseInt(s, 10);
  isTooLow = toReturn < -2147483648;
  if (isNaN(toReturn)) {
    throw toJs(new NumberFormatException('For input string: "' + s + '"'));
  }
   else if (isTooLow || toReturn > $intern_0) {
    throw toJs(new NumberFormatException('For input string: "' + s + '"'));
  }
  return toReturn;
}

defineClass(205, 1, {3:1, 205:1});
var floatRegex;
var Ljava_lang_Number_2_classLit = createForClass('java.lang', 'Number', 205);
function $doubleValue(this$static){
  return checkCriticalNotNull(this$static) , this$static;
}

doubleCastMap = {3:1, 11:1, 205:1};
var Ljava_lang_Double_2_classLit = createForClass('java.lang', 'Double', 640);
function IllegalArgumentException(){
  RuntimeException.call(this);
}

function IllegalArgumentException_0(message){
  RuntimeException_0.call(this, message);
}

defineClass(42, 51, $intern_8, IllegalArgumentException, IllegalArgumentException_0);
var Ljava_lang_IllegalArgumentException_2_classLit = createForClass('java.lang', 'IllegalArgumentException', 42);
function IllegalStateException(){
  RuntimeException.call(this);
}

function IllegalStateException_0(s){
  RuntimeException_0.call(this, s);
}

defineClass(93, 51, $intern_8, IllegalStateException, IllegalStateException_0);
var Ljava_lang_IllegalStateException_2_classLit = createForClass('java.lang', 'IllegalStateException', 93);
function Integer(value_0){
  this.value_0 = value_0;
}

function Integer_0(s){
  this.value_0 = __parseAndValidateInt(s);
}

function highestOneBit(i){
  var rtn;
  if (i < 0) {
    return -2147483648;
  }
   else if (i == 0) {
    return 0;
  }
   else {
    for (rtn = 1073741824; (rtn & i) == 0; rtn >>= 1)
    ;
    return rtn;
  }
}

function numberOfLeadingZeros_0(i){
  var m, n, y_0;
  if (i < 0) {
    return 0;
  }
   else if (i == 0) {
    return 32;
  }
   else {
    y_0 = -(i >> 16);
    m = y_0 >> 16 & 16;
    n = 16 - m;
    i = i >> m;
    y_0 = i - 256;
    m = y_0 >> 16 & 8;
    n += m;
    i <<= m;
    y_0 = i - $intern_31;
    m = y_0 >> 16 & 4;
    n += m;
    i <<= m;
    y_0 = i - $intern_33;
    m = y_0 >> 16 & 2;
    n += m;
    i <<= m;
    y_0 = i >> 14;
    m = y_0 & ~(y_0 >> 1);
    return n + 2 - m;
  }
}

function numberOfTrailingZeros(i){
  var r, rtn;
  if (i == 0) {
    return 32;
  }
   else {
    rtn = 0;
    for (r = 1; (r & i) == 0; r <<= 1) {
      ++rtn;
    }
    return rtn;
  }
}

function signum(i){
  return i == 0?0:i < 0?-1:1;
}

function valueOf(i){
  var rebase, result;
  if (i > -129 && i < 128) {
    rebase = i + 128;
    result = ($clinit_Integer$BoxedValues() , boxedValues)[rebase];
    !result && (result = boxedValues[rebase] = new Integer(i));
    return result;
  }
  return new Integer(i);
}

defineClass(24, 205, {3:1, 11:1, 24:1, 205:1}, Integer, Integer_0);
_.equals_0 = function equals_7(o){
  return instanceOf(o, 24) && castTo(o, 24).value_0 == this.value_0;
}
;
_.hashCode_0 = function hashCode_8(){
  return this.value_0;
}
;
_.toString_0 = function toString_15(){
  return '' + this.value_0;
}
;
_.value_0 = 0;
var Ljava_lang_Integer_2_classLit = createForClass('java.lang', 'Integer', 24);
function $clinit_Integer$BoxedValues(){
  $clinit_Integer$BoxedValues = emptyMethod;
  boxedValues = initUnidimensionalArray(Ljava_lang_Integer_2_classLit, $intern_3, 24, 256, 0, 1);
}

var boxedValues;
defineClass(700, 1, {});
function NullPointerException(){
  RuntimeException.call(this);
}

function NullPointerException_0(message){
  RuntimeException_0.call(this, message);
}

defineClass(100, 206, $intern_8, NullPointerException, NullPointerException_0);
_.createError = function createError_0(msg){
  return new TypeError(msg);
}
;
var Ljava_lang_NullPointerException_2_classLit = createForClass('java.lang', 'NullPointerException', 100);
function NumberFormatException(message){
  IllegalArgumentException_0.call(this, message);
}

defineClass(104, 42, {3:1, 14:1, 104:1, 22:1}, NumberFormatException);
var Ljava_lang_NumberFormatException_2_classLit = createForClass('java.lang', 'NumberFormatException', 104);
function StackTraceElement(methodName, fileName, lineNumber){
  this.className_0 = 'Unknown';
  this.methodName = methodName;
  this.fileName = fileName;
  this.lineNumber = lineNumber;
}

defineClass(114, 1, {3:1, 114:1}, StackTraceElement);
_.equals_0 = function equals_8(other){
  var st;
  if (instanceOf(other, 114)) {
    st = castTo(other, 114);
    return this.lineNumber == st.lineNumber && this.methodName == st.methodName && this.className_0 == st.className_0 && this.fileName == st.fileName;
  }
  return false;
}
;
_.hashCode_0 = function hashCode_9(){
  return hashCode_16(stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_Object_2_classLit, 1), $intern_3, 1, 5, [valueOf(this.lineNumber), this.className_0, this.methodName, this.fileName]));
}
;
_.toString_0 = function toString_16(){
  return this.className_0 + '.' + this.methodName + '(' + (this.fileName != null?this.fileName:'Unknown Source') + (this.lineNumber >= 0?':' + this.lineNumber:'') + ')';
}
;
_.lineNumber = 0;
var Ljava_lang_StackTraceElement_2_classLit = createForClass('java.lang', 'StackTraceElement', 114);
function $charAt_0(this$static, index_0){
  checkCriticalStringElementIndex(index_0, this$static.length);
  return this$static.charCodeAt(index_0);
}

function $compareTo(this$static, other){
  var a, b;
  a = (checkCriticalNotNull(this$static) , this$static);
  b = (checkCriticalNotNull(other) , other);
  return a == b?0:a < b?-1:1;
}

function $concat(this$static, str){
  return checkCriticalNotNull(this$static) , this$static + (checkCriticalNotNull(str) , str);
}

function $endsWith(this$static, suffix){
  var suffixlength;
  suffixlength = suffix.length;
  return $equals_1(this$static.substr(this$static.length - suffixlength, suffixlength), suffix);
}

function $equals_1(this$static, other){
  return checkCriticalNotNull(this$static) , this$static === other;
}

function $equalsIgnoreCase(this$static, other){
  checkCriticalNotNull(this$static);
  if (other == null) {
    return false;
  }
  if ($equals_1(this$static, other)) {
    return true;
  }
  return this$static.length == other.length && $equals_1(this$static.toLowerCase(), other.toLowerCase());
}

function $indexOf_0(this$static, str){
  return this$static.indexOf(str);
}

function $indexOf_1(this$static, str, startIndex){
  return this$static.indexOf(str, startIndex);
}

function $lastIndexOf(this$static, str){
  return this$static.lastIndexOf(str);
}

function $lastIndexOf_0(this$static, str, start_0){
  return this$static.lastIndexOf(str, start_0);
}

function $replace_0(this$static, to){
  var hex, number, regex, replace;
  hex = (number = 32 >>> 0 , number.toString(16));
  regex = '\\u' + $substring('0000', hex.length) + hex;
  replace = String.fromCharCode(to);
  return this$static.replace(new RegExp(regex, 'g'), replace);
}

function $replace_1(this$static, from, to){
  var regex, replacement;
  regex = $replaceAll(from, '([/\\\\\\.\\*\\+\\?\\|\\(\\)\\[\\]\\{\\}$^])', '\\\\$1');
  replacement = $replaceAll($replaceAll(to, '\\\\', '\\\\\\\\'), '\\$', '\\\\$');
  return $replaceAll(this$static, regex, replacement);
}

function $replaceAll(this$static, regex, replace){
  replace = translateReplaceString(replace);
  return this$static.replace(new RegExp(regex, 'g'), replace);
}

function $replaceFirst(this$static, replace){
  var jsRegEx;
  replace = translateReplaceString(replace);
  jsRegEx = new RegExp('[A-Za-z0-9]+_0_0_0_0_');
  return this$static.replace(jsRegEx, replace);
}

function $split_0(this$static, regex){
  var compiled, count, lastNonEmpty, lastTrail, matchIndex, matchObj, out, trail;
  compiled = new RegExp(regex, 'g');
  out = initUnidimensionalArray(Ljava_lang_String_2_classLit, $intern_3, 2, 0, 6, 1);
  count = 0;
  trail = this$static;
  lastTrail = null;
  while (true) {
    matchObj = compiled.exec(trail);
    if (matchObj == null || trail == '') {
      out[count] = trail;
      break;
    }
     else {
      matchIndex = matchObj.index;
      out[count] = trail.substr(0, matchIndex);
      trail = $substring_0(trail, matchIndex + matchObj[0].length, trail.length);
      compiled.lastIndex = 0;
      if (lastTrail == trail) {
        out[count] = trail.substr(0, 1);
        trail = trail.substr(1);
      }
      lastTrail = trail;
      ++count;
    }
  }
  if (this$static.length > 0) {
    lastNonEmpty = out.length;
    while (lastNonEmpty > 0 && out[lastNonEmpty - 1] == '') {
      --lastNonEmpty;
    }
    lastNonEmpty < out.length && (out.length = lastNonEmpty);
  }
  return out;
}

function $startsWith(this$static, prefix){
  return $equals_1(this$static.substr(0, prefix.length), prefix);
}

function $startsWith_0(this$static, prefix, toffset){
  return toffset >= 0 && $equals_1(this$static.substr(toffset, prefix.length), prefix);
}

function $substring(this$static, beginIndex){
  return this$static.substr(beginIndex);
}

function $substring_0(this$static, beginIndex, endIndex){
  return this$static.substr(beginIndex, endIndex - beginIndex);
}

function $trim(this$static){
  var end, length_0, start_0;
  length_0 = this$static.length;
  start_0 = 0;
  while (start_0 < length_0 && (checkCriticalStringElementIndex(start_0, this$static.length) , this$static.charCodeAt(start_0) <= 32)) {
    ++start_0;
  }
  end = length_0;
  while (end > start_0 && (checkCriticalStringElementIndex(end - 1, this$static.length) , this$static.charCodeAt(end - 1) <= 32)) {
    --end;
  }
  return start_0 > 0 || end < length_0?this$static.substr(start_0, end - start_0):this$static;
}

function fromCharCode(array){
  return String.fromCharCode.apply(null, array);
}

function fromCodePoint(codePoint){
  var hiSurrogate, loSurrogate;
  if (codePoint >= $intern_34) {
    hiSurrogate = 55296 + (codePoint - $intern_34 >> 10 & 1023) & $intern_9;
    loSurrogate = 56320 + (codePoint - $intern_34 & 1023) & $intern_9;
    return String.fromCharCode(hiSurrogate) + ('' + String.fromCharCode(loSurrogate));
  }
   else {
    return String.fromCharCode(codePoint & $intern_9);
  }
}

function translateReplaceString(replaceStr){
  var pos;
  pos = 0;
  while (0 <= (pos = replaceStr.indexOf('\\', pos))) {
    checkCriticalStringElementIndex(pos + 1, replaceStr.length);
    replaceStr.charCodeAt(pos + 1) == 36?(replaceStr = replaceStr.substr(0, pos) + '$' + $substring(replaceStr, ++pos)):(replaceStr = replaceStr.substr(0, pos) + ('' + $substring(replaceStr, ++pos)));
  }
  return replaceStr;
}

function valueOf_0(x_0){
  return valueOf_1(x_0, x_0.length);
}

function valueOf_1(x_0, count){
  var batchEnd, batchStart, s;
  checkCriticalStringBounds(count, x_0.length);
  s = '';
  for (batchStart = 0; batchStart < count;) {
    batchEnd = $wnd.Math.min(batchStart + $intern_86, count);
    s += fromCharCode(x_0.slice(batchStart, batchEnd));
    batchStart = batchEnd;
  }
  return s;
}

stringCastMap = {3:1, 228:1, 11:1, 2:1};
var Ljava_lang_String_2_classLit = createForClass('java.lang', 'String', 2);
function StringBuffer(s){
  AbstractStringBuilder.call(this, (checkCriticalNotNull(s) , s));
}

defineClass(331, 177, {228:1}, StringBuffer);
var Ljava_lang_StringBuffer_2_classLit = createForClass('java.lang', 'StringBuffer', 331);
function $append_0(this$static, x_0){
  this$static.string += String.fromCharCode(x_0);
  return this$static;
}

function $append_1(this$static, x_0){
  this$static.string += '' + x_0;
  return this$static;
}

function $append_2(this$static, x_0){
  this$static.string += '' + x_0;
  return this$static;
}

function $delete(this$static, start_0, end){
  this$static.string = $substring_0(this$static.string, 0, start_0) + '' + $substring(this$static.string, end);
  return this$static;
}

function $insert_4(this$static, index_0, x_0){
  this$static.string = $substring_0(this$static.string, 0, index_0) + ('' + x_0) + $substring(this$static.string, index_0);
  return this$static;
}

function StringBuilder(){
  AbstractStringBuilder.call(this, '');
}

function StringBuilder_0(){
  AbstractStringBuilder.call(this, '');
}

function StringBuilder_1(s){
  AbstractStringBuilder.call(this, (checkCriticalNotNull(s) , s));
}

defineClass(98, 177, {228:1}, StringBuilder, StringBuilder_0, StringBuilder_1);
var Ljava_lang_StringBuilder_2_classLit = createForClass('java.lang', 'StringBuilder', 98);
function StringIndexOutOfBoundsException(message){
  IndexOutOfBoundsException_0.call(this, message);
}

defineClass(233, 99, $intern_8, StringIndexOutOfBoundsException);
var Ljava_lang_StringIndexOutOfBoundsException_2_classLit = createForClass('java.lang', 'StringIndexOutOfBoundsException', 233);
function $clinit_System(){
  $clinit_System = emptyMethod;
  err_0 = new PrintStream;
}

defineClass(704, 1, {});
var err_0;
function UnsupportedOperationException(){
  RuntimeException.call(this);
}

function UnsupportedOperationException_0(message){
  RuntimeException_0.call(this, message);
}

defineClass(138, 51, $intern_8, UnsupportedOperationException, UnsupportedOperationException_0);
var Ljava_lang_UnsupportedOperationException_2_classLit = createForClass('java.lang', 'UnsupportedOperationException', 138);
defineClass(132, 1, $intern_99);
_.equals_0 = function equals_9(o){
  var that;
  if (o === this) {
    return true;
  }
  if (!instanceOf(o, 132)) {
    return false;
  }
  that = castTo(o, 132);
  return $equals_1(this.name_0, that.name_0);
}
;
_.hashCode_0 = function hashCode_10(){
  return getHashCode_0(this.name_0);
}
;
_.toString_0 = function toString_17(){
  return this.name_0;
}
;
var Ljava_nio_charset_Charset_2_classLit = createForClass('java.nio.charset', 'Charset', 132);
function $advanceToFind(this$static, o, remove){
  var e, iter;
  for (iter = this$static.iterator(); iter.hasNext_0();) {
    e = iter.next_0();
    if (maskUndefined(o) === maskUndefined(e) || o != null && equals_Ljava_lang_Object__Z__devirtual$(o, e)) {
      remove && iter.remove_0();
      return true;
    }
  }
  return false;
}

function $containsAll(this$static, c){
  var e, e$iterator;
  checkCriticalNotNull(c);
  for (e$iterator = c.iterator(); e$iterator.hasNext_0();) {
    e = e$iterator.next_0();
    if (!this$static.contains_0(e)) {
      return false;
    }
  }
  return true;
}

function $toString_0(this$static){
  var e, e$iterator, joiner;
  joiner = new StringJoiner('[', ']');
  for (e$iterator = this$static.iterator(); e$iterator.hasNext_0();) {
    e = e$iterator.next_0();
    $add_10(joiner, e === this$static?'(this Collection)':e == null?'null':toString_7(e));
  }
  return !joiner.builder?joiner.emptyValue:joiner.suffix.length == 0?joiner.builder.string:joiner.builder.string + ('' + joiner.suffix);
}

defineClass(646, 1, {});
_.add_1 = function add_10(o){
  throw toJs(new UnsupportedOperationException_0('Add not supported on this collection'));
}
;
_.contains_0 = function contains(o){
  return $advanceToFind(this, o, false);
}
;
_.isEmpty = function isEmpty(){
  return this.size_1() == 0;
}
;
_.remove_1 = function remove_10(o){
  return $advanceToFind(this, o, true);
}
;
_.toString_0 = function toString_18(){
  return $toString_0(this);
}
;
var Ljava_util_AbstractCollection_2_classLit = createForClass('java.util', 'AbstractCollection', 646);
function $containsEntry(this$static, entry){
  var key, ourValue, value_0;
  key = entry.getKey();
  value_0 = entry.getValue();
  ourValue = instanceOfString(key)?$getStringValue(this$static, key):getEntryValueOrNull($getEntry(this$static.hashCodeMap, key));
  if (!(maskUndefined(value_0) === maskUndefined(ourValue) || value_0 != null && equals_Ljava_lang_Object__Z__devirtual$(value_0, ourValue))) {
    return false;
  }
  if (ourValue == null && !(instanceOfString(key)?$hasStringValue(this$static, key):!!$getEntry(this$static.hashCodeMap, key))) {
    return false;
  }
  return true;
}

function $toString_1(this$static, o){
  return o === this$static?'(this Map)':o == null?'null':toString_7(o);
}

function getEntryValueOrNull(entry){
  return !entry?null:entry.getValue();
}

defineClass(645, 1, {173:1});
_.equals_0 = function equals_10(obj){
  var entry, entry$iterator, otherMap;
  if (obj === this) {
    return true;
  }
  if (!instanceOf(obj, 56)) {
    return false;
  }
  otherMap = castTo(obj, 173);
  if (this.hashCodeMap.size_0 + this.stringMap.size_0 != otherMap.hashCodeMap.size_0 + otherMap.stringMap.size_0) {
    return false;
  }
  for (entry$iterator = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(otherMap)).this$01); entry$iterator.hasNext;) {
    entry = $next_1(entry$iterator);
    if (!$containsEntry(this, entry)) {
      return false;
    }
  }
  return true;
}
;
_.hashCode_0 = function hashCode_11(){
  return hashCode_17(new AbstractHashMap$EntrySet(this));
}
;
_.toString_0 = function toString_19(){
  var entry, entry$iterator, joiner;
  joiner = new StringJoiner('{', '}');
  for (entry$iterator = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(this)).this$01); entry$iterator.hasNext;) {
    entry = $next_1(entry$iterator);
    $add_10(joiner, $toString_1(this, entry.getKey()) + '=' + $toString_1(this, entry.getValue()));
  }
  return !joiner.builder?joiner.emptyValue:joiner.suffix.length == 0?joiner.builder.string:joiner.builder.string + ('' + joiner.suffix);
}
;
var Ljava_util_AbstractMap_2_classLit = createForClass('java.util', 'AbstractMap', 645);
function $containsKey(this$static, key){
  return instanceOfString(key)?$hasStringValue(this$static, key):!!$getEntry(this$static.hashCodeMap, key);
}

function $get_0(this$static, key){
  return instanceOfString(key)?$getStringValue(this$static, key):getEntryValueOrNull($getEntry(this$static.hashCodeMap, key));
}

function $getStringValue(this$static, key){
  return key == null?getEntryValueOrNull($getEntry(this$static.hashCodeMap, null)):$get_2(this$static.stringMap, key);
}

function $hasStringValue(this$static, key){
  return key == null?!!$getEntry(this$static.hashCodeMap, null):$contains_2(this$static.stringMap, key);
}

function $put(this$static, key, value_0){
  return instanceOfString(key)?$putStringValue(this$static, key, value_0):$put_0(this$static.hashCodeMap, key, value_0);
}

function $putStringValue(this$static, key, value_0){
  return key == null?$put_0(this$static.hashCodeMap, null, value_0):$put_1(this$static.stringMap, key, value_0);
}

function $remove_6(this$static, key){
  return instanceOfString(key)?key == null?$remove_12(this$static.hashCodeMap, null):$remove_13(this$static.stringMap, key):$remove_12(this$static.hashCodeMap, key);
}

function $reset_7(this$static){
  this$static.hashCodeMap = new InternalHashCodeMap(this$static);
  this$static.stringMap = new InternalStringMap(this$static);
  structureChanged(this$static);
}

function $size(this$static){
  return this$static.hashCodeMap.size_0 + this$static.stringMap.size_0;
}

defineClass(337, 645, {173:1});
var Ljava_util_AbstractHashMap_2_classLit = createForClass('java.util', 'AbstractHashMap', 337);
defineClass(647, 646, {199:1});
_.equals_0 = function equals_11(o){
  var other;
  if (o === this) {
    return true;
  }
  if (!instanceOf(o, 199)) {
    return false;
  }
  other = castTo(o, 199);
  if (other.size_1() != this.size_1()) {
    return false;
  }
  return $containsAll(this, other);
}
;
_.hashCode_0 = function hashCode_12(){
  return hashCode_17(this);
}
;
var Ljava_util_AbstractSet_2_classLit = createForClass('java.util', 'AbstractSet', 647);
function $contains_0(this$static, o){
  if (instanceOf(o, 112)) {
    return $containsEntry(this$static.this$01, castTo(o, 112));
  }
  return false;
}

function AbstractHashMap$EntrySet(this$0){
  this.this$01 = this$0;
}

defineClass(115, 647, {199:1}, AbstractHashMap$EntrySet);
_.contains_0 = function contains_0(o){
  return $contains_0(this, o);
}
;
_.iterator = function iterator_4(){
  return new AbstractHashMap$EntrySetIterator(this.this$01);
}
;
_.remove_1 = function remove_11(entry){
  var key;
  if ($contains_0(this, entry)) {
    key = castTo(entry, 112).getKey();
    $remove_6(this.this$01, key);
    return true;
  }
  return false;
}
;
_.size_1 = function size_1(){
  return $size(this.this$01);
}
;
var Ljava_util_AbstractHashMap$EntrySet_2_classLit = createForClass('java.util', 'AbstractHashMap/EntrySet', 115);
function $computeHasNext(this$static){
  if (this$static.current.hasNext_0()) {
    return true;
  }
  if (this$static.current != this$static.stringMapEntries) {
    return false;
  }
  this$static.current = new InternalHashCodeMap$1(this$static.this$01.hashCodeMap);
  return this$static.current.hasNext_0();
}

function $next_1(this$static){
  var rv;
  checkStructuralChange(this$static.this$01, this$static);
  checkCriticalElement(this$static.hasNext);
  this$static.last = this$static.current;
  rv = castTo(this$static.current.next_0(), 112);
  this$static.hasNext = $computeHasNext(this$static);
  return rv;
}

function $remove_7(this$static){
  checkCriticalState(!!this$static.last);
  checkStructuralChange(this$static.this$01, this$static);
  this$static.last.remove_0();
  this$static.last = null;
  this$static.hasNext = $computeHasNext(this$static);
  recordLastKnownStructure(this$static.this$01, this$static);
}

function AbstractHashMap$EntrySetIterator(this$0){
  this.this$01 = this$0;
  this.stringMapEntries = new InternalStringMap$1(this.this$01.stringMap);
  this.current = this.stringMapEntries;
  this.hasNext = $computeHasNext(this);
  this.$modCount = this$0.$modCount;
}

defineClass(116, 1, {}, AbstractHashMap$EntrySetIterator);
_.next_0 = function next_2(){
  return $next_1(this);
}
;
_.hasNext_0 = function hasNext_1(){
  return this.hasNext;
}
;
_.remove_0 = function remove_12(){
  $remove_7(this);
}
;
_.hasNext = false;
var Ljava_util_AbstractHashMap$EntrySetIterator_2_classLit = createForClass('java.util', 'AbstractHashMap/EntrySetIterator', 116);
function $equals_2(this$static, o){
  var elem, elem$iterator, elemOther, iterOther, other;
  if (o === this$static) {
    return true;
  }
  if (!instanceOf(o, 121)) {
    return false;
  }
  other = castTo(o, 121);
  if (this$static.size_1() != other.size_1()) {
    return false;
  }
  iterOther = other.iterator();
  for (elem$iterator = this$static.iterator(); elem$iterator.hasNext_0();) {
    elem = elem$iterator.next_0();
    elemOther = iterOther.next_0();
    if (!(maskUndefined(elem) === maskUndefined(elemOther) || elem != null && equals_Ljava_lang_Object__Z__devirtual$(elem, elemOther))) {
      return false;
    }
  }
  return true;
}

defineClass(649, 646, {121:1});
_.add_2 = function add_11(index_0, element){
  throw toJs(new UnsupportedOperationException_0('Add not supported on this list'));
}
;
_.add_1 = function add_12(obj){
  this.add_2(this.size_1(), obj);
  return true;
}
;
_.equals_0 = function equals_12(o){
  return $equals_2(this, o);
}
;
_.hashCode_0 = function hashCode_13(){
  return hashCode_18(this);
}
;
_.iterator = function iterator_5(){
  return new AbstractList$IteratorImpl(this);
}
;
_.listIterator = function listIterator(){
  return new AbstractList$ListIteratorImpl(this, 0);
}
;
_.listIterator_0 = function listIterator_0(from){
  return new AbstractList$ListIteratorImpl(this, from);
}
;
_.remove_2 = function remove_13(index_0){
  throw toJs(new UnsupportedOperationException_0('Remove not supported on this list'));
}
;
var Ljava_util_AbstractList_2_classLit = createForClass('java.util', 'AbstractList', 649);
function $remove_8(this$static){
  checkCriticalState(this$static.last != -1);
  this$static.this$01_0.remove_2(this$static.last);
  this$static.i = this$static.last;
  this$static.last = -1;
}

function AbstractList$IteratorImpl(this$0){
  this.this$01_0 = this$0;
}

defineClass(235, 1, {}, AbstractList$IteratorImpl);
_.hasNext_0 = function hasNext_2(){
  return this.i < this.this$01_0.size_1();
}
;
_.next_0 = function next_3(){
  checkCriticalElement(this.i < this.this$01_0.size_1());
  return this.this$01_0.get_0(this.last = this.i++);
}
;
_.remove_0 = function remove_14(){
  $remove_8(this);
}
;
_.i = 0;
_.last = -1;
var Ljava_util_AbstractList$IteratorImpl_2_classLit = createForClass('java.util', 'AbstractList/IteratorImpl', 235);
function AbstractList$ListIteratorImpl(this$0, start_0){
  this.this$01 = this$0;
  AbstractList$IteratorImpl.call(this, this$0);
  checkCriticalPositionIndex(start_0, this$0.size_1());
  this.i = start_0;
}

defineClass(236, 235, {}, AbstractList$ListIteratorImpl);
_.remove_0 = function remove_15(){
  $remove_8(this);
}
;
_.hasPrevious = function hasPrevious(){
  return this.i > 0;
}
;
_.previous = function previous_0(){
  return checkCriticalElement(this.i > 0) , this.this$01.get_0(this.last = --this.i);
}
;
var Ljava_util_AbstractList$ListIteratorImpl_2_classLit = createForClass('java.util', 'AbstractList/ListIteratorImpl', 236);
function AbstractMap$1(this$0){
  this.this$01 = this$0;
}

defineClass(340, 647, {199:1}, AbstractMap$1);
_.contains_0 = function contains_1(key){
  return $containsKey(this.this$01, key);
}
;
_.iterator = function iterator_6(){
  var outerIter;
  return outerIter = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet(this.this$01)).this$01) , new AbstractMap$1$1(outerIter);
}
;
_.remove_1 = function remove_16(key){
  if ($containsKey(this.this$01, key)) {
    $remove_6(this.this$01, key);
    return true;
  }
  return false;
}
;
_.size_1 = function size_2(){
  return $size(this.this$01);
}
;
var Ljava_util_AbstractMap$1_2_classLit = createForClass('java.util', 'AbstractMap/1', 340);
function AbstractMap$1$1(val$outerIter){
  this.val$outerIter2 = val$outerIter;
}

defineClass(234, 1, {}, AbstractMap$1$1);
_.hasNext_0 = function hasNext_3(){
  return this.val$outerIter2.hasNext;
}
;
_.next_0 = function next_4(){
  var entry;
  entry = $next_1(this.val$outerIter2);
  return entry.getKey();
}
;
_.remove_0 = function remove_17(){
  $remove_7(this.val$outerIter2);
}
;
var Ljava_util_AbstractMap$1$1_2_classLit = createForClass('java.util', 'AbstractMap/1/1', 234);
defineClass(338, 1, $intern_100);
_.equals_0 = function equals_13(other){
  var entry;
  if (!instanceOf(other, 112)) {
    return false;
  }
  entry = castTo(other, 112);
  return equals_16(this.key, entry.getKey()) && equals_16(this.value_0, entry.getValue());
}
;
_.getKey = function getKey(){
  return this.key;
}
;
_.getValue = function getValue(){
  return this.value_0;
}
;
_.hashCode_0 = function hashCode_14(){
  return hashCode_20(this.key) ^ hashCode_20(this.value_0);
}
;
_.setValue = function setValue(value_0){
  var oldValue;
  oldValue = this.value_0;
  this.value_0 = value_0;
  return oldValue;
}
;
_.toString_0 = function toString_20(){
  return this.key + '=' + this.value_0;
}
;
var Ljava_util_AbstractMap$AbstractEntry_2_classLit = createForClass('java.util', 'AbstractMap/AbstractEntry', 338);
function AbstractMap$SimpleEntry(key, value_0){
  this.key = key;
  this.value_0 = value_0;
}

defineClass(339, 338, $intern_100, AbstractMap$SimpleEntry);
var Ljava_util_AbstractMap$SimpleEntry_2_classLit = createForClass('java.util', 'AbstractMap/SimpleEntry', 339);
defineClass(653, 1, $intern_100);
_.equals_0 = function equals_14(other){
  var entry;
  if (!instanceOf(other, 112)) {
    return false;
  }
  entry = castTo(other, 112);
  return equals_16(this.val$entry2.value[0], entry.getKey()) && equals_16($getValue_0(this), entry.getValue());
}
;
_.hashCode_0 = function hashCode_15(){
  return hashCode_20(this.val$entry2.value[0]) ^ hashCode_20($getValue_0(this));
}
;
_.toString_0 = function toString_21(){
  return this.val$entry2.value[0] + '=' + $getValue_0(this);
}
;
var Ljava_util_AbstractMapEntry_2_classLit = createForClass('java.util', 'AbstractMapEntry', 653);
function $add_7(this$static, index_0, o){
  checkCriticalPositionIndex(index_0, this$static.array.length);
  insertTo(this$static.array, index_0, o);
}

function $add_8(this$static, o){
  this$static.array[this$static.array.length] = o;
  return true;
}

function $addAll(this$static, c){
  var cArray, len;
  cArray = $toArray(c.arrayList);
  len = cArray.length;
  if (len == 0) {
    return false;
  }
  insertTo_0(this$static.array, this$static.array.length, cArray);
  return true;
}

function $get_1(this$static, index_0){
  checkCriticalElementIndex(index_0, this$static.array.length);
  return this$static.array[index_0];
}

function $indexOf_2(this$static, o, index_0){
  for (; index_0 < this$static.array.length; ++index_0) {
    if (equals_16(o, this$static.array[index_0])) {
      return index_0;
    }
  }
  return -1;
}

function $remove_9(this$static, index_0){
  var previous;
  previous = (checkCriticalElementIndex(index_0, this$static.array.length) , this$static.array[index_0]);
  removeFrom(this$static.array, index_0);
  return previous;
}

function $remove_10(this$static, o){
  var i;
  i = $indexOf_2(this$static, o, 0);
  if (i == -1) {
    return false;
  }
  checkCriticalElementIndex(i, this$static.array.length);
  removeFrom(this$static.array, i);
  return true;
}

function $toArray(this$static){
  return clone(this$static.array, this$static.array.length);
}

function $toArray_0(this$static, out){
  var i, size_0;
  size_0 = this$static.array.length;
  out.length < size_0 && (out = stampJavaTypeInfo_1(new Array(size_0), out));
  for (i = 0; i < size_0; ++i) {
    setCheck(out, i, this$static.array[i]);
  }
  out.length > size_0 && setCheck(out, size_0, null);
  return out;
}

function ArrayList(){
  this.array = initUnidimensionalArray(Ljava_lang_Object_2_classLit, $intern_3, 1, 0, 5, 1);
}

defineClass(119, 649, $intern_101, ArrayList);
_.add_2 = function add_13(index_0, o){
  $add_7(this, index_0, o);
}
;
_.add_1 = function add_14(o){
  return $add_8(this, o);
}
;
_.contains_0 = function contains_2(o){
  return $indexOf_2(this, o, 0) != -1;
}
;
_.get_0 = function get_2(index_0){
  return $get_1(this, index_0);
}
;
_.isEmpty = function isEmpty_0(){
  return this.array.length == 0;
}
;
_.iterator = function iterator_7(){
  return new ArrayList$1(this);
}
;
_.remove_2 = function remove_18(index_0){
  return $remove_9(this, index_0);
}
;
_.remove_1 = function remove_19(o){
  return $remove_10(this, o);
}
;
_.size_1 = function size_3(){
  return this.array.length;
}
;
var Ljava_util_ArrayList_2_classLit = createForClass('java.util', 'ArrayList', 119);
function $next_2(this$static){
  checkCriticalElement(this$static.i < this$static.this$01.array.length);
  this$static.last = this$static.i++;
  return this$static.this$01.array[this$static.last];
}

function ArrayList$1(this$0){
  this.this$01 = this$0;
}

defineClass(126, 1, {}, ArrayList$1);
_.hasNext_0 = function hasNext_4(){
  return this.i < this.this$01.array.length;
}
;
_.next_0 = function next_5(){
  return $next_2(this);
}
;
_.remove_0 = function remove_20(){
  checkCriticalState(this.last != -1);
  $remove_9(this.this$01, this.i = this.last);
  this.last = -1;
}
;
_.i = 0;
_.last = -1;
var Ljava_util_ArrayList$1_2_classLit = createForClass('java.util', 'ArrayList/1', 126);
function hashCode_16(a){
  var e, e$index, e$max, hashCode;
  hashCode = 1;
  for (e$index = 0 , e$max = a.length; e$index < e$max; ++e$index) {
    e = a[e$index];
    hashCode = 31 * hashCode + (e != null?hashCode__I__devirtual$(e):0);
    hashCode = hashCode | 0;
  }
  return hashCode;
}

function $clinit_Collections(){
  $clinit_Collections = emptyMethod;
  EMPTY_LIST = new Collections$EmptyList;
}

function hashCode_17(collection){
  $clinit_Collections();
  var e, e$iterator, hashCode;
  hashCode = 0;
  for (e$iterator = collection.iterator(); e$iterator.hasNext_0();) {
    e = e$iterator.next_0();
    hashCode = hashCode + (e != null?hashCode__I__devirtual$(e):0);
    hashCode = hashCode | 0;
  }
  return hashCode;
}

function hashCode_18(list){
  $clinit_Collections();
  var e, e$iterator, hashCode;
  hashCode = 1;
  for (e$iterator = list.iterator(); e$iterator.hasNext_0();) {
    e = e$iterator.next_0();
    hashCode = 31 * hashCode + (e != null?hashCode__I__devirtual$(e):0);
    hashCode = hashCode | 0;
  }
  return hashCode;
}

var EMPTY_LIST;
function Collections$EmptyList(){
}

defineClass(349, 649, $intern_101, Collections$EmptyList);
_.contains_0 = function contains_3(object){
  return false;
}
;
_.get_0 = function get_3(location_0){
  checkCriticalElementIndex(location_0, 0);
  return null;
}
;
_.iterator = function iterator_8(){
  return $clinit_Collections() , $clinit_Collections$EmptyListIterator() , INSTANCE_2;
}
;
_.listIterator = function listIterator_1(){
  return $clinit_Collections() , $clinit_Collections$EmptyListIterator() , INSTANCE_2;
}
;
_.size_1 = function size_4(){
  return 0;
}
;
var Ljava_util_Collections$EmptyList_2_classLit = createForClass('java.util', 'Collections/EmptyList', 349);
function $clinit_Collections$EmptyListIterator(){
  $clinit_Collections$EmptyListIterator = emptyMethod;
  INSTANCE_2 = new Collections$EmptyListIterator;
}

function Collections$EmptyListIterator(){
}

defineClass(350, 1, {}, Collections$EmptyListIterator);
_.hasNext_0 = function hasNext_5(){
  return false;
}
;
_.hasPrevious = function hasPrevious_0(){
  return false;
}
;
_.next_0 = function next_6(){
  throw toJs(new NoSuchElementException);
}
;
_.previous = function previous_1(){
  throw toJs(new NoSuchElementException);
}
;
_.remove_0 = function remove_21(){
  throw toJs(new IllegalStateException);
}
;
var INSTANCE_2;
var Ljava_util_Collections$EmptyListIterator_2_classLit = createForClass('java.util', 'Collections/EmptyListIterator', 350);
function checkStructuralChange(host, iterator){
  if (iterator.$modCount != host.$modCount) {
    throw toJs(new ConcurrentModificationException);
  }
}

function recordLastKnownStructure(host, iterator){
  iterator.$modCount = host.$modCount;
}

function structureChanged(host){
  var modCount, modCountable;
  modCountable = host;
  modCount = modCountable.$modCount | 0;
  modCountable.$modCount = modCount + 1;
}

function ConcurrentModificationException(){
  RuntimeException.call(this);
}

defineClass(597, 51, $intern_8, ConcurrentModificationException);
var Ljava_util_ConcurrentModificationException_2_classLit = createForClass('java.util', 'ConcurrentModificationException', 597);
function Date_0(){
  this.jsdate = new $wnd.Date;
}

function Date_1(date){
  this.jsdate = new $wnd.Date(toDouble_0(date));
}

function padTwo(number){
  return number < 10?'0' + number:'' + number;
}

defineClass(129, 1, {3:1, 11:1, 129:1}, Date_0, Date_1);
_.equals_0 = function equals_15(obj){
  return instanceOf(obj, 129) && eq(fromDouble_0(this.jsdate.getTime()), fromDouble_0(castTo(obj, 129).jsdate.getTime()));
}
;
_.hashCode_0 = function hashCode_19(){
  var time;
  time = fromDouble_0(this.jsdate.getTime());
  return toInt(xor_0(time, createLongEmul(shru(isSmallLong0(time)?toBigLong(time):time, 32))));
}
;
_.toString_0 = function toString_22(){
  var hourOffset, minuteOffset, offset;
  offset = -this.jsdate.getTimezoneOffset();
  hourOffset = (offset >= 0?'+':'') + (offset / 60 | 0);
  minuteOffset = padTwo($wnd.Math.abs(offset) % 60);
  return ($clinit_Date$StringData() , DAYS)[this.jsdate.getDay()] + ' ' + MONTHS[this.jsdate.getMonth()] + ' ' + padTwo(this.jsdate.getDate()) + ' ' + padTwo(this.jsdate.getHours()) + ':' + padTwo(this.jsdate.getMinutes()) + ':' + padTwo(this.jsdate.getSeconds()) + ' GMT' + hourOffset + minuteOffset + ' ' + this.jsdate.getFullYear();
}
;
var Ljava_util_Date_2_classLit = createForClass('java.util', 'Date', 129);
function $clinit_Date$StringData(){
  $clinit_Date$StringData = emptyMethod;
  DAYS = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']);
  MONTHS = stampJavaTypeInfo(getClassLiteralForArray(Ljava_lang_String_2_classLit, 1), $intern_3, 2, 6, ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']);
}

var DAYS, MONTHS;
function $equals_3(value1, value2){
  return maskUndefined(value1) === maskUndefined(value2) || value1 != null && equals_Ljava_lang_Object__Z__devirtual$(value1, value2);
}

function HashMap(){
  $reset_7(this);
}

defineClass(56, 337, {3:1, 56:1, 173:1}, HashMap);
var Ljava_util_HashMap_2_classLit = createForClass('java.util', 'HashMap', 56);
function $add_9(this$static, o){
  var old;
  old = $put(this$static.map_0, o, this$static);
  return old == null;
}

function $contains_1(this$static, o){
  return $containsKey(this$static.map_0, o);
}

function $remove_11(this$static, o){
  return $remove_6(this$static.map_0, o) != null;
}

function HashSet(){
  this.map_0 = new HashMap;
}

defineClass(214, 647, {3:1, 199:1}, HashSet);
_.add_1 = function add_15(o){
  return $add_9(this, o);
}
;
_.contains_0 = function contains_4(o){
  return $contains_1(this, o);
}
;
_.isEmpty = function isEmpty_1(){
  return $size(this.map_0) == 0;
}
;
_.iterator = function iterator_9(){
  var outerIter;
  return outerIter = new AbstractHashMap$EntrySetIterator((new AbstractHashMap$EntrySet((new AbstractMap$1(this.map_0)).this$01)).this$01) , new AbstractMap$1$1(outerIter);
}
;
_.remove_1 = function remove_22(o){
  return $remove_11(this, o);
}
;
_.size_1 = function size_5(){
  return $size(this.map_0);
}
;
var Ljava_util_HashSet_2_classLit = createForClass('java.util', 'HashSet', 214);
function $findEntryInChain(key, chain){
  var entry, entry$index, entry$max;
  for (entry$index = 0 , entry$max = chain.length; entry$index < entry$max; ++entry$index) {
    entry = chain[entry$index];
    if ($equals_3(key, entry.getKey())) {
      return entry;
    }
  }
  return null;
}

function $getChainOrEmpty(this$static, hashCode){
  var chain;
  chain = this$static.backingMap.get(hashCode);
  return chain == null?new Array:chain;
}

function $getEntry(this$static, key){
  var hashCode;
  return $findEntryInChain(key, $getChainOrEmpty(this$static, key == null?0:(hashCode = hashCode__I__devirtual$(key) , hashCode | 0)));
}

function $put_0(this$static, key, value_0){
  var chain, chain0, entry, hashCode, hashCode0;
  hashCode0 = key == null?0:(hashCode = hashCode__I__devirtual$(key) , hashCode | 0);
  chain0 = (chain = this$static.backingMap.get(hashCode0) , chain == null?new Array:chain);
  if (chain0.length == 0) {
    this$static.backingMap.set(hashCode0, chain0);
  }
   else {
    entry = $findEntryInChain(key, chain0);
    if (entry) {
      return entry.setValue(value_0);
    }
  }
  setCheck(chain0, chain0.length, new AbstractMap$SimpleEntry(key, value_0));
  ++this$static.size_0;
  structureChanged(this$static.host);
  return null;
}

function $remove_12(this$static, key){
  var chain, chain0, entry, hashCode, hashCode0, i;
  hashCode0 = key == null?0:(hashCode = hashCode__I__devirtual$(key) , hashCode | 0);
  chain0 = (chain = this$static.backingMap.get(hashCode0) , chain == null?new Array:chain);
  for (i = 0; i < chain0.length; i++) {
    entry = chain0[i];
    if ($equals_3(key, entry.getKey())) {
      if (chain0.length == 1) {
        chain0.length = 0;
        $delete_0(this$static.backingMap, hashCode0);
      }
       else {
        chain0.splice(i, 1);
      }
      --this$static.size_0;
      structureChanged(this$static.host);
      return entry.getValue();
    }
  }
  return null;
}

function InternalHashCodeMap(host){
  this.backingMap = newJsMap();
  this.host = host;
}

defineClass(374, 1, {}, InternalHashCodeMap);
_.iterator = function iterator_10(){
  return new InternalHashCodeMap$1(this);
}
;
_.size_0 = 0;
var Ljava_util_InternalHashCodeMap_2_classLit = createForClass('java.util', 'InternalHashCodeMap', 374);
function InternalHashCodeMap$1(this$0){
  this.this$01 = this$0;
  this.chains = this.this$01.backingMap.entries();
  this.chain = new Array;
}

defineClass(237, 1, {}, InternalHashCodeMap$1);
_.next_0 = function next_7(){
  return this.lastEntry = this.chain[this.itemIndex++] , this.lastEntry;
}
;
_.hasNext_0 = function hasNext_6(){
  var current;
  if (this.itemIndex < this.chain.length) {
    return true;
  }
  current = this.chains.next();
  if (!current.done) {
    this.chain = current.value[1];
    this.itemIndex = 0;
    return true;
  }
  return false;
}
;
_.remove_0 = function remove_23(){
  $remove_12(this.this$01, this.lastEntry.getKey());
  this.itemIndex != 0 && --this.itemIndex;
}
;
_.itemIndex = 0;
_.lastEntry = null;
var Ljava_util_InternalHashCodeMap$1_2_classLit = createForClass('java.util', 'InternalHashCodeMap/1', 237);
function $delete_0(this$static, key){
  var fn;
  fn = this$static['delete'];
  fn.call(this$static, key);
}

function $delete_1(this$static, key){
  var fn;
  fn = this$static['delete'];
  fn.call(this$static, key);
}

function $clinit_InternalJsMapFactory(){
  $clinit_InternalJsMapFactory = emptyMethod;
  jsMapCtor = getJsMapConstructor();
}

function canHandleObjectCreateAndProto(){
  if (!Object.create || !Object.getOwnPropertyNames) {
    return false;
  }
  var protoField = '__proto__';
  var map_0 = Object.create(null);
  if (map_0[protoField] !== undefined) {
    return false;
  }
  var keys_0 = Object.getOwnPropertyNames(map_0);
  if (keys_0.length != 0) {
    return false;
  }
  map_0[protoField] = 42;
  if (map_0[protoField] !== 42) {
    return false;
  }
  if (Object.getOwnPropertyNames(map_0).length == 0) {
    return false;
  }
  return true;
}

function getJsMapConstructor(){
  function isCorrectIterationProtocol(){
    try {
      return (new Map).entries().next().done;
    }
     catch (e) {
      return false;
    }
  }

  if (typeof Map === 'function' && Map.prototype.entries && isCorrectIterationProtocol()) {
    return Map;
  }
   else {
    return getJsMapPolyFill();
  }
}

function getJsMapPolyFill(){
  function Stringmap(){
    this.obj = this.createObject();
  }

  ;
  Stringmap.prototype.createObject = function(key){
    return Object.create(null);
  }
  ;
  Stringmap.prototype.get = function(key){
    return this.obj[key];
  }
  ;
  Stringmap.prototype.set = function(key, value_0){
    this.obj[key] = value_0;
  }
  ;
  Stringmap.prototype['delete'] = function(key){
    delete this.obj[key];
  }
  ;
  Stringmap.prototype.keys = function(){
    return Object.getOwnPropertyNames(this.obj);
  }
  ;
  Stringmap.prototype.entries = function(){
    var keys_0 = this.keys();
    var map_0 = this;
    var nextIndex = 0;
    return {next:function(){
      if (nextIndex >= keys_0.length)
        return {done:true};
      var key = keys_0[nextIndex++];
      return {value:[key, map_0.get(key)], done:false};
    }
    };
  }
  ;
  if (!canHandleObjectCreateAndProto()) {
    Stringmap.prototype.createObject = function(){
      return {};
    }
    ;
    Stringmap.prototype.get = function(key){
      return this.obj[':' + key];
    }
    ;
    Stringmap.prototype.set = function(key, value_0){
      this.obj[':' + key] = value_0;
    }
    ;
    Stringmap.prototype['delete'] = function(key){
      delete this.obj[':' + key];
    }
    ;
    Stringmap.prototype.keys = function(){
      var result = [];
      for (var key in this.obj) {
        key.charCodeAt(0) == 58 && result.push(key.substring(1));
      }
      return result;
    }
    ;
  }
  return Stringmap;
}

function newJsMap(){
  $clinit_InternalJsMapFactory();
  return new jsMapCtor;
}

var jsMapCtor;
function $contains_2(this$static, key){
  return !(this$static.backingMap.get(key) === undefined);
}

function $get_2(this$static, key){
  return this$static.backingMap.get(key);
}

function $put_1(this$static, key, value_0){
  var oldValue;
  oldValue = this$static.backingMap.get(key);
  this$static.backingMap.set(key, value_0 === undefined?null:value_0);
  if (oldValue === undefined) {
    ++this$static.size_0;
    structureChanged(this$static.host);
  }
   else {
    ++this$static.valueMod;
  }
  return oldValue;
}

function $remove_13(this$static, key){
  var value_0;
  value_0 = this$static.backingMap.get(key);
  if (value_0 === undefined) {
    ++this$static.valueMod;
  }
   else {
    $delete_1(this$static.backingMap, key);
    --this$static.size_0;
    structureChanged(this$static.host);
  }
  return value_0;
}

function InternalStringMap(host){
  this.backingMap = newJsMap();
  this.host = host;
}

defineClass(375, 1, {}, InternalStringMap);
_.iterator = function iterator_11(){
  return new InternalStringMap$1(this);
}
;
_.size_0 = 0;
_.valueMod = 0;
var Ljava_util_InternalStringMap_2_classLit = createForClass('java.util', 'InternalStringMap', 375);
function InternalStringMap$1(this$0){
  this.this$01 = this$0;
  this.entries_0 = this.this$01.backingMap.entries();
  this.current = this.entries_0.next();
}

defineClass(238, 1, {}, InternalStringMap$1);
_.next_0 = function next_8(){
  return this.last = this.current , this.current = this.entries_0.next() , new InternalStringMap$2(this.this$01, this.last, this.this$01.valueMod);
}
;
_.hasNext_0 = function hasNext_7(){
  return !this.current.done;
}
;
_.remove_0 = function remove_24(){
  $remove_13(this.this$01, this.last.value[0]);
}
;
var Ljava_util_InternalStringMap$1_2_classLit = createForClass('java.util', 'InternalStringMap/1', 238);
function $getValue_0(this$static){
  if (this$static.this$01.valueMod != this$static.val$lastValueMod3) {
    return $get_2(this$static.this$01, this$static.val$entry2.value[0]);
  }
  return this$static.val$entry2.value[1];
}

function InternalStringMap$2(this$0, val$entry, val$lastValueMod){
  this.this$01 = this$0;
  this.val$entry2 = val$entry;
  this.val$lastValueMod3 = val$lastValueMod;
}

defineClass(376, 653, $intern_100, InternalStringMap$2);
_.getKey = function getKey_0(){
  return this.val$entry2.value[0];
}
;
_.getValue = function getValue_0(){
  return $getValue_0(this);
}
;
_.setValue = function setValue_0(object){
  return $put_1(this.this$01, this.val$entry2.value[0], object);
}
;
_.val$lastValueMod3 = 0;
var Ljava_util_InternalStringMap$2_2_classLit = createForClass('java.util', 'InternalStringMap/2', 376);
function NoSuchElementException(){
  RuntimeException.call(this);
}

defineClass(133, 51, $intern_8, NoSuchElementException);
var Ljava_util_NoSuchElementException_2_classLit = createForClass('java.util', 'NoSuchElementException', 133);
function equals_16(a, b){
  return maskUndefined(a) === maskUndefined(b) || a != null && equals_Ljava_lang_Object__Z__devirtual$(a, b);
}

function hashCode_20(o){
  return o != null?hashCode__I__devirtual$(o):0;
}

function $clinit_Random(){
  $clinit_Random = emptyMethod;
  var i, i0, twoToTheXMinus24Tmp, twoToTheXMinus48Tmp;
  twoToTheXMinus24 = initUnidimensionalArray(D_classLit, $intern_57, 9, 25, 15, 1);
  twoToTheXMinus48 = initUnidimensionalArray(D_classLit, $intern_57, 9, 33, 15, 1);
  twoToTheXMinus48Tmp = 1.52587890625E-5;
  for (i0 = 32; i0 >= 0; i0--) {
    twoToTheXMinus48[i0] = twoToTheXMinus48Tmp;
    twoToTheXMinus48Tmp *= 0.5;
  }
  twoToTheXMinus24Tmp = 1;
  for (i = 24; i >= 0; i--) {
    twoToTheXMinus24[i] = twoToTheXMinus24Tmp;
    twoToTheXMinus24Tmp *= 0.5;
  }
}

function $nextDouble(this$static){
  return $nextInternal(this$static, 26) * 1.4901161193847656E-8 + $nextInternal(this$static, 27) * 1.1102230246251565E-16;
}

function $nextInternal(this$static, bits){
  var carry, dval, h, hi, l_0, lo;
  hi = this$static.seedhi * $intern_102 + this$static.seedlo * 1502;
  lo = this$static.seedlo * $intern_102 + 11;
  carry = $wnd.Math.floor(lo * $intern_103);
  hi += carry;
  lo -= carry * $intern_37;
  hi %= $intern_37;
  this$static.seedhi = hi;
  this$static.seedlo = lo;
  if (bits <= 24) {
    return $wnd.Math.floor(this$static.seedhi * twoToTheXMinus24[bits]);
  }
   else {
    h = this$static.seedhi * (1 << bits - 24);
    l_0 = $wnd.Math.floor(this$static.seedlo * twoToTheXMinus48[bits]);
    dval = h + l_0;
    dval >= 2147483648 && (dval -= 4294967296);
    return dval;
  }
}

function Random(){
  $clinit_Random();
  var hi, lo, seed;
  seed = uniqueSeed++ + Date.now();
  hi = round_int($wnd.Math.floor(seed * $intern_103)) & 16777215;
  lo = round_int(seed - hi * $intern_37);
  this.seedhi = hi ^ 1502;
  this.seedlo = lo ^ $intern_102;
}

defineClass(463, 1, {}, Random);
_.seedhi = 0;
_.seedlo = 0;
var twoToTheXMinus24, twoToTheXMinus48, uniqueSeed = 0;
var Ljava_util_Random_2_classLit = createForClass('java.util', 'Random', 463);
function $add_10(this$static, newElement){
  !this$static.builder?(this$static.builder = new StringBuilder_1(this$static.prefix)):$append_2(this$static.builder, this$static.delimiter);
  $append_1(this$static.builder, newElement);
  return this$static;
}

function StringJoiner(prefix, suffix){
  this.delimiter = ', ';
  this.prefix = prefix;
  this.suffix = suffix;
  this.emptyValue = this.prefix + ('' + this.suffix);
}

defineClass(230, 1, {}, StringJoiner);
_.toString_0 = function toString_23(){
  return !this.builder?this.emptyValue:this.suffix.length == 0?this.builder.string:this.builder.string + ('' + this.suffix);
}
;
var Ljava_util_StringJoiner_2_classLit = createForClass('java.util', 'StringJoiner', 230);
function $add_11(this$static, o){
  return $add_8(this$static.arrayList, o);
}

function $addAll_0(this$static, c){
  return $addAll(this$static.arrayList, c);
}

function $addElement(this$static, o){
  $add_8(this$static.arrayList, o);
}

function $elementAt(this$static, index_0){
  return checkArrayElementIndex(index_0, this$static.arrayList.array.length) , $get_1(this$static.arrayList, index_0);
}

function $firstElement(this$static){
  checkCriticalElement(this$static.arrayList.array.length != 0);
  return checkArrayElementIndex(0, this$static.arrayList.array.length) , $get_1(this$static.arrayList, 0);
}

function $get_3(this$static, index_0){
  checkArrayElementIndex(index_0, this$static.arrayList.array.length);
  return $get_1(this$static.arrayList, index_0);
}

function $lastElement(this$static){
  checkCriticalElement(this$static.arrayList.array.length != 0);
  return $get_3(this$static, this$static.arrayList.array.length - 1);
}

function $remove_14(this$static, index_0){
  checkArrayElementIndex(index_0, this$static.arrayList.array.length);
  return $remove_9(this$static.arrayList, index_0);
}

function $removeElementAt(this$static, index_0){
  checkArrayElementIndex(index_0, this$static.arrayList.array.length);
  $remove_9(this$static.arrayList, index_0);
}

function Vector(){
  this.arrayList = new ArrayList;
}

function checkArrayElementIndex(index_0, size_0){
  if (index_0 < 0 || index_0 >= size_0) {
    throw toJs(new ArrayIndexOutOfBoundsException);
  }
}

defineClass(34, 649, $intern_101, Vector);
_.add_2 = function add_16(index_0, o){
  checkArrayElementIndex(index_0, this.arrayList.array.length + 1);
  $add_7(this.arrayList, index_0, o);
}
;
_.add_1 = function add_17(o){
  return $add_11(this, o);
}
;
_.contains_0 = function contains_5(elem){
  return $indexOf_2(this.arrayList, elem, 0) != -1;
}
;
_.get_0 = function get_4(index_0){
  return $get_3(this, index_0);
}
;
_.isEmpty = function isEmpty_2(){
  return this.arrayList.array.length == 0;
}
;
_.iterator = function iterator_12(){
  return new ArrayList$1(this.arrayList);
}
;
_.remove_2 = function remove_25(index_0){
  return $remove_14(this, index_0);
}
;
_.size_1 = function size_6(){
  return this.arrayList.array.length;
}
;
_.toString_0 = function toString_24(){
  return $toString_0(this.arrayList);
}
;
var Ljava_util_Vector_2_classLit = createForClass('java.util', 'Vector', 34);
function clone(array, toIndex){
  var result;
  result = array.slice(0, toIndex);
  return stampJavaTypeInfo_0(result, array);
}

function copy_0(src_0, srcOfs, dest, destOfs, len){
  var batchEnd, batchStart, destArray, end, spliceArgs;
  if (src_0 === dest) {
    src_0 = src_0.slice(srcOfs, srcOfs + len);
    srcOfs = 0;
  }
  destArray = dest;
  for (batchStart = srcOfs , end = srcOfs + len; batchStart < end;) {
    batchEnd = $wnd.Math.min(batchStart + $intern_86, end);
    len = batchEnd - batchStart;
    spliceArgs = src_0.slice(batchStart, batchEnd);
    spliceArgs.splice(0, 0, destOfs, 0);
    Array.prototype.splice.apply(destArray, spliceArgs);
    batchStart = batchEnd;
    destOfs += len;
  }
}

function insertTo(array, index_0, value_0){
  array.splice(index_0, 0, value_0);
}

function insertTo_0(array, index_0, values){
  copy_0(values, 0, array, index_0, values.length);
}

function removeFrom(array, index_0){
  array.splice(index_0, 1);
}

defineClass(702, 1, {});
function stampJavaTypeInfo_1(array, referenceType){
  return stampJavaTypeInfo_0(array, referenceType);
}

function $clinit_EmulatedCharset(){
  $clinit_EmulatedCharset = emptyMethod;
  new EmulatedCharset$UtfCharset;
  new EmulatedCharset$LatinCharset('ISO-LATIN-1');
  new EmulatedCharset$LatinCharset('ISO-8859-1');
}

function EmulatedCharset(name_0){
  this.name_0 = name_0;
}

defineClass(231, 132, $intern_99);
var Ljavaemul_internal_EmulatedCharset_2_classLit = createForClass('javaemul.internal', 'EmulatedCharset', 231);
function EmulatedCharset$LatinCharset(name_0){
  EmulatedCharset.call(this, name_0);
}

defineClass(232, 231, $intern_99, EmulatedCharset$LatinCharset);
var Ljavaemul_internal_EmulatedCharset$LatinCharset_2_classLit = createForClass('javaemul.internal', 'EmulatedCharset/LatinCharset', 232);
function $decodeString(bytes, ofs, len){
  var b, ch_0, charCount, chars, count, i, i0, number, outIdx;
  charCount = 0;
  for (i0 = 0; i0 < len;) {
    ++charCount;
    ch_0 = bytes[ofs + i0];
    if ((ch_0 & 192) == 128) {
      throw toJs(new IllegalArgumentException_0('Invalid UTF8 sequence'));
    }
     else if ((ch_0 & 128) == 0) {
      ++i0;
    }
     else if ((ch_0 & 224) == 192) {
      i0 += 2;
    }
     else if ((ch_0 & 240) == 224) {
      i0 += 3;
    }
     else if ((ch_0 & 248) == 240) {
      i0 += 4;
    }
     else {
      throw toJs(new IllegalArgumentException_0('Invalid UTF8 sequence'));
    }
    if (i0 > len) {
      throw toJs(new IndexOutOfBoundsException_0('Invalid UTF8 sequence'));
    }
  }
  chars = initUnidimensionalArray(C_classLit, $intern_19, 9, charCount, 15, 1);
  outIdx = 0;
  count = 0;
  for (i = 0; i < len;) {
    ch_0 = bytes[ofs + i++];
    if ((ch_0 & 128) == 0) {
      count = 1;
      ch_0 &= 127;
    }
     else if ((ch_0 & 224) == 192) {
      count = 2;
      ch_0 &= 31;
    }
     else if ((ch_0 & 240) == 224) {
      count = 3;
      ch_0 &= 15;
    }
     else if ((ch_0 & 248) == 240) {
      count = 4;
      ch_0 &= 7;
    }
     else if ((ch_0 & 252) == 248) {
      count = 5;
      ch_0 &= 3;
    }
    while (--count > 0) {
      b = bytes[ofs + i++];
      if ((b & 192) != 128) {
        throw toJs(new IllegalArgumentException_0('Invalid UTF8 sequence at ' + (ofs + i - 1) + ', byte=' + (number = b >>> 0 , number.toString(16))));
      }
      ch_0 = ch_0 << 6 | b & 63;
    }
    outIdx += toChars(ch_0, chars, outIdx);
  }
  return chars;
}

function $encodeUtf8(bytes, ofs, codePoint){
  if (codePoint < 128) {
    bytes[ofs] = (codePoint & 127) << 24 >> 24;
    return 1;
  }
   else if (codePoint < $intern_32) {
    bytes[ofs++] = (codePoint >> 6 & 31 | 192) << 24 >> 24;
    bytes[ofs] = (codePoint & 63 | 128) << 24 >> 24;
    return 2;
  }
   else if (codePoint < $intern_34) {
    bytes[ofs++] = (codePoint >> 12 & 15 | 224) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 6 & 63 | 128) << 24 >> 24;
    bytes[ofs] = (codePoint & 63 | 128) << 24 >> 24;
    return 3;
  }
   else if (codePoint < $intern_36) {
    bytes[ofs++] = (codePoint >> 18 & 7 | 240) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 12 & 63 | 128) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 6 & 63 | 128) << 24 >> 24;
    bytes[ofs] = (codePoint & 63 | 128) << 24 >> 24;
    return 4;
  }
   else if (codePoint < $intern_39) {
    bytes[ofs++] = (codePoint >> 24 & 3 | 248) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 18 & 63 | 128) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 12 & 63 | 128) << 24 >> 24;
    bytes[ofs++] = (codePoint >> 6 & 63 | 128) << 24 >> 24;
    bytes[ofs] = (codePoint & 63 | 128) << 24 >> 24;
    return 5;
  }
  throw toJs(new IllegalArgumentException_0('Character out of range: ' + codePoint));
}

function $getBytes(str){
  var byteCount, bytes, ch_0, i, i0, n, out;
  n = str.length;
  byteCount = 0;
  for (i0 = 0; i0 < n;) {
    ch_0 = codePointAt(str, i0, str.length);
    i0 += ch_0 >= $intern_34?2:1;
    ch_0 < 128?++byteCount:ch_0 < $intern_32?(byteCount += 2):ch_0 < $intern_34?(byteCount += 3):ch_0 < $intern_36?(byteCount += 4):ch_0 < $intern_39 && (byteCount += 5);
  }
  bytes = initUnidimensionalArray(B_classLit, $intern_19, 9, byteCount, 15, 1);
  out = 0;
  for (i = 0; i < n;) {
    ch_0 = codePointAt(str, i, str.length);
    i += ch_0 >= $intern_34?2:1;
    out += $encodeUtf8(bytes, out, ch_0);
  }
  return bytes;
}

function EmulatedCharset$UtfCharset(){
  EmulatedCharset.call(this, 'UTF-8');
}

defineClass(335, 231, $intern_99, EmulatedCharset$UtfCharset);
var Ljavaemul_internal_EmulatedCharset$UtfCharset_2_classLit = createForClass('javaemul.internal', 'EmulatedCharset/UtfCharset', 335);
function checkCriticalArgument(expression){
  if (!expression) {
    throw toJs(new IllegalArgumentException);
  }
}

function checkCriticalArgument_0(expression, errorMessage){
  if (!expression) {
    throw toJs(new IllegalArgumentException_0(errorMessage));
  }
}

function checkCriticalArrayType(expression){
  if (!expression) {
    throw toJs(new ArrayStoreException);
  }
}

function checkCriticalElement(expression){
  if (!expression) {
    throw toJs(new NoSuchElementException);
  }
}

function checkCriticalElementIndex(index_0, size_0){
  if (index_0 < 0 || index_0 >= size_0) {
    throw toJs(new IndexOutOfBoundsException_0('Index: ' + index_0 + ', Size: ' + size_0));
  }
}

function checkCriticalNotNull(reference){
  if (reference == null) {
    throw toJs(new NullPointerException);
  }
  return reference;
}

function checkCriticalNotNull_0(reference){
  if (!reference) {
    throw toJs(new NullPointerException_0('Cannot suppress a null exception.'));
  }
}

function checkCriticalPositionIndex(index_0, size_0){
  if (index_0 < 0 || index_0 > size_0) {
    throw toJs(new IndexOutOfBoundsException_0('Index: ' + index_0 + ', Size: ' + size_0));
  }
}

function checkCriticalState(expression){
  if (!expression) {
    throw toJs(new IllegalStateException);
  }
}

function checkCriticalState_0(expression){
  if (!expression) {
    throw toJs(new IllegalStateException_0("Can't overwrite cause"));
  }
}

function checkCriticalStringBounds(end, length_0){
  if (end > length_0 || end < 0) {
    throw toJs(new StringIndexOutOfBoundsException('fromIndex: 0, toIndex: ' + end + ', length: ' + length_0));
  }
}

function checkCriticalStringElementIndex(index_0, size_0){
  if (index_0 < 0 || index_0 >= size_0) {
    throw toJs(new StringIndexOutOfBoundsException('Index: ' + index_0 + ', Size: ' + size_0));
  }
}

function checkCriticalType(expression){
  if (!expression) {
    throw toJs(new ClassCastException);
  }
}

function setPropertySafe(map_0, key, value_0){
  try {
    map_0[key] = value_0;
  }
   catch (ignored) {
  }
}

defineClass(699, 1, {});
function getHashCode(o){
  return o.$H || (o.$H = ++nextHashId);
}

var nextHashId = 0;
function $clinit_StringHashCache(){
  $clinit_StringHashCache = emptyMethod;
  back_0 = new Object_0;
  front = new Object_0;
}

function compute(str){
  var hashCode, i, n, nBatch;
  hashCode = 0;
  n = str.length;
  nBatch = n - 4;
  i = 0;
  while (i < nBatch) {
    hashCode = (checkCriticalStringElementIndex(i + 3, str.length) , str.charCodeAt(i + 3) + (checkCriticalStringElementIndex(i + 2, str.length) , 31 * (str.charCodeAt(i + 2) + (checkCriticalStringElementIndex(i + 1, str.length) , 31 * (str.charCodeAt(i + 1) + (checkCriticalStringElementIndex(i, str.length) , 31 * (str.charCodeAt(i) + 31 * hashCode)))))));
    hashCode = hashCode | 0;
    i += 4;
  }
  while (i < n) {
    hashCode = hashCode * 31 + $charAt_0(str, i++);
  }
  hashCode = hashCode | 0;
  return hashCode;
}

function getHashCode_0(str){
  $clinit_StringHashCache();
  var hashCode, key, result;
  key = ':' + str;
  result = front[key];
  if (result != null) {
    return round_int((checkCriticalNotNull(result) , result));
  }
  result = back_0[key];
  hashCode = result == null?compute(str):round_int((checkCriticalNotNull(result) , result));
  increment();
  front[key] = hashCode;
  return hashCode;
}

function increment(){
  if (count_0 == 256) {
    back_0 = front;
    front = new Object_0;
    count_0 = 0;
  }
  ++count_0;
}

var back_0, count_0 = 0, front;
var C_classLit = createForPrimitive('char', 'C');
var I_classLit = createForPrimitive('int', 'I');
var Z_classLit = createForPrimitive('boolean', 'Z');
var B_classLit = createForPrimitive('byte', 'B');
var D_classLit = createForPrimitive('double', 'D');
var $entry = ($clinit_Impl() , entry_0);
var gwtOnLoad = gwtOnLoad = gwtOnLoad_0;
addInitFunctions(init);
setGwtProperty('permProps', [[['locale', 'default'], ['user.agent', 'ie9']]]);
$sendStats('moduleStartup', 'moduleEvalEnd');
gwtOnLoad(__gwtModuleFunction.__errFn, __gwtModuleFunction.__moduleName, __gwtModuleFunction.__moduleBase, __gwtModuleFunction.__softPermutationId,__gwtModuleFunction.__computePropValue);
$sendStats('moduleStartup', 'end');
$gwt && $gwt.permProps && __gwtModuleFunction.__moduleStartupDone($gwt.permProps);
//# sourceURL=circuitjs1-0.js

